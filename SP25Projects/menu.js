function _0x3391(){const _0x4ae079=['getElementById','submit','name','loadShader','store','358287GoHGqo','DONE','getContext','requestAdapter','block','_bindGroupLayout','_device','getCurrentTexture','devicePixelRatio','href','style','6770aCxGnO','_objectCnt','3639429pcIhpI','webgpu','./shaders/optimized_particles.wgsl','resize','init','addEventListener','bind','createGeometry','_objects','no-cache,\x20no-store,\x20max-age=0','renderToSelectedView','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','draw','status','width','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','end','renderCanvas','_clearColor','4214721bdBcGe','createShaders','configure','innerWidth','storage','clear','getBindGroupLayout','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','height','computeMain','createCommandEncoder','constructor','_numParticles','createComputePipeline','createBuffer','COMPUTE','_pipelineLayout','onerror','random','Particles\x20Pipeline\x20Layout','setRequestHeader','_canvas','ceil','_shaderModule','transformOrigin','compute','beginComputePass','Couldn\x27t\x20request\x20WebGPU\x20adapter.','resetParticles','GET','updateGeometry','closeInstructionsButton','push','finish','clientY','COPY_DST','9677175DeRKRy','createView','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','createRenderPipeline','mousemove','instructionOverlay','beginRenderPass','createParticlePipeline','COPY_SRC','_step','writeBuffer','responseText','getPreferredCanvasFormat','statusText','11179320OxElpV','send','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','click','onload','location','resizeCanvas','appendSceneObject','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','createShaderModule','innerHeight','_particleStride','_context','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_particles','read-only-storage','queue','gpu','byteLength','createBindGroupLayout','395GoqmiH','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','_particlePipeline','_particleBuffers','createBindGroup','STORAGE','setBindGroup','44RJYbBP','requestDevice','8YTEzgk','39450uBDvew','VERTEX','startGameButton','_canvasFormat','render','vertexMain','Cache-Control','_computePipeline','_bindGroups','getName','clientX','createParticleGeometry'];_0x3391=function(){return _0x4ae079;};return _0x3391();}const _0x3c8aec=_0x8785;(function(_0x240c84,_0x4a89da){const _0x1c82a1=_0x8785,_0x58f5b2=_0x240c84();while(!![]){try{const _0x49e47b=-parseInt(_0x1c82a1(0x15d))/0x1*(parseInt(_0x1c82a1(0x102))/0x2)+-parseInt(_0x1c82a1(0x178))/0x3*(-parseInt(_0x1c82a1(0x164))/0x4)+parseInt(_0x1c82a1(0x13b))/0x5+-parseInt(_0x1c82a1(0x167))/0x6+parseInt(_0x1c82a1(0x117))/0x7+-parseInt(_0x1c82a1(0x166))/0x8*(parseInt(_0x1c82a1(0x104))/0x9)+-parseInt(_0x1c82a1(0x149))/0xa;if(_0x49e47b===_0x4a89da)break;else _0x58f5b2['push'](_0x58f5b2['shift']());}catch(_0x242715){_0x58f5b2['push'](_0x58f5b2['shift']());}}}(_0x3391,0xf08ce));class Renderer{constructor(_0x55b653){const _0x4ee893=_0x8785;this[_0x4ee893(0x12c)]=_0x55b653,this['_objects']=[],this[_0x4ee893(0x116)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async['init'](){const _0x2148ea=_0x8785;if(!navigator[_0x2148ea(0x15a)])throw Error(_0x2148ea(0x14b));const _0x3c8a7e=await navigator['gpu'][_0x2148ea(0x17b)]();if(!_0x3c8a7e)throw Error(_0x2148ea(0x132));this[_0x2148ea(0x17e)]=await _0x3c8a7e[_0x2148ea(0x165)](),this[_0x2148ea(0x155)]=this['_canvas'][_0x2148ea(0x17a)](_0x2148ea(0x105)),this['_canvasFormat']=navigator[_0x2148ea(0x15a)][_0x2148ea(0x147)](),this[_0x2148ea(0x155)][_0x2148ea(0x119)]({'device':this['_device'],'format':this[_0x2148ea(0x16a)]}),this[_0x2148ea(0x14f)](),window[_0x2148ea(0x109)](_0x2148ea(0x107),this[_0x2148ea(0x14f)][_0x2148ea(0x10a)](this));}['resizeCanvas'](){const _0x23972c=_0x8785,_0x34154e=window[_0x23972c(0x180)]||0x1,_0x5347a8=window[_0x23972c(0x11a)]*_0x34154e,_0x436a8d=window[_0x23972c(0x153)]*_0x34154e;this['_canvas'][_0x23972c(0x112)]=_0x5347a8,this[_0x23972c(0x12c)]['height']=_0x436a8d,this['_canvas']['style']['width']=window['innerWidth']+'px',this[_0x23972c(0x12c)][_0x23972c(0x101)][_0x23972c(0x11f)]=window['innerHeight']+'px',this[_0x23972c(0x12c)][_0x23972c(0x101)][_0x23972c(0x12f)]='center',this[_0x23972c(0x16b)]();}async[_0x3c8aec(0x150)](_0x49580e){const _0xac58b2=_0x3c8aec;await _0x49580e['init'](),this['_objects'][_0xac58b2(0x137)](_0x49580e);}[_0x3c8aec(0x10e)](_0x18cf80){const _0xf2c860=_0x3c8aec;for(const _0x332a1f of this['_objects']){_0x332a1f?.[_0xf2c860(0x135)]();}let _0xf20272=this[_0xf2c860(0x17e)][_0xf2c860(0x121)]();const _0xd3c56=_0xf20272[_0xf2c860(0x141)]({'colorAttachments':[{'view':_0x18cf80,'clearValue':this['_clearColor'],'loadOp':_0xf2c860(0x11c),'storeOp':_0xf2c860(0x177)}]});for(const _0x179a0b of this[_0xf2c860(0x10c)]){_0x179a0b?.[_0xf2c860(0x16b)](_0xd3c56);}_0xd3c56[_0xf2c860(0x114)]();const _0x39cdf0=_0xf20272[_0xf2c860(0x131)]();for(const _0x1672c1 of this[_0xf2c860(0x10c)]){_0x1672c1?.[_0xf2c860(0x130)](_0x39cdf0);}_0x39cdf0['end']();const _0x40ba29=_0xf20272[_0xf2c860(0x138)]();this[_0xf2c860(0x17e)][_0xf2c860(0x159)]['submit']([_0x40ba29]);}[_0x3c8aec(0x16b)](){const _0x3108f7=_0x3c8aec;this[_0x3108f7(0x10e)](this['_context'][_0x3108f7(0x17f)]()[_0x3108f7(0x13c)]());}}function _0x8785(_0x2d019e,_0x6cc302){const _0x339105=_0x3391();return _0x8785=function(_0x87857c,_0x4c698b){_0x87857c=_0x87857c-0x100;let _0x2cd3a6=_0x339105[_0x87857c];return _0x2cd3a6;},_0x8785(_0x2d019e,_0x6cc302);};class SceneObject{static [_0x3c8aec(0x103)]=0x0;constructor(_0xd6716f,_0x27e903){const _0x3c294a=_0x3c8aec;if(this[_0x3c294a(0x122)]==SceneObject)throw new Error(_0x3c294a(0x15e));this['_device']=_0xd6716f,this[_0x3c294a(0x16a)]=_0x27e903,SceneObject[_0x3c294a(0x103)]+=0x1;}[_0x3c8aec(0x170)](){const _0x38dee6=_0x3c8aec;return this[_0x38dee6(0x122)][_0x38dee6(0x175)]+'\x20'+SceneObject[_0x38dee6(0x103)]['toString']();}async[_0x3c8aec(0x108)](){const _0x434e43=_0x3c8aec;await this['createGeometry'](),await this['createShaders'](),await this[_0x434e43(0x13e)](),await this['createComputePipeline']();}async['createGeometry'](){const _0x156cc3=_0x3c8aec;throw new Error(_0x156cc3(0x113));}[_0x3c8aec(0x135)](){}['loadShader'](_0x1993a8){return new Promise((_0x159307,_0x2b6239)=>{const _0x18a6ec=_0x8785,_0x81a77d=new XMLHttpRequest();_0x81a77d['open'](_0x18a6ec(0x134),_0x1993a8),_0x81a77d[_0x18a6ec(0x12b)](_0x18a6ec(0x16d),_0x18a6ec(0x10d)),_0x81a77d[_0x18a6ec(0x14d)]=function(){const _0x3a4ffb=_0x18a6ec;_0x81a77d['readyState']===XMLHttpRequest[_0x3a4ffb(0x179)]&&_0x81a77d[_0x3a4ffb(0x111)]===0xc8?_0x159307(_0x81a77d[_0x3a4ffb(0x146)]):_0x2b6239({'status':_0x81a77d[_0x3a4ffb(0x111)],'statusText':_0x81a77d[_0x3a4ffb(0x148)]});},_0x81a77d[_0x18a6ec(0x128)]=function(){const _0x35c47a=_0x18a6ec;_0x2b6239({'status':_0x81a77d['status'],'statusText':_0x81a77d[_0x35c47a(0x148)]});},_0x81a77d[_0x18a6ec(0x14a)]();});}async[_0x3c8aec(0x118)](){const _0x157719=_0x3c8aec;throw new Error(_0x157719(0x13d));}async[_0x3c8aec(0x13e)](){const _0x31dcab=_0x3c8aec;throw new Error(_0x31dcab(0x11e));}['render'](_0xb4d8aa){const _0x76c38b=_0x3c8aec;throw new Error(_0x76c38b(0x156));}async['createComputePipeline'](){const _0x42b272=_0x3c8aec;throw new Error(_0x42b272(0x10f));}['compute'](_0x9c7cf7){const _0x404531=_0x3c8aec;throw new Error(_0x404531(0x151));}}class ParticleSystemObject extends SceneObject{constructor(_0x3edc56,_0x25d610,_0x2affb7=0x1000){const _0x9a84d6=_0x3c8aec;super(_0x3edc56,_0x25d610),this[_0x9a84d6(0x123)]=_0x2affb7,this['_step']=0x0;}async[_0x3c8aec(0x10b)](){await this['createParticleGeometry']();}async[_0x3c8aec(0x172)](){const _0x35c360=_0x3c8aec;this[_0x35c360(0x154)]=0x6,this[_0x35c360(0x157)]=new Float32Array(this[_0x35c360(0x123)]*this[_0x35c360(0x154)]);const _0xdc1181=this[_0x35c360(0x157)][_0x35c360(0x15b)];this[_0x35c360(0x160)]=[this['_device'][_0x35c360(0x125)]({'size':_0xdc1181,'usage':GPUBufferUsage[_0x35c360(0x162)]|GPUBufferUsage[_0x35c360(0x13a)]|GPUBufferUsage[_0x35c360(0x143)]}),this[_0x35c360(0x17e)][_0x35c360(0x125)]({'size':_0xdc1181,'usage':GPUBufferUsage[_0x35c360(0x162)]|GPUBufferUsage[_0x35c360(0x13a)]|GPUBufferUsage['COPY_SRC']})],this['resetParticles']();}[_0x3c8aec(0x133)](){const _0x4e8f0a=_0x3c8aec;for(let _0x172c21=0x0;_0x172c21<this[_0x4e8f0a(0x123)];_0x172c21++){const _0x17b1ab=_0x172c21*this[_0x4e8f0a(0x154)],_0x3f54f9=-0x1+Math['random']()*0x2,_0xb1edf7=-0x1+Math[_0x4e8f0a(0x129)]()*0x2;this[_0x4e8f0a(0x157)][_0x17b1ab+0x0]=_0x3f54f9,this[_0x4e8f0a(0x157)][_0x17b1ab+0x1]=_0xb1edf7,this['_particles'][_0x17b1ab+0x2]=(Math[_0x4e8f0a(0x129)]()-0.5)*0.005,this[_0x4e8f0a(0x157)][_0x17b1ab+0x3]=(Math[_0x4e8f0a(0x129)]()-0.5)*0.005,this[_0x4e8f0a(0x157)][_0x17b1ab+0x4]=0x0,this[_0x4e8f0a(0x157)][_0x17b1ab+0x5]=_0x172c21%0x2===0x0?0x1:0x0;}this[_0x4e8f0a(0x144)]=0x0,this['_device'][_0x4e8f0a(0x159)][_0x4e8f0a(0x145)](this[_0x4e8f0a(0x160)][this['_step']%0x2],0x0,this['_particles']);}[_0x3c8aec(0x135)](){}async[_0x3c8aec(0x118)](){const _0x53f3f7=_0x3c8aec;let _0x4530a6=await this[_0x53f3f7(0x176)](_0x53f3f7(0x106));this[_0x53f3f7(0x12e)]=this[_0x53f3f7(0x17e)][_0x53f3f7(0x152)]({'label':'Particles\x20Shader\x20'+this['getName'](),'code':_0x4530a6}),this['_bindGroupLayout']=this[_0x53f3f7(0x17e)][_0x53f3f7(0x15c)]({'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x53f3f7(0x168)]|GPUShaderStage[_0x53f3f7(0x126)],'buffer':{'type':_0x53f3f7(0x158)}},{'binding':0x1,'visibility':GPUShaderStage[_0x53f3f7(0x126)],'buffer':{'type':_0x53f3f7(0x11b)}}]}),this[_0x53f3f7(0x127)]=this['_device']['createPipelineLayout']({'label':_0x53f3f7(0x12a),'bindGroupLayouts':[this[_0x53f3f7(0x17d)]]});}async[_0x3c8aec(0x13e)](){const _0x8e5db8=_0x3c8aec;await this[_0x8e5db8(0x142)]();}async[_0x3c8aec(0x142)](){const _0x3c0935=_0x3c8aec;this[_0x3c0935(0x15f)]=this[_0x3c0935(0x17e)]['createRenderPipeline']({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x3c0935(0x170)](),'layout':this[_0x3c0935(0x127)],'vertex':{'module':this['_shaderModule'],'entryPoint':_0x3c0935(0x16c)},'fragment':{'module':this[_0x3c0935(0x12e)],'entryPoint':'fragmentMain','targets':[{'format':this['_canvasFormat']}]},'primitives':{'topology':'line-strip'}}),this[_0x3c0935(0x16f)]=[this[_0x3c0935(0x17e)][_0x3c0935(0x161)]({'layout':this['_particlePipeline'][_0x3c0935(0x11d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3c0935(0x160)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x3c0935(0x160)][0x1]}}]}),this['_device'][_0x3c0935(0x161)]({'layout':this['_particlePipeline'][_0x3c0935(0x11d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_particleBuffers'][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x3c0935(0x160)][0x0]}}]})];}[_0x3c8aec(0x16b)](_0x1ce676){const _0x23c368=_0x3c8aec;_0x1ce676['setPipeline'](this['_particlePipeline']),_0x1ce676['setBindGroup'](0x0,this[_0x23c368(0x16f)][this['_step']%0x2]),_0x1ce676[_0x23c368(0x110)](0x80,this[_0x23c368(0x123)]);}async[_0x3c8aec(0x124)](){const _0x53917a=_0x3c8aec;this['_computePipeline']=this['_device'][_0x53917a(0x124)]({'label':'Particles\x20Compute\x20Pipeline\x20'+this[_0x53917a(0x170)](),'layout':this[_0x53917a(0x127)],'compute':{'module':this[_0x53917a(0x12e)],'entryPoint':_0x53917a(0x120)}});}[_0x3c8aec(0x130)](_0xfb6d41){const _0x2a3333=_0x3c8aec;_0xfb6d41['setPipeline'](this[_0x2a3333(0x16e)]),_0xfb6d41[_0x2a3333(0x163)](0x0,this['_bindGroups'][this['_step']%0x2]),_0xfb6d41['dispatchWorkgroups'](Math[_0x2a3333(0x12d)](this[_0x2a3333(0x123)]/0x100)),++this[_0x2a3333(0x144)];}};window[_0x3c8aec(0x14d)]=async function(){const _0x4e8a34=_0x3c8aec,_0x1cba51=document[_0x4e8a34(0x173)](_0x4e8a34(0x169));_0x1cba51[_0x4e8a34(0x109)]('click',function(){const _0x4bb4c8=_0x4e8a34;window[_0x4bb4c8(0x14e)][_0x4bb4c8(0x100)]='./game.html';});const _0x20b445=document[_0x4e8a34(0x173)]('toggleInstructionsButton'),_0x7b76b2=document['getElementById'](_0x4e8a34(0x140)),_0x20b4f8=document[_0x4e8a34(0x173)](_0x4e8a34(0x136));_0x20b445[_0x4e8a34(0x109)](_0x4e8a34(0x14c),function(){const _0x415cd1=_0x4e8a34;_0x7b76b2[_0x415cd1(0x101)]['display']=_0x415cd1(0x17c);});_0x20b4f8&&_0x20b4f8[_0x4e8a34(0x109)](_0x4e8a34(0x14c),function(){const _0x5ace42=_0x4e8a34;_0x7b76b2[_0x5ace42(0x101)]['display']='none';});const _0x3f053b=document[_0x4e8a34(0x173)](_0x4e8a34(0x115)),_0x169110=new Renderer(_0x3f053b);await _0x169110[_0x4e8a34(0x108)]();const _0x165406=new ParticleSystemObject(_0x169110[_0x4e8a34(0x17e)],_0x169110[_0x4e8a34(0x16a)],0x3e8);await _0x165406[_0x4e8a34(0x10b)](),await _0x165406['createShaders'](),await _0x165406[_0x4e8a34(0x13e)](),await _0x165406['createComputePipeline'](),await _0x169110[_0x4e8a34(0x150)](_0x165406),_0x3f053b[_0x4e8a34(0x109)](_0x4e8a34(0x13f),_0x2d037a=>{const _0x4826e9=_0x4e8a34,_0x57771a=_0x2d037a[_0x4826e9(0x171)]/window[_0x4826e9(0x11a)]*0x2-0x1,_0x2f3ca9=-_0x2d037a[_0x4826e9(0x139)]/window[_0x4826e9(0x153)]*0x2+0x1;}),_0x3f053b[_0x4e8a34(0x109)]('mouseleave',()=>{});function _0x46f5f3(){const _0x1535ae=_0x4e8a34,_0x26d130=_0x169110[_0x1535ae(0x17e)][_0x1535ae(0x121)](),_0x5c53c9=_0x26d130[_0x1535ae(0x131)]();_0x165406[_0x1535ae(0x130)](_0x5c53c9),_0x5c53c9['end']();const _0x518e34=_0x169110[_0x1535ae(0x155)][_0x1535ae(0x17f)]()[_0x1535ae(0x13c)](),_0x130edc={'colorAttachments':[{'view':_0x518e34,'loadOp':'clear','clearValue':{'r':0x0,'g':0x0,'b':0x0,'a':0x1},'storeOp':_0x1535ae(0x177)}]},_0x2fc8f0=_0x26d130[_0x1535ae(0x141)](_0x130edc);_0x165406['render'](_0x2fc8f0),_0x2fc8f0[_0x1535ae(0x114)](),_0x169110['_device'][_0x1535ae(0x159)][_0x1535ae(0x174)]([_0x26d130['finish']()]),requestAnimationFrame(_0x46f5f3);}requestAnimationFrame(_0x46f5f3);};
