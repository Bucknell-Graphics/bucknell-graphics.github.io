/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x8cd8eb=_0x2fa2;(function(_0x58438d,_0x27bd71){const _0x5a0ff9=_0x2fa2,_0x3e5a01=_0x58438d();while(!![]){try{const _0x42ce78=parseInt(_0x5a0ff9(0x211))/0x1+parseInt(_0x5a0ff9(0x26f))/0x2*(-parseInt(_0x5a0ff9(0x1c1))/0x3)+-parseInt(_0x5a0ff9(0x1f9))/0x4+-parseInt(_0x5a0ff9(0x1db))/0x5+parseInt(_0x5a0ff9(0x1b4))/0x6*(-parseInt(_0x5a0ff9(0x1cb))/0x7)+parseInt(_0x5a0ff9(0x1b0))/0x8*(-parseInt(_0x5a0ff9(0x1c4))/0x9)+parseInt(_0x5a0ff9(0x24e))/0xa;if(_0x42ce78===_0x27bd71)break;else _0x3e5a01['push'](_0x3e5a01['shift']());}catch(_0x3d88ec){_0x3e5a01['push'](_0x3e5a01['shift']());}}}(_0x6efc,0x55869));class Renderer{constructor(_0x3c0562){const _0x253491=_0x2fa2;this[_0x253491(0x217)]=_0x3c0562,this['_objects']=[],this[_0x253491(0x1d8)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x8cd8eb(0x1a8)](){const _0x5a8833=_0x8cd8eb;if(!navigator[_0x5a8833(0x270)])throw Error(_0x5a8833(0x1e5));const _0x4a0ce5=await navigator[_0x5a8833(0x270)][_0x5a8833(0x27b)]();if(!_0x4a0ce5)throw Error(_0x5a8833(0x1b9));this['_device']=await _0x4a0ce5['requestDevice'](),this['_context']=this[_0x5a8833(0x217)][_0x5a8833(0x215)](_0x5a8833(0x1d9)),this[_0x5a8833(0x1bb)]=navigator[_0x5a8833(0x270)][_0x5a8833(0x1c0)](),this['_context']['configure']({'device':this['_device'],'format':this[_0x5a8833(0x1bb)]}),this[_0x5a8833(0x2aa)](),window[_0x5a8833(0x1a1)](_0x5a8833(0x29e),this[_0x5a8833(0x2aa)][_0x5a8833(0x1cc)](this));}[_0x8cd8eb(0x2aa)](){const _0x1b1c25=_0x8cd8eb,_0x364fd9=window[_0x1b1c25(0x238)]||0x1,_0x100705=window['innerWidth']*_0x364fd9,_0x3d2c9a=window[_0x1b1c25(0x280)]*_0x364fd9;this[_0x1b1c25(0x217)][_0x1b1c25(0x258)]=_0x100705,this['_canvas'][_0x1b1c25(0x1a2)]=_0x3d2c9a,this['_canvas'][_0x1b1c25(0x200)][_0x1b1c25(0x258)]=window['innerWidth']+'px',this['_canvas'][_0x1b1c25(0x200)]['height']=window[_0x1b1c25(0x280)]+'px',this['_canvas'][_0x1b1c25(0x200)][_0x1b1c25(0x263)]=_0x1b1c25(0x2b0),this['render']();}async['appendSceneObject'](_0x2ba4b1){const _0x23fedf=_0x8cd8eb;await _0x2ba4b1['init'](),this['_objects'][_0x23fedf(0x245)](_0x2ba4b1);}['renderToSelectedView'](_0x11a55a){const _0x361fa6=_0x8cd8eb;for(const _0x2fb1bc of this['_objects']){_0x2fb1bc?.[_0x361fa6(0x25c)]();}let _0x36e28d=this[_0x361fa6(0x227)][_0x361fa6(0x251)]();const _0x3c3ab7=_0x36e28d[_0x361fa6(0x231)]({'colorAttachments':[{'view':_0x11a55a,'clearValue':this[_0x361fa6(0x1d8)],'loadOp':'clear','storeOp':'store'}]});for(const _0x1b3272 of this['_objects']){_0x1b3272?.[_0x361fa6(0x2a2)](_0x3c3ab7);}_0x3c3ab7[_0x361fa6(0x29b)]();const _0x1d429c=_0x36e28d[_0x361fa6(0x255)]();for(const _0x52d462 of this[_0x361fa6(0x262)]){_0x52d462?.[_0x361fa6(0x1b7)](_0x1d429c);}_0x1d429c[_0x361fa6(0x29b)]();const _0x34e953=_0x36e28d[_0x361fa6(0x29c)]();this[_0x361fa6(0x227)][_0x361fa6(0x1e7)][_0x361fa6(0x1d6)]([_0x34e953]);}[_0x8cd8eb(0x2a2)](){const _0x35bc4c=_0x8cd8eb;this[_0x35bc4c(0x27c)](this[_0x35bc4c(0x230)][_0x35bc4c(0x236)]()[_0x35bc4c(0x1d5)]());}}class RayTracer extends Renderer{constructor(_0x299274){const _0x42814d=_0x8cd8eb;super(_0x299274),this[_0x42814d(0x222)]=null;}async[_0x8cd8eb(0x1a8)](){const _0x3bd1b6=_0x8cd8eb;if(!navigator[_0x3bd1b6(0x270)])throw Error(_0x3bd1b6(0x1e5));const _0x4c55da=await navigator[_0x3bd1b6(0x270)][_0x3bd1b6(0x27b)]();if(!_0x4c55da)throw Error(_0x3bd1b6(0x1b9));this[_0x3bd1b6(0x227)]=await _0x4c55da[_0x3bd1b6(0x1b5)](),this['_context']=this['_canvas']['getContext']('webgpu'),this['_canvasFormat']=_0x3bd1b6(0x2a0),this[_0x3bd1b6(0x230)][_0x3bd1b6(0x218)]({'device':this[_0x3bd1b6(0x227)],'format':this['_canvasFormat']}),this[_0x3bd1b6(0x256)]=this[_0x3bd1b6(0x227)][_0x3bd1b6(0x239)]({'label':_0x3bd1b6(0x297),'code':_0x3bd1b6(0x1d1)}),this[_0x3bd1b6(0x284)]=this[_0x3bd1b6(0x227)][_0x3bd1b6(0x1ff)]({'label':_0x3bd1b6(0x290),'size':0x8,'usage':GPUBufferUsage[_0x3bd1b6(0x23d)]|GPUBufferUsage[_0x3bd1b6(0x1e2)]}),this['_pipeline']=this['_device']['createRenderPipeline']({'label':_0x3bd1b6(0x212),'layout':'auto','vertex':{'module':this['_shaderModule'],'entryPoint':_0x3bd1b6(0x285)},'fragment':{'module':this['_shaderModule'],'entryPoint':'fragmentMain','targets':[{'format':this[_0x3bd1b6(0x1bb)]}]}}),this['_sampler']=this['_device'][_0x3bd1b6(0x266)]({'label':_0x3bd1b6(0x24d),'magFilter':_0x3bd1b6(0x205),'minFilter':_0x3bd1b6(0x205)}),this[_0x3bd1b6(0x2aa)](),window['addEventListener'](_0x3bd1b6(0x29e),this[_0x3bd1b6(0x2aa)][_0x3bd1b6(0x1cc)](this));}[_0x8cd8eb(0x2aa)](){const _0x12e60b=_0x8cd8eb,_0x7644d1=window[_0x12e60b(0x238)]||0x1,_0x553e98=window[_0x12e60b(0x209)]*_0x7644d1,_0x31e0fe=window[_0x12e60b(0x280)]*_0x7644d1,_0x43a1ab=_0x553e98/_0x31e0fe,_0x1d67cd=_0x31e0fe;let _0x1e3959={'width':_0x1d67cd*_0x43a1ab,'height':_0x1d67cd};this[_0x12e60b(0x252)]=this['_device'][_0x12e60b(0x1c8)]({'size':_0x1e3959,'format':this['_canvasFormat'],'usage':GPUTextureUsage[_0x12e60b(0x20d)]|GPUTextureUsage[_0x12e60b(0x2ae)]}),this[_0x12e60b(0x222)]&&(this['_tracer'][_0x12e60b(0x1d3)]=this[_0x12e60b(0x252)][_0x12e60b(0x258)],this[_0x12e60b(0x222)][_0x12e60b(0x298)]=this[_0x12e60b(0x252)]['height'],this[_0x12e60b(0x222)][_0x12e60b(0x25c)](),this['_tracer'][_0x12e60b(0x1e1)](this['_offScreenTexture'])),this[_0x12e60b(0x1a4)]=this[_0x12e60b(0x227)][_0x12e60b(0x1e1)]({'label':_0x12e60b(0x26b),'layout':this[_0x12e60b(0x1cd)][_0x12e60b(0x275)](0x0),'entries':[{'binding':0x0,'resource':this[_0x12e60b(0x252)]['createView']()},{'binding':0x1,'resource':this[_0x12e60b(0x1aa)]},{'binding':0x2,'resource':{'buffer':this[_0x12e60b(0x284)]}}]}),super[_0x12e60b(0x2aa)](),this[_0x12e60b(0x227)][_0x12e60b(0x1e7)][_0x12e60b(0x1ed)](this[_0x12e60b(0x284)],0x0,new Float32Array([_0x553e98,_0x31e0fe]));}async['setTracerObject'](_0x5ac212){const _0xa1e397=_0x8cd8eb;await _0x5ac212[_0xa1e397(0x1a8)](),_0x5ac212[_0xa1e397(0x1d3)]=this['_offScreenTexture'][_0xa1e397(0x258)],_0x5ac212['_imgHeight']=this[_0xa1e397(0x252)][_0xa1e397(0x1a2)],_0x5ac212[_0xa1e397(0x25c)](),this[_0xa1e397(0x222)]=_0x5ac212,this['_tracer'][_0xa1e397(0x1e1)](this[_0xa1e397(0x252)]);}['render'](){const _0xd1eb6f=_0x8cd8eb;if(this['_tracer']){let _0x5b7958=this['_device'][_0xd1eb6f(0x251)]();const _0x305d10=_0x5b7958['beginComputePass']();this[_0xd1eb6f(0x222)][_0xd1eb6f(0x1b7)](_0x305d10),_0x305d10[_0xd1eb6f(0x29b)](),this[_0xd1eb6f(0x227)][_0xd1eb6f(0x1e7)][_0xd1eb6f(0x1d6)]([_0x5b7958[_0xd1eb6f(0x29c)]()]);}let _0x2e66a8=this[_0xd1eb6f(0x227)][_0xd1eb6f(0x251)]();const _0x125fd6=_0x2e66a8[_0xd1eb6f(0x231)]({'colorAttachments':[{'view':this[_0xd1eb6f(0x230)][_0xd1eb6f(0x236)]()[_0xd1eb6f(0x1d5)](),'clearValue':this[_0xd1eb6f(0x1d8)],'loadOp':_0xd1eb6f(0x28b),'storeOp':_0xd1eb6f(0x1ee)}]});_0x125fd6['setPipeline'](this['_pipeline']),_0x125fd6['setBindGroup'](0x0,this[_0xd1eb6f(0x1a4)]),_0x125fd6['draw'](0x6),_0x125fd6[_0xd1eb6f(0x29b)](),this[_0xd1eb6f(0x227)]['queue'][_0xd1eb6f(0x1d6)]([_0x2e66a8['finish']()]);}}function _0x2fa2(_0x5342b6,_0x519d90){const _0x6efcdb=_0x6efc();return _0x2fa2=function(_0x2fa2f3,_0x465bf3){_0x2fa2f3=_0x2fa2f3-0x19e;let _0x2acb34=_0x6efcdb[_0x2fa2f3];return _0x2acb34;},_0x2fa2(_0x5342b6,_0x519d90);}class StandardTextObject{constructor(_0x21d0f0,_0x195cef=0x5,_0xef06d6=_0x8cd8eb(0x1ec)){const _0x34c905=_0x8cd8eb;this[_0x34c905(0x1b1)]=_0xef06d6,this[_0x34c905(0x1e3)]=_0x195cef,this[_0x34c905(0x1fb)]=document[_0x34c905(0x264)](_0x34c905(0x27f)),this[_0x34c905(0x1f2)]=this[_0x34c905(0x1fb)][_0x34c905(0x215)]('2d'),this[_0x34c905(0x1e6)](_0x21d0f0),this[_0x34c905(0x293)](_0x21d0f0),this[_0x34c905(0x1fb)][_0x34c905(0x200)][_0x34c905(0x201)]=_0x34c905(0x289),this['_textCanvas'][_0x34c905(0x200)][_0x34c905(0x21e)]=_0x34c905(0x2a3),this[_0x34c905(0x1fb)][_0x34c905(0x200)]['left']=_0x34c905(0x2a3),this[_0x34c905(0x1fb)]['style'][_0x34c905(0x268)]=_0x34c905(0x21a),document['body'][_0x34c905(0x250)](this[_0x34c905(0x1fb)]);}['toggleVisibility'](){const _0x4ecb93=_0x8cd8eb;this[_0x4ecb93(0x1fb)][_0x4ecb93(0x2a8)]=!this[_0x4ecb93(0x1fb)][_0x4ecb93(0x2a8)];}['updateTextRegion'](_0x5f2d33){const _0x4542ca=_0x8cd8eb;this['_textContext'][_0x4542ca(0x1af)]=this['_textFont'],this[_0x4542ca(0x20b)]=_0x5f2d33[_0x4542ca(0x2a7)]('\x0a'),this[_0x4542ca(0x286)]=Math['max'](...this['_lines'][_0x4542ca(0x203)](_0x1fec8e=>this[_0x4542ca(0x1f2)][_0x4542ca(0x2a6)](_0x1fec8e)[_0x4542ca(0x258)]));const _0x51d002=this[_0x4542ca(0x1b1)]['match'](/(\d+)px/);_0x51d002?this['_fontSize']=parseInt(_0x51d002[0x1],0xa):(this[_0x4542ca(0x24a)]=0x12,this[_0x4542ca(0x1b1)]=_0x4542ca(0x1ec)),this[_0x4542ca(0x19f)]=this[_0x4542ca(0x20b)]['length']*(this['_fontSize']+this[_0x4542ca(0x1e3)]),this[_0x4542ca(0x1c9)]=0x5,this['_paddingtop']=0x3,this[_0x4542ca(0x20e)]=Math[_0x4542ca(0x1ba)](this[_0x4542ca(0x286)]+this[_0x4542ca(0x1c9)]*0x2),this['_canvasHeight']=Math['ceil'](this[_0x4542ca(0x19f)]+this[_0x4542ca(0x29f)]),this[_0x4542ca(0x1fb)][_0x4542ca(0x258)]=this['_canvasWidth'],this[_0x4542ca(0x1fb)][_0x4542ca(0x1a2)]=this[_0x4542ca(0x29d)],this['_textContext'][_0x4542ca(0x1af)]=this[_0x4542ca(0x1b1)],this[_0x4542ca(0x1f2)]['textBaseline']=_0x4542ca(0x21e);}[_0x8cd8eb(0x293)](_0x1230c3){const _0x350b23=_0x8cd8eb;this[_0x350b23(0x20b)]=_0x1230c3['split']('\x0a'),this[_0x350b23(0x1f2)][_0x350b23(0x1f6)]=_0x350b23(0x1e0),this[_0x350b23(0x1f2)][_0x350b23(0x1dc)](0x0,0x0,this['_canvasWidth'],this[_0x350b23(0x29d)]),this[_0x350b23(0x1f2)]['fillRect'](0x0,0x0,this[_0x350b23(0x20e)],this['_canvasHeight']),this['_textContext']['fillStyle']=_0x350b23(0x26c),this['_lines'][_0x350b23(0x25a)]((_0xfc5adf,_0x5bd8f8)=>{const _0x4ac0bc=_0x350b23,_0x2dacd1=this['_paddingx'],_0x4f5396=this[_0x4ac0bc(0x29f)]+_0x5bd8f8*(this['_fontSize']+this[_0x4ac0bc(0x1e3)]);this[_0x4ac0bc(0x1f2)]['fillText'](_0xfc5adf,_0x2dacd1,_0x4f5396);});}}class SceneObject{static [_0x8cd8eb(0x22d)]=0x0;constructor(_0x4da530,_0x55466f){const _0x455ac7=_0x8cd8eb;if(this[_0x455ac7(0x2a1)]==SceneObject)throw new Error(_0x455ac7(0x247));this[_0x455ac7(0x227)]=_0x4da530,this[_0x455ac7(0x1bb)]=_0x55466f,SceneObject[_0x455ac7(0x22d)]+=0x1;}[_0x8cd8eb(0x232)](){const _0x525549=_0x8cd8eb;return this['constructor']['name']+'\x20'+SceneObject[_0x525549(0x22d)]['toString']();}async['init'](){const _0x359bc3=_0x8cd8eb;await this[_0x359bc3(0x29a)](),await this[_0x359bc3(0x1eb)](),await this['createRenderPipeline'](),await this[_0x359bc3(0x267)]();}async[_0x8cd8eb(0x29a)](){const _0x6adcd1=_0x8cd8eb;throw new Error(_0x6adcd1(0x23f));}[_0x8cd8eb(0x25c)](){}[_0x8cd8eb(0x221)](_0x485fa2){return new Promise((_0x34cadd,_0x50940a)=>{const _0x42831c=_0x2fa2,_0x13cf8d=new XMLHttpRequest();_0x13cf8d[_0x42831c(0x26e)](_0x42831c(0x2ad),_0x485fa2),_0x13cf8d[_0x42831c(0x265)]('Cache-Control',_0x42831c(0x24b)),_0x13cf8d[_0x42831c(0x25d)]=function(){const _0xbebc6f=_0x42831c;_0x13cf8d['readyState']===XMLHttpRequest['DONE']&&_0x13cf8d[_0xbebc6f(0x210)]===0xc8?_0x34cadd(_0x13cf8d[_0xbebc6f(0x23c)]):_0x50940a({'status':_0x13cf8d[_0xbebc6f(0x210)],'statusText':_0x13cf8d['statusText']});},_0x13cf8d['onerror']=function(){const _0x5300c4=_0x42831c;_0x50940a({'status':_0x13cf8d[_0x5300c4(0x210)],'statusText':_0x13cf8d[_0x5300c4(0x274)]});},_0x13cf8d[_0x42831c(0x2af)]();});}async['createShaders'](){const _0x2c7828=_0x8cd8eb;throw new Error(_0x2c7828(0x1b2));}async['createRenderPipeline'](){throw new Error('Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.');}[_0x8cd8eb(0x2a2)](_0x1250d8){const _0x867922=_0x8cd8eb;throw new Error(_0x867922(0x1fa));}async[_0x8cd8eb(0x267)](){throw new Error('Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.');}[_0x8cd8eb(0x1b7)](_0x240e5e){throw new Error('Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.');}}class RayTracingObject extends SceneObject{async[_0x8cd8eb(0x29a)](){}async[_0x8cd8eb(0x1eb)](){const _0x3f879e=_0x8cd8eb;let _0x3d8a3d=await this[_0x3f879e(0x221)](_0x3f879e(0x2ab));this[_0x3f879e(0x256)]=this[_0x3f879e(0x227)]['createShaderModule']({'label':'\x20Shader\x20'+this[_0x3f879e(0x232)](),'code':_0x3d8a3d});}['updateGeometry'](){}async[_0x8cd8eb(0x21d)](){}[_0x8cd8eb(0x2a2)](_0x1cd33b){}async[_0x8cd8eb(0x267)](){const _0x38c3fe=_0x8cd8eb;this['_computePipeline']=this[_0x38c3fe(0x227)][_0x38c3fe(0x267)]({'label':_0x38c3fe(0x226)+this[_0x38c3fe(0x232)](),'layout':'auto','compute':{'module':this['_shaderModule'],'entryPoint':_0x38c3fe(0x1ea)}});}[_0x8cd8eb(0x1e1)](_0x1e4953){const _0x31b8c8=_0x8cd8eb;this[_0x31b8c8(0x1a4)]=this[_0x31b8c8(0x227)]['createBindGroup']({'label':_0x31b8c8(0x1bd),'layout':this[_0x31b8c8(0x254)][_0x31b8c8(0x275)](0x0),'entries':[{'binding':0x0,'resource':_0x1e4953[_0x31b8c8(0x1d5)]()}]}),this['_wgWidth']=Math[_0x31b8c8(0x1ba)](_0x1e4953[_0x31b8c8(0x258)]),this[_0x31b8c8(0x278)]=Math[_0x31b8c8(0x1ba)](_0x1e4953[_0x31b8c8(0x1a2)]);}['compute'](_0x4ea376){const _0x1f3256=_0x8cd8eb;_0x4ea376[_0x1f3256(0x257)](this[_0x1f3256(0x254)]),_0x4ea376[_0x1f3256(0x1cf)](0x0,this['_bindGroup']),_0x4ea376[_0x1f3256(0x26a)](Math[_0x1f3256(0x1ba)](this[_0x1f3256(0x1b3)]/0x10),Math[_0x1f3256(0x1ba)](this[_0x1f3256(0x278)]/0x10));}}class VolumeByteIO{constructor(){}static['readBinary'](_0x3b1db1){return new Promise((_0x2a3d87,_0x23f95b)=>{const _0x454103=_0x2fa2,_0x6388a2=new XMLHttpRequest();_0x6388a2[_0x454103(0x26e)](_0x454103(0x2ad),_0x3b1db1),_0x6388a2['setRequestHeader']('Cache-Control',_0x454103(0x24b)),_0x6388a2['responseType']=_0x454103(0x1c2),_0x6388a2[_0x454103(0x25d)]=function(){const _0x51cf07=_0x454103;_0x6388a2[_0x51cf07(0x235)]===XMLHttpRequest['DONE']&&_0x6388a2[_0x51cf07(0x210)]===0xc8?_0x2a3d87(_0x6388a2['response']):_0x23f95b(new Error(_0x51cf07(0x283)+_0x6388a2[_0x51cf07(0x210)]));},_0x6388a2[_0x454103(0x27d)]=function(){const _0x254d76=_0x454103;_0x23f95b(new Error(_0x254d76(0x273)));},_0x6388a2[_0x454103(0x2af)]();});}static['readBytes'](_0x445006,_0x540143,_0x260065,_0x41ab00){const _0x3d2603=_0x8cd8eb;switch(_0x41ab00){case _0x3d2603(0x228):return[_0x445006[_0x3d2603(0x28a)](_0x540143,0x1)];break;case'uchar':return[_0x445006['getUint8'](_0x540143,0x1)];break;case _0x3d2603(0x1f8):return[_0x445006['getInt16'](_0x540143,_0x260065),0x2];break;case _0x3d2603(0x294):return[_0x445006[_0x3d2603(0x1d0)](_0x540143,_0x260065),0x2];break;case _0x3d2603(0x24f):return[_0x445006[_0x3d2603(0x216)](_0x540143,_0x260065),0x4];break;case _0x3d2603(0x22b):return[_0x445006[_0x3d2603(0x241)](_0x540143,_0x260065),0x4];break;case _0x3d2603(0x1c6):return[_0x445006['getFloat32'](_0x540143,_0x260065),0x4];break;case'double':return[_0x445006[_0x3d2603(0x2ac)](_0x540143,_0x260065),0x8];break;}}static async[_0x8cd8eb(0x281)](_0x23622d){const _0x307a3f=_0x8cd8eb;let _0x377fbc=await VolumeByteIO[_0x307a3f(0x269)](_0x23622d),_0x3c2e44=new TextDecoder()[_0x307a3f(0x219)](_0x377fbc);const _0x3745e5=[0xb5,0xd9,0xb5],_0x1c2311=[0x1,0x1,0x1],_0x2d6952=[];let _0x524586=0x0,_0x5d03d5=new DataView(_0x377fbc);for(let _0x5a4cb2=0x0;_0x5a4cb2<_0x3745e5[_0x307a3f(0x223)]((_0x27192a,_0x47d37d)=>_0x27192a*_0x47d37d,0x1);++_0x5a4cb2){const [_0x5079f3,_0x15b0e4]=VolumeByteIO[_0x307a3f(0x2a5)](_0x5d03d5,_0x524586,!![],_0x307a3f(0x1f8));_0x2d6952[_0x307a3f(0x245)](_0x5079f3),_0x524586+=_0x15b0e4;}return[_0x3745e5,_0x1c2311,_0x2d6952];}static[_0x8cd8eb(0x20c)](){const _0x109c77=_0x8cd8eb,_0x3475ed=new ArrayBuffer(0x2),_0x3f0474=new DataView(_0x3475ed);return _0x3f0474[_0x109c77(0x206)](0x0,0x100,!![]),_0x3f0474[_0x109c77(0x28a)](0x0)===0x0;}static async[_0x8cd8eb(0x1f7)](_0x3e8383,_0x4b174d){const _0x5b5d26=_0x8cd8eb,_0x10dc77=new Uint8Array(_0x3e8383['data'][_0x5b5d26(0x225)]*0x2);_0x3e8383[_0x5b5d26(0x279)]['forEach']((_0x53c554,_0x125fb0)=>{const _0x3e2305=_0x5b5d26,_0x3009f0=new Uint16Array([_0x53c554]);_0x10dc77['set'](new Uint8Array(_0x3009f0[_0x3e2305(0x249)]),_0x125fb0*0x2);});const _0x90817a=new Blob([_0x10dc77],{'type':_0x5b5d26(0x1a9)}),_0x1ee0c7=document[_0x5b5d26(0x264)]('a');_0x1ee0c7['href']=URL[_0x5b5d26(0x23e)](_0x90817a),_0x1ee0c7['download']=_0x5b5d26(0x1b6),_0x1ee0c7[_0x5b5d26(0x2a4)](),URL[_0x5b5d26(0x28c)](_0x1ee0c7['href']);}}class VolumeData{constructor(_0x4739f4){const _0x23e0d5=_0x8cd8eb;this[_0x23e0d5(0x299)]=_0x4739f4;}async[_0x8cd8eb(0x1a8)](){const _0x1aca81=_0x8cd8eb,[_0x438dbf,_0xa73510,_0x4316a1]=await VolumeByteIO[_0x1aca81(0x281)](this[_0x1aca81(0x299)]);this['_dims']=_0x438dbf,this[_0x1aca81(0x1fd)]=_0xa73510,this[_0x1aca81(0x19e)]=_0x4316a1;}}class VolumeRenderingSimpleObject extends RayTracingObject{constructor(_0x5d3df5,_0x37ef1a,_0x3ee23b){const _0xe3f3e9=_0x8cd8eb;super(_0x5d3df5,_0x37ef1a),this['_volume']=new VolumeData(_0xe3f3e9(0x1d7)),this[_0xe3f3e9(0x28d)]=_0x3ee23b;}async[_0x8cd8eb(0x29a)](){const _0x1b58d3=_0x8cd8eb;await this['_volume'][_0x1b58d3(0x1a8)](),this['_cameraBuffer']=this['_device']['createBuffer']({'label':_0x1b58d3(0x1bc)+this[_0x1b58d3(0x232)](),'size':this['_camera'][_0x1b58d3(0x244)][_0x1b58d3(0x1df)]+this[_0x1b58d3(0x28d)][_0x1b58d3(0x237)][_0x1b58d3(0x1df)]+this[_0x1b58d3(0x28d)][_0x1b58d3(0x25b)][_0x1b58d3(0x1df)],'usage':GPUBufferUsage[_0x1b58d3(0x23d)]|GPUBufferUsage[_0x1b58d3(0x1e2)]}),this['_device']['queue'][_0x1b58d3(0x1ed)](this['_cameraBuffer'],0x0,this['_camera'][_0x1b58d3(0x244)]),this[_0x1b58d3(0x227)][_0x1b58d3(0x1e7)][_0x1b58d3(0x1ed)](this[_0x1b58d3(0x1f0)],this['_camera'][_0x1b58d3(0x244)][_0x1b58d3(0x1df)],this['_camera'][_0x1b58d3(0x237)]),this[_0x1b58d3(0x227)]['queue'][_0x1b58d3(0x1ed)](this[_0x1b58d3(0x1f0)],this[_0x1b58d3(0x28d)][_0x1b58d3(0x244)][_0x1b58d3(0x1df)]+this['_camera']['_focal']['byteLength'],this[_0x1b58d3(0x28d)][_0x1b58d3(0x25b)]),this[_0x1b58d3(0x282)]=this[_0x1b58d3(0x227)][_0x1b58d3(0x1ff)]({'label':_0x1b58d3(0x22e)+this['getName'](),'size':(this[_0x1b58d3(0x296)][_0x1b58d3(0x242)][_0x1b58d3(0x225)]+this[_0x1b58d3(0x296)][_0x1b58d3(0x1fd)][_0x1b58d3(0x225)]+0x2)*Float32Array[_0x1b58d3(0x1fe)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x1b58d3(0x1e2)]}),this[_0x1b58d3(0x227)][_0x1b58d3(0x1e7)]['writeBuffer'](this[_0x1b58d3(0x282)],0x0,new Float32Array([...this[_0x1b58d3(0x296)][_0x1b58d3(0x242)],0x0,...this[_0x1b58d3(0x296)][_0x1b58d3(0x1fd)],0x0])),this[_0x1b58d3(0x277)]=this[_0x1b58d3(0x227)]['createBuffer']({'label':_0x1b58d3(0x2a9)+this['getName'](),'size':this[_0x1b58d3(0x296)][_0x1b58d3(0x19e)][_0x1b58d3(0x225)]*Float32Array[_0x1b58d3(0x1fe)],'usage':GPUBufferUsage[_0x1b58d3(0x1c3)]|GPUBufferUsage['COPY_DST']}),this[_0x1b58d3(0x227)][_0x1b58d3(0x1e7)][_0x1b58d3(0x1ed)](this['_dataBuffer'],0x0,new Float32Array(this[_0x1b58d3(0x296)][_0x1b58d3(0x19e)]));}['updateGeometry'](){const _0x44d229=_0x8cd8eb;this[_0x44d229(0x28d)][_0x44d229(0x1b8)](this[_0x44d229(0x1d3)],this['_imgHeight']),this['_device'][_0x44d229(0x1e7)]['writeBuffer'](this[_0x44d229(0x1f0)],this[_0x44d229(0x28d)][_0x44d229(0x244)][_0x44d229(0x1df)]+this[_0x44d229(0x28d)][_0x44d229(0x237)][_0x44d229(0x1df)],this[_0x44d229(0x28d)]['_resolutions']);}[_0x8cd8eb(0x26d)](){const _0x3a3559=_0x8cd8eb;this['_device'][_0x3a3559(0x1e7)][_0x3a3559(0x1ed)](this[_0x3a3559(0x1f0)],0x0,this[_0x3a3559(0x28d)][_0x3a3559(0x244)]);}[_0x8cd8eb(0x208)](){const _0x53b526=_0x8cd8eb;this[_0x53b526(0x227)][_0x53b526(0x1e7)][_0x53b526(0x1ed)](this[_0x53b526(0x1f0)],this[_0x53b526(0x28d)][_0x53b526(0x244)][_0x53b526(0x1df)],this['_camera'][_0x53b526(0x237)]);}async[_0x8cd8eb(0x1eb)](){const _0x54818a=_0x8cd8eb;let _0x5831bb=await this[_0x54818a(0x221)](_0x54818a(0x1c7));this['_shaderModule']=this[_0x54818a(0x227)]['createShaderModule']({'label':_0x54818a(0x240)+this[_0x54818a(0x232)](),'code':_0x5831bb}),this[_0x54818a(0x25f)]=this[_0x54818a(0x227)]['createBindGroupLayout']({'label':_0x54818a(0x1f3)+this[_0x54818a(0x232)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x54818a(0x1a6)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x54818a(0x1a6)],'buffer':{'type':_0x54818a(0x24c)}},{'binding':0x3,'visibility':GPUShaderStage[_0x54818a(0x1a6)],'storageTexture':{'format':this['_canvasFormat']}}]}),this[_0x54818a(0x1dd)]=this[_0x54818a(0x227)]['createPipelineLayout']({'label':_0x54818a(0x260),'bindGroupLayouts':[this['_bindGroupLayout']]});}async['createComputePipeline'](){const _0x21c0a3=_0x8cd8eb;this[_0x21c0a3(0x254)]=this[_0x21c0a3(0x227)][_0x21c0a3(0x267)]({'label':_0x21c0a3(0x1f5)+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x21c0a3(0x256)],'entryPoint':_0x21c0a3(0x1d2)}}),this['_computeProjectivePipeline']=this[_0x21c0a3(0x227)]['createComputePipeline']({'label':_0x21c0a3(0x214)+this[_0x21c0a3(0x232)](),'layout':this[_0x21c0a3(0x1dd)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x21c0a3(0x1ad)}});}['createBindGroup'](_0x35a147){const _0x27a71a=_0x8cd8eb;this['_bindGroup']=this['_device']['createBindGroup']({'label':_0x27a71a(0x213),'layout':this[_0x27a71a(0x254)][_0x27a71a(0x275)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x27a71a(0x1f0)]}},{'binding':0x1,'resource':{'buffer':this[_0x27a71a(0x282)]}},{'binding':0x2,'resource':{'buffer':this[_0x27a71a(0x277)]}},{'binding':0x3,'resource':_0x35a147[_0x27a71a(0x1d5)]()}]}),this[_0x27a71a(0x1b3)]=Math[_0x27a71a(0x1ba)](_0x35a147['width']),this[_0x27a71a(0x278)]=Math[_0x27a71a(0x1ba)](_0x35a147[_0x27a71a(0x1a2)]);}[_0x8cd8eb(0x1b7)](_0xa73c1d){const _0x4ebd95=_0x8cd8eb;this[_0x4ebd95(0x28d)]?.[_0x4ebd95(0x1c5)]?_0xa73c1d[_0x4ebd95(0x257)](this[_0x4ebd95(0x1e8)]):_0xa73c1d[_0x4ebd95(0x257)](this['_computePipeline']),_0xa73c1d[_0x4ebd95(0x1cf)](0x0,this[_0x4ebd95(0x1a4)]),_0xa73c1d[_0x4ebd95(0x26a)](Math['ceil'](this[_0x4ebd95(0x1b3)]/0x10),Math['ceil'](this[_0x4ebd95(0x278)]/0x10));}}class VolumeRenderingMIPObject extends RayTracingObject{constructor(_0x75729f,_0x486d5a,_0x56c5ab){const _0x4f7bc8=_0x8cd8eb;super(_0x75729f,_0x486d5a),this[_0x4f7bc8(0x296)]=new VolumeData(_0x4f7bc8(0x1d7)),this[_0x4f7bc8(0x28d)]=_0x56c5ab;}async['createGeometry'](){const _0x3e0815=_0x8cd8eb;await this['_volume'][_0x3e0815(0x1a8)](),this[_0x3e0815(0x1f0)]=this['_device'][_0x3e0815(0x1ff)]({'label':_0x3e0815(0x1bc)+this[_0x3e0815(0x232)](),'size':this[_0x3e0815(0x28d)][_0x3e0815(0x244)][_0x3e0815(0x1df)]+this[_0x3e0815(0x28d)][_0x3e0815(0x237)][_0x3e0815(0x1df)]+this['_camera'][_0x3e0815(0x25b)][_0x3e0815(0x1df)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x3e0815(0x1e2)]}),this[_0x3e0815(0x227)][_0x3e0815(0x1e7)][_0x3e0815(0x1ed)](this[_0x3e0815(0x1f0)],0x0,this[_0x3e0815(0x28d)][_0x3e0815(0x244)]),this[_0x3e0815(0x227)][_0x3e0815(0x1e7)][_0x3e0815(0x1ed)](this[_0x3e0815(0x1f0)],this['_camera']['_pose'][_0x3e0815(0x1df)],this[_0x3e0815(0x28d)][_0x3e0815(0x237)]),this['_device'][_0x3e0815(0x1e7)][_0x3e0815(0x1ed)](this[_0x3e0815(0x1f0)],this[_0x3e0815(0x28d)]['_pose'][_0x3e0815(0x1df)]+this[_0x3e0815(0x28d)][_0x3e0815(0x237)][_0x3e0815(0x1df)],this[_0x3e0815(0x28d)][_0x3e0815(0x25b)]),this['_volumeBuffer']=this[_0x3e0815(0x227)][_0x3e0815(0x1ff)]({'label':_0x3e0815(0x22e)+this[_0x3e0815(0x232)](),'size':(this[_0x3e0815(0x296)]['_dims'][_0x3e0815(0x225)]+this[_0x3e0815(0x296)][_0x3e0815(0x1fd)][_0x3e0815(0x225)]+0x2)*Float32Array[_0x3e0815(0x1fe)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x3e0815(0x1e2)]}),this[_0x3e0815(0x227)]['queue'][_0x3e0815(0x1ed)](this[_0x3e0815(0x282)],0x0,new Float32Array([...this[_0x3e0815(0x296)]['_dims'],0x0,...this[_0x3e0815(0x296)]['_sizes'],0x0])),this[_0x3e0815(0x277)]=this[_0x3e0815(0x227)][_0x3e0815(0x1ff)]({'label':_0x3e0815(0x2a9)+this[_0x3e0815(0x232)](),'size':this[_0x3e0815(0x296)][_0x3e0815(0x19e)][_0x3e0815(0x225)]*Float32Array[_0x3e0815(0x1fe)],'usage':GPUBufferUsage[_0x3e0815(0x1c3)]|GPUBufferUsage[_0x3e0815(0x1e2)]}),this[_0x3e0815(0x227)][_0x3e0815(0x1e7)][_0x3e0815(0x1ed)](this[_0x3e0815(0x277)],0x0,new Float32Array(this[_0x3e0815(0x296)][_0x3e0815(0x19e)]));}[_0x8cd8eb(0x25c)](){const _0x47f79e=_0x8cd8eb;this[_0x47f79e(0x28d)][_0x47f79e(0x1b8)](this[_0x47f79e(0x1d3)],this[_0x47f79e(0x298)]),this[_0x47f79e(0x227)]['queue'][_0x47f79e(0x1ed)](this['_cameraBuffer'],this[_0x47f79e(0x28d)][_0x47f79e(0x244)][_0x47f79e(0x1df)]+this[_0x47f79e(0x28d)]['_focal'][_0x47f79e(0x1df)],this['_camera']['_resolutions']);}[_0x8cd8eb(0x26d)](){const _0x5eeb53=_0x8cd8eb;this[_0x5eeb53(0x227)][_0x5eeb53(0x1e7)]['writeBuffer'](this[_0x5eeb53(0x1f0)],0x0,this[_0x5eeb53(0x28d)][_0x5eeb53(0x244)]);}[_0x8cd8eb(0x208)](){const _0x5d2b6c=_0x8cd8eb;this['_device'][_0x5d2b6c(0x1e7)][_0x5d2b6c(0x1ed)](this[_0x5d2b6c(0x1f0)],this['_camera'][_0x5d2b6c(0x244)][_0x5d2b6c(0x1df)],this[_0x5d2b6c(0x28d)][_0x5d2b6c(0x237)]);}async['createShaders'](){const _0x354ed7=_0x8cd8eb;let _0x597c82=await this[_0x354ed7(0x221)](_0x354ed7(0x1be));this[_0x354ed7(0x256)]=this['_device'][_0x354ed7(0x239)]({'label':_0x354ed7(0x240)+this['getName'](),'code':_0x597c82}),this[_0x354ed7(0x25f)]=this[_0x354ed7(0x227)][_0x354ed7(0x1ab)]({'label':_0x354ed7(0x1f3)+this[_0x354ed7(0x232)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x354ed7(0x1a6)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':'read-only-storage'}},{'binding':0x3,'visibility':GPUShaderStage[_0x354ed7(0x1a6)],'storageTexture':{'format':this['_canvasFormat']}}]}),this[_0x354ed7(0x1dd)]=this['_device'][_0x354ed7(0x23a)]({'label':_0x354ed7(0x260),'bindGroupLayouts':[this['_bindGroupLayout']]});}async[_0x8cd8eb(0x267)](){const _0x5569e6=_0x8cd8eb;this['_computePipeline']=this[_0x5569e6(0x227)]['createComputePipeline']({'label':'Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20'+this[_0x5569e6(0x232)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x5569e6(0x256)],'entryPoint':_0x5569e6(0x1d2)}}),this[_0x5569e6(0x1e8)]=this[_0x5569e6(0x227)][_0x5569e6(0x267)]({'label':_0x5569e6(0x214)+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x5569e6(0x256)],'entryPoint':_0x5569e6(0x1ad)}});}[_0x8cd8eb(0x1e1)](_0x9b4e43){const _0x1c5965=_0x8cd8eb;this['_bindGroup']=this[_0x1c5965(0x227)][_0x1c5965(0x1e1)]({'label':_0x1c5965(0x213),'layout':this[_0x1c5965(0x254)][_0x1c5965(0x275)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_cameraBuffer']}},{'binding':0x1,'resource':{'buffer':this['_volumeBuffer']}},{'binding':0x2,'resource':{'buffer':this[_0x1c5965(0x277)]}},{'binding':0x3,'resource':_0x9b4e43[_0x1c5965(0x1d5)]()}]}),this['_wgWidth']=Math[_0x1c5965(0x1ba)](_0x9b4e43[_0x1c5965(0x258)]),this['_wgHeight']=Math[_0x1c5965(0x1ba)](_0x9b4e43[_0x1c5965(0x1a2)]);}[_0x8cd8eb(0x1b7)](_0x481620){const _0x12c912=_0x8cd8eb;this[_0x12c912(0x28d)]?.['_isProjective']?_0x481620[_0x12c912(0x257)](this[_0x12c912(0x1e8)]):_0x481620[_0x12c912(0x257)](this[_0x12c912(0x254)]),_0x481620[_0x12c912(0x1cf)](0x0,this[_0x12c912(0x1a4)]),_0x481620['dispatchWorkgroups'](Math[_0x12c912(0x1ba)](this[_0x12c912(0x1b3)]/0x10),Math[_0x12c912(0x1ba)](this['_wgHeight']/0x10));}}class VolumeRenderingLinearObject extends RayTracingObject{constructor(_0xb13683,_0x29e9b2,_0xfe06e4){const _0x318bb7=_0x8cd8eb;super(_0xb13683,_0x29e9b2),this[_0x318bb7(0x296)]=new VolumeData(_0x318bb7(0x1d7)),this[_0x318bb7(0x28d)]=_0xfe06e4;}async[_0x8cd8eb(0x29a)](){const _0x58d2fe=_0x8cd8eb;await this[_0x58d2fe(0x296)][_0x58d2fe(0x1a8)](),this[_0x58d2fe(0x1f0)]=this[_0x58d2fe(0x227)][_0x58d2fe(0x1ff)]({'label':'Camera\x20'+this[_0x58d2fe(0x232)](),'size':this[_0x58d2fe(0x28d)][_0x58d2fe(0x244)]['byteLength']+this[_0x58d2fe(0x28d)]['_focal'][_0x58d2fe(0x1df)]+this['_camera']['_resolutions'][_0x58d2fe(0x1df)],'usage':GPUBufferUsage[_0x58d2fe(0x23d)]|GPUBufferUsage[_0x58d2fe(0x1e2)]}),this[_0x58d2fe(0x227)]['queue']['writeBuffer'](this[_0x58d2fe(0x1f0)],0x0,this['_camera'][_0x58d2fe(0x244)]),this[_0x58d2fe(0x227)][_0x58d2fe(0x1e7)][_0x58d2fe(0x1ed)](this[_0x58d2fe(0x1f0)],this[_0x58d2fe(0x28d)][_0x58d2fe(0x244)][_0x58d2fe(0x1df)],this[_0x58d2fe(0x28d)][_0x58d2fe(0x237)]),this['_device'][_0x58d2fe(0x1e7)][_0x58d2fe(0x1ed)](this[_0x58d2fe(0x1f0)],this[_0x58d2fe(0x28d)][_0x58d2fe(0x244)][_0x58d2fe(0x1df)]+this[_0x58d2fe(0x28d)][_0x58d2fe(0x237)]['byteLength'],this[_0x58d2fe(0x28d)][_0x58d2fe(0x25b)]),this[_0x58d2fe(0x282)]=this[_0x58d2fe(0x227)][_0x58d2fe(0x1ff)]({'label':_0x58d2fe(0x22e)+this[_0x58d2fe(0x232)](),'size':(this[_0x58d2fe(0x296)][_0x58d2fe(0x242)]['length']+this[_0x58d2fe(0x296)][_0x58d2fe(0x1fd)][_0x58d2fe(0x225)]+0x2)*Float32Array[_0x58d2fe(0x1fe)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0x58d2fe(0x227)][_0x58d2fe(0x1e7)][_0x58d2fe(0x1ed)](this['_volumeBuffer'],0x0,new Float32Array([...this[_0x58d2fe(0x296)][_0x58d2fe(0x242)],0x0,...this['_volume'][_0x58d2fe(0x1fd)],0x0])),this[_0x58d2fe(0x277)]=this[_0x58d2fe(0x227)][_0x58d2fe(0x1ff)]({'label':_0x58d2fe(0x2a9)+this[_0x58d2fe(0x232)](),'size':this[_0x58d2fe(0x296)][_0x58d2fe(0x19e)][_0x58d2fe(0x225)]*Float32Array[_0x58d2fe(0x1fe)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x58d2fe(0x1e2)]}),this[_0x58d2fe(0x227)][_0x58d2fe(0x1e7)][_0x58d2fe(0x1ed)](this['_dataBuffer'],0x0,new Float32Array(this[_0x58d2fe(0x296)][_0x58d2fe(0x19e)]));}[_0x8cd8eb(0x25c)](){const _0x24ba66=_0x8cd8eb;this['_camera'][_0x24ba66(0x1b8)](this[_0x24ba66(0x1d3)],this['_imgHeight']),this['_device'][_0x24ba66(0x1e7)][_0x24ba66(0x1ed)](this['_cameraBuffer'],this[_0x24ba66(0x28d)][_0x24ba66(0x244)][_0x24ba66(0x1df)]+this[_0x24ba66(0x28d)][_0x24ba66(0x237)][_0x24ba66(0x1df)],this[_0x24ba66(0x28d)][_0x24ba66(0x25b)]);}[_0x8cd8eb(0x26d)](){const _0x1daa51=_0x8cd8eb;this['_device']['queue'][_0x1daa51(0x1ed)](this[_0x1daa51(0x1f0)],0x0,this[_0x1daa51(0x28d)]['_pose']);}[_0x8cd8eb(0x208)](){const _0x5b7edc=_0x8cd8eb;this[_0x5b7edc(0x227)][_0x5b7edc(0x1e7)][_0x5b7edc(0x1ed)](this[_0x5b7edc(0x1f0)],this[_0x5b7edc(0x28d)]['_pose'][_0x5b7edc(0x1df)],this[_0x5b7edc(0x28d)]['_focal']);}async[_0x8cd8eb(0x1eb)](){const _0xf5b847=_0x8cd8eb;let _0x6ddca=await this[_0xf5b847(0x221)]('/shaders/optimized_tracevolumelinear2.wgsl');this[_0xf5b847(0x256)]=this[_0xf5b847(0x227)][_0xf5b847(0x239)]({'label':_0xf5b847(0x240)+this[_0xf5b847(0x232)](),'code':_0x6ddca}),this['_bindGroupLayout']=this[_0xf5b847(0x227)]['createBindGroupLayout']({'label':'Ray\x20Trace\x20Volume\x20Layout\x20'+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0xf5b847(0x1a6)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0xf5b847(0x1a6)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0xf5b847(0x1a6)],'buffer':{'type':_0xf5b847(0x24c)}},{'binding':0x3,'visibility':GPUShaderStage[_0xf5b847(0x1a6)],'storageTexture':{'format':this['_canvasFormat']}}]}),this['_pipelineLayout']=this[_0xf5b847(0x227)][_0xf5b847(0x23a)]({'label':_0xf5b847(0x260),'bindGroupLayouts':[this[_0xf5b847(0x25f)]]});}async[_0x8cd8eb(0x267)](){const _0xc4917c=_0x8cd8eb;this[_0xc4917c(0x254)]=this[_0xc4917c(0x227)][_0xc4917c(0x267)]({'label':_0xc4917c(0x1f5)+this[_0xc4917c(0x232)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0xc4917c(0x256)],'entryPoint':_0xc4917c(0x1d2)}}),this[_0xc4917c(0x1e8)]=this['_device'][_0xc4917c(0x267)]({'label':_0xc4917c(0x214)+this[_0xc4917c(0x232)](),'layout':this[_0xc4917c(0x1dd)],'compute':{'module':this[_0xc4917c(0x256)],'entryPoint':'computeProjectiveMain'}});}[_0x8cd8eb(0x1e1)](_0x4397c6){const _0x480165=_0x8cd8eb;this[_0x480165(0x1a4)]=this[_0x480165(0x227)][_0x480165(0x1e1)]({'label':'Ray\x20Trace\x20Volume\x20Bind\x20Group','layout':this[_0x480165(0x254)][_0x480165(0x275)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x480165(0x1f0)]}},{'binding':0x1,'resource':{'buffer':this[_0x480165(0x282)]}},{'binding':0x2,'resource':{'buffer':this[_0x480165(0x277)]}},{'binding':0x3,'resource':_0x4397c6['createView']()}]}),this[_0x480165(0x1b3)]=Math[_0x480165(0x1ba)](_0x4397c6[_0x480165(0x258)]),this[_0x480165(0x278)]=Math[_0x480165(0x1ba)](_0x4397c6[_0x480165(0x1a2)]);}[_0x8cd8eb(0x1b7)](_0x2e37fe){const _0x1949e7=_0x8cd8eb;this[_0x1949e7(0x28d)]?.[_0x1949e7(0x1c5)]?_0x2e37fe['setPipeline'](this[_0x1949e7(0x1e8)]):_0x2e37fe[_0x1949e7(0x257)](this[_0x1949e7(0x254)]),_0x2e37fe[_0x1949e7(0x1cf)](0x0,this[_0x1949e7(0x1a4)]),_0x2e37fe[_0x1949e7(0x26a)](Math['ceil'](this[_0x1949e7(0x1b3)]/0x10),Math[_0x1949e7(0x1ba)](this[_0x1949e7(0x278)]/0x10));}}class VolumeRenderingLinearDepthObject extends RayTracingObject{constructor(_0x3d78b1,_0x5ad3ca,_0x34d0ac){const _0x47c9d2=_0x8cd8eb;super(_0x3d78b1,_0x5ad3ca),this[_0x47c9d2(0x296)]=new VolumeData('/assets/brainweb-t1-1mm-pn0-rf0.raws'),this[_0x47c9d2(0x28d)]=_0x34d0ac;}async[_0x8cd8eb(0x29a)](){const _0x44d803=_0x8cd8eb;await this[_0x44d803(0x296)]['init'](),this['_cameraBuffer']=this[_0x44d803(0x227)][_0x44d803(0x1ff)]({'label':_0x44d803(0x1bc)+this[_0x44d803(0x232)](),'size':this[_0x44d803(0x28d)]['_pose'][_0x44d803(0x1df)]+this[_0x44d803(0x28d)][_0x44d803(0x237)]['byteLength']+this[_0x44d803(0x28d)][_0x44d803(0x25b)]['byteLength'],'usage':GPUBufferUsage[_0x44d803(0x23d)]|GPUBufferUsage[_0x44d803(0x1e2)]}),this[_0x44d803(0x227)][_0x44d803(0x1e7)]['writeBuffer'](this[_0x44d803(0x1f0)],0x0,this[_0x44d803(0x28d)][_0x44d803(0x244)]),this[_0x44d803(0x227)][_0x44d803(0x1e7)][_0x44d803(0x1ed)](this['_cameraBuffer'],this['_camera']['_pose'][_0x44d803(0x1df)],this[_0x44d803(0x28d)][_0x44d803(0x237)]),this[_0x44d803(0x227)][_0x44d803(0x1e7)][_0x44d803(0x1ed)](this[_0x44d803(0x1f0)],this[_0x44d803(0x28d)]['_pose']['byteLength']+this[_0x44d803(0x28d)][_0x44d803(0x237)][_0x44d803(0x1df)],this[_0x44d803(0x28d)][_0x44d803(0x25b)]),this['_volumeBuffer']=this[_0x44d803(0x227)]['createBuffer']({'label':_0x44d803(0x22e)+this['getName'](),'size':(this['_volume'][_0x44d803(0x242)][_0x44d803(0x225)]+this[_0x44d803(0x296)][_0x44d803(0x1fd)]['length']+0x2)*Float32Array[_0x44d803(0x1fe)],'usage':GPUBufferUsage[_0x44d803(0x23d)]|GPUBufferUsage[_0x44d803(0x1e2)]}),this[_0x44d803(0x227)][_0x44d803(0x1e7)][_0x44d803(0x1ed)](this[_0x44d803(0x282)],0x0,new Float32Array([...this[_0x44d803(0x296)][_0x44d803(0x242)],0x0,...this[_0x44d803(0x296)][_0x44d803(0x1fd)],0x0])),this[_0x44d803(0x277)]=this[_0x44d803(0x227)][_0x44d803(0x1ff)]({'label':'Data\x20'+this[_0x44d803(0x232)](),'size':this[_0x44d803(0x296)][_0x44d803(0x19e)][_0x44d803(0x225)]*Float32Array[_0x44d803(0x1fe)],'usage':GPUBufferUsage[_0x44d803(0x1c3)]|GPUBufferUsage['COPY_DST']}),this[_0x44d803(0x227)][_0x44d803(0x1e7)][_0x44d803(0x1ed)](this[_0x44d803(0x277)],0x0,new Float32Array(this[_0x44d803(0x296)][_0x44d803(0x19e)]));}[_0x8cd8eb(0x25c)](){const _0x5458ad=_0x8cd8eb;this[_0x5458ad(0x28d)][_0x5458ad(0x1b8)](this[_0x5458ad(0x1d3)],this[_0x5458ad(0x298)]),this[_0x5458ad(0x227)][_0x5458ad(0x1e7)][_0x5458ad(0x1ed)](this[_0x5458ad(0x1f0)],this[_0x5458ad(0x28d)]['_pose'][_0x5458ad(0x1df)]+this[_0x5458ad(0x28d)][_0x5458ad(0x237)][_0x5458ad(0x1df)],this['_camera'][_0x5458ad(0x25b)]);}[_0x8cd8eb(0x26d)](){const _0x53b45b=_0x8cd8eb;this[_0x53b45b(0x227)][_0x53b45b(0x1e7)][_0x53b45b(0x1ed)](this[_0x53b45b(0x1f0)],0x0,this[_0x53b45b(0x28d)][_0x53b45b(0x244)]);}[_0x8cd8eb(0x208)](){const _0x96c4f7=_0x8cd8eb;this[_0x96c4f7(0x227)][_0x96c4f7(0x1e7)][_0x96c4f7(0x1ed)](this[_0x96c4f7(0x1f0)],this[_0x96c4f7(0x28d)][_0x96c4f7(0x244)][_0x96c4f7(0x1df)],this[_0x96c4f7(0x28d)][_0x96c4f7(0x237)]);}async[_0x8cd8eb(0x1eb)](){const _0x57ab01=_0x8cd8eb;let _0x203976=await this[_0x57ab01(0x221)](_0x57ab01(0x1f4));this[_0x57ab01(0x256)]=this[_0x57ab01(0x227)][_0x57ab01(0x239)]({'label':_0x57ab01(0x240)+this[_0x57ab01(0x232)](),'code':_0x203976}),this[_0x57ab01(0x25f)]=this[_0x57ab01(0x227)]['createBindGroupLayout']({'label':_0x57ab01(0x1f3)+this[_0x57ab01(0x232)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x57ab01(0x1a6)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x57ab01(0x1a6)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x57ab01(0x24c)}},{'binding':0x3,'visibility':GPUShaderStage[_0x57ab01(0x1a6)],'storageTexture':{'format':this[_0x57ab01(0x1bb)]}}]}),this['_pipelineLayout']=this[_0x57ab01(0x227)][_0x57ab01(0x23a)]({'label':_0x57ab01(0x260),'bindGroupLayouts':[this[_0x57ab01(0x25f)]]});}async[_0x8cd8eb(0x267)](){const _0x2fd638=_0x8cd8eb;this['_computePipeline']=this[_0x2fd638(0x227)]['createComputePipeline']({'label':_0x2fd638(0x1f5)+this[_0x2fd638(0x232)](),'layout':this[_0x2fd638(0x1dd)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x2fd638(0x1d2)}}),this[_0x2fd638(0x1e8)]=this[_0x2fd638(0x227)][_0x2fd638(0x267)]({'label':'Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20'+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this['_shaderModule'],'entryPoint':_0x2fd638(0x1ad)}});}['createBindGroup'](_0x3d81bc){const _0x565fd3=_0x8cd8eb;this[_0x565fd3(0x1a4)]=this[_0x565fd3(0x227)][_0x565fd3(0x1e1)]({'label':_0x565fd3(0x213),'layout':this[_0x565fd3(0x254)][_0x565fd3(0x275)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x565fd3(0x1f0)]}},{'binding':0x1,'resource':{'buffer':this[_0x565fd3(0x282)]}},{'binding':0x2,'resource':{'buffer':this['_dataBuffer']}},{'binding':0x3,'resource':_0x3d81bc[_0x565fd3(0x1d5)]()}]}),this['_wgWidth']=Math[_0x565fd3(0x1ba)](_0x3d81bc[_0x565fd3(0x258)]),this[_0x565fd3(0x278)]=Math[_0x565fd3(0x1ba)](_0x3d81bc[_0x565fd3(0x1a2)]);}[_0x8cd8eb(0x1b7)](_0x2f4f05){const _0xd9ce49=_0x8cd8eb;this[_0xd9ce49(0x28d)]?.[_0xd9ce49(0x1c5)]?_0x2f4f05[_0xd9ce49(0x257)](this[_0xd9ce49(0x1e8)]):_0x2f4f05[_0xd9ce49(0x257)](this[_0xd9ce49(0x254)]),_0x2f4f05[_0xd9ce49(0x1cf)](0x0,this['_bindGroup']),_0x2f4f05['dispatchWorkgroups'](Math[_0xd9ce49(0x1ba)](this[_0xd9ce49(0x1b3)]/0x10),Math[_0xd9ce49(0x1ba)](this[_0xd9ce49(0x278)]/0x10));}}class VolumeRenderingDRRObject extends RayTracingObject{constructor(_0x396f55,_0x47ef49,_0x2847ba){const _0x22fa6f=_0x8cd8eb;super(_0x396f55,_0x47ef49),this[_0x22fa6f(0x296)]=new VolumeData(_0x22fa6f(0x1d7)),this[_0x22fa6f(0x28d)]=_0x2847ba;}async['createGeometry'](){const _0xea59d8=_0x8cd8eb;await this[_0xea59d8(0x296)][_0xea59d8(0x1a8)](),this[_0xea59d8(0x1f0)]=this[_0xea59d8(0x227)]['createBuffer']({'label':_0xea59d8(0x1bc)+this[_0xea59d8(0x232)](),'size':this[_0xea59d8(0x28d)][_0xea59d8(0x244)][_0xea59d8(0x1df)]+this[_0xea59d8(0x28d)]['_focal'][_0xea59d8(0x1df)]+this[_0xea59d8(0x28d)][_0xea59d8(0x25b)][_0xea59d8(0x1df)],'usage':GPUBufferUsage[_0xea59d8(0x23d)]|GPUBufferUsage[_0xea59d8(0x1e2)]}),this[_0xea59d8(0x227)][_0xea59d8(0x1e7)]['writeBuffer'](this['_cameraBuffer'],0x0,this[_0xea59d8(0x28d)]['_pose']),this['_device'][_0xea59d8(0x1e7)][_0xea59d8(0x1ed)](this[_0xea59d8(0x1f0)],this[_0xea59d8(0x28d)][_0xea59d8(0x244)]['byteLength'],this[_0xea59d8(0x28d)][_0xea59d8(0x237)]),this[_0xea59d8(0x227)][_0xea59d8(0x1e7)]['writeBuffer'](this[_0xea59d8(0x1f0)],this[_0xea59d8(0x28d)][_0xea59d8(0x244)][_0xea59d8(0x1df)]+this[_0xea59d8(0x28d)][_0xea59d8(0x237)][_0xea59d8(0x1df)],this[_0xea59d8(0x28d)]['_resolutions']),this[_0xea59d8(0x282)]=this['_device'][_0xea59d8(0x1ff)]({'label':_0xea59d8(0x22e)+this[_0xea59d8(0x232)](),'size':(this[_0xea59d8(0x296)][_0xea59d8(0x242)][_0xea59d8(0x225)]+this[_0xea59d8(0x296)][_0xea59d8(0x1fd)][_0xea59d8(0x225)]+0x2)*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0xea59d8(0x1e2)]}),this[_0xea59d8(0x227)]['queue'][_0xea59d8(0x1ed)](this['_volumeBuffer'],0x0,new Float32Array([...this[_0xea59d8(0x296)][_0xea59d8(0x242)],0x0,...this['_volume'][_0xea59d8(0x1fd)],0x0])),this[_0xea59d8(0x277)]=this['_device']['createBuffer']({'label':_0xea59d8(0x2a9)+this[_0xea59d8(0x232)](),'size':this[_0xea59d8(0x296)][_0xea59d8(0x19e)][_0xea59d8(0x225)]*Float32Array[_0xea59d8(0x1fe)],'usage':GPUBufferUsage[_0xea59d8(0x1c3)]|GPUBufferUsage['COPY_DST']}),this[_0xea59d8(0x227)][_0xea59d8(0x1e7)][_0xea59d8(0x1ed)](this['_dataBuffer'],0x0,new Float32Array(this['_volume']['_data']));}[_0x8cd8eb(0x25c)](){const _0x4a616a=_0x8cd8eb;this[_0x4a616a(0x28d)][_0x4a616a(0x1b8)](this['_imgWidth'],this['_imgHeight']),this[_0x4a616a(0x227)][_0x4a616a(0x1e7)][_0x4a616a(0x1ed)](this[_0x4a616a(0x1f0)],this[_0x4a616a(0x28d)]['_pose']['byteLength']+this[_0x4a616a(0x28d)][_0x4a616a(0x237)]['byteLength'],this[_0x4a616a(0x28d)][_0x4a616a(0x25b)]);}[_0x8cd8eb(0x26d)](){const _0x44292b=_0x8cd8eb;this[_0x44292b(0x227)][_0x44292b(0x1e7)][_0x44292b(0x1ed)](this[_0x44292b(0x1f0)],0x0,this[_0x44292b(0x28d)][_0x44292b(0x244)]);}[_0x8cd8eb(0x208)](){const _0x57dbb7=_0x8cd8eb;this[_0x57dbb7(0x227)][_0x57dbb7(0x1e7)]['writeBuffer'](this[_0x57dbb7(0x1f0)],this[_0x57dbb7(0x28d)][_0x57dbb7(0x244)]['byteLength'],this[_0x57dbb7(0x28d)][_0x57dbb7(0x237)]);}async['createShaders'](){const _0x5e4594=_0x8cd8eb;let _0x11966e=await this[_0x5e4594(0x221)](_0x5e4594(0x246));this[_0x5e4594(0x256)]=this[_0x5e4594(0x227)][_0x5e4594(0x239)]({'label':'\x20Shader\x20'+this[_0x5e4594(0x232)](),'code':_0x11966e}),this[_0x5e4594(0x25f)]=this[_0x5e4594(0x227)][_0x5e4594(0x1ab)]({'label':'Ray\x20Trace\x20Volume\x20Layout\x20'+this[_0x5e4594(0x232)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x5e4594(0x1a6)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x5e4594(0x1a6)],'buffer':{'type':_0x5e4594(0x24c)}},{'binding':0x3,'visibility':GPUShaderStage[_0x5e4594(0x1a6)],'storageTexture':{'format':this[_0x5e4594(0x1bb)]}}]}),this[_0x5e4594(0x1dd)]=this[_0x5e4594(0x227)][_0x5e4594(0x23a)]({'label':_0x5e4594(0x260),'bindGroupLayouts':[this[_0x5e4594(0x25f)]]});}async['createComputePipeline'](){const _0x90f153=_0x8cd8eb;this[_0x90f153(0x254)]=this['_device'][_0x90f153(0x267)]({'label':_0x90f153(0x1f5)+this['getName'](),'layout':this[_0x90f153(0x1dd)],'compute':{'module':this[_0x90f153(0x256)],'entryPoint':'computeOrthogonalMain'}}),this[_0x90f153(0x1e8)]=this[_0x90f153(0x227)]['createComputePipeline']({'label':_0x90f153(0x214)+this[_0x90f153(0x232)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x90f153(0x256)],'entryPoint':'computeProjectiveMain'}});}[_0x8cd8eb(0x1e1)](_0x49879a){const _0x1e681c=_0x8cd8eb;this[_0x1e681c(0x1a4)]=this[_0x1e681c(0x227)]['createBindGroup']({'label':_0x1e681c(0x213),'layout':this[_0x1e681c(0x254)][_0x1e681c(0x275)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x1e681c(0x1f0)]}},{'binding':0x1,'resource':{'buffer':this['_volumeBuffer']}},{'binding':0x2,'resource':{'buffer':this[_0x1e681c(0x277)]}},{'binding':0x3,'resource':_0x49879a[_0x1e681c(0x1d5)]()}]}),this['_wgWidth']=Math['ceil'](_0x49879a['width']),this[_0x1e681c(0x278)]=Math[_0x1e681c(0x1ba)](_0x49879a[_0x1e681c(0x1a2)]);}[_0x8cd8eb(0x1b7)](_0xd0bf5f){const _0x30f544=_0x8cd8eb;this[_0x30f544(0x28d)]?.[_0x30f544(0x1c5)]?_0xd0bf5f['setPipeline'](this[_0x30f544(0x1e8)]):_0xd0bf5f[_0x30f544(0x257)](this['_computePipeline']),_0xd0bf5f[_0x30f544(0x1cf)](0x0,this[_0x30f544(0x1a4)]),_0xd0bf5f['dispatchWorkgroups'](Math[_0x30f544(0x1ba)](this[_0x30f544(0x1b3)]/0x10),Math[_0x30f544(0x1ba)](this['_wgHeight']/0x10));}}class VolumeRenderingCinematicObject extends RayTracingObject{constructor(_0x3e8fae,_0x17a369,_0x2c4a76){const _0x510ef6=_0x8cd8eb;super(_0x3e8fae,_0x17a369),this[_0x510ef6(0x296)]=new VolumeData('/assets/brainweb-t1-1mm-pn0-rf0.raws'),this['_camera']=_0x2c4a76;}async[_0x8cd8eb(0x29a)](){const _0x11a4d7=_0x8cd8eb;await this[_0x11a4d7(0x296)][_0x11a4d7(0x1a8)](),this[_0x11a4d7(0x1f0)]=this[_0x11a4d7(0x227)][_0x11a4d7(0x1ff)]({'label':_0x11a4d7(0x1bc)+this[_0x11a4d7(0x232)](),'size':this[_0x11a4d7(0x28d)][_0x11a4d7(0x244)]['byteLength']+this[_0x11a4d7(0x28d)][_0x11a4d7(0x237)][_0x11a4d7(0x1df)]+this['_camera'][_0x11a4d7(0x25b)]['byteLength'],'usage':GPUBufferUsage[_0x11a4d7(0x23d)]|GPUBufferUsage[_0x11a4d7(0x1e2)]}),this[_0x11a4d7(0x227)]['queue'][_0x11a4d7(0x1ed)](this[_0x11a4d7(0x1f0)],0x0,this[_0x11a4d7(0x28d)][_0x11a4d7(0x244)]),this['_device'][_0x11a4d7(0x1e7)]['writeBuffer'](this[_0x11a4d7(0x1f0)],this['_camera'][_0x11a4d7(0x244)][_0x11a4d7(0x1df)],this[_0x11a4d7(0x28d)][_0x11a4d7(0x237)]),this[_0x11a4d7(0x227)][_0x11a4d7(0x1e7)]['writeBuffer'](this[_0x11a4d7(0x1f0)],this[_0x11a4d7(0x28d)][_0x11a4d7(0x244)]['byteLength']+this[_0x11a4d7(0x28d)][_0x11a4d7(0x237)][_0x11a4d7(0x1df)],this['_camera']['_resolutions']),this['_volumeBuffer']=this[_0x11a4d7(0x227)][_0x11a4d7(0x1ff)]({'label':_0x11a4d7(0x22e)+this[_0x11a4d7(0x232)](),'size':(this[_0x11a4d7(0x296)]['_dims']['length']+this[_0x11a4d7(0x296)][_0x11a4d7(0x1fd)]['length']+0x2)*Float32Array[_0x11a4d7(0x1fe)],'usage':GPUBufferUsage[_0x11a4d7(0x23d)]|GPUBufferUsage[_0x11a4d7(0x1e2)]}),this[_0x11a4d7(0x227)][_0x11a4d7(0x1e7)][_0x11a4d7(0x1ed)](this['_volumeBuffer'],0x0,new Float32Array([...this[_0x11a4d7(0x296)][_0x11a4d7(0x242)],0x0,...this[_0x11a4d7(0x296)][_0x11a4d7(0x1fd)],0x0])),this[_0x11a4d7(0x277)]=this['_device']['createBuffer']({'label':_0x11a4d7(0x2a9)+this[_0x11a4d7(0x232)](),'size':this['_volume']['_data'][_0x11a4d7(0x225)]*Float32Array[_0x11a4d7(0x1fe)],'usage':GPUBufferUsage[_0x11a4d7(0x1c3)]|GPUBufferUsage[_0x11a4d7(0x1e2)]}),this[_0x11a4d7(0x227)][_0x11a4d7(0x1e7)][_0x11a4d7(0x1ed)](this[_0x11a4d7(0x277)],0x0,new Float32Array(this[_0x11a4d7(0x296)][_0x11a4d7(0x19e)]));}['updateGeometry'](){const _0x58ac2d=_0x8cd8eb;this[_0x58ac2d(0x28d)][_0x58ac2d(0x1b8)](this[_0x58ac2d(0x1d3)],this[_0x58ac2d(0x298)]),this['_device'][_0x58ac2d(0x1e7)][_0x58ac2d(0x1ed)](this[_0x58ac2d(0x1f0)],this['_camera'][_0x58ac2d(0x244)][_0x58ac2d(0x1df)]+this[_0x58ac2d(0x28d)]['_focal']['byteLength'],this[_0x58ac2d(0x28d)]['_resolutions']);}[_0x8cd8eb(0x26d)](){const _0x55eb18=_0x8cd8eb;this[_0x55eb18(0x227)][_0x55eb18(0x1e7)][_0x55eb18(0x1ed)](this[_0x55eb18(0x1f0)],0x0,this[_0x55eb18(0x28d)]['_pose']);}['updateCameraFocal'](){const _0x2b26b5=_0x8cd8eb;this['_device']['queue'][_0x2b26b5(0x1ed)](this[_0x2b26b5(0x1f0)],this['_camera'][_0x2b26b5(0x244)][_0x2b26b5(0x1df)],this[_0x2b26b5(0x28d)][_0x2b26b5(0x237)]);}async[_0x8cd8eb(0x1eb)](){const _0xf4aeb9=_0x8cd8eb;let _0x4a5c0b=await this[_0xf4aeb9(0x221)](_0xf4aeb9(0x288));this[_0xf4aeb9(0x256)]=this[_0xf4aeb9(0x227)][_0xf4aeb9(0x239)]({'label':_0xf4aeb9(0x240)+this[_0xf4aeb9(0x232)](),'code':_0x4a5c0b}),this[_0xf4aeb9(0x25f)]=this[_0xf4aeb9(0x227)][_0xf4aeb9(0x1ab)]({'label':_0xf4aeb9(0x1f3)+this[_0xf4aeb9(0x232)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0xf4aeb9(0x1a6)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0xf4aeb9(0x1a6)],'buffer':{'type':_0xf4aeb9(0x24c)}},{'binding':0x3,'visibility':GPUShaderStage[_0xf4aeb9(0x1a6)],'storageTexture':{'format':this[_0xf4aeb9(0x1bb)]}}]}),this[_0xf4aeb9(0x1dd)]=this[_0xf4aeb9(0x227)][_0xf4aeb9(0x23a)]({'label':_0xf4aeb9(0x260),'bindGroupLayouts':[this[_0xf4aeb9(0x25f)]]});}async['createComputePipeline'](){const _0x5116f6=_0x8cd8eb;this[_0x5116f6(0x254)]=this[_0x5116f6(0x227)]['createComputePipeline']({'label':_0x5116f6(0x1f5)+this[_0x5116f6(0x232)](),'layout':this[_0x5116f6(0x1dd)],'compute':{'module':this[_0x5116f6(0x256)],'entryPoint':_0x5116f6(0x1d2)}}),this['_computeProjectivePipeline']=this['_device'][_0x5116f6(0x267)]({'label':'Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20'+this[_0x5116f6(0x232)](),'layout':this[_0x5116f6(0x1dd)],'compute':{'module':this[_0x5116f6(0x256)],'entryPoint':_0x5116f6(0x1ad)}});}[_0x8cd8eb(0x1e1)](_0x4c6050){const _0x5c926f=_0x8cd8eb;this[_0x5c926f(0x1a4)]=this['_device'][_0x5c926f(0x1e1)]({'label':_0x5c926f(0x213),'layout':this['_computePipeline']['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x5c926f(0x1f0)]}},{'binding':0x1,'resource':{'buffer':this[_0x5c926f(0x282)]}},{'binding':0x2,'resource':{'buffer':this[_0x5c926f(0x277)]}},{'binding':0x3,'resource':_0x4c6050[_0x5c926f(0x1d5)]()}]}),this['_wgWidth']=Math[_0x5c926f(0x1ba)](_0x4c6050['width']),this[_0x5c926f(0x278)]=Math['ceil'](_0x4c6050[_0x5c926f(0x1a2)]);}['compute'](_0x26acae){const _0x495e4f=_0x8cd8eb;this[_0x495e4f(0x28d)]?.[_0x495e4f(0x1c5)]?_0x26acae[_0x495e4f(0x257)](this['_computeProjectivePipeline']):_0x26acae[_0x495e4f(0x257)](this['_computePipeline']),_0x26acae[_0x495e4f(0x1cf)](0x0,this[_0x495e4f(0x1a4)]),_0x26acae[_0x495e4f(0x26a)](Math['ceil'](this['_wgWidth']/0x10),Math[_0x495e4f(0x1ba)](this[_0x495e4f(0x278)]/0x10));}}class Math3D{static['translate'](_0x4a329b,_0x5124fa=0x0,_0xe9f0a1=0x0,_0x2e0e15=0x0){return[_0x4a329b[0x0]+_0x5124fa,_0x4a329b[0x1]+_0xe9f0a1,_0x4a329b[0x2]+_0x2e0e15];}static[_0x8cd8eb(0x295)](_0x2f1874,_0x3135e9,_0x12bb26){const _0x43798d=_0x8cd8eb;let _0x15748c=Math['cos'](_0x12bb26),_0x5cee55=Math[_0x43798d(0x271)](_0x12bb26);switch(_0x3135e9){case 0x0:return[_0x2f1874[0x0],_0x2f1874[0x1]*_0x15748c-_0x2f1874[0x2]*_0x5cee55,_0x2f1874[0x1]*_0x5cee55+_0x2f1874[0x2]*_0x15748c];case 0x1:return[_0x2f1874[0x0]*_0x15748c+_0x2f1874[0x2]*_0x5cee55,_0x2f1874[0x1],-_0x2f1874[0x0]*_0x5cee55+_0x2f1874[0x2]*_0x15748c];case 0x2:return[_0x2f1874[0x0]*_0x15748c-_0x2f1874[0x1]*_0x5cee55,_0x2f1874[0x0]*_0x5cee55+_0x2f1874[0x1]*_0x15748c,_0x2f1874[0x2]];default:return _0x2f1874;}}static[_0x8cd8eb(0x28f)](_0x5bf518,_0x5ad788){const _0x59d045=_0x8cd8eb;return _0x5bf518=Math3D[_0x59d045(0x295)](_0x5bf518,0x0,_0x5ad788[0x4]),_0x5bf518=Math3D[_0x59d045(0x295)](_0x5bf518,0x1,_0x5ad788[0x5]),_0x5bf518=Math3D[_0x59d045(0x295)](_0x5bf518,0x2,_0x5ad788[0x6]),_0x5bf518=Math3D['translate'](_0x5bf518,_0x5ad788[0x0],_0x5ad788[0x1],_0x5ad788[0x2]),_0x5bf518;}static[_0x8cd8eb(0x204)](_0x308bc9,_0x2653c0){const _0x58b4e5=_0x8cd8eb;return _0x308bc9=Math3D['rotate'](_0x308bc9,0x0,_0x2653c0[0x4]),_0x308bc9=Math3D[_0x58b4e5(0x295)](_0x308bc9,0x1,_0x2653c0[0x5]),_0x308bc9=Math3D[_0x58b4e5(0x295)](_0x308bc9,0x2,_0x2653c0[0x6]),_0x308bc9;}static[_0x8cd8eb(0x28f)](_0x1c7751,_0x361313){const _0x31bbae=_0x8cd8eb;return _0x1c7751=Math3D['translate'](_0x1c7751,-_0x361313[0x0],-_0x361313[0x1],-_0x361313[0x2]),_0x1c7751=Math3D[_0x31bbae(0x295)](_0x1c7751,0x2,-_0x361313[0x6]),_0x1c7751=Math3D['rotate'](_0x1c7751,0x1,-_0x361313[0x5]),_0x1c7751=Math3D['rotate'](_0x1c7751,0x0,-_0x361313[0x4]),_0x1c7751;}static[_0x8cd8eb(0x204)](_0xa163e2,_0x447ce2){const _0x5d8573=_0x8cd8eb;return _0xa163e2=Math3D['rotate'](_0xa163e2,0x2,-_0x447ce2[0x6]),_0xa163e2=Math3D[_0x5d8573(0x295)](_0xa163e2,0x1,-_0x447ce2[0x5]),_0xa163e2=Math3D[_0x5d8573(0x295)](_0xa163e2,0x0,-_0x447ce2[0x4]),_0xa163e2;}}function _0x6efc(){const _0x57c51f=['short','1615688hkVwUb','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_textCanvas','catch','_sizes','BYTES_PER_ELEMENT','createBuffer','style','position','mousemove','map','applyPoseToDir','linear','setInt16','userAgent','updateCameraFocal','innerWidth','keyup','_lines','isLittleEndian','TEXTURE_BINDING','_canvasWidth','touchend','status','238281cgitsL','Ray\x20Tracer\x20Pipeline','Ray\x20Trace\x20Volume\x20Bind\x20Group','Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20','getContext','getInt32','_canvas','configure','decode','1px\x20solid\x20red','????????','keydown','createRenderPipeline','top','toggleVisibility','Simple','loadShader','_tracer','reduce','mouseleave','length','Ray\x20Tracing\x20Pipeline\x20','_device','char','Depth','resetPose','uint','innerHTML','_objectCnt','Volume\x20','mouseup','_context','beginRenderPass','getName','setTracerObject','remove','readyState','getCurrentTexture','_focal','devicePixelRatio','createShaderModule','createPipelineLayout','Linear','responseText','UNIFORM','createObjectURL','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','\x20Shader\x20','getUint32','_dims','key','_pose','push','/shaders/optimized_tracevolumedrr2.wgsl','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','log','buffer','_fontSize','no-cache,\x20no-store,\x20max-age=0','read-only-storage','Ray\x20Tracer\x20Sampler','16421820iPjxXL','int','appendChild','createCommandEncoder','_offScreenTexture','renderCanvas','_computePipeline','beginComputePass','_shaderModule','setPipeline','width','rotateY','forEach','_resolutions','updateGeometry','onload','</br>','_bindGroupLayout','Ray\x20Trace\x20Volume\x20Pipeline\x20Layout','Cinematic','_objects','transformOrigin','createElement','setRequestHeader','createSampler','createComputePipeline','border','readBinary','dispatchWorkgroups','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','white','updateCameraPose','open','2ibQMiJ','gpu','sin','body','Network\x20error\x20loading\x20volume\x20byte\x20data','statusText','getBindGroupLayout','none','_dataBuffer','_wgHeight','data','message','requestAdapter','renderToSelectedView','onerror','getElementById','canvas','innerHeight','read','_volumeBuffer','Error\x20loading\x20volume\x20byte\x20data:\x20','_outputSizeBuffer','vertexMain','_width','touchmove','/shaders/optimized_tracevolumecinematic2.wgsl','absolute','getInt8','clear','revokeObjectURL','_camera','now','applyPoseToPoint','Ray\x20Tracer\x20output\x20size\x20buffer','initial','moveY','updateText','ushort','rotate','_volume','Ray\x20Tracer\x20Shader','_imgHeight','_filename','createGeometry','end','finish','_canvasHeight','resize','_paddingtop','rgba8unorm','constructor','render','10px','click','readBytes','measureText','split','hidden','Data\x20','resizeCanvas','/shaders/optimized_tracenothing.wgsl','getFloat64','GET','STORAGE_BINDING','send','center','_data','_height','right','addEventListener','height','mouseenter','_bindGroup','MIP','COMPUTE','fill','init','application/octet-stream','_sampler','createBindGroupLayout','replace','computeProjectiveMain','moveZ','font','2395952wEQLrs','_textFont','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','_wgWidth','83514YsXFIJ','requestDevice','download.raws','compute','updateSize','Couldn\x27t\x20request\x20WebGPU\x20adapter.','ceil','_canvasFormat','Camera\x20','Ray\x20Tracing\x20Bind\x20Group','/shaders/optimized_tracevolumemip2.wgsl','rotateX','getPreferredCanvasFormat','537315lnZsCE','arraybuffer','STORAGE','9jaouXU','_isProjective','float','/shaders/optimized_tracevolumesimple2.wgsl','createTexture','_paddingx','pointer-events','7rijYQB','bind','_pipeline','rotateZ','setBindGroup','getUint16','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','computeOrthogonalMain','_imgWidth','moveX','createView','submit','/assets/brainweb-t1-1mm-pn0-rf0.raws','_clearColor','webgpu','touchstart','3168550HHkhCq','clearRect','_pipelineLayout','mousedown','byteLength','rgba(1,\x201,\x201,\x200.5)','createBindGroup','COPY_DST','_lineSpacing','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0am/M:\x20Change\x20Transfer\x20Function\x20(????????)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','updateTextRegion','queue','_computeProjectivePipeline','setProperty','computeMain','createShaders','18px\x20Arial','writeBuffer','store','left','_cameraBuffer','DRR','_textContext','Ray\x20Trace\x20Volume\x20Layout\x20','/shaders/optimized_tracevolumelineardepth2.wgsl','Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20','fillStyle','write'];_0x6efc=function(){return _0x57c51f;};return _0x6efc();}class Camera{constructor(_0xef5f1,_0x42dac6){const _0x35a814=_0x8cd8eb;this[_0x35a814(0x244)]=new Float32Array(Array(0x8)[_0x35a814(0x1a7)](0x0)),this[_0x35a814(0x237)]=new Float32Array(Array(0x2)['fill'](0x1)),this[_0x35a814(0x25b)]=new Float32Array([_0xef5f1,_0x42dac6]),this[_0x35a814(0x1c5)]=![];}[_0x8cd8eb(0x22a)](){const _0x4113ac=_0x8cd8eb;for(let _0x274601=0x0;_0x274601<0x8;++_0x274601)this[_0x4113ac(0x244)][_0x274601]=0x0;this[_0x4113ac(0x237)][0x0]=0x1,this[_0x4113ac(0x237)][0x1]=0x1;}['updatePose'](_0x336376){const _0x309088=_0x8cd8eb;for(let _0x2b3e5e=0x0;_0x2b3e5e<0x8;++_0x2b3e5e)this[_0x309088(0x244)][_0x2b3e5e]=_0x336376[_0x2b3e5e];}[_0x8cd8eb(0x1b8)](_0x1053a4,_0x17bd45){const _0x369af8=_0x8cd8eb;this[_0x369af8(0x25b)][0x0]=_0x1053a4,this[_0x369af8(0x25b)][0x1]=_0x17bd45;}[_0x8cd8eb(0x1d4)](_0x4f1cf3){const _0xd6cf4a=_0x8cd8eb;let _0x21460b=Math3D['applyPoseToDir']([0x1,0x0,0x0],this[_0xd6cf4a(0x244)]);console[_0xd6cf4a(0x248)](_0x21460b),this[_0xd6cf4a(0x244)][0x0]+=_0x4f1cf3*_0x21460b[0x0],this[_0xd6cf4a(0x244)][0x1]-=_0x4f1cf3*_0x21460b[0x1],this[_0xd6cf4a(0x244)][0x2]-=_0x4f1cf3*_0x21460b[0x2];}[_0x8cd8eb(0x292)](_0x41b51d){const _0x5bc99a=_0x8cd8eb;let _0x42a892=Math3D[_0x5bc99a(0x204)]([0x0,0x1,0x0],this[_0x5bc99a(0x244)]);this['_pose'][0x0]+=_0x41b51d*_0x42a892[0x0],this[_0x5bc99a(0x244)][0x1]+=_0x41b51d*_0x42a892[0x1],this[_0x5bc99a(0x244)][0x2]+=_0x41b51d*_0x42a892[0x2];}['moveZ'](_0x55de0c){const _0x190e67=_0x8cd8eb;let _0x4de1dc=Math3D[_0x190e67(0x204)]([0x0,0x0,0x1],this[_0x190e67(0x244)]);this[_0x190e67(0x244)][0x0]+=_0x55de0c*_0x4de1dc[0x0],this[_0x190e67(0x244)][0x1]-=_0x55de0c*_0x4de1dc[0x1],this[_0x190e67(0x244)][0x2]+=_0x55de0c*_0x4de1dc[0x2];}[_0x8cd8eb(0x1bf)](_0xb35cdb){const _0x149a48=_0x8cd8eb;this[_0x149a48(0x244)][0x4]+=_0xb35cdb;}['rotateY'](_0x31c7b2){const _0x1255fc=_0x8cd8eb;this[_0x1255fc(0x244)][0x5]+=_0x31c7b2;}[_0x8cd8eb(0x1ce)](_0x6d9e40){this['_pose'][0x6]+=_0x6d9e40;}}async function init(){const _0x5b4fd0=_0x8cd8eb,_0xf2fe9a=document[_0x5b4fd0(0x264)](_0x5b4fd0(0x27f));_0xf2fe9a['id']=_0x5b4fd0(0x253),document[_0x5b4fd0(0x272)]['appendChild'](_0xf2fe9a);const _0x500233=new RayTracer(_0xf2fe9a);await _0x500233[_0x5b4fd0(0x1a8)]();var _0xe4be00=_0x5b4fd0(0x1e4),_0x49985f=new StandardTextObject(_0xe4be00);let _0x5ddf15=new Camera();_0x5ddf15[_0x5b4fd0(0x244)][0x2]=-0.7*0x2,_0x5ddf15[_0x5b4fd0(0x1c5)]=!![];var _0x3d0438=0x5,_0x11eccc=[_0x5b4fd0(0x220),_0x5b4fd0(0x1a5),_0x5b4fd0(0x23b),_0x5b4fd0(0x229),_0x5b4fd0(0x1f1),_0x5b4fd0(0x261)],_0x333aac=null,_0x14586f=async()=>{const _0x4a2a10=_0x5b4fd0;_0xe4be00=_0xe4be00[_0x4a2a10(0x1ac)](_0x4a2a10(0x21b),_0x11eccc[_0x3d0438]);switch(_0x3d0438){case 0x0:_0x333aac=new VolumeRenderingSimpleObject(_0x500233[_0x4a2a10(0x227)],_0x500233[_0x4a2a10(0x1bb)],_0x5ddf15),_0xe4be00=_0xe4be00['replace'](_0x11eccc[_0x11eccc['length']-0x1],_0x11eccc[_0x3d0438]);break;case 0x1:_0x333aac=new VolumeRenderingMIPObject(_0x500233[_0x4a2a10(0x227)],_0x500233['_canvasFormat'],_0x5ddf15),_0xe4be00=_0xe4be00[_0x4a2a10(0x1ac)](_0x11eccc[_0x3d0438-0x1],_0x11eccc[_0x3d0438]);break;case 0x2:_0x333aac=new VolumeRenderingLinearObject(_0x500233[_0x4a2a10(0x227)],_0x500233[_0x4a2a10(0x1bb)],_0x5ddf15),_0xe4be00=_0xe4be00[_0x4a2a10(0x1ac)](_0x11eccc[_0x3d0438-0x1],_0x11eccc[_0x3d0438]);break;case 0x3:_0x333aac=new VolumeRenderingLinearDepthObject(_0x500233[_0x4a2a10(0x227)],_0x500233[_0x4a2a10(0x1bb)],_0x5ddf15),_0xe4be00=_0xe4be00['replace'](_0x11eccc[_0x3d0438-0x1],_0x11eccc[_0x3d0438]);break;case 0x4:_0x333aac=new VolumeRenderingDRRObject(_0x500233['_device'],_0x500233['_canvasFormat'],_0x5ddf15),_0xe4be00=_0xe4be00[_0x4a2a10(0x1ac)](_0x11eccc[_0x3d0438-0x1],_0x11eccc[_0x3d0438]);break;case 0x5:_0x333aac=new VolumeRenderingCinematicObject(_0x500233['_device'],_0x500233[_0x4a2a10(0x1bb)],_0x5ddf15),_0xe4be00=_0xe4be00[_0x4a2a10(0x1ac)](_0x11eccc[_0x3d0438-0x1],_0x11eccc[_0x3d0438]);break;}_0x49985f[_0x4a2a10(0x293)](_0xe4be00),await _0x500233[_0x4a2a10(0x233)](_0x333aac);};await _0x14586f();let _0x321989='??';var _0x96c350=new StandardTextObject('fps:\x20'+_0x321989),_0x1cb306=0.05;window[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x21c),async _0x3014fe=>{const _0x57f6ed=_0x5b4fd0;switch(_0x3014fe[_0x57f6ed(0x243)]){case'h':case'H':_0x49985f['toggleVisibility']();break;case'f':case'F':_0x96c350[_0x57f6ed(0x21f)]();break;case'w':case'W':_0x5ddf15[_0x57f6ed(0x292)](-_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case's':case'S':_0x5ddf15[_0x57f6ed(0x292)](_0x1cb306),_0x333aac?.['updateCameraPose']();break;case'a':case'A':_0x5ddf15[_0x57f6ed(0x1d4)](-_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'd':case'D':_0x5ddf15[_0x57f6ed(0x1d4)](_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'q':case'Q':_0x5ddf15[_0x57f6ed(0x1ae)](-_0x1cb306),_0x333aac?.['updateCameraPose']();break;case'e':case'E':_0x5ddf15[_0x57f6ed(0x1ae)](_0x1cb306),_0x333aac?.['updateCameraPose']();break;case'i':case'I':_0x5ddf15['rotateX'](_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'k':case'K':_0x5ddf15[_0x57f6ed(0x1bf)](-_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'j':case'J':_0x5ddf15[_0x57f6ed(0x259)](-_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'l':case'L':_0x5ddf15[_0x57f6ed(0x259)](_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'u':case'U':_0x5ddf15[_0x57f6ed(0x1ce)](_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'o':case'O':_0x5ddf15['rotateZ'](-_0x1cb306),_0x333aac?.[_0x57f6ed(0x26d)]();break;case'c':case'C':_0x5ddf15[_0x57f6ed(0x1c5)]=!_0x5ddf15[_0x57f6ed(0x1c5)];break;case'r':case'R':_0x5ddf15[_0x57f6ed(0x22a)](),_0x5ddf15[_0x57f6ed(0x244)][0x6]=0.7,_0x333aac?.[_0x57f6ed(0x26d)](),_0x333aac?.[_0x57f6ed(0x208)]();break;case'[':_0x5ddf15[_0x57f6ed(0x237)][0x0]*=1.1,_0x333aac?.[_0x57f6ed(0x208)]();break;case']':_0x5ddf15[_0x57f6ed(0x237)][0x0]/=1.1,_0x333aac?.[_0x57f6ed(0x208)]();break;case'{':_0x5ddf15[_0x57f6ed(0x237)][0x1]*=1.1,_0x333aac?.[_0x57f6ed(0x208)]();break;case'}':_0x5ddf15[_0x57f6ed(0x237)][0x1]/=1.1,_0x333aac?.['updateCameraFocal']();break;case'm':case'M':_0x3d0438=(_0x3d0438+0x1)%_0x11eccc[_0x57f6ed(0x225)],await _0x14586f();break;}}),window[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x20a),_0x56aba7=>{});let _0x21abea=async _0x807d3f=>{},_0x4649bd=async _0x1589e6=>{},_0x311833=_0x4b57e8=>{};_0xf2fe9a['addEventListener'](_0x5b4fd0(0x1de),_0x21abea),_0xf2fe9a[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x202),_0x4649bd),_0xf2fe9a['addEventListener'](_0x5b4fd0(0x22f),_0x311833),_0xf2fe9a[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x1a3),_0x53f65d=>{}),_0xf2fe9a['addEventListener'](_0x5b4fd0(0x224),_0xc5f540=>{}),_0xf2fe9a[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x1da),_0x21abea),_0xf2fe9a['addEventListener'](_0x5b4fd0(0x287),_0x4649bd),_0xf2fe9a[_0x5b4fd0(0x1a1)](_0x5b4fd0(0x20f),_0x311833),_0x49985f[_0x5b4fd0(0x1fb)][_0x5b4fd0(0x200)][_0x5b4fd0(0x1e9)](_0x5b4fd0(0x1ca),_0x5b4fd0(0x276)),_0x96c350['_textCanvas'][_0x5b4fd0(0x200)][_0x5b4fd0(0x1e9)]('pointer-events',_0x5b4fd0(0x276));var _0x2e27f0=0x0,_0x123d79=0x3c,_0x4a43da=0x1/_0x123d79,_0x578be9=_0x4a43da*0x3e8,_0x236f8d;let _0x50fbe1=()=>{const _0x23a4c0=_0x5b4fd0;let _0xc60757=Date[_0x23a4c0(0x28e)]()-_0x236f8d;_0xc60757>_0x578be9&&(++_0x2e27f0,_0x236f8d=Date[_0x23a4c0(0x28e)]()-_0xc60757%_0x578be9,_0x500233[_0x23a4c0(0x2a2)]()),requestAnimationFrame(_0x50fbe1);};return _0x236f8d=Date['now'](),_0x50fbe1(),_0x96c350[_0x5b4fd0(0x1fb)][_0x5b4fd0(0x200)][_0x5b4fd0(0x1e9)](_0x5b4fd0(0x1ef),_0x5b4fd0(0x291)),_0x96c350[_0x5b4fd0(0x1fb)][_0x5b4fd0(0x200)][_0x5b4fd0(0x1a0)]=_0x5b4fd0(0x2a3),setInterval(()=>{const _0xa96506=_0x5b4fd0;_0x321989=_0x2e27f0,_0x2e27f0=0x0,_0x96c350[_0xa96506(0x293)]('fps:\x20'+_0x321989);},0x3e8),_0x500233;}init()['then'](_0x47710f=>{const _0x37bb9a=_0x8cd8eb;console[_0x37bb9a(0x248)](_0x47710f);})[_0x8cd8eb(0x1fc)](_0x569f24=>{const _0x4060c8=_0x8cd8eb,_0x4076b6=document[_0x4060c8(0x264)]('p');_0x4076b6[_0x4060c8(0x22c)]=navigator[_0x4060c8(0x207)]+_0x4060c8(0x25e)+_0x569f24[_0x4060c8(0x27a)],document[_0x4060c8(0x272)][_0x4060c8(0x250)](_0x4076b6),document[_0x4060c8(0x27e)](_0x4060c8(0x253))[_0x4060c8(0x234)]();});
