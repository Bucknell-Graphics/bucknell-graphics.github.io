/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x4b3d1c=_0xdcc1;(function(_0x5237eb,_0x38996c){const _0x50c71a=_0xdcc1,_0x45bdda=_0x5237eb();while(!![]){try{const _0x1472e5=parseInt(_0x50c71a(0x1bf))/0x1+-parseInt(_0x50c71a(0x1e4))/0x2*(parseInt(_0x50c71a(0x18f))/0x3)+parseInt(_0x50c71a(0x25c))/0x4+-parseInt(_0x50c71a(0x186))/0x5+-parseInt(_0x50c71a(0x26a))/0x6+parseInt(_0x50c71a(0x222))/0x7*(parseInt(_0x50c71a(0x267))/0x8)+parseInt(_0x50c71a(0x1ab))/0x9*(parseInt(_0x50c71a(0x181))/0xa);if(_0x1472e5===_0x38996c)break;else _0x45bdda['push'](_0x45bdda['shift']());}catch(_0x2b857f){_0x45bdda['push'](_0x45bdda['shift']());}}}(_0x37e6,0x2e49c));class Renderer{constructor(_0x46fdb1){const _0x9d29bf=_0xdcc1;this[_0x9d29bf(0x244)]=_0x46fdb1,this[_0x9d29bf(0x1a8)]=[],this[_0x9d29bf(0x1c4)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x4b3d1c(0x170)](){const _0x2a434b=_0x4b3d1c;if(!navigator[_0x2a434b(0x1da)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x1b14a3=await navigator[_0x2a434b(0x1da)][_0x2a434b(0x24f)]();if(!_0x1b14a3)throw Error(_0x2a434b(0x1b7));this[_0x2a434b(0x1f8)]=await _0x1b14a3[_0x2a434b(0x147)](),this[_0x2a434b(0x219)]=this[_0x2a434b(0x244)]['getContext'](_0x2a434b(0x1f7)),this[_0x2a434b(0x1e8)]=navigator[_0x2a434b(0x1da)][_0x2a434b(0x251)](),this[_0x2a434b(0x219)][_0x2a434b(0x240)]({'device':this['_device'],'format':this[_0x2a434b(0x1e8)]}),this[_0x2a434b(0x19b)](),window[_0x2a434b(0x1bb)](_0x2a434b(0x146),this['resizeCanvas'][_0x2a434b(0x25a)](this));}[_0x4b3d1c(0x19b)](){const _0x39f7c5=_0x4b3d1c,_0x3c1238=window[_0x39f7c5(0x196)]||0x1,_0x1dce5a=window[_0x39f7c5(0x24a)]*_0x3c1238,_0x2b1a45=window['innerHeight']*_0x3c1238;this['_canvas'][_0x39f7c5(0x128)]=_0x1dce5a,this['_canvas']['height']=_0x2b1a45,this[_0x39f7c5(0x244)]['style'][_0x39f7c5(0x128)]=window[_0x39f7c5(0x24a)]+'px',this[_0x39f7c5(0x244)][_0x39f7c5(0x16a)][_0x39f7c5(0x1a7)]=window[_0x39f7c5(0x1dd)]+'px',this[_0x39f7c5(0x244)][_0x39f7c5(0x16a)][_0x39f7c5(0x1dc)]=_0x39f7c5(0x21c),this[_0x39f7c5(0x161)]();}async[_0x4b3d1c(0x1c7)](_0x52c18f){const _0x230ec9=_0x4b3d1c;await _0x52c18f[_0x230ec9(0x170)](),this['_objects'][_0x230ec9(0x206)](_0x52c18f);}[_0x4b3d1c(0x22c)](_0xfd06e2){const _0x23e20f=_0x4b3d1c;for(const _0x53f078 of this['_objects']){_0x53f078?.[_0x23e20f(0x14a)]();}let _0x1ee3b0=this[_0x23e20f(0x1f8)]['createCommandEncoder']();const _0x26b888=_0x1ee3b0[_0x23e20f(0x249)]({'colorAttachments':[{'view':_0xfd06e2,'clearValue':this[_0x23e20f(0x1c4)],'loadOp':'clear','storeOp':_0x23e20f(0x13f)}]});for(const _0x300dde of this['_objects']){_0x300dde?.[_0x23e20f(0x161)](_0x26b888);}_0x26b888[_0x23e20f(0x1d0)]();const _0x504dab=_0x1ee3b0['beginComputePass']();for(const _0x5a998b of this[_0x23e20f(0x1a8)]){_0x5a998b?.[_0x23e20f(0x22b)](_0x504dab);}_0x504dab[_0x23e20f(0x1d0)]();const _0x1b46dd=_0x1ee3b0[_0x23e20f(0x205)]();this['_device'][_0x23e20f(0x230)]['submit']([_0x1b46dd]);}[_0x4b3d1c(0x161)](){const _0x2d954b=_0x4b3d1c;this[_0x2d954b(0x22c)](this['_context']['getCurrentTexture']()[_0x2d954b(0x15b)]());}}class RayTracer extends Renderer{constructor(_0x3e0df4){const _0x420f4e=_0x4b3d1c;super(_0x3e0df4),this[_0x420f4e(0x1a2)]=null;}async[_0x4b3d1c(0x170)](){const _0x234870=_0x4b3d1c;if(!navigator[_0x234870(0x1da)])throw Error(_0x234870(0x129));const _0x391150=await navigator[_0x234870(0x1da)]['requestAdapter']();if(!_0x391150)throw Error(_0x234870(0x1b7));this['_device']=await _0x391150['requestDevice'](),this[_0x234870(0x219)]=this[_0x234870(0x244)][_0x234870(0x171)](_0x234870(0x1f7)),this['_canvasFormat']=_0x234870(0x180),this['_context'][_0x234870(0x240)]({'device':this[_0x234870(0x1f8)],'format':this[_0x234870(0x1e8)]}),this[_0x234870(0x227)]=this['_device'][_0x234870(0x17a)]({'label':_0x234870(0x177),'code':_0x234870(0x1d8)}),this[_0x234870(0x118)]=this['_device'][_0x234870(0x1c3)]({'label':_0x234870(0x120),'size':0x8,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0x234870(0x1a0)]=this[_0x234870(0x1f8)][_0x234870(0x15e)]({'label':'Ray\x20Tracer\x20Pipeline','layout':'auto','vertex':{'module':this[_0x234870(0x227)],'entryPoint':_0x234870(0x1fa)},'fragment':{'module':this['_shaderModule'],'entryPoint':_0x234870(0x1bd),'targets':[{'format':this[_0x234870(0x1e8)]}]}}),this[_0x234870(0x15c)]=this[_0x234870(0x1f8)][_0x234870(0x264)]({'label':'Ray\x20Tracer\x20Sampler','magFilter':'linear','minFilter':'linear'}),this[_0x234870(0x19b)](),window[_0x234870(0x1bb)](_0x234870(0x146),this['resizeCanvas'][_0x234870(0x25a)](this));}[_0x4b3d1c(0x19b)](){const _0x49347a=_0x4b3d1c,_0x59e469=window['devicePixelRatio']||0x1,_0x410893=window[_0x49347a(0x24a)]*_0x59e469,_0x587992=window[_0x49347a(0x1dd)]*_0x59e469,_0x58954a=_0x410893/_0x587992,_0x274031=_0x587992;let _0x551251={'width':_0x274031*_0x58954a,'height':_0x274031};this[_0x49347a(0x12e)]=this['_device'][_0x49347a(0x192)]({'size':_0x551251,'format':this['_canvasFormat'],'usage':GPUTextureUsage[_0x49347a(0x182)]|GPUTextureUsage[_0x49347a(0x23e)]}),this[_0x49347a(0x1a2)]&&(this[_0x49347a(0x1a2)][_0x49347a(0x1e3)]=this[_0x49347a(0x12e)][_0x49347a(0x128)],this[_0x49347a(0x1a2)][_0x49347a(0x210)]=this[_0x49347a(0x12e)]['height'],this[_0x49347a(0x1a2)]['updateGeometry'](),this[_0x49347a(0x1a2)][_0x49347a(0x1b0)](this[_0x49347a(0x12e)])),this[_0x49347a(0x18c)]=this[_0x49347a(0x1f8)]['createBindGroup']({'label':_0x49347a(0x1f2),'layout':this[_0x49347a(0x1a0)][_0x49347a(0x21b)](0x0),'entries':[{'binding':0x0,'resource':this[_0x49347a(0x12e)]['createView']()},{'binding':0x1,'resource':this[_0x49347a(0x15c)]},{'binding':0x2,'resource':{'buffer':this[_0x49347a(0x118)]}}]}),super[_0x49347a(0x19b)](),this[_0x49347a(0x1f8)]['queue'][_0x49347a(0x134)](this['_outputSizeBuffer'],0x0,new Float32Array([_0x410893,_0x587992]));}async['setTracerObject'](_0x3d1b81){const _0x2ba190=_0x4b3d1c;await _0x3d1b81['init'](),_0x3d1b81['_imgWidth']=this[_0x2ba190(0x12e)][_0x2ba190(0x128)],_0x3d1b81[_0x2ba190(0x210)]=this[_0x2ba190(0x12e)][_0x2ba190(0x1a7)],_0x3d1b81['updateGeometry'](),this[_0x2ba190(0x1a2)]=_0x3d1b81,this['_tracer'][_0x2ba190(0x1b0)](this[_0x2ba190(0x12e)]);}[_0x4b3d1c(0x161)](){const _0xefca=_0x4b3d1c;if(this['_tracer']){let _0x55e644=this[_0xefca(0x1f8)][_0xefca(0x122)]();const _0x428a88=_0x55e644[_0xefca(0x195)]();this['_tracer'][_0xefca(0x22b)](_0x428a88),_0x428a88['end'](),this[_0xefca(0x1f8)][_0xefca(0x230)][_0xefca(0x17b)]([_0x55e644[_0xefca(0x205)]()]);}let _0x230bee=this['_device'][_0xefca(0x122)]();const _0x1047f9=_0x230bee[_0xefca(0x249)]({'colorAttachments':[{'view':this['_context'][_0xefca(0x1a5)]()[_0xefca(0x15b)](),'clearValue':this[_0xefca(0x1c4)],'loadOp':_0xefca(0x1f6),'storeOp':_0xefca(0x13f)}]});_0x1047f9[_0xefca(0x176)](this[_0xefca(0x1a0)]),_0x1047f9[_0xefca(0x257)](0x0,this['_bindGroup']),_0x1047f9[_0xefca(0x16f)](0x6),_0x1047f9[_0xefca(0x1d0)](),this[_0xefca(0x1f8)][_0xefca(0x230)]['submit']([_0x230bee['finish']()]);}}class StandardTextObject{constructor(_0x28b100,_0x5d33a3=0x5,_0xf9bd9a=_0x4b3d1c(0x208)){const _0x3e3fb2=_0x4b3d1c;this[_0x3e3fb2(0x1ee)]=_0xf9bd9a,this[_0x3e3fb2(0x262)]=_0x5d33a3,this['_textCanvas']=document[_0x3e3fb2(0x169)](_0x3e3fb2(0x14e)),this[_0x3e3fb2(0x165)]=this['_textCanvas']['getContext']('2d'),this[_0x3e3fb2(0x20f)](_0x28b100),this[_0x3e3fb2(0x1a9)](_0x28b100),this['_textCanvas'][_0x3e3fb2(0x16a)][_0x3e3fb2(0x1d4)]=_0x3e3fb2(0x1ce),this[_0x3e3fb2(0x21e)][_0x3e3fb2(0x16a)][_0x3e3fb2(0x22f)]=_0x3e3fb2(0x13a),this[_0x3e3fb2(0x21e)][_0x3e3fb2(0x16a)][_0x3e3fb2(0x131)]='10px',this[_0x3e3fb2(0x21e)][_0x3e3fb2(0x16a)][_0x3e3fb2(0x1f3)]='1px\x20solid\x20red',document[_0x3e3fb2(0x226)]['appendChild'](this[_0x3e3fb2(0x21e)]);}[_0x4b3d1c(0x263)](){const _0x3b84e3=_0x4b3d1c;this['_textCanvas'][_0x3b84e3(0x20d)]=!this[_0x3b84e3(0x21e)][_0x3b84e3(0x20d)];}['updateTextRegion'](_0xfaef8a){const _0x13b6fc=_0x4b3d1c;this[_0x13b6fc(0x165)]['font']=this[_0x13b6fc(0x1ee)],this[_0x13b6fc(0x141)]=_0xfaef8a['split']('\x0a'),this[_0x13b6fc(0x1df)]=Math[_0x13b6fc(0x14d)](...this['_lines'][_0x13b6fc(0x138)](_0x2116b4=>this[_0x13b6fc(0x165)][_0x13b6fc(0x1ba)](_0x2116b4)[_0x13b6fc(0x128)]));const _0xe7bc6f=this[_0x13b6fc(0x1ee)]['match'](/(\d+)px/);_0xe7bc6f?this[_0x13b6fc(0x168)]=parseInt(_0xe7bc6f[0x1],0xa):(this['_fontSize']=0x12,this['_textFont']=_0x13b6fc(0x208)),this[_0x13b6fc(0x268)]=this[_0x13b6fc(0x141)][_0x13b6fc(0x242)]*(this['_fontSize']+this[_0x13b6fc(0x262)]),this['_paddingx']=0x5,this['_paddingtop']=0x3,this[_0x13b6fc(0x24b)]=Math[_0x13b6fc(0x149)](this[_0x13b6fc(0x1df)]+this[_0x13b6fc(0x15f)]*0x2),this['_canvasHeight']=Math[_0x13b6fc(0x149)](this['_height']+this['_paddingtop']),this[_0x13b6fc(0x21e)]['width']=this[_0x13b6fc(0x24b)],this['_textCanvas']['height']=this[_0x13b6fc(0x1c2)],this[_0x13b6fc(0x165)][_0x13b6fc(0x1d7)]=this[_0x13b6fc(0x1ee)],this[_0x13b6fc(0x165)][_0x13b6fc(0x213)]=_0x13b6fc(0x22f);}['updateText'](_0x4e971d){const _0x3e0353=_0x4b3d1c;this[_0x3e0353(0x141)]=_0x4e971d[_0x3e0353(0x1d3)]('\x0a'),this[_0x3e0353(0x165)][_0x3e0353(0x23d)]=_0x3e0353(0x173),this['_textContext'][_0x3e0353(0x1e0)](0x0,0x0,this['_canvasWidth'],this[_0x3e0353(0x1c2)]),this[_0x3e0353(0x165)]['fillRect'](0x0,0x0,this['_canvasWidth'],this[_0x3e0353(0x1c2)]),this['_textContext'][_0x3e0353(0x23d)]=_0x3e0353(0x1be),this[_0x3e0353(0x141)]['forEach']((_0x12355c,_0x2c512a)=>{const _0x2f12a7=_0x3e0353,_0xb0a169=this[_0x2f12a7(0x15f)],_0x1f5a9a=this['_paddingtop']+_0x2c512a*(this['_fontSize']+this[_0x2f12a7(0x262)]);this[_0x2f12a7(0x165)]['fillText'](_0x12355c,_0xb0a169,_0x1f5a9a);});}}class SceneObject{static [_0x4b3d1c(0x121)]=0x0;constructor(_0xc8779b,_0x2e3b69){const _0x39e4e0=_0x4b3d1c;if(this[_0x39e4e0(0x203)]==SceneObject)throw new Error(_0x39e4e0(0x209));this[_0x39e4e0(0x1f8)]=_0xc8779b,this[_0x39e4e0(0x1e8)]=_0x2e3b69,SceneObject['_objectCnt']+=0x1;}[_0x4b3d1c(0x1e5)](){const _0x925292=_0x4b3d1c;return this['constructor'][_0x925292(0x125)]+'\x20'+SceneObject[_0x925292(0x121)]['toString']();}async[_0x4b3d1c(0x170)](){const _0x59da84=_0x4b3d1c;await this[_0x59da84(0x234)](),await this[_0x59da84(0x1eb)](),await this[_0x59da84(0x15e)](),await this[_0x59da84(0x12c)]();}async[_0x4b3d1c(0x234)](){const _0x2cdc7e=_0x4b3d1c;throw new Error(_0x2cdc7e(0x1b5));}['updateGeometry'](){}[_0x4b3d1c(0x160)](_0x5e0643){return new Promise((_0x420419,_0x154f04)=>{const _0x9abdd7=_0xdcc1,_0x315d55=new XMLHttpRequest();_0x315d55[_0x9abdd7(0x188)](_0x9abdd7(0x1c1),_0x5e0643),_0x315d55[_0x9abdd7(0x1a3)](_0x9abdd7(0x23a),_0x9abdd7(0x22a)),_0x315d55[_0x9abdd7(0x216)]=function(){const _0x471fa1=_0x9abdd7;_0x315d55['readyState']===XMLHttpRequest[_0x471fa1(0x157)]&&_0x315d55['status']===0xc8?_0x420419(_0x315d55[_0x471fa1(0x11a)]):_0x154f04({'status':_0x315d55[_0x471fa1(0x1e7)],'statusText':_0x315d55[_0x471fa1(0x130)]});},_0x315d55[_0x9abdd7(0x159)]=function(){const _0x2d61f9=_0x9abdd7;_0x154f04({'status':_0x315d55[_0x2d61f9(0x1e7)],'statusText':_0x315d55[_0x2d61f9(0x130)]});},_0x315d55[_0x9abdd7(0x1d2)]();});}async['createShaders'](){const _0x511e34=_0x4b3d1c;throw new Error(_0x511e34(0x1e1));}async['createRenderPipeline'](){const _0x2d273d=_0x4b3d1c;throw new Error(_0x2d273d(0x175));}['render'](_0x403516){throw new Error('Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.');}async[_0x4b3d1c(0x12c)](){const _0x431ae6=_0x4b3d1c;throw new Error(_0x431ae6(0x151));}['compute'](_0x14975c){const _0x533d5f=_0x4b3d1c;throw new Error(_0x533d5f(0x1c6));}}class RayTracingObject extends SceneObject{async[_0x4b3d1c(0x234)](){}async[_0x4b3d1c(0x1eb)](){const _0x510661=_0x4b3d1c;let _0x3e1ea0=await this[_0x510661(0x160)]('/shaders/optimized_tracenothing.wgsl');this[_0x510661(0x227)]=this['_device'][_0x510661(0x17a)]({'label':_0x510661(0x13d)+this[_0x510661(0x1e5)](),'code':_0x3e1ea0});}['updateGeometry'](){}async[_0x4b3d1c(0x15e)](){}[_0x4b3d1c(0x161)](_0x16be0a){}async[_0x4b3d1c(0x12c)](){const _0x2ea266=_0x4b3d1c;this[_0x2ea266(0x185)]=this[_0x2ea266(0x1f8)][_0x2ea266(0x12c)]({'label':_0x2ea266(0x140)+this[_0x2ea266(0x1e5)](),'layout':_0x2ea266(0x191),'compute':{'module':this[_0x2ea266(0x227)],'entryPoint':_0x2ea266(0x124)}});}[_0x4b3d1c(0x1b0)](_0xc89dd1){const _0x3a9888=_0x4b3d1c;this[_0x3a9888(0x18c)]=this[_0x3a9888(0x1f8)]['createBindGroup']({'label':_0x3a9888(0x1c0),'layout':this[_0x3a9888(0x185)][_0x3a9888(0x21b)](0x0),'entries':[{'binding':0x0,'resource':_0xc89dd1[_0x3a9888(0x15b)]()}]}),this['_wgWidth']=Math[_0x3a9888(0x149)](_0xc89dd1[_0x3a9888(0x128)]),this[_0x3a9888(0x255)]=Math[_0x3a9888(0x149)](_0xc89dd1[_0x3a9888(0x1a7)]);}[_0x4b3d1c(0x22b)](_0xc2905b){const _0x43b734=_0x4b3d1c;_0xc2905b[_0x43b734(0x176)](this[_0x43b734(0x185)]),_0xc2905b[_0x43b734(0x257)](0x0,this[_0x43b734(0x18c)]),_0xc2905b[_0x43b734(0x200)](Math['ceil'](this[_0x43b734(0x184)]/0x10),Math[_0x43b734(0x149)](this['_wgHeight']/0x10));}}class UnitCube{constructor(){const _0x168d77=_0x4b3d1c;this[_0x168d77(0x22d)]=new Float32Array(Array(0x10)[_0x168d77(0x1bc)](0x0)),this[_0x168d77(0x22d)][0x0]=0x1,this[_0x168d77(0x17d)]=new Float32Array(Array(0x4)[_0x168d77(0x1bc)](0x1)),this['_front']=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x168d77(0x1fe)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x168d77(0x20a)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_right']=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this['_top']=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_down']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x4b3d1c(0x23f)](_0x24c21d){const _0x5598f8=_0x4b3d1c;for(let _0x10e175=0x0;_0x10e175<0x10;++_0x10e175)this[_0x5598f8(0x22d)][_0x10e175]=_0x24c21d[_0x10e175];}}class UnitSphere{constructor(){const _0x48b6ec=_0x4b3d1c;this[_0x48b6ec(0x22d)]=new Float32Array(Array(0x10)[_0x48b6ec(0x1bc)](0x0)),this[_0x48b6ec(0x22d)][0x0]=0x1,this['_scales']=new Float32Array(Array(0x4)[_0x48b6ec(0x1bc)](0x1));}}class UnitCylinder{constructor(){const _0x290b4f=_0x4b3d1c;this[_0x290b4f(0x22d)]=new Float32Array(Array(0x10)[_0x290b4f(0x1bc)](0x0)),this[_0x290b4f(0x22d)][0x0]=0x1,this[_0x290b4f(0x17d)]=new Float32Array(Array(0x4)['fill'](0x1));}}class UnitCone{constructor(){const _0x5418ea=_0x4b3d1c;this[_0x5418ea(0x22d)]=new Float32Array(Array(0x10)[_0x5418ea(0x1bc)](0x0)),this[_0x5418ea(0x22d)][0x0]=0x1,this[_0x5418ea(0x17d)]=new Float32Array(Array(0x4)[_0x5418ea(0x1bc)](0x1));}}class RayTracingTextureDemoSceneObject extends RayTracingObject{constructor(_0x5b5613,_0x2c72d9,_0x18f638,_0x2d27e4=!![]){const _0x4ff364=_0x4b3d1c;super(_0x5b5613,_0x2c72d9),this[_0x4ff364(0x235)]=new UnitCube(),this[_0x4ff364(0x1fd)]=new UnitCube(),this[_0x4ff364(0x178)]=new UnitSphere(),this[_0x4ff364(0x142)]=new UnitCylinder(),this[_0x4ff364(0x145)]=new UnitCone(),this[_0x4ff364(0x17c)]=_0x18f638,this['_showTexture']=_0x2d27e4,this['_params']=new Int32Array([0x1,0x0,0x0,0x0]),this[_0x4ff364(0x132)]=new Image(),this['_gold'][_0x4ff364(0x1b3)]=_0x4ff364(0x1ec),this[_0x4ff364(0x166)]=new Image(),this['_metal'][_0x4ff364(0x1b3)]=_0x4ff364(0x167),this[_0x4ff364(0x194)]=new Image(),this['_light'][_0x4ff364(0x1b3)]=_0x4ff364(0x20b),this[_0x4ff364(0x261)]=new Image(),this[_0x4ff364(0x261)]['src']=_0x4ff364(0x133),this[_0x4ff364(0x13c)]=new Image(),this[_0x4ff364(0x13c)]['src']=_0x4ff364(0x12b),this[_0x4ff364(0x254)]=new Image(),this[_0x4ff364(0x254)][_0x4ff364(0x1b3)]=_0x4ff364(0x187),this['_envpx']=new Image(),this[_0x4ff364(0x14b)][_0x4ff364(0x1b3)]=_0x4ff364(0x1f1),this['_envpy']=new Image(),this[_0x4ff364(0x246)][_0x4ff364(0x1b3)]=_0x4ff364(0x17e),this[_0x4ff364(0x248)]=new Image(),this[_0x4ff364(0x248)][_0x4ff364(0x1b3)]=_0x4ff364(0x1ed),this[_0x4ff364(0x256)]=new Int32Array([0x1,0x1,0x1,0x0]);}async['createGeometry'](){const _0x278a84=_0x4b3d1c;this['_cameraBuffer']=this[_0x278a84(0x1f8)]['createBuffer']({'label':_0x278a84(0x193)+this[_0x278a84(0x1e5)](),'size':this['_camera'][_0x278a84(0x22d)][_0x278a84(0x13e)]+this[_0x278a84(0x17c)][_0x278a84(0x221)][_0x278a84(0x13e)]+this[_0x278a84(0x17c)]['_resolutions']['byteLength'],'usage':GPUBufferUsage[_0x278a84(0x189)]|GPUBufferUsage[_0x278a84(0x197)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x269)],0x0,this[_0x278a84(0x17c)][_0x278a84(0x22d)]),this[_0x278a84(0x1f8)]['queue'][_0x278a84(0x134)](this['_cameraBuffer'],this[_0x278a84(0x17c)]['_pose'][_0x278a84(0x13e)],this['_camera'][_0x278a84(0x221)]),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this['_cameraBuffer'],this['_camera'][_0x278a84(0x22d)][_0x278a84(0x13e)]+this[_0x278a84(0x17c)]['_focal'][_0x278a84(0x13e)],this[_0x278a84(0x17c)][_0x278a84(0x245)]),this[_0x278a84(0x24d)]=this[_0x278a84(0x1f8)][_0x278a84(0x1c3)]({'label':_0x278a84(0x207)+this['getName'](),'size':(this[_0x278a84(0x235)][_0x278a84(0x22d)]['byteLength']+this[_0x278a84(0x235)][_0x278a84(0x17d)][_0x278a84(0x13e)]+this[_0x278a84(0x235)][_0x278a84(0x136)][_0x278a84(0x13e)]*0x6)*0x2,'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x278a84(0x197)]});let _0x4e8fde=0x0;this['_device'][_0x278a84(0x230)][_0x278a84(0x134)](this['_boxBuffer'],_0x4e8fde,this['_box']['_pose']),_0x4e8fde+=this['_box'][_0x278a84(0x22d)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)]['queue'][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x235)][_0x278a84(0x17d)]),_0x4e8fde+=this[_0x278a84(0x235)][_0x278a84(0x17d)]['byteLength'],this[_0x278a84(0x1f8)][_0x278a84(0x230)]['writeBuffer'](this[_0x278a84(0x24d)],_0x4e8fde,this['_box'][_0x278a84(0x1ad)]),_0x4e8fde+=this['_box']['_front'][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this['_box']['_back']),_0x4e8fde+=this[_0x278a84(0x235)][_0x278a84(0x1fe)][_0x278a84(0x13e)],this['_device']['queue'][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x235)]['_left']),_0x4e8fde+=this[_0x278a84(0x235)][_0x278a84(0x20a)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)]['writeBuffer'](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x235)][_0x278a84(0x1b1)]),_0x4e8fde+=this['_box'][_0x278a84(0x1b1)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this['_boxBuffer'],_0x4e8fde,this[_0x278a84(0x235)][_0x278a84(0x136)]),_0x4e8fde+=this[_0x278a84(0x235)][_0x278a84(0x136)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x235)][_0x278a84(0x21a)]),_0x4e8fde+=this[_0x278a84(0x235)][_0x278a84(0x21a)]['byteLength'],this[_0x278a84(0x150)]=_0x4e8fde,this[_0x278a84(0x1f8)]['queue']['writeBuffer'](this['_boxBuffer'],_0x4e8fde,this[_0x278a84(0x1fd)][_0x278a84(0x22d)]),_0x4e8fde+=this[_0x278a84(0x1fd)]['_pose'][_0x278a84(0x13e)],this['_device']['queue'][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x1fd)][_0x278a84(0x17d)]),_0x4e8fde+=this[_0x278a84(0x1fd)]['_scales']['byteLength'],this['_device'][_0x278a84(0x230)]['writeBuffer'](this[_0x278a84(0x24d)],_0x4e8fde,this['_cube'][_0x278a84(0x1ad)]),_0x4e8fde+=this['_cube'][_0x278a84(0x1ad)]['byteLength'],this['_device'][_0x278a84(0x230)]['writeBuffer'](this[_0x278a84(0x24d)],_0x4e8fde,this['_cube']['_back']),_0x4e8fde+=this[_0x278a84(0x1fd)][_0x278a84(0x1fe)]['byteLength'],this['_device'][_0x278a84(0x230)][_0x278a84(0x134)](this['_boxBuffer'],_0x4e8fde,this[_0x278a84(0x1fd)][_0x278a84(0x20a)]),_0x4e8fde+=this[_0x278a84(0x1fd)][_0x278a84(0x20a)][_0x278a84(0x13e)],this['_device'][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this[_0x278a84(0x1fd)][_0x278a84(0x1b1)]),_0x4e8fde+=this[_0x278a84(0x1fd)][_0x278a84(0x1b1)][_0x278a84(0x13e)],this['_device'][_0x278a84(0x230)][_0x278a84(0x134)](this['_boxBuffer'],_0x4e8fde,this[_0x278a84(0x1fd)]['_top']),_0x4e8fde+=this[_0x278a84(0x1fd)][_0x278a84(0x136)]['byteLength'],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x24d)],_0x4e8fde,this['_cube']['_down']),this[_0x278a84(0x21d)]=this[_0x278a84(0x1f8)]['createBuffer']({'label':_0x278a84(0x19d)+this[_0x278a84(0x1e5)](),'size':this[_0x278a84(0x178)][_0x278a84(0x22d)][_0x278a84(0x13e)]+this[_0x278a84(0x178)]['_scales'][_0x278a84(0x13e)],'usage':GPUBufferUsage[_0x278a84(0x1cb)]|GPUBufferUsage[_0x278a84(0x197)]}),_0x4e8fde=0x0,this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x21d)],_0x4e8fde,this[_0x278a84(0x178)][_0x278a84(0x22d)]),_0x4e8fde+=this[_0x278a84(0x178)][_0x278a84(0x22d)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x21d)],_0x4e8fde,this[_0x278a84(0x178)][_0x278a84(0x17d)]),this[_0x278a84(0x1c9)]=this[_0x278a84(0x1f8)][_0x278a84(0x1c3)]({'label':_0x278a84(0x17f)+this[_0x278a84(0x1e5)](),'size':this[_0x278a84(0x145)][_0x278a84(0x22d)]['byteLength']+this[_0x278a84(0x145)]['_scales']['byteLength'],'usage':GPUBufferUsage[_0x278a84(0x1cb)]|GPUBufferUsage[_0x278a84(0x197)]}),_0x4e8fde=0x0,this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x1c9)],_0x4e8fde,this[_0x278a84(0x145)]['_pose']),_0x4e8fde+=this[_0x278a84(0x145)][_0x278a84(0x22d)][_0x278a84(0x13e)],this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x1c9)],_0x4e8fde,this[_0x278a84(0x145)][_0x278a84(0x17d)]),this[_0x278a84(0x144)]=this[_0x278a84(0x1f8)][_0x278a84(0x1c3)]({'label':_0x278a84(0x20c)+this[_0x278a84(0x1e5)](),'size':this[_0x278a84(0x142)][_0x278a84(0x22d)][_0x278a84(0x13e)]+this[_0x278a84(0x142)][_0x278a84(0x17d)][_0x278a84(0x13e)],'usage':GPUBufferUsage[_0x278a84(0x1cb)]|GPUBufferUsage[_0x278a84(0x197)]}),_0x4e8fde=0x0,this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x144)],_0x4e8fde,this[_0x278a84(0x142)]['_pose']),_0x4e8fde+=this[_0x278a84(0x142)]['_pose']['byteLength'],this['_device'][_0x278a84(0x230)]['writeBuffer'](this[_0x278a84(0x144)],_0x4e8fde,this[_0x278a84(0x142)][_0x278a84(0x17d)]),this['_paramBuffer']=this['_device'][_0x278a84(0x1c3)]({'label':_0x278a84(0x12f)+this[_0x278a84(0x1e5)](),'size':this[_0x278a84(0x11d)][_0x278a84(0x13e)],'usage':GPUBufferUsage[_0x278a84(0x189)]|GPUBufferUsage[_0x278a84(0x197)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x134)](this[_0x278a84(0x12a)],0x0,this[_0x278a84(0x11d)]),this['_lightBuffer']=this[_0x278a84(0x1f8)][_0x278a84(0x1c3)]({'label':_0x278a84(0x19e)+this[_0x278a84(0x1e5)](),'size':0x14*Float32Array[_0x278a84(0x252)],'usage':GPUBufferUsage[_0x278a84(0x189)]|GPUBufferUsage['COPY_DST']}),await this[_0x278a84(0x132)]['decode'](),this[_0x278a84(0x259)]=await createImageBitmap(this[_0x278a84(0x132)]),this[_0x278a84(0x137)]=this[_0x278a84(0x1f8)][_0x278a84(0x192)]({'label':_0x278a84(0x156)+this[_0x278a84(0x1e5)](),'size':[this[_0x278a84(0x259)]['width'],this['_goldBitmap'][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage[_0x278a84(0x182)]|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage['RENDER_ATTACHMENT']}),this[_0x278a84(0x1f8)]['queue'][_0x278a84(0x25e)]({'source':this[_0x278a84(0x259)]},{'texture':this[_0x278a84(0x137)]},[this[_0x278a84(0x259)][_0x278a84(0x128)],this[_0x278a84(0x259)][_0x278a84(0x1a7)]]),await this['_metal'][_0x278a84(0x148)](),this[_0x278a84(0x1c5)]=await createImageBitmap(this[_0x278a84(0x166)]),this[_0x278a84(0x1f4)]=this[_0x278a84(0x1f8)]['createTexture']({'label':'Texture\x20'+this[_0x278a84(0x1e5)](),'size':[this['_metalBitmap'][_0x278a84(0x128)],this[_0x278a84(0x1c5)][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage[_0x278a84(0x182)]|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x25e)]({'source':this[_0x278a84(0x1c5)]},{'texture':this['_metalTexture']},[this[_0x278a84(0x1c5)]['width'],this['_metalBitmap'][_0x278a84(0x1a7)]]),await this['_light']['decode'](),this[_0x278a84(0x1a6)]=await createImageBitmap(this[_0x278a84(0x194)]),this[_0x278a84(0x174)]=this[_0x278a84(0x1f8)][_0x278a84(0x192)]({'label':_0x278a84(0x156)+this['getName'](),'size':[this[_0x278a84(0x1a6)][_0x278a84(0x128)],this[_0x278a84(0x1a6)][_0x278a84(0x1a7)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x25e)]({'source':this[_0x278a84(0x1a6)]},{'texture':this[_0x278a84(0x174)]},[this[_0x278a84(0x1a6)][_0x278a84(0x128)],this[_0x278a84(0x1a6)]['height']]),await this[_0x278a84(0x261)][_0x278a84(0x148)](),this[_0x278a84(0x15d)]=await createImageBitmap(this[_0x278a84(0x261)]),this[_0x278a84(0x223)]=this[_0x278a84(0x1f8)][_0x278a84(0x192)]({'label':_0x278a84(0x156)+this['getName'](),'size':[this[_0x278a84(0x15d)][_0x278a84(0x128)],this[_0x278a84(0x15d)][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)]['queue']['copyExternalImageToTexture']({'source':this[_0x278a84(0x15d)]},{'texture':this[_0x278a84(0x223)]},[this['_envnxBitmap'][_0x278a84(0x128)],this[_0x278a84(0x15d)][_0x278a84(0x1a7)]]),await this['_envny'][_0x278a84(0x148)](),this['_envnyBitmap']=await createImageBitmap(this[_0x278a84(0x13c)]),this['_envnyTexture']=this['_device'][_0x278a84(0x192)]({'label':_0x278a84(0x156)+this[_0x278a84(0x1e5)](),'size':[this[_0x278a84(0x25b)][_0x278a84(0x128)],this[_0x278a84(0x25b)][_0x278a84(0x1a7)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)]['copyExternalImageToTexture']({'source':this[_0x278a84(0x25b)]},{'texture':this['_envnyTexture']},[this[_0x278a84(0x25b)][_0x278a84(0x128)],this[_0x278a84(0x25b)][_0x278a84(0x1a7)]]),await this['_envnz'][_0x278a84(0x148)](),this[_0x278a84(0x1de)]=await createImageBitmap(this[_0x278a84(0x254)]),this[_0x278a84(0x13b)]=this[_0x278a84(0x1f8)]['createTexture']({'label':'Texture\x20'+this[_0x278a84(0x1e5)](),'size':[this[_0x278a84(0x1de)][_0x278a84(0x128)],this[_0x278a84(0x1de)][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage[_0x278a84(0x182)]|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage[_0x278a84(0x18a)]}),this['_device'][_0x278a84(0x230)]['copyExternalImageToTexture']({'source':this[_0x278a84(0x1de)]},{'texture':this[_0x278a84(0x13b)]},[this[_0x278a84(0x1de)][_0x278a84(0x128)],this[_0x278a84(0x1de)][_0x278a84(0x1a7)]]),await this['_envpx'][_0x278a84(0x148)](),this[_0x278a84(0x1cd)]=await createImageBitmap(this[_0x278a84(0x14b)]),this[_0x278a84(0x241)]=this[_0x278a84(0x1f8)][_0x278a84(0x192)]({'label':_0x278a84(0x156)+this[_0x278a84(0x1e5)](),'size':[this[_0x278a84(0x1cd)]['width'],this[_0x278a84(0x1cd)]['height'],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x25e)]({'source':this[_0x278a84(0x1cd)]},{'texture':this[_0x278a84(0x241)]},[this[_0x278a84(0x1cd)]['width'],this[_0x278a84(0x1cd)]['height']]),await this[_0x278a84(0x246)][_0x278a84(0x148)](),this['_envpyBitmap']=await createImageBitmap(this[_0x278a84(0x246)]),this[_0x278a84(0x238)]=this[_0x278a84(0x1f8)]['createTexture']({'label':_0x278a84(0x156)+this[_0x278a84(0x1e5)](),'size':[this[_0x278a84(0x224)][_0x278a84(0x128)],this[_0x278a84(0x224)][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage[_0x278a84(0x182)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x278a84(0x18a)]}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x25e)]({'source':this[_0x278a84(0x224)]},{'texture':this[_0x278a84(0x238)]},[this[_0x278a84(0x224)][_0x278a84(0x128)],this[_0x278a84(0x224)][_0x278a84(0x1a7)]]),await this[_0x278a84(0x248)]['decode'](),this[_0x278a84(0x1e6)]=await createImageBitmap(this[_0x278a84(0x248)]),this['_envpzTexture']=this[_0x278a84(0x1f8)]['createTexture']({'label':_0x278a84(0x156)+this['getName'](),'size':[this[_0x278a84(0x1e6)][_0x278a84(0x128)],this[_0x278a84(0x1e6)][_0x278a84(0x1a7)],0x1],'format':_0x278a84(0x180),'usage':GPUTextureUsage[_0x278a84(0x182)]|GPUTextureUsage[_0x278a84(0x197)]|GPUTextureUsage['RENDER_ATTACHMENT']}),this[_0x278a84(0x1f8)][_0x278a84(0x230)][_0x278a84(0x25e)]({'source':this['_envpzBitmap']},{'texture':this[_0x278a84(0x1d9)]},[this[_0x278a84(0x1e6)]['width'],this['_envpzBitmap'][_0x278a84(0x1a7)]]),this[_0x278a84(0x15c)]=this['_device'][_0x278a84(0x264)]({'magFilter':'linear','minFilter':'linear'}),this['_textureParamBuffer']=this[_0x278a84(0x1f8)][_0x278a84(0x1c3)]({'label':_0x278a84(0x12f)+this[_0x278a84(0x1e5)](),'size':this[_0x278a84(0x256)][_0x278a84(0x13e)],'usage':GPUBufferUsage[_0x278a84(0x189)]|GPUBufferUsage[_0x278a84(0x197)]}),this['_device'][_0x278a84(0x230)][_0x278a84(0x134)](this['_textureParamBuffer'],0x0,this[_0x278a84(0x256)]);}[_0x4b3d1c(0x14a)](){const _0x58944a=_0x4b3d1c;this[_0x58944a(0x17c)]['updateSize'](this[_0x58944a(0x1e3)],this[_0x58944a(0x210)]),this[_0x58944a(0x1f8)]['queue'][_0x58944a(0x134)](this[_0x58944a(0x269)],this[_0x58944a(0x17c)][_0x58944a(0x22d)][_0x58944a(0x13e)]+this['_camera'][_0x58944a(0x221)][_0x58944a(0x13e)],this[_0x58944a(0x17c)][_0x58944a(0x245)]);}[_0x4b3d1c(0x123)](){const _0x1cb3f3=_0x4b3d1c;this[_0x1cb3f3(0x1f8)]['queue'][_0x1cb3f3(0x134)](this[_0x1cb3f3(0x24d)],0x0,this['_box']['_pose']);}[_0x4b3d1c(0x1ca)](){const _0x5f1fdd=_0x4b3d1c;this['_device'][_0x5f1fdd(0x230)][_0x5f1fdd(0x134)](this[_0x5f1fdd(0x24d)],this[_0x5f1fdd(0x235)][_0x5f1fdd(0x22d)][_0x5f1fdd(0x13e)],this['_box'][_0x5f1fdd(0x17d)]);}[_0x4b3d1c(0x265)](){const _0x3cba8b=_0x4b3d1c;this[_0x3cba8b(0x1f8)][_0x3cba8b(0x230)][_0x3cba8b(0x134)](this['_boxBuffer'],this[_0x3cba8b(0x150)],this[_0x3cba8b(0x1fd)][_0x3cba8b(0x22d)]);}[_0x4b3d1c(0x21f)](){const _0x4608b1=_0x4b3d1c;this[_0x4608b1(0x1f8)][_0x4608b1(0x230)][_0x4608b1(0x134)](this[_0x4608b1(0x24d)],this['_cubeOffset']+this['_cube'][_0x4608b1(0x22d)][_0x4608b1(0x13e)],this[_0x4608b1(0x1fd)][_0x4608b1(0x17d)]);}[_0x4b3d1c(0x162)](){const _0x204582=_0x4b3d1c;this[_0x204582(0x1f8)]['queue']['writeBuffer'](this[_0x204582(0x21d)],0x0,this[_0x204582(0x178)][_0x204582(0x22d)]);}[_0x4b3d1c(0x172)](){const _0x1b736f=_0x4b3d1c;this['_device'][_0x1b736f(0x230)]['writeBuffer'](this['_sphereBuffer'],this[_0x1b736f(0x178)][_0x1b736f(0x22d)][_0x1b736f(0x13e)],this[_0x1b736f(0x178)][_0x1b736f(0x17d)]);}[_0x4b3d1c(0x1f5)](){const _0x87844e=_0x4b3d1c;this[_0x87844e(0x1f8)][_0x87844e(0x230)][_0x87844e(0x134)](this['_coneBuffer'],0x0,this[_0x87844e(0x145)]['_pose']);}['updateConeScales'](){const _0x3be3a1=_0x4b3d1c;this['_device'][_0x3be3a1(0x230)]['writeBuffer'](this[_0x3be3a1(0x1c9)],this[_0x3be3a1(0x145)][_0x3be3a1(0x22d)][_0x3be3a1(0x13e)],this['_cone'][_0x3be3a1(0x17d)]);}[_0x4b3d1c(0x236)](){const _0x3fc0cc=_0x4b3d1c;this[_0x3fc0cc(0x1f8)][_0x3fc0cc(0x230)][_0x3fc0cc(0x134)](this[_0x3fc0cc(0x144)],0x0,this[_0x3fc0cc(0x142)]['_pose']);}['updateCylinderScales'](){const _0x493a4d=_0x4b3d1c;this[_0x493a4d(0x1f8)]['queue']['writeBuffer'](this['_cylinderBuffer'],this[_0x493a4d(0x142)]['_pose'][_0x493a4d(0x13e)],this['_cylinder'][_0x493a4d(0x17d)]);}['updateCameraPose'](){const _0x35d9f5=_0x4b3d1c;this['_device'][_0x35d9f5(0x230)][_0x35d9f5(0x134)](this[_0x35d9f5(0x269)],0x0,this[_0x35d9f5(0x17c)][_0x35d9f5(0x22d)]);}[_0x4b3d1c(0x1d1)](){const _0x1fef57=_0x4b3d1c;this['_device'][_0x1fef57(0x230)]['writeBuffer'](this[_0x1fef57(0x269)],this[_0x1fef57(0x17c)][_0x1fef57(0x22d)][_0x1fef57(0x13e)],this[_0x1fef57(0x17c)]['_focal']);}['updateParam'](){const _0x15d00b=_0x4b3d1c;this['_device'][_0x15d00b(0x230)][_0x15d00b(0x134)](this[_0x15d00b(0x12a)],0x0,this[_0x15d00b(0x11d)]);}[_0x4b3d1c(0x211)](){const _0x174ddb=_0x4b3d1c;this[_0x174ddb(0x1f8)]['queue'][_0x174ddb(0x134)](this[_0x174ddb(0x1d5)],0x0,this[_0x174ddb(0x256)]);}['updateLight'](_0x325e32){const _0x3868f6=_0x4b3d1c;let _0x4cabbe=0x0;this['_device'][_0x3868f6(0x230)][_0x3868f6(0x134)](this[_0x3868f6(0x204)],_0x4cabbe,_0x325e32['_intensity']),_0x4cabbe+=_0x325e32[_0x3868f6(0x1cc)][_0x3868f6(0x13e)],this['_device'][_0x3868f6(0x230)][_0x3868f6(0x134)](this['_lightBuffer'],_0x4cabbe,_0x325e32[_0x3868f6(0x1fb)]),_0x4cabbe+=_0x325e32['_position']['byteLength'],this[_0x3868f6(0x1f8)][_0x3868f6(0x230)]['writeBuffer'](this['_lightBuffer'],_0x4cabbe,_0x325e32['_direction']),_0x4cabbe+=_0x325e32[_0x3868f6(0x15a)][_0x3868f6(0x13e)],this[_0x3868f6(0x1f8)][_0x3868f6(0x230)][_0x3868f6(0x134)](this['_lightBuffer'],_0x4cabbe,_0x325e32[_0x3868f6(0x19f)]),_0x4cabbe+=_0x325e32['_attenuation'][_0x3868f6(0x13e)],this[_0x3868f6(0x1f8)][_0x3868f6(0x230)][_0x3868f6(0x134)](this[_0x3868f6(0x204)],_0x4cabbe,_0x325e32[_0x3868f6(0x11d)]);}async[_0x4b3d1c(0x1eb)](){const _0x26b1db=_0x4b3d1c;let _0x5b9ef2=await this['loadShader'](_0x26b1db(0x18b));this['_shaderModule']=this['_device'][_0x26b1db(0x17a)]({'label':_0x26b1db(0x13d)+this[_0x26b1db(0x1e5)](),'code':_0x5b9ef2}),this[_0x26b1db(0x1cf)]=this[_0x26b1db(0x1f8)][_0x26b1db(0x228)]({'label':_0x26b1db(0x198)+this[_0x26b1db(0x1e5)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x26b1db(0x243)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x26b1db(0x1b9)}},{'binding':0x2,'visibility':GPUShaderStage[_0x26b1db(0x243)],'storageTexture':{'format':this[_0x26b1db(0x1e8)]}},{'binding':0x3,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x26b1db(0x1b9)}},{'binding':0x4,'visibility':GPUShaderStage[_0x26b1db(0x243)],'buffer':{'type':_0x26b1db(0x1b9)}},{'binding':0x5,'visibility':GPUShaderStage[_0x26b1db(0x243)],'buffer':{'type':_0x26b1db(0x1b9)}},{'binding':0x6,'visibility':GPUShaderStage[_0x26b1db(0x243)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage[_0x26b1db(0x243)],'buffer':{}},{'binding':0x8,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}}]}),this[_0x26b1db(0x199)]=this['_device'][_0x26b1db(0x228)]({'label':_0x26b1db(0x229)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':'float'}},{'binding':0x1,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':_0x26b1db(0x232)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':'float'}},{'binding':0x3,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x26b1db(0x232)}},{'binding':0x4,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':'float'}},{'binding':0x5,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x26b1db(0x232)}},{'binding':0x6,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':_0x26b1db(0x232)}},{'binding':0x7,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':'float'}},{'binding':0x8,'visibility':GPUShaderStage[_0x26b1db(0x243)],'texture':{'sampleType':'float'}},{'binding':0x9,'visibility':GPUShaderStage[_0x26b1db(0x243)],'sampler':{}}]}),this['_pipelineLayout']=this[_0x26b1db(0x1f8)][_0x26b1db(0x201)]({'label':_0x26b1db(0x16e),'bindGroupLayouts':[this[_0x26b1db(0x1cf)],this[_0x26b1db(0x199)]]});}async[_0x4b3d1c(0x12c)](){const _0x491717=_0x4b3d1c;this['_computePipeline']=this[_0x491717(0x1f8)][_0x491717(0x12c)]({'label':_0x491717(0x225)+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x491717(0x227)],'entryPoint':_0x491717(0x124)}});}[_0x4b3d1c(0x1b0)](_0x41bab3){const _0x457c8c=_0x4b3d1c;this[_0x457c8c(0x23c)]=this[_0x457c8c(0x1f8)]['createBindGroup']({'label':_0x457c8c(0x126),'layout':this[_0x457c8c(0x185)][_0x457c8c(0x21b)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x457c8c(0x269)]}},{'binding':0x1,'resource':{'buffer':this['_boxBuffer']}},{'binding':0x2,'resource':_0x41bab3[_0x457c8c(0x15b)]()},{'binding':0x3,'resource':{'buffer':this['_sphereBuffer']}},{'binding':0x4,'resource':{'buffer':this[_0x457c8c(0x1c9)]}},{'binding':0x5,'resource':{'buffer':this['_cylinderBuffer']}},{'binding':0x6,'resource':{'buffer':this[_0x457c8c(0x12a)]}},{'binding':0x7,'resource':{'buffer':this['_lightBuffer']}},{'binding':0x8,'resource':{'buffer':this[_0x457c8c(0x1d5)]}}]}),this['_bindGroup2']=this['_device'][_0x457c8c(0x1b0)]({'label':'Ray\x20Trace\x20Box\x20Bind\x20Group\x202','layout':this[_0x457c8c(0x185)][_0x457c8c(0x21b)](0x1),'entries':[{'binding':0x0,'resource':this[_0x457c8c(0x137)][_0x457c8c(0x15b)]()},{'binding':0x1,'resource':this[_0x457c8c(0x1f4)][_0x457c8c(0x15b)]()},{'binding':0x2,'resource':this['_lightTexture']['createView']()},{'binding':0x3,'resource':this[_0x457c8c(0x223)][_0x457c8c(0x15b)]()},{'binding':0x4,'resource':this[_0x457c8c(0x1a1)]['createView']()},{'binding':0x5,'resource':this['_envnzTexture']['createView']()},{'binding':0x6,'resource':this[_0x457c8c(0x241)][_0x457c8c(0x15b)]()},{'binding':0x7,'resource':this[_0x457c8c(0x238)][_0x457c8c(0x15b)]()},{'binding':0x8,'resource':this[_0x457c8c(0x1d9)]['createView']()},{'binding':0x9,'resource':this[_0x457c8c(0x15c)]}]}),this['_wgWidth']=Math['ceil'](_0x41bab3[_0x457c8c(0x128)]),this[_0x457c8c(0x255)]=Math['ceil'](_0x41bab3[_0x457c8c(0x1a7)]);}[_0x4b3d1c(0x22b)](_0x411a04){const _0x129ec7=_0x4b3d1c;_0x411a04['setPipeline'](this[_0x129ec7(0x185)]),_0x411a04[_0x129ec7(0x257)](0x0,this[_0x129ec7(0x23c)]),_0x411a04['setBindGroup'](0x1,this[_0x129ec7(0x260)]),_0x411a04[_0x129ec7(0x200)](Math[_0x129ec7(0x149)](this['_wgWidth']/0x10),Math['ceil'](this['_wgHeight']/0x10));}}class PGA3D{static['geometricProduct'](_0x4528e5,_0x977689){return[_0x4528e5[0x0]*_0x977689[0x0]-_0x4528e5[0x1]*_0x977689[0x1]-_0x4528e5[0x2]*_0x977689[0x2]-_0x4528e5[0x3]*_0x977689[0x3]-_0x4528e5[0x7]*_0x977689[0x7]+_0x4528e5[0xb]*_0x977689[0xb]+_0x4528e5[0xc]*_0x977689[0xc]+_0x4528e5[0xd]*_0x977689[0xd],_0x4528e5[0x0]*_0x977689[0x1]+_0x4528e5[0x1]*_0x977689[0x0]-_0x4528e5[0x2]*_0x977689[0x3]+_0x4528e5[0x3]*_0x977689[0x2]+_0x4528e5[0x7]*_0x977689[0xd]+_0x4528e5[0xb]*_0x977689[0xc]-_0x4528e5[0xc]*_0x977689[0xb]+_0x4528e5[0xd]*_0x977689[0x7],_0x4528e5[0x0]*_0x977689[0x2]+_0x4528e5[0x1]*_0x977689[0x3]+_0x4528e5[0x2]*_0x977689[0x0]-_0x4528e5[0x3]*_0x977689[0x1]-_0x4528e5[0x7]*_0x977689[0xc]+_0x4528e5[0xb]*_0x977689[0xd]-_0x4528e5[0xc]*_0x977689[0x7]-_0x4528e5[0xd]*_0x977689[0xb],_0x4528e5[0x0]*_0x977689[0x3]-_0x4528e5[0x1]*_0x977689[0x2]+_0x4528e5[0x2]*_0x977689[0x1]+_0x4528e5[0x3]*_0x977689[0x0]+_0x4528e5[0x7]*_0x977689[0xb]+_0x4528e5[0xb]*_0x977689[0x7]+_0x4528e5[0xc]*_0x977689[0xd]-_0x4528e5[0xd]*_0x977689[0xc],_0x4528e5[0x0]*_0x977689[0x4]+_0x4528e5[0x1]*_0x977689[0x5]+_0x4528e5[0x2]*_0x977689[0x6]-_0x4528e5[0x3]*_0x977689[0xf]+_0x4528e5[0x4]*_0x977689[0x0]-_0x4528e5[0x5]*_0x977689[0x1]-_0x4528e5[0x6]*_0x977689[0x2]+_0x4528e5[0x7]*_0x977689[0xa]+_0x4528e5[0x8]*_0x977689[0xc]+_0x4528e5[0x9]*_0x977689[0xd]-_0x4528e5[0xa]*_0x977689[0x7]-_0x4528e5[0xb]*_0x977689[0xe]+_0x4528e5[0xc]*_0x977689[0x8]+_0x4528e5[0xd]*_0x977689[0x9]+_0x4528e5[0xe]*_0x977689[0xb]-_0x4528e5[0xf]*_0x977689[0x3],_0x4528e5[0x0]*_0x977689[0x5]-_0x4528e5[0x1]*_0x977689[0x4]+_0x4528e5[0x2]*_0x977689[0xf]+_0x4528e5[0x3]*_0x977689[0x6]+_0x4528e5[0x4]*_0x977689[0x1]+_0x4528e5[0x5]*_0x977689[0x0]-_0x4528e5[0x6]*_0x977689[0x3]-_0x4528e5[0x7]*_0x977689[0x9]-_0x4528e5[0x8]*_0x977689[0xb]+_0x4528e5[0x9]*_0x977689[0x7]+_0x4528e5[0xa]*_0x977689[0xc]-_0x4528e5[0xb]*_0x977689[0x8]-_0x4528e5[0xc]*_0x977689[0xe]+_0x4528e5[0xd]*_0x977689[0xa]+_0x4528e5[0xe]*_0x977689[0xc]+_0x4528e5[0xf]*_0x977689[0x2],_0x4528e5[0x0]*_0x977689[0x6]-_0x4528e5[0x1]*_0x977689[0xf]-_0x4528e5[0x2]*_0x977689[0x4]-_0x4528e5[0x3]*_0x977689[0x5]+_0x4528e5[0x4]*_0x977689[0x2]+_0x4528e5[0x5]*_0x977689[0x3]+_0x4528e5[0x6]*_0x977689[0x0]+_0x4528e5[0x7]*_0x977689[0x8]-_0x4528e5[0x8]*_0x977689[0x7]-_0x4528e5[0x9]*_0x977689[0xb]-_0x4528e5[0xa]*_0x977689[0xc]-_0x4528e5[0xb]*_0x977689[0x9]-_0x4528e5[0xc]*_0x977689[0xa]-_0x4528e5[0xd]*_0x977689[0xe]+_0x4528e5[0xe]*_0x977689[0xd]-_0x4528e5[0xf]*_0x977689[0x1],_0x4528e5[0x0]*_0x977689[0x7]+_0x4528e5[0x1]*_0x977689[0xd]-_0x4528e5[0x2]*_0x977689[0xc]+_0x4528e5[0x3]*_0x977689[0xb]+_0x4528e5[0x7]*_0x977689[0x0]+_0x4528e5[0xb]*_0x977689[0x3]-_0x4528e5[0xc]*_0x977689[0x2]+_0x4528e5[0xd]*_0x977689[0x1],_0x4528e5[0x0]*_0x977689[0x8]+_0x4528e5[0x1]*_0x977689[0xe]-_0x4528e5[0x2]*_0x977689[0xa]+_0x4528e5[0x3]*_0x977689[0x9]+_0x4528e5[0x4]*_0x977689[0xc]-_0x4528e5[0x5]*_0x977689[0xb]+_0x4528e5[0x6]*_0x977689[0x7]-_0x4528e5[0x7]*_0x977689[0x6]+_0x4528e5[0x8]*_0x977689[0x0]-_0x4528e5[0x9]*_0x977689[0x3]+_0x4528e5[0xa]*_0x977689[0x2]-_0x4528e5[0xb]*_0x977689[0x5]+_0x4528e5[0xc]*_0x977689[0x4]-_0x4528e5[0xd]*_0x977689[0xf]+_0x4528e5[0xe]*_0x977689[0x1]+_0x4528e5[0xf]*_0x977689[0xd],_0x4528e5[0x0]*_0x977689[0x9]+_0x4528e5[0x1]*_0x977689[0xa]+_0x4528e5[0x2]*_0x977689[0xe]-_0x4528e5[0x3]*_0x977689[0x8]+_0x4528e5[0x4]*_0x977689[0xd]-_0x4528e5[0x5]*_0x977689[0x7]-_0x4528e5[0x6]*_0x977689[0xb]+_0x4528e5[0x7]*_0x977689[0x5]+_0x4528e5[0x8]*_0x977689[0x3]+_0x4528e5[0x9]*_0x977689[0x0]-_0x4528e5[0xa]*_0x977689[0x1]-_0x4528e5[0xb]*_0x977689[0x6]+_0x4528e5[0xc]*_0x977689[0xf]+_0x4528e5[0xd]*_0x977689[0x4]+_0x4528e5[0xe]*_0x977689[0x2]-_0x4528e5[0xf]*_0x977689[0xc],_0x4528e5[0x0]*_0x977689[0xa]-_0x4528e5[0x1]*_0x977689[0x9]+_0x4528e5[0x2]*_0x977689[0x8]+_0x4528e5[0x3]*_0x977689[0xe]+_0x4528e5[0x4]*_0x977689[0x7]+_0x4528e5[0x5]*_0x977689[0xd]-_0x4528e5[0x6]*_0x977689[0xc]-_0x4528e5[0x7]*_0x977689[0x4]-_0x4528e5[0x8]*_0x977689[0x2]+_0x4528e5[0x9]*_0x977689[0x1]+_0x4528e5[0xa]*_0x977689[0x0]-_0x4528e5[0xb]*_0x977689[0xf]-_0x4528e5[0xc]*_0x977689[0x6]+_0x4528e5[0xd]*_0x977689[0x5]+_0x4528e5[0xe]*_0x977689[0x3]+_0x4528e5[0xf]*_0x977689[0xb],_0x4528e5[0x0]*_0x977689[0xb]+_0x4528e5[0x1]*_0x977689[0xc]+_0x4528e5[0x2]*_0x977689[0xd]-_0x4528e5[0x3]*_0x977689[0x7]-_0x4528e5[0x7]*_0x977689[0x3]+_0x4528e5[0xb]*_0x977689[0x0]-_0x4528e5[0xc]*_0x977689[0x1]-_0x4528e5[0xd]*_0x977689[0x2],_0x4528e5[0x0]*_0x977689[0xc]-_0x4528e5[0x1]*_0x977689[0xb]+_0x4528e5[0x2]*_0x977689[0x7]+_0x4528e5[0x3]*_0x977689[0xd]+_0x4528e5[0x7]*_0x977689[0x2]+_0x4528e5[0xb]*_0x977689[0x1]+_0x4528e5[0xc]*_0x977689[0x0]-_0x4528e5[0xd]*_0x977689[0x3],_0x4528e5[0x0]*_0x977689[0xd]-_0x4528e5[0x1]*_0x977689[0x7]-_0x4528e5[0x2]*_0x977689[0xb]-_0x4528e5[0x3]*_0x977689[0xc]-_0x4528e5[0x7]*_0x977689[0x1]+_0x4528e5[0xb]*_0x977689[0x2]+_0x4528e5[0xc]*_0x977689[0x3]+_0x4528e5[0xd]*_0x977689[0x0],_0x4528e5[0x0]*_0x977689[0xe]-_0x4528e5[0x1]*_0x977689[0x8]-_0x4528e5[0x2]*_0x977689[0x9]-_0x4528e5[0x3]*_0x977689[0xa]+_0x4528e5[0x4]*_0x977689[0xb]+_0x4528e5[0x5]*_0x977689[0xc]+_0x4528e5[0x6]*_0x977689[0xd]+_0x4528e5[0x7]*_0x977689[0xf]-_0x4528e5[0x8]*_0x977689[0x1]-_0x4528e5[0x9]*_0x977689[0x2]-_0x4528e5[0xa]*_0x977689[0x3]-_0x4528e5[0xb]*_0x977689[0x4]-_0x4528e5[0xc]*_0x977689[0x5]-_0x4528e5[0xd]*_0x977689[0x6]+_0x4528e5[0xe]*_0x977689[0x0]-_0x4528e5[0xf]*_0x977689[0x7],_0x4528e5[0x0]*_0x977689[0xf]+_0x4528e5[0x1]*_0x977689[0x6]-_0x4528e5[0x2]*_0x977689[0x5]+_0x4528e5[0x3]*_0x977689[0x4]+_0x4528e5[0x4]*_0x977689[0x3]-_0x4528e5[0x5]*_0x977689[0x2]+_0x4528e5[0x6]*_0x977689[0x1]-_0x4528e5[0x7]*_0x977689[0xe]+_0x4528e5[0x8]*_0x977689[0xd]-_0x4528e5[0x9]*_0x977689[0xc]+_0x4528e5[0xa]*_0x977689[0xb]-_0x4528e5[0xb]*_0x977689[0xa]+_0x4528e5[0xc]*_0x977689[0x9]-_0x4528e5[0xd]*_0x977689[0x8]+_0x4528e5[0xe]*_0x977689[0x7]+_0x4528e5[0xf]*_0x977689[0x0]];}static[_0x4b3d1c(0x250)](_0x40ed25){return[_0x40ed25[0x0],-_0x40ed25[0x1],-_0x40ed25[0x2],-_0x40ed25[0x3],-_0x40ed25[0x4],-_0x40ed25[0x5],-_0x40ed25[0x6],-_0x40ed25[0x7],-_0x40ed25[0x8],-_0x40ed25[0x9],-_0x40ed25[0xa],_0x40ed25[0xb],_0x40ed25[0xc],_0x40ed25[0xd],_0x40ed25[0xe],_0x40ed25[0xf]];}static[_0x4b3d1c(0x258)](_0x406049,_0x4860de){const _0x3976a6=_0x4b3d1c;return PGA3D['geometricProduct'](_0x4860de,PGA3D[_0x3976a6(0x1f0)](_0x406049,PGA3D[_0x3976a6(0x250)](_0x4860de)));}static[_0x4b3d1c(0x247)](_0x4cb79e){const _0xe643ea=_0x4b3d1c;return Math[_0xe643ea(0x212)](_0x4cb79e[_0xe643ea(0x138)](_0x23610a=>_0x23610a*_0x23610a)[_0xe643ea(0x16d)]((_0x272265,_0x2c3b3e)=>_0x272265+_0x2c3b3e,0x0));}static[_0x4b3d1c(0x19c)](_0x2958b6,_0x4745c8,_0x15d4a9){return[0x1,0x0,0x0,0x0,-_0x2958b6/0x2,-_0x4745c8/0x2,-_0x15d4a9/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x11c)](_0x2846d0){return[0x1,0x0,0x0,0x0,_0x2846d0[0x4],_0x2846d0[0x5],_0x2846d0[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x231)](_0x1784d1,_0x2b2107=0x1,_0x387078=0x0,_0x5593b8=0x0,_0x3dc6a4=0x0,_0x149ee5=0x0,_0x22a886=0x0){const _0x2d0ec2=_0x4b3d1c;let _0x266ca1=Math[_0x2d0ec2(0x25d)](_0x1784d1/0x2),_0x27a70d=Math[_0x2d0ec2(0x237)](_0x1784d1/0x2),_0x182318=PGA3D['createLine'](_0x3dc6a4,_0x149ee5,_0x22a886,_0x2b2107,_0x387078,_0x5593b8);return[_0x266ca1,_0x27a70d*_0x182318[0x1],_0x27a70d*_0x182318[0x2],_0x27a70d*_0x182318[0x3],_0x27a70d*_0x182318[0x4],_0x27a70d*_0x182318[0x5],_0x27a70d*_0x182318[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x155)](_0x3b5835){return[_0x3b5835[0x0],_0x3b5835[0x1],_0x3b5835[0x2],_0x3b5835[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x135)](_0x19c210,_0xfc9a1e,_0x3b1c67){return[0x0,_0x3b1c67,-_0xfc9a1e,_0x19c210,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createLine'](_0x1d846f,_0x4f7fb2,_0x2457d1,_0x4b721a,_0xf9af57,_0x13d020){const _0x47bcbc=_0x4b3d1c;let _0x593704=PGA3D['createDir'](_0x4b721a,_0xf9af57,_0x13d020),_0x5bac2f=PGA3D[_0x47bcbc(0x143)](_0x593704);return[0x0,_0x5bac2f[0x1],_0x5bac2f[0x2],_0x5bac2f[0x3],-(-_0x5bac2f[0x2]*_0x2457d1-_0x5bac2f[0x1]*_0x4f7fb2),-(_0x5bac2f[0x1]*_0x1d846f-_0x5bac2f[0x3]*_0x2457d1),-(_0x5bac2f[0x3]*_0x4f7fb2+_0x5bac2f[0x2]*_0x1d846f),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x1f9)](_0x22b777,_0x4ca383,_0x33cdff){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x33cdff,_0x4ca383,-_0x22b777,0x0,0x0,0x0,0x0,0x0];}static[_0x4b3d1c(0x1b4)](_0x11a5e9){return[-_0x11a5e9[0xa]/_0x11a5e9[0x7],_0x11a5e9[0x9]/_0x11a5e9[0x7],-_0x11a5e9[0x8]/_0x11a5e9[0x7]];}static[_0x4b3d1c(0x1a4)](_0x12ae8b,_0xddf858,_0x9c6d93,_0x25726b){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x12ae8b,_0xddf858,_0x9c6d93,-_0x25726b,0x0];}static['createPlaneFromPoints'](_0x42975a,_0x4fbbd9,_0x24b32a){let _0xaf9e98=_0x4fbbd9[0x1]*_0x24b32a[0x2]-_0x24b32a[0x1]*_0x4fbbd9[0x2]-(_0x42975a[0x1]*_0x24b32a[0x2]-_0x24b32a[0x1]*_0x42975a[0x2])+(_0x42975a[0x1]*_0x4fbbd9[0x2]-_0x4fbbd9[0x1]*_0x42975a[0x2]),_0x45c5a1=_0x4fbbd9[0x0]*_0x24b32a[0x2]-_0x24b32a[0x0]*_0x4fbbd9[0x2]-(_0x42975a[0x0]*_0x24b32a[0x2]-_0x24b32a[0x0]*_0x42975a[0x2])+(_0x42975a[0x0]*_0x4fbbd9[0x2]-_0x4fbbd9[0x0]*_0x42975a[0x2]),_0x41e520=_0x4fbbd9[0x0]*_0x24b32a[0x1]-_0x24b32a[0x0]*_0x4fbbd9[0x1]-(_0x42975a[0x0]*_0x24b32a[0x1]-_0x24b32a[0x0]*_0x42975a[0x1])+(_0x42975a[0x0]*_0x4fbbd9[0x1]-_0x4fbbd9[0x0]*_0x42975a[0x1]),_0x1c03b4=_0x42975a[0x0]*(_0x4fbbd9[0x1]*_0x24b32a[0x2]-_0x24b32a[0x1]*_0x4fbbd9[0x2])-_0x4fbbd9[0x0]*(_0x42975a[0x1]*_0x24b32a[0x2]-_0x24b32a[0x1]*_0x42975a[0x2])+_0x24b32a[0x0]*(_0x42975a[0x1]*_0x4fbbd9[0x2]-_0x4fbbd9[0x1]*_0x42975a[0x2]);return PGA3D['createPlane'](_0xaf9e98,-_0x45c5a1,_0x41e520,_0x1c03b4);}static[_0x4b3d1c(0x22e)](_0x524329,_0x5f2319){const _0x942ca=_0x4b3d1c;let _0x2e8618=PGA3D['geometricProduct'](_0x524329,_0x5f2319),_0x40fd0e=Math['abs'](_0x2e8618[0x7])<=1e-8,_0x12e947=_0x40fd0e&&Math[_0x942ca(0x24c)](_0x2e8618[0x8])<=1e-8&&Math[_0x942ca(0x24c)](_0x2e8618[0x9])<=1e-8&&Math['abs'](_0x2e8618[0xa])<=1e-8;return[PGA3D[_0x942ca(0x1b4)](_0x2e8618),!_0x40fd0e,_0x12e947];}static['normalizeMotor'](_0x3d9ef9){const _0x422b4b=_0x4b3d1c;let _0x13571e=PGA3D[_0x422b4b(0x247)](_0x3d9ef9);if(_0x13571e==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x3d9ef9[_0x422b4b(0x138)](_0x54feab=>_0x54feab/_0x13571e);}static[_0x4b3d1c(0x119)](_0x502cfd,_0x4869f5){const _0x3e0236=_0x4b3d1c;let _0x2cf86c=PGA3D[_0x3e0236(0x258)](PGA3D[_0x3e0236(0x1f9)](_0x502cfd[0x0],_0x502cfd[0x1],_0x502cfd[0x2]),_0x4869f5);return PGA3D[_0x3e0236(0x1b4)](_0x2cf86c);}static['applyMotorToDir'](_0x30e499,_0x3bd3a1){const _0x10f0bd=_0x4b3d1c;let _0x1ca4dd=PGA3D[_0x10f0bd(0x155)](_0x3bd3a1),_0x6846df=PGA3D[_0x10f0bd(0x258)](PGA3D['createPoint'](_0x30e499[0x0],_0x30e499[0x1],_0x30e499[0x2]),_0x1ca4dd);return PGA3D['extractPoint'](_0x6846df);}static[_0x4b3d1c(0x11e)](_0x10e817,_0x4ba30a,_0x4e6df9,_0x2de454){const _0x417060=_0x4b3d1c;let _0x556c6a=PGA3D[_0x417060(0x1f9)](_0x10e817[0x0],_0x10e817[0x1],_0x10e817[0x2]),_0x19d4f9=PGA3D[_0x417060(0x1f9)](_0x4ba30a[0x0],_0x4ba30a[0x1],_0x4ba30a[0x2]),_0x538f12=PGA3D['createPoint'](_0x4e6df9[0x0],_0x4e6df9[0x1],_0x4e6df9[0x2]),_0x4939d2=PGA3D[_0x417060(0x1f9)](_0x2de454[0x0],_0x2de454[0x1],_0x2de454[0x2]),_0x3bc585=PGA3D[_0x417060(0x1d6)](_0x10e817,_0x4ba30a,_0x4e6df9),_0x4af3ad=PGA3D[_0x417060(0x1d6)](_0x2de454,_0x4ba30a,_0x4e6df9),_0x110334=PGA3D[_0x417060(0x1d6)](_0x10e817,_0x2de454,_0x4e6df9),_0x222d84=PGA3D[_0x417060(0x1d6)](_0x10e817,_0x4ba30a,_0x2de454),_0x1f7588=_0x3bc585[0xb]*_0x3bc585[0xb]+_0x3bc585[0xc]*_0x3bc585[0xc]+_0x3bc585[0xd]*_0x3bc585[0xd]+_0x3bc585[0xe]*_0x3bc585[0xe],_0x806bd9=_0x3bc585[0xb]*_0x4af3ad[0xb]+_0x3bc585[0xc]*_0x4af3ad[0xc]+_0x3bc585[0xd]*_0x4af3ad[0xd]+_0x3bc585[0xe]*_0x4af3ad[0xe],_0x18ee6e=_0x3bc585[0xb]*_0x110334[0xb]+_0x3bc585[0xc]*_0x110334[0xc]+_0x3bc585[0xd]*_0x110334[0xd]+_0x3bc585[0xe]*_0x110334[0xe],_0x59af40=_0x3bc585[0xb]*_0x222d84[0xb]+_0x3bc585[0xc]*_0x222d84[0xc]+_0x3bc585[0xd]*_0x222d84[0xd]+_0x3bc585[0xe]*_0x222d84[0xe],_0x6c6221=_0x806bd9/_0x1f7588,_0x4c3101=_0x18ee6e/_0x1f7588,_0xcfab24=_0x59af40/_0x1f7588;return _0x6c6221>=0x0&&_0x6c6221<=0x1&&_0x4c3101>=0x0&&_0x4c3101<=0x1&&_0xcfab24>=0x0&&_0xcfab24<=0x1;}}class Camera{constructor(_0x491021,_0x5c0063){const _0x549b8c=_0x4b3d1c;this['_pose']=new Float32Array(Array(0x10)[_0x549b8c(0x1bc)](0x0)),this[_0x549b8c(0x22d)][0x0]=0x1,this[_0x549b8c(0x221)]=new Float32Array(Array(0x2)[_0x549b8c(0x1bc)](0x1)),this['_resolutions']=new Float32Array([_0x491021,_0x5c0063]),this[_0x549b8c(0x158)]=![];}[_0x4b3d1c(0x11b)](){const _0x846159=_0x4b3d1c;this[_0x846159(0x22d)][0x0]=0x1;for(let _0xa19a71=0x1;_0xa19a71<0x10;++_0xa19a71)this[_0x846159(0x22d)][_0xa19a71]=0x0;this['_focal'][0x0]=0x1,this['_focal'][0x1]=0x1;}[_0x4b3d1c(0x23f)](_0x4d5dd2){for(let _0x10603b=0x0;_0x10603b<0x10;++_0x10603b)this['_pose'][_0x10603b]=_0x4d5dd2[_0x10603b];}['updateSize'](_0x52912a,_0x48ab61){const _0x3b6ee8=_0x4b3d1c;this[_0x3b6ee8(0x245)][0x0]=_0x52912a,this['_resolutions'][0x1]=_0x48ab61;}[_0x4b3d1c(0x18e)](_0x40ce94){const _0x17f72e=_0x4b3d1c;let _0x4b4427=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this['_pose']),_0x12f3af=PGA3D[_0x17f72e(0x19c)](_0x40ce94*_0x4b4427[0x0],_0x40ce94*_0x4b4427[0x1],_0x40ce94*_0x4b4427[0x2]),_0x5b07a3=PGA3D['normalizeMotor'](PGA3D['geometricProduct'](_0x12f3af,this[_0x17f72e(0x22d)]));this[_0x17f72e(0x23f)](_0x5b07a3);}[_0x4b3d1c(0x239)](_0x2b4a2d){const _0x2ce6fd=_0x4b3d1c;let _0x43b23c=PGA3D[_0x2ce6fd(0x215)]([0x0,0x1,0x0],this[_0x2ce6fd(0x22d)]),_0x31384e=PGA3D['createTranslator'](_0x2b4a2d*_0x43b23c[0x0],_0x2b4a2d*_0x43b23c[0x1],_0x2b4a2d*_0x43b23c[0x2]),_0x13dc8b=PGA3D[_0x2ce6fd(0x143)](PGA3D['geometricProduct'](_0x31384e,this[_0x2ce6fd(0x22d)]));this[_0x2ce6fd(0x23f)](_0x13dc8b);}[_0x4b3d1c(0x153)](_0x463202){const _0x30b252=_0x4b3d1c;let _0x436c99=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x30b252(0x22d)]),_0x3f7d5f=PGA3D[_0x30b252(0x19c)](_0x463202*_0x436c99[0x0],_0x463202*_0x436c99[0x1],_0x463202*_0x436c99[0x2]),_0x3cb999=PGA3D[_0x30b252(0x143)](PGA3D['geometricProduct'](_0x3f7d5f,this[_0x30b252(0x22d)]));this[_0x30b252(0x23f)](_0x3cb999);}[_0x4b3d1c(0x217)](_0x35e581){const _0x2cb8c5=_0x4b3d1c;let _0x1d3da3=PGA3D[_0x2cb8c5(0x119)]([0x0,0x0,0x0],this[_0x2cb8c5(0x22d)]),_0x1bc5d4=PGA3D[_0x2cb8c5(0x215)]([0x1,0x0,0x0],this[_0x2cb8c5(0x22d)]),_0x12eec9=PGA3D['createRotor'](_0x35e581,_0x1bc5d4[0x0],_0x1bc5d4[0x1],_0x1bc5d4[0x2],_0x1d3da3[0x0],_0x1d3da3[0x1],_0x1d3da3[0x2]),_0x36a737=PGA3D[_0x2cb8c5(0x143)](PGA3D[_0x2cb8c5(0x1f0)](_0x12eec9,this[_0x2cb8c5(0x22d)]));this[_0x2cb8c5(0x23f)](_0x36a737);}[_0x4b3d1c(0x26b)](_0x1f10bc){const _0x2b10e7=_0x4b3d1c;let _0xb4f0c5=PGA3D[_0x2b10e7(0x119)]([0x0,0x0,0x0],this[_0x2b10e7(0x22d)]),_0x3ef6f1=PGA3D[_0x2b10e7(0x215)]([0x0,0x1,0x0],this['_pose']),_0x138384=PGA3D[_0x2b10e7(0x231)](_0x1f10bc,_0x3ef6f1[0x0],_0x3ef6f1[0x1],_0x3ef6f1[0x2],_0xb4f0c5[0x0],_0xb4f0c5[0x1],_0xb4f0c5[0x2]),_0x49d265=PGA3D[_0x2b10e7(0x143)](PGA3D[_0x2b10e7(0x1f0)](_0x138384,this['_pose']));this[_0x2b10e7(0x23f)](_0x49d265);}[_0x4b3d1c(0x11f)](_0x4d1364){const _0x343f42=_0x4b3d1c;let _0x4b0a31=PGA3D[_0x343f42(0x119)]([0x0,0x0,0x0],this['_pose']),_0x29a29b=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x343f42(0x22d)]),_0x39a74b=PGA3D['createRotor'](_0x4d1364,_0x29a29b[0x0],_0x29a29b[0x1],_0x29a29b[0x2],_0x4b0a31[0x0],_0x4b0a31[0x1],_0x4b0a31[0x2]),_0x38d509=PGA3D['normalizeMotor'](PGA3D[_0x343f42(0x1f0)](_0x39a74b,this[_0x343f42(0x22d)]));this['updatePose'](_0x38d509);}}function _0x37e6(){const _0x108cac=['updateCubeScales','catch','_focal','70SNHcan','_envnxTexture','_envpyBitmap','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','body','_shaderModule','createBindGroupLayout','Ray\x20Trace\x20Volume\x20Layout\x202\x20','no-cache,\x20no-store,\x20max-age=0','compute','renderToSelectedView','_pose','linePlaneIntersection','top','queue','createRotor','float','updateConeScales','createGeometry','_box','updateCylinderPose','sin','_envpyTexture','moveY','Cache-Control','now','_bindGroup1','fillStyle','STORAGE_BINDING','updatePose','configure','_envpxTexture','length','COMPUTE','_canvas','_resolutions','_envpy','motorNorm','_envpz','beginRenderPass','innerWidth','_canvasWidth','abs','_boxBuffer','getElementById','requestAdapter','reverse','getPreferredCanvasFormat','BYTES_PER_ELEMENT','innerHTML','_envnz','_wgHeight','_textureParams','setBindGroup','applyMotor','_goldBitmap','bind','_envnyBitmap','1025000MJecGV','cos','copyExternalImageToTexture','fps:\x20','_bindGroup2','_envnx','_lineSpacing','toggleVisibility','createSampler','updateCubePose','updateLight','81992HJXQvZ','_height','_cameraBuffer','945078VwhPNV','rotateY','_outputSizeBuffer','applyMotorToPoint','responseText','resetPose','extractTranslator','_params','isInside','rotateZ','Ray\x20Tracer\x20output\x20size\x20buffer','_objectCnt','createCommandEncoder','updateBoxPose','computeMain','name','Ray\x20Trace\x20Box\x20Bind\x20Group\x201','setTracerObject','width','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','_paramBuffer','/assets/envnegy.jpg','createComputePipeline','then','_offScreenTexture','Parameters\x20','statusText','left','_gold','/assets/envnegx.jpg','writeBuffer','createDir','_top','_goldTexture','map','White','10px','_envnzTexture','_envny','\x20Shader\x20','byteLength','store','Ray\x20Tracing\x20Pipeline\x20','_lines','_cylinder','normalizeMotor','_cylinderBuffer','_cone','resize','requestDevice','decode','ceil','updateGeometry','_envpx','</br>','max','canvas','Blue','_cubeOffset','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','mouseup','moveZ','keyup','extractRotor','Texture\x20','DONE','_isProjective','onerror','_direction','createView','_sampler','_envnxBitmap','createRenderPipeline','_paddingx','loadShader','render','updateSpherePose','updateCylinderScales','Point','_textContext','_metal','/assets/metal.jpg','_fontSize','createElement','style','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0ag/G:\x20Change\x20sphere\x20shininess\x0ay/Y:\x20Show/Hide\x20Cube\x20Map\x0at/T:\x20Show/Hide\x20Texture\x0ab/B:\x20Show/Hide\x20Bump\x20Map\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','initial','reduce','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','draw','init','getContext','updateSphereScales','rgba(1,\x201,\x201,\x200.5)','_lightTexture','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','setPipeline','Ray\x20Tracer\x20Shader','_sphere','right','createShaderModule','submit','_camera','_scales','/assets/envposy.jpg','Cone\x20','rgba8unorm','25310zcqKZp','TEXTURE_BINDING','userAgent','_wgWidth','_computePipeline','1550395XmUcKF','/assets/envnegz.jpg','open','UNIFORM','RENDER_ATTACHMENT','/shaders/optimized_tracedemotexturebox.wgsl','_bindGroup','remove','moveX','3lWbBGL','Lambertian','auto','createTexture','Camera\x20','_light','beginComputePass','devicePixelRatio','COPY_DST','Ray\x20Trace\x20Box\x20Layout\x20','_bindGroupLayout2','mousemove','resizeCanvas','createTranslator','Sphere\x20','Light\x20','_attenuation','_pipeline','_envnyTexture','_tracer','setRequestHeader','createPlane','getCurrentTexture','_lightBitmap','height','_objects','updateText','pointer-events','1665YwYGQM','setProperty','_front','Green','message','createBindGroup','_right','touchend','src','extractPoint','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','Toon','Couldn\x27t\x20request\x20WebGPU\x20adapter.','replace','read-only-storage','measureText','addEventListener','fill','fragmentMain','white','58494WNOQyN','Ray\x20Tracing\x20Bind\x20Group','GET','_canvasHeight','createBuffer','_clearColor','_metalBitmap','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','appendSceneObject','Emit\x20only','_coneBuffer','updateBoxScales','STORAGE','_intensity','_envpxBitmap','absolute','_bindGroupLayout1','end','updateCameraFocal','send','split','position','_textureParamBuffer','createPlaneFromPoints','font','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','_envpzTexture','gpu','updateParam','transformOrigin','innerHeight','_envnzBitmap','_width','clearRect','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','Directional','_imgWidth','456562tsuKsB','getName','_envpzBitmap','status','_canvasFormat','mouseenter','none','createShaders','/assets/gold.png','/assets/envposz.jpg','_textFont','renderCanvas','geometricProduct','/assets/envposx.jpg','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','border','_metalTexture','updateConePose','clear','webgpu','_device','createPoint','vertexMain','_position','Spotlight','_cube','_back','keydown','dispatchWorkgroups','createPipelineLayout','??????????','constructor','_lightBuffer','finish','push','Box\x20','18px\x20Arial','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','_left','/assets/normal.jpg','Cylinder\x20','hidden','touchmove','updateTextRegion','_imgHeight','updateTextureParam','sqrt','textBaseline','updateCameraPose','applyMotorToDir','onload','rotateX','appendChild','_context','_down','getBindGroupLayout','center','_sphereBuffer','_textCanvas'];_0x37e6=function(){return _0x108cac;};return _0x37e6();}class Light{constructor(){const _0xe737cb=_0x4b3d1c;this[_0xe737cb(0x1cc)]=new Float32Array(Array(0x4)[_0xe737cb(0x1bc)](0x0)),this[_0xe737cb(0x1fb)]=new Float32Array(Array(0x4)[_0xe737cb(0x1bc)](0x0)),this[_0xe737cb(0x15a)]=new Float32Array(Array(0x4)[_0xe737cb(0x1bc)](0x0)),this[_0xe737cb(0x19f)]=new Float32Array(Array(0x4)[_0xe737cb(0x1bc)](0x0)),this['_attenuation'][0x0]=0x1,this[_0xe737cb(0x11d)]=new Float32Array(Array(0x4)[_0xe737cb(0x1bc)](0x0));}}class PointLight extends Light{constructor(_0x4445b4=[0x1,0x1,0x1],_0x11881b=[0x0,0x0,0x0],_0x3d051f=[0x1,0.1,0.01]){const _0x41a9c7=_0x4b3d1c;super();for(let _0x2dc282=0x0;_0x2dc282<0x3;++_0x2dc282){this[_0x41a9c7(0x1cc)][_0x2dc282]=_0x4445b4[_0x2dc282],this['_position'][_0x2dc282]=_0x11881b[_0x2dc282],this['_attenuation'][_0x2dc282]=_0x3d051f[_0x2dc282];}}}class RectangularLight extends Light{constructor(_0x52a0da=[0x1,0x1,0x1],_0x24eb98=[0x0,0x0,0x0],_0x20a509=[0x1,0.5,0.5],_0x36b667=0.1,_0x4671db=0.1){const _0x2d9ffd=_0x4b3d1c;super();for(let _0x26ec40=0x0;_0x26ec40<0x3;++_0x26ec40){this[_0x2d9ffd(0x1cc)][_0x26ec40]=_0x52a0da[_0x26ec40],this[_0x2d9ffd(0x1fb)][_0x26ec40]=_0x24eb98[_0x26ec40],this['_attenuation'][_0x26ec40]=_0x20a509[_0x26ec40];}this[_0x2d9ffd(0x11d)][0x0]=_0x36b667,this['_params'][0x1]=_0x4671db;}}class SphericalLight extends Light{constructor(_0x3ff898=[0x1,0x1,0x1],_0x52da81=[0x0,0x0,0x0],_0x152a6d=[0x1,0.5,0.5],_0x47eb73=0.1){const _0x1a44f7=_0x4b3d1c;super();for(let _0x1d92a2=0x0;_0x1d92a2<0x3;++_0x1d92a2){this[_0x1a44f7(0x1cc)][_0x1d92a2]=_0x3ff898[_0x1d92a2],this[_0x1a44f7(0x1fb)][_0x1d92a2]=_0x52da81[_0x1d92a2],this[_0x1a44f7(0x19f)][_0x1d92a2]=_0x152a6d[_0x1d92a2];}this[_0x1a44f7(0x11d)][0x0]=_0x47eb73;}}function _0xdcc1(_0xd065f1,_0x3ea514){const _0x37e6a8=_0x37e6();return _0xdcc1=function(_0xdcc13c,_0x5746c1){_0xdcc13c=_0xdcc13c-0x118;let _0x39a530=_0x37e6a8[_0xdcc13c];return _0x39a530;},_0xdcc1(_0xd065f1,_0x3ea514);}class DirectionalLight extends Light{constructor(_0x5047a3=[0x1,0x1,0x1],_0x4e49d0=[Math[_0x4b3d1c(0x212)](0x3),Math[_0x4b3d1c(0x212)](0x3),Math[_0x4b3d1c(0x212)](0x3)]){const _0x211293=_0x4b3d1c;super();for(let _0x2a3c6b=0x0;_0x2a3c6b<0x3;++_0x2a3c6b){this[_0x211293(0x1cc)][_0x2a3c6b]=_0x5047a3[_0x2a3c6b],this['_direction'][_0x2a3c6b]=_0x4e49d0[_0x2a3c6b];}}}class SpotLight extends Light{constructor(_0xa9dfe3=[0x1,0x1,0x1],_0x161c88=[0x0,0x0,0x0],_0x65e7e2=[0x0,0x1,0x0],_0x21d354=[0x1,0.1,0.01],_0x1e4c05=0.785,_0x133454=0x5){const _0x518539=_0x4b3d1c;super();for(let _0x4fd547=0x0;_0x4fd547<0x3;++_0x4fd547){this['_intensity'][_0x4fd547]=_0xa9dfe3[_0x4fd547],this[_0x518539(0x1fb)][_0x4fd547]=_0x161c88[_0x4fd547],this[_0x518539(0x15a)][_0x4fd547]=_0x65e7e2[_0x4fd547],this[_0x518539(0x19f)][_0x4fd547]=_0x21d354[_0x4fd547];}this['_params'][0x0]=_0x1e4c05,this['_params'][0x1]=_0x133454;}}async function init(){const _0xd7fd3b=_0x4b3d1c,_0x382e34=document['createElement'](_0xd7fd3b(0x14e));_0x382e34['id']=_0xd7fd3b(0x1ef),document[_0xd7fd3b(0x226)][_0xd7fd3b(0x218)](_0x382e34);const _0x3dfff3=new RayTracer(_0x382e34);await _0x3dfff3[_0xd7fd3b(0x170)]();var _0x22b79a=new Camera(),_0x4eafd7=new RayTracingTextureDemoSceneObject(_0x3dfff3[_0xd7fd3b(0x1f8)],_0x3dfff3[_0xd7fd3b(0x1e8)],_0x22b79a);await _0x3dfff3[_0xd7fd3b(0x127)](_0x4eafd7),_0x4eafd7['_box'][_0xd7fd3b(0x17d)][0x0]=0x2,_0x4eafd7[_0xd7fd3b(0x235)][_0xd7fd3b(0x17d)][0x1]=1.25,_0x4eafd7[_0xd7fd3b(0x235)]['_scales'][0x2]=0x2,_0x4eafd7[_0xd7fd3b(0x1ca)](),_0x4eafd7[_0xd7fd3b(0x235)][_0xd7fd3b(0x22d)][0x6]=-0.2*_0x4eafd7[_0xd7fd3b(0x235)][_0xd7fd3b(0x17d)][0x2],_0x4eafd7[_0xd7fd3b(0x123)](),_0x4eafd7[_0xd7fd3b(0x1fd)]['_scales'][0x0]=0.3,_0x4eafd7[_0xd7fd3b(0x1fd)][_0xd7fd3b(0x17d)][0x1]=0.5,_0x4eafd7[_0xd7fd3b(0x1fd)][_0xd7fd3b(0x17d)][0x2]=0.3,_0x4eafd7[_0xd7fd3b(0x21f)](),_0x4eafd7['_cube'][_0xd7fd3b(0x22d)][0x4]=0.25,_0x4eafd7['_cube'][_0xd7fd3b(0x22d)][0x5]=-0.1875,_0x4eafd7[_0xd7fd3b(0x1fd)]['_pose'][0x6]=-0.5,_0x4eafd7['updateCubePose'](),_0x4eafd7[_0xd7fd3b(0x178)][_0xd7fd3b(0x17d)][0x0]=0.25,_0x4eafd7[_0xd7fd3b(0x178)][_0xd7fd3b(0x17d)][0x1]=0.25,_0x4eafd7[_0xd7fd3b(0x178)]['_scales'][0x2]=0.25,_0x4eafd7['updateSphereScales'](),_0x4eafd7['_sphere'][_0xd7fd3b(0x22d)][0x4]=-0.225,_0x4eafd7[_0xd7fd3b(0x178)]['_pose'][0x5]=-0.1875,_0x4eafd7[_0xd7fd3b(0x178)]['_pose'][0x6]=-0.6,_0x4eafd7[_0xd7fd3b(0x162)](),_0x4eafd7[_0xd7fd3b(0x142)]['_scales'][0x0]=0.2,_0x4eafd7[_0xd7fd3b(0x142)][_0xd7fd3b(0x17d)][0x1]=1.25,_0x4eafd7[_0xd7fd3b(0x142)]['_scales'][0x2]=0.2,_0x4eafd7[_0xd7fd3b(0x163)](),_0x4eafd7[_0xd7fd3b(0x142)][_0xd7fd3b(0x22d)][0x5]=0.3125,_0x4eafd7[_0xd7fd3b(0x142)][_0xd7fd3b(0x22d)][0x6]=-0.75,_0x4eafd7['updateCylinderPose'](),_0x4eafd7[_0xd7fd3b(0x145)]['_scales'][0x0]=0.2,_0x4eafd7[_0xd7fd3b(0x145)][_0xd7fd3b(0x17d)][0x1]=-0.6,_0x4eafd7[_0xd7fd3b(0x145)][_0xd7fd3b(0x17d)][0x2]=0.2,_0x4eafd7[_0xd7fd3b(0x233)](),_0x4eafd7['_cone'][_0xd7fd3b(0x22d)][0x4]=-0.05,_0x4eafd7['_cone']['_pose'][0x5]=-0.3125,_0x4eafd7[_0xd7fd3b(0x145)][_0xd7fd3b(0x22d)][0x6]=-0.4,_0x4eafd7[_0xd7fd3b(0x1f5)]();var _0x910e20=_0xd7fd3b(0x16b),_0x332aa1=new StandardTextObject(_0x910e20);let _0x5925d6='??';var _0x56f090=new StandardTextObject(_0xd7fd3b(0x25f)+_0x5925d6),_0x45a960=0.05;_0x4eafd7[_0xd7fd3b(0x11d)][0x1]=0x0;var _0x3fd2b8=[_0xd7fd3b(0x164),_0xd7fd3b(0x1e2),_0xd7fd3b(0x1fc)];_0x4eafd7[_0xd7fd3b(0x11d)][0x2]=0x0;var _0xc63aa2=[_0xd7fd3b(0x1c8),_0xd7fd3b(0x190),'Phong',_0xd7fd3b(0x1b6)];_0x4eafd7['_params'][0x3]=0x19;var _0x1f25eb=0x3,_0x36ffdc=['Red',_0xd7fd3b(0x1ae),_0xd7fd3b(0x14f),_0xd7fd3b(0x139)];_0x910e20=_0x910e20[_0xd7fd3b(0x1b8)]('???????????',_0x3fd2b8[_0x4eafd7[_0xd7fd3b(0x11d)][0x1]]),_0x910e20=_0x910e20[_0xd7fd3b(0x1b8)](_0xd7fd3b(0x202),_0xc63aa2[_0x4eafd7['_params'][0x2]]),_0x910e20=_0x910e20['replace']('?????',_0x36ffdc[_0x1f25eb]),_0x332aa1[_0xd7fd3b(0x1a9)](_0x910e20);var _0x583224=null;let _0x259904=async()=>{const _0x426e6c=_0xd7fd3b;switch(_0x4eafd7[_0x426e6c(0x11d)][0x1]){case 0x0:_0x583224=new PointLight();break;case 0x1:_0x583224=new DirectionalLight();break;case 0x2:_0x583224=new SpotLight();break;case 0x3:_0x583224=new RectangularLight();break;case 0x4:_0x583224=new SphericalLight();break;}switch(_0x1f25eb){case 0x0:_0x583224[_0x426e6c(0x1cc)][0x1]=0x0,_0x583224['_intensity'][0x2]=0x0;break;case 0x1:_0x583224['_intensity'][0x0]=0x0,_0x583224[_0x426e6c(0x1cc)][0x2]=0x0;break;case 0x2:_0x583224[_0x426e6c(0x1cc)][0x0]=0x0,_0x583224[_0x426e6c(0x1cc)][0x1]=0x0;break;}_0x583224[_0x426e6c(0x1fb)][0x1]=-0.624,_0x583224['_position'][0x2]=0.75;};await _0x259904(),_0x4eafd7[_0xd7fd3b(0x266)](_0x583224);let _0x1523ba=async()=>{const _0xc8600d=_0xd7fd3b;_0x4eafd7[_0xc8600d(0x256)][0x0]?(_0x4eafd7['_box'][_0xc8600d(0x17d)][0x0]=0x1000,_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x1]=0x1000,_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x2]=0x1000,_0x4eafd7['updateBoxScales']()):(_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x0]=0x2,_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x1]=1.25,_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x2]=0x2,_0x4eafd7['updateBoxScales'](),_0x4eafd7['_box'][_0xc8600d(0x22d)][0x6]=-0.2*_0x4eafd7[_0xc8600d(0x235)][_0xc8600d(0x17d)][0x2],_0x4eafd7[_0xc8600d(0x123)]());};await _0x1523ba(),window[_0xd7fd3b(0x1bb)](_0xd7fd3b(0x1ff),async _0x11ea6e=>{const _0x54c0b2=_0xd7fd3b;switch(_0x11ea6e['key']){case'h':case'H':_0x332aa1[_0x54c0b2(0x263)]();break;case'f':case'F':_0x56f090['toggleVisibility']();break;case'w':case'W':_0x22b79a['moveY'](-_0x45a960),_0x4eafd7['updateCameraPose']();break;case's':case'S':_0x22b79a[_0x54c0b2(0x239)](_0x45a960),_0x4eafd7['updateCameraPose']();break;case'a':case'A':_0x22b79a['moveX'](-_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'd':case'D':_0x22b79a['moveX'](_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'q':case'Q':_0x22b79a[_0x54c0b2(0x153)](-_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'e':case'E':_0x22b79a[_0x54c0b2(0x153)](_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'i':case'I':_0x22b79a[_0x54c0b2(0x217)](-_0x45a960),_0x4eafd7['updateCameraPose']();break;case'k':case'K':_0x22b79a[_0x54c0b2(0x217)](_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'j':case'J':_0x22b79a[_0x54c0b2(0x26b)](_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'l':case'L':_0x22b79a[_0x54c0b2(0x26b)](-_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'u':case'U':_0x22b79a[_0x54c0b2(0x11f)](-_0x45a960),_0x4eafd7[_0x54c0b2(0x214)]();break;case'o':case'O':_0x22b79a[_0x54c0b2(0x11f)](_0x45a960),_0x4eafd7['updateCameraPose']();break;case'c':case'C':_0x4eafd7['_params'][0x0]=!_0x4eafd7[_0x54c0b2(0x11d)][0x0],_0x4eafd7[_0x54c0b2(0x1db)]();break;case'r':case'R':_0x22b79a['resetPose'](),_0x4eafd7[_0x54c0b2(0x214)](),_0x4eafd7[_0x54c0b2(0x1d1)]();break;case'[':_0x22b79a[_0x54c0b2(0x221)][0x0]*=1.1,_0x4eafd7['updateCameraFocal']();break;case']':_0x22b79a[_0x54c0b2(0x221)][0x0]/=1.1,_0x4eafd7[_0x54c0b2(0x1d1)]();break;case'{':_0x22b79a['_focal'][0x1]*=1.1,_0x4eafd7[_0x54c0b2(0x1d1)]();break;case'}':_0x22b79a[_0x54c0b2(0x221)][0x1]/=1.1,_0x4eafd7[_0x54c0b2(0x1d1)]();break;case'n':case'N':let _0x4b0d82=(_0x4eafd7[_0x54c0b2(0x11d)][0x1]+0x1)%_0x3fd2b8[_0x54c0b2(0x242)];_0x910e20=_0x910e20[_0x54c0b2(0x1b8)](_0x3fd2b8[_0x4eafd7[_0x54c0b2(0x11d)][0x1]],_0x3fd2b8[_0x4b0d82]),_0x332aa1[_0x54c0b2(0x1a9)](_0x910e20),_0x4eafd7['_params'][0x1]=_0x4b0d82,await _0x259904(),_0x4eafd7['updateParam'](),_0x4eafd7[_0x54c0b2(0x266)](_0x583224);break;case'm':case'M':let _0x4302ad=(_0x4eafd7[_0x54c0b2(0x11d)][0x2]+0x1)%_0xc63aa2['length'];_0x910e20=_0x910e20['replace'](_0xc63aa2[_0x4eafd7[_0x54c0b2(0x11d)][0x2]],_0xc63aa2[_0x4302ad]),_0x332aa1[_0x54c0b2(0x1a9)](_0x910e20),_0x4eafd7['_params'][0x2]=_0x4302ad,_0x4eafd7[_0x54c0b2(0x1db)]();break;case'v':case'V':let _0x4ca3be=(_0x1f25eb+0x1)%_0x36ffdc[_0x54c0b2(0x242)];_0x910e20=_0x910e20[_0x54c0b2(0x1b8)](_0x36ffdc[_0x1f25eb],_0x36ffdc[_0x4ca3be]),_0x332aa1['updateText'](_0x910e20),_0x1f25eb=_0x4ca3be,await _0x259904(),_0x4eafd7['updateLight'](_0x583224);break;case'g':_0x4eafd7[_0x54c0b2(0x11d)][0x3]=_0x4eafd7[_0x54c0b2(0x11d)][0x3]+0x1,_0x4eafd7['updateParam']();break;case'G':_0x4eafd7['_params'][0x3]=_0x4eafd7['_params'][0x3]-0x1;if(_0x4eafd7[_0x54c0b2(0x11d)][0x3]<0x1)_0x4eafd7[_0x54c0b2(0x11d)][0x3]=0x1;_0x4eafd7['updateParam']();break;case'y':case'Y':_0x4eafd7[_0x54c0b2(0x256)][0x0]=!_0x4eafd7['_textureParams'][0x0],_0x4eafd7[_0x54c0b2(0x211)](),await _0x1523ba();break;case't':case'T':_0x4eafd7[_0x54c0b2(0x256)][0x1]=!_0x4eafd7[_0x54c0b2(0x256)][0x1],_0x4eafd7[_0x54c0b2(0x211)]();break;case'b':case'B':_0x4eafd7['_textureParams'][0x2]=!_0x4eafd7[_0x54c0b2(0x256)][0x2],_0x4eafd7[_0x54c0b2(0x211)]();break;}}),window[_0xd7fd3b(0x1bb)](_0xd7fd3b(0x154),_0x587e3f=>{});let _0x3a69fa=async _0x4cf963=>{},_0x29f910=async _0x3f8015=>{},_0x442b14=_0x50e096=>{};_0x382e34['addEventListener']('mousedown',_0x3a69fa),_0x382e34['addEventListener'](_0xd7fd3b(0x19a),_0x29f910),_0x382e34[_0xd7fd3b(0x1bb)](_0xd7fd3b(0x152),_0x442b14),_0x382e34[_0xd7fd3b(0x1bb)](_0xd7fd3b(0x1e9),_0xe4e5f1=>{}),_0x382e34[_0xd7fd3b(0x1bb)]('mouseleave',_0x5e8bbd=>{}),_0x382e34['addEventListener']('touchstart',_0x3a69fa),_0x382e34['addEventListener'](_0xd7fd3b(0x20e),_0x29f910),_0x382e34[_0xd7fd3b(0x1bb)](_0xd7fd3b(0x1b2),_0x442b14),_0x332aa1[_0xd7fd3b(0x21e)][_0xd7fd3b(0x16a)][_0xd7fd3b(0x1ac)](_0xd7fd3b(0x1aa),_0xd7fd3b(0x1ea)),_0x56f090['_textCanvas'][_0xd7fd3b(0x16a)][_0xd7fd3b(0x1ac)](_0xd7fd3b(0x1aa),_0xd7fd3b(0x1ea));var _0x3d4069=0x0,_0x4f89cb=0x3c,_0x266c17=0x1/_0x4f89cb,_0x1e4149=_0x266c17*0x3e8,_0x258b96;let _0x2f0540=()=>{const _0x1e34b0=_0xd7fd3b;let _0x4b7c50=Date[_0x1e34b0(0x23b)]()-_0x258b96;_0x4b7c50>_0x1e4149&&(++_0x3d4069,_0x258b96=Date[_0x1e34b0(0x23b)]()-_0x4b7c50%_0x1e4149,_0x3dfff3[_0x1e34b0(0x161)]()),requestAnimationFrame(_0x2f0540);};return _0x258b96=Date['now'](),_0x2f0540(),_0x56f090[_0xd7fd3b(0x21e)]['style']['setProperty'](_0xd7fd3b(0x131),_0xd7fd3b(0x16c)),_0x56f090['_textCanvas'][_0xd7fd3b(0x16a)][_0xd7fd3b(0x179)]='10px',setInterval(()=>{const _0xecd8c9=_0xd7fd3b;_0x5925d6=_0x3d4069,_0x3d4069=0x0,_0x56f090['updateText'](_0xecd8c9(0x25f)+_0x5925d6);},0x3e8),_0x3dfff3;}init()[_0x4b3d1c(0x12d)](_0x24dfa9=>{console['log'](_0x24dfa9);})[_0x4b3d1c(0x220)](_0x3eb2ae=>{const _0x2576dc=_0x4b3d1c,_0x5069d6=document[_0x2576dc(0x169)]('p');_0x5069d6[_0x2576dc(0x253)]=navigator[_0x2576dc(0x183)]+_0x2576dc(0x14c)+_0x3eb2ae[_0x2576dc(0x1af)],document['body'][_0x2576dc(0x218)](_0x5069d6),document[_0x2576dc(0x24e)]('renderCanvas')[_0x2576dc(0x18d)]();});