/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
 const _0xdf4916=_0x5df0;(function(_0x370c3b,_0x2bec60){const _0x1d2a97=_0x5df0,_0x5b3a30=_0x370c3b();while(!![]){try{const _0x719e7d=-parseInt(_0x1d2a97(0x187))/0x1+-parseInt(_0x1d2a97(0x20c))/0x2*(-parseInt(_0x1d2a97(0xff))/0x3)+-parseInt(_0x1d2a97(0x229))/0x4*(-parseInt(_0x1d2a97(0x10d))/0x5)+-parseInt(_0x1d2a97(0x21c))/0x6*(parseInt(_0x1d2a97(0x141))/0x7)+-parseInt(_0x1d2a97(0x1ae))/0x8+-parseInt(_0x1d2a97(0xea))/0x9*(parseInt(_0x1d2a97(0x224))/0xa)+parseInt(_0x1d2a97(0x143))/0xb;if(_0x719e7d===_0x2bec60)break;else _0x5b3a30['push'](_0x5b3a30['shift']());}catch(_0x171722){_0x5b3a30['push'](_0x5b3a30['shift']());}}}(_0x4e14,0x67fe6));class Renderer{constructor(_0x513783){const _0x1d9b90=_0x5df0;this[_0x1d9b90(0x1ad)]=_0x513783,this[_0x1d9b90(0x104)]=[],this['_clearColor']={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0xdf4916(0x1a1)](){const _0x32fdd1=_0xdf4916;if(!navigator[_0x32fdd1(0x1aa)])throw Error(_0x32fdd1(0x1e4));const _0x1c4b57=await navigator[_0x32fdd1(0x1aa)]['requestAdapter']();if(!_0x1c4b57)throw Error(_0x32fdd1(0x1f3));this[_0x32fdd1(0x1ce)]=await _0x1c4b57['requestDevice'](),this[_0x32fdd1(0x19a)]=this['_canvas'][_0x32fdd1(0x133)](_0x32fdd1(0x132)),this['_canvasFormat']=navigator[_0x32fdd1(0x1aa)][_0x32fdd1(0x21d)](),this[_0x32fdd1(0x19a)]['configure']({'device':this[_0x32fdd1(0x1ce)],'format':this['_canvasFormat']}),this[_0x32fdd1(0x11d)](),window[_0x32fdd1(0x157)](_0x32fdd1(0x17b),this[_0x32fdd1(0x11d)][_0x32fdd1(0x1c2)](this));}['resizeCanvas'](){const _0x12cc92=_0xdf4916,_0x2cda12=window['devicePixelRatio']||0x1,_0xc2ed27=window[_0x12cc92(0x198)]*_0x2cda12,_0x509c8e=window['innerHeight']*_0x2cda12;this['_canvas'][_0x12cc92(0x171)]=_0xc2ed27,this[_0x12cc92(0x1ad)][_0x12cc92(0x204)]=_0x509c8e,this[_0x12cc92(0x1ad)][_0x12cc92(0x1ed)][_0x12cc92(0x171)]=window[_0x12cc92(0x198)]+'px',this[_0x12cc92(0x1ad)]['style'][_0x12cc92(0x204)]=window[_0x12cc92(0xe9)]+'px',this[_0x12cc92(0x1ad)][_0x12cc92(0x1ed)][_0x12cc92(0x1d1)]=_0x12cc92(0x1f8),this[_0x12cc92(0x12c)]();}async[_0xdf4916(0x1a2)](_0x3347ca){const _0x5065ea=_0xdf4916;await _0x3347ca['init'](),this['_objects'][_0x5065ea(0x21a)](_0x3347ca);}[_0xdf4916(0x206)](_0x3f5ae4){const _0x41af1a=_0xdf4916;for(const _0x31fad6 of this[_0x41af1a(0x104)]){_0x31fad6?.[_0x41af1a(0x10f)]();}let _0x3b6c46=this['_device'][_0x41af1a(0x213)]();const _0x407831=_0x3b6c46[_0x41af1a(0x130)]({'colorAttachments':[{'view':_0x3f5ae4,'clearValue':this[_0x41af1a(0x191)],'loadOp':_0x41af1a(0x1d4),'storeOp':'store'}]});for(const _0x52c30b of this[_0x41af1a(0x104)]){_0x52c30b?.[_0x41af1a(0x12c)](_0x407831);}_0x407831[_0x41af1a(0x1d2)]();const _0x37caeb=_0x3b6c46[_0x41af1a(0x128)]();for(const _0x209170 of this[_0x41af1a(0x104)]){_0x209170?.[_0x41af1a(0x17a)](_0x37caeb);}_0x37caeb[_0x41af1a(0x1d2)]();const _0x1de292=_0x3b6c46[_0x41af1a(0x162)]();this['_device'][_0x41af1a(0x15d)][_0x41af1a(0x1bf)]([_0x1de292]);}[_0xdf4916(0x12c)](){const _0x464be0=_0xdf4916;this[_0x464be0(0x206)](this[_0x464be0(0x19a)][_0x464be0(0x173)]()['createView']());}}class RayTracer extends Renderer{constructor(_0x23b8d4){const _0x34bae0=_0xdf4916;super(_0x23b8d4),this[_0x34bae0(0x16e)]=null;}async[_0xdf4916(0x1a1)](){const _0xa48c1d=_0xdf4916;if(!navigator['gpu'])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x3bc392=await navigator[_0xa48c1d(0x1aa)][_0xa48c1d(0x116)]();if(!_0x3bc392)throw Error(_0xa48c1d(0x1f3));this[_0xa48c1d(0x1ce)]=await _0x3bc392[_0xa48c1d(0x1f6)](),this[_0xa48c1d(0x19a)]=this['_canvas'][_0xa48c1d(0x133)](_0xa48c1d(0x132)),this[_0xa48c1d(0x15a)]='rgba8unorm',this[_0xa48c1d(0x19a)][_0xa48c1d(0x1a0)]({'device':this[_0xa48c1d(0x1ce)],'format':this['_canvasFormat']}),this[_0xa48c1d(0x123)]=this[_0xa48c1d(0x1ce)][_0xa48c1d(0xfd)]({'label':'Ray\x20Tracer\x20Shader','code':_0xa48c1d(0x225)}),this[_0xa48c1d(0x11b)]=this[_0xa48c1d(0x1ce)]['createBuffer']({'label':_0xa48c1d(0x1c1),'size':0x8,'usage':GPUBufferUsage[_0xa48c1d(0x13e)]|GPUBufferUsage[_0xa48c1d(0x17f)]}),this[_0xa48c1d(0x100)]=this[_0xa48c1d(0x1ce)]['createRenderPipeline']({'label':_0xa48c1d(0x142),'layout':_0xa48c1d(0x12d),'vertex':{'module':this['_shaderModule'],'entryPoint':_0xa48c1d(0x22b)},'fragment':{'module':this[_0xa48c1d(0x123)],'entryPoint':_0xa48c1d(0x20d),'targets':[{'format':this[_0xa48c1d(0x15a)]}]}}),this[_0xa48c1d(0x169)]=this[_0xa48c1d(0x1ce)]['createSampler']({'label':_0xa48c1d(0x15e),'magFilter':_0xa48c1d(0x197),'minFilter':_0xa48c1d(0x197)}),this[_0xa48c1d(0x11d)](),window[_0xa48c1d(0x157)](_0xa48c1d(0x17b),this['resizeCanvas'][_0xa48c1d(0x1c2)](this));}['resizeCanvas'](){const _0x6ffd1a=_0xdf4916,_0x5284eb=window[_0x6ffd1a(0x1cf)]||0x1,_0x4b1e61=window[_0x6ffd1a(0x198)]*_0x5284eb,_0x332f9f=window[_0x6ffd1a(0xe9)]*_0x5284eb,_0x41af99=_0x4b1e61/_0x332f9f,_0x1214f5=_0x332f9f;let _0x3f540d={'width':_0x1214f5*_0x41af99,'height':_0x1214f5};this[_0x6ffd1a(0x127)]=this['_device'][_0x6ffd1a(0x168)]({'size':_0x3f540d,'format':this['_canvasFormat'],'usage':GPUTextureUsage[_0x6ffd1a(0x1b5)]|GPUTextureUsage[_0x6ffd1a(0x1e3)]}),this['_tracer']&&(this[_0x6ffd1a(0x16e)][_0x6ffd1a(0x210)]=this[_0x6ffd1a(0x127)][_0x6ffd1a(0x171)],this[_0x6ffd1a(0x16e)][_0x6ffd1a(0x181)]=this[_0x6ffd1a(0x127)][_0x6ffd1a(0x204)],this[_0x6ffd1a(0x16e)][_0x6ffd1a(0x10f)](),this[_0x6ffd1a(0x16e)]['createBindGroup'](this['_offScreenTexture'])),this['_bindGroup']=this[_0x6ffd1a(0x1ce)][_0x6ffd1a(0x217)]({'label':_0x6ffd1a(0x150),'layout':this[_0x6ffd1a(0x100)][_0x6ffd1a(0xdc)](0x0),'entries':[{'binding':0x0,'resource':this[_0x6ffd1a(0x127)]['createView']()},{'binding':0x1,'resource':this['_sampler']},{'binding':0x2,'resource':{'buffer':this[_0x6ffd1a(0x11b)]}}]}),super[_0x6ffd1a(0x11d)](),this['_device'][_0x6ffd1a(0x15d)][_0x6ffd1a(0x228)](this[_0x6ffd1a(0x11b)],0x0,new Float32Array([_0x4b1e61,_0x332f9f]));}async[_0xdf4916(0x125)](_0xe17587){const _0x3198e4=_0xdf4916;await _0xe17587[_0x3198e4(0x1a1)](),_0xe17587['_imgWidth']=this[_0x3198e4(0x127)]['width'],_0xe17587[_0x3198e4(0x181)]=this[_0x3198e4(0x127)]['height'],_0xe17587[_0x3198e4(0x10f)](),this[_0x3198e4(0x16e)]=_0xe17587,this[_0x3198e4(0x16e)][_0x3198e4(0x217)](this[_0x3198e4(0x127)]);}['render'](){const _0x218939=_0xdf4916;if(this[_0x218939(0x16e)]){let _0x470514=this['_device'][_0x218939(0x213)]();const _0x34af1d=_0x470514[_0x218939(0x128)]();this[_0x218939(0x16e)][_0x218939(0x17a)](_0x34af1d),_0x34af1d[_0x218939(0x1d2)](),this[_0x218939(0x1ce)][_0x218939(0x15d)]['submit']([_0x470514['finish']()]);}let _0x1d0142=this['_device'][_0x218939(0x213)]();const _0x56a6ff=_0x1d0142['beginRenderPass']({'colorAttachments':[{'view':this['_context']['getCurrentTexture']()['createView'](),'clearValue':this['_clearColor'],'loadOp':_0x218939(0x1d4),'storeOp':_0x218939(0x112)}]});_0x56a6ff[_0x218939(0x175)](this[_0x218939(0x100)]),_0x56a6ff[_0x218939(0x164)](0x0,this[_0x218939(0xec)]),_0x56a6ff['draw'](0x6),_0x56a6ff['end'](),this[_0x218939(0x1ce)][_0x218939(0x15d)][_0x218939(0x1bf)]([_0x1d0142[_0x218939(0x162)]()]);}}class StandardTextObject{constructor(_0x3f256a,_0x5ad7cf=0x5,_0x5192b7=_0xdf4916(0x194)){const _0x213502=_0xdf4916;this[_0x213502(0x1de)]=_0x5192b7,this['_lineSpacing']=_0x5ad7cf,this['_textCanvas']=document['createElement'](_0x213502(0xf4)),this[_0x213502(0x117)]=this[_0x213502(0x1e2)][_0x213502(0x133)]('2d'),this[_0x213502(0x140)](_0x3f256a),this[_0x213502(0x14e)](_0x3f256a),this['_textCanvas'][_0x213502(0x1ed)]['position']='absolute',this[_0x213502(0x1e2)][_0x213502(0x1ed)]['top']=_0x213502(0x129),this[_0x213502(0x1e2)][_0x213502(0x1ed)]['left']=_0x213502(0x129),this[_0x213502(0x1e2)][_0x213502(0x1ed)][_0x213502(0x13f)]=_0x213502(0x1b7),document['body']['appendChild'](this[_0x213502(0x1e2)]);}[_0xdf4916(0x11c)](){const _0x387b07=_0xdf4916;this[_0x387b07(0x1e2)][_0x387b07(0x1a4)]=!this[_0x387b07(0x1e2)]['hidden'];}[_0xdf4916(0x140)](_0x992e1b){const _0x1794e0=_0xdf4916;this[_0x1794e0(0x117)][_0x1794e0(0x1fc)]=this[_0x1794e0(0x1de)],this['_lines']=_0x992e1b[_0x1794e0(0x126)]('\x0a'),this[_0x1794e0(0xed)]=Math[_0x1794e0(0x1ca)](...this['_lines'][_0x1794e0(0x1c0)](_0x5430af=>this[_0x1794e0(0x117)][_0x1794e0(0xf0)](_0x5430af)[_0x1794e0(0x171)]));const _0x3ebfb4=this[_0x1794e0(0x1de)]['match'](/(\d+)px/);_0x3ebfb4?this['_fontSize']=parseInt(_0x3ebfb4[0x1],0xa):(this['_fontSize']=0x12,this[_0x1794e0(0x1de)]='18px\x20Arial'),this[_0x1794e0(0xe8)]=this[_0x1794e0(0x1ab)][_0x1794e0(0x14f)]*(this[_0x1794e0(0x218)]+this[_0x1794e0(0x108)]),this[_0x1794e0(0x1fd)]=0x5,this['_paddingtop']=0x3,this[_0x1794e0(0x12e)]=Math[_0x1794e0(0xe7)](this[_0x1794e0(0xed)]+this[_0x1794e0(0x1fd)]*0x2),this[_0x1794e0(0x1df)]=Math[_0x1794e0(0xe7)](this['_height']+this[_0x1794e0(0x208)]),this[_0x1794e0(0x1e2)][_0x1794e0(0x171)]=this[_0x1794e0(0x12e)],this[_0x1794e0(0x1e2)][_0x1794e0(0x204)]=this[_0x1794e0(0x1df)],this['_textContext'][_0x1794e0(0x1fc)]=this['_textFont'],this['_textContext']['textBaseline']='top';}[_0xdf4916(0x14e)](_0x4aa499){const _0x3d71a6=_0xdf4916;this[_0x3d71a6(0x1ab)]=_0x4aa499[_0x3d71a6(0x126)]('\x0a'),this[_0x3d71a6(0x117)][_0x3d71a6(0xe6)]=_0x3d71a6(0x121),this['_textContext'][_0x3d71a6(0x159)](0x0,0x0,this[_0x3d71a6(0x12e)],this[_0x3d71a6(0x1df)]),this[_0x3d71a6(0x117)][_0x3d71a6(0x138)](0x0,0x0,this[_0x3d71a6(0x12e)],this[_0x3d71a6(0x1df)]),this[_0x3d71a6(0x117)][_0x3d71a6(0xe6)]='white',this[_0x3d71a6(0x1ab)][_0x3d71a6(0x153)]((_0x33c8a6,_0x1731ed)=>{const _0x86868c=_0x3d71a6,_0x378f95=this[_0x86868c(0x1fd)],_0x28201e=this[_0x86868c(0x208)]+_0x1731ed*(this[_0x86868c(0x218)]+this[_0x86868c(0x108)]);this[_0x86868c(0x117)][_0x86868c(0x15b)](_0x33c8a6,_0x378f95,_0x28201e);});}}class SceneObject{static [_0xdf4916(0x1c9)]=0x0;constructor(_0x722e1e,_0x3b4178){const _0x4a147a=_0xdf4916;if(this[_0x4a147a(0x172)]==SceneObject)throw new Error('Abstract\x20classes\x20can\x27t\x20be\x20instantiated.');this[_0x4a147a(0x1ce)]=_0x722e1e,this[_0x4a147a(0x15a)]=_0x3b4178,SceneObject[_0x4a147a(0x1c9)]+=0x1;}[_0xdf4916(0xef)](){const _0x3e9f4a=_0xdf4916;return this[_0x3e9f4a(0x172)][_0x3e9f4a(0x227)]+'\x20'+SceneObject[_0x3e9f4a(0x1c9)][_0x3e9f4a(0xf6)]();}async[_0xdf4916(0x1a1)](){const _0x14bd53=_0xdf4916;await this['createGeometry'](),await this['createShaders'](),await this[_0x14bd53(0x21e)](),await this[_0x14bd53(0x166)]();}async[_0xdf4916(0x134)](){const _0x528f14=_0xdf4916;throw new Error(_0x528f14(0x156));}[_0xdf4916(0x10f)](){}[_0xdf4916(0x1f0)](_0x5f2292){return new Promise((_0x1d3a4f,_0x38d715)=>{const _0x3383cc=_0x5df0,_0x158cd2=new XMLHttpRequest();_0x158cd2[_0x3383cc(0x186)](_0x3383cc(0x16c),_0x5f2292),_0x158cd2[_0x3383cc(0x12f)](_0x3383cc(0xe5),_0x3383cc(0x13d)),_0x158cd2[_0x3383cc(0x1a5)]=function(){const _0x3cf0fa=_0x3383cc;_0x158cd2[_0x3cf0fa(0x1eb)]===XMLHttpRequest['DONE']&&_0x158cd2[_0x3cf0fa(0x1d5)]===0xc8?_0x1d3a4f(_0x158cd2[_0x3cf0fa(0xf1)]):_0x38d715({'status':_0x158cd2['status'],'statusText':_0x158cd2[_0x3cf0fa(0x107)]});},_0x158cd2['onerror']=function(){const _0x2995c6=_0x3383cc;_0x38d715({'status':_0x158cd2[_0x2995c6(0x1d5)],'statusText':_0x158cd2[_0x2995c6(0x107)]});},_0x158cd2[_0x3383cc(0x148)]();});}async[_0xdf4916(0x165)](){const _0x52c70c=_0xdf4916;throw new Error(_0x52c70c(0x1be));}async[_0xdf4916(0x21e)](){throw new Error('Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.');}[_0xdf4916(0x12c)](_0x4ba694){const _0x50c519=_0xdf4916;throw new Error(_0x50c519(0xfc));}async[_0xdf4916(0x166)](){throw new Error('Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.');}[_0xdf4916(0x17a)](_0x44796d){const _0x53dde5=_0xdf4916;throw new Error(_0x53dde5(0xeb));}}class RayTracingObject extends SceneObject{async[_0xdf4916(0x134)](){}async['createShaders'](){const _0x3df385=_0xdf4916;let _0x3a2e52=await this[_0x3df385(0x1f0)](_0x3df385(0x113));this[_0x3df385(0x123)]=this['_device']['createShaderModule']({'label':'\x20Shader\x20'+this['getName'](),'code':_0x3a2e52});}['updateGeometry'](){}async[_0xdf4916(0x21e)](){}[_0xdf4916(0x12c)](_0x1e20e2){}async[_0xdf4916(0x166)](){const _0xc762fb=_0xdf4916;this[_0xc762fb(0x196)]=this[_0xc762fb(0x1ce)][_0xc762fb(0x166)]({'label':'Ray\x20Tracing\x20Pipeline\x20'+this[_0xc762fb(0xef)](),'layout':_0xc762fb(0x12d),'compute':{'module':this[_0xc762fb(0x123)],'entryPoint':_0xc762fb(0x1c7)}});}[_0xdf4916(0x217)](_0x34c48d){const _0x2a55ad=_0xdf4916;this[_0x2a55ad(0xec)]=this[_0x2a55ad(0x1ce)][_0x2a55ad(0x217)]({'label':_0x2a55ad(0x10b),'layout':this[_0x2a55ad(0x196)][_0x2a55ad(0xdc)](0x0),'entries':[{'binding':0x0,'resource':_0x34c48d[_0x2a55ad(0x1b1)]()}]}),this['_wgWidth']=Math['ceil'](_0x34c48d[_0x2a55ad(0x171)]),this[_0x2a55ad(0x154)]=Math['ceil'](_0x34c48d[_0x2a55ad(0x204)]);}[_0xdf4916(0x17a)](_0xca330e){const _0x5e4ca8=_0xdf4916;_0xca330e[_0x5e4ca8(0x175)](this[_0x5e4ca8(0x196)]),_0xca330e[_0x5e4ca8(0x164)](0x0,this[_0x5e4ca8(0xec)]),_0xca330e['dispatchWorkgroups'](Math[_0x5e4ca8(0xe7)](this[_0x5e4ca8(0x1b9)]/0x10),Math['ceil'](this['_wgHeight']/0x10));}}class UnitCube{constructor(){const _0x5cf406=_0xdf4916;this[_0x5cf406(0x1c8)]=new Float32Array(Array(0x10)['fill'](0x0)),this[_0x5cf406(0x1c8)][0x0]=0x1,this[_0x5cf406(0x1e6)]=new Float32Array(Array(0x4)[_0x5cf406(0x1dc)](0x1)),this[_0x5cf406(0x1a9)]=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x5cf406(0x136)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_left']=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x5cf406(0x1b2)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x5cf406(0x13c)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x5cf406(0x199)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0xdf4916(0xf7)](_0x4872a3){const _0x229fb5=_0xdf4916;for(let _0x41e41c=0x0;_0x41e41c<0x10;++_0x41e41c)this[_0x229fb5(0x1c8)][_0x41e41c]=_0x4872a3[_0x41e41c];}}class UnitSphere{constructor(){const _0x4e4a07=_0xdf4916;this['_pose']=new Float32Array(Array(0x10)[_0x4e4a07(0x1dc)](0x0)),this[_0x4e4a07(0x1c8)][0x0]=0x1,this[_0x4e4a07(0x1e6)]=new Float32Array(Array(0x4)['fill'](0x1));}}class UnitCylinder{constructor(){const _0x4d3ce9=_0xdf4916;this[_0x4d3ce9(0x1c8)]=new Float32Array(Array(0x10)[_0x4d3ce9(0x1dc)](0x0)),this[_0x4d3ce9(0x1c8)][0x0]=0x1,this[_0x4d3ce9(0x1e6)]=new Float32Array(Array(0x4)[_0x4d3ce9(0x1dc)](0x1));}}class UnitCone{constructor(){const _0x15a815=_0xdf4916;this[_0x15a815(0x1c8)]=new Float32Array(Array(0x10)['fill'](0x0)),this['_pose'][0x0]=0x1,this[_0x15a815(0x1e6)]=new Float32Array(Array(0x4)[_0x15a815(0x1dc)](0x1));}}function _0x4e14(){const _0x4e457b=['dispatchWorkgroups','mouseleave','updateCylinderPose','keydown','updateBoxScales','right','Cache-Control','fillStyle','ceil','_height','innerHeight','9WnPDoP','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','_bindGroup','_width','_cylinder','getName','measureText','responseText','??????????','_cylinderBuffer','canvas','\x20Shader\x20','toString','updatePose','_envnxTexture','mousedown','mouseup','updateCubePose','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','createShaderModule','_envpzBitmap','21QgCLKd','_pipeline','_envpyBitmap','_box','userAgent','_objects','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','COMPUTE','statusText','_lineSpacing','_cone','_envnx','Ray\x20Tracing\x20Bind\x20Group','updateSpherePose','334095KiSNLr','body','updateGeometry','cos','byteLength','store','/shaders/optimized_tracenothing.wgsl','/assets/envnegx.jpg','then','requestAdapter','_textContext','sqrt','/assets/envposx.jpg','Point','_outputSizeBuffer','toggleVisibility','resizeCanvas','_envpx','/assets/envnegy.jpg','initial','rgba(1,\x201,\x201,\x200.5)','_lightBitmap','_shaderModule','createPlane','setTracerObject','split','_offScreenTexture','beginComputePass','10px','Ray\x20Trace\x20Box\x20Bind\x20Group\x202','_cube','render','auto','_canvasWidth','setRequestHeader','beginRenderPass','updateSize','webgpu','getContext','createGeometry','Spotlight','_back','createDir','fillRect','_showTexture','Lambertian','_bindGroup2','_top','no-cache,\x20no-store,\x20max-age=0','UNIFORM','border','updateTextRegion','7ihufqb','Ray\x20Tracer\x20Pipeline','16793656hpHNIb','RENDER_ATTACHMENT','left','applyMotor','_envnyBitmap','send','touchend','createTranslator','_lightTexture','_boxBuffer','/assets/envposz.jpg','updateText','length','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','now','moveX','forEach','_wgHeight','linePlaneIntersection','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','addEventListener','Phong','clearRect','_canvasFormat','fillText','_envpz','queue','Ray\x20Tracer\x20Sampler','applyMotorToPoint','keyup','updateCylinderScales','finish','_envpyTexture','setBindGroup','createShaders','createComputePipeline','Texture\x20','createTexture','_sampler','Sphere\x20','createElement','GET','_metalTexture','_tracer','updateTextureParam','decode','width','constructor','getCurrentTexture','_resolutions','setPipeline','White','getElementById','/shaders/optimized_tracedemotexturebox.wgsl','Ray\x20Trace\x20Volume\x20Layout\x202\x20','compute','resize','BYTES_PER_ELEMENT','_direction','rotateX','COPY_DST','remove','_imgHeight','_envnz','src','_focal','_envpxBitmap','open','621731NPgCLq','reverse','appendChild','?????','/assets/normal.jpg','moveY','_envnxBitmap','isInside','Red','touchmove','_clearColor','createLine','_envpxTexture','18px\x20Arial','updateLight','_computePipeline','linear','innerWidth','_down','_context','_cameraBuffer','fps:\x20','_intensity','_paramBuffer','_cubeOffset','configure','init','appendSceneObject','_envnzTexture','hidden','onload','Blue','_position','Box\x20','_front','gpu','_lines','</br>','_canvas','5980240LKOOws','mousemove','abs','createView','_right','_attenuation','motorNorm','TEXTURE_BINDING','_envpzTexture','1px\x20solid\x20red','updateParam','_wgWidth','_light','_camera','_left','_sphere','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','submit','map','Ray\x20Tracer\x20output\x20size\x20buffer','bind','updateConeScales','_metal','_bindGroupLayout2','createPoint','computeMain','_pose','_objectCnt','max','_goldBitmap','replace','updateSphereScales','_device','devicePixelRatio','catch','transformOrigin','end','extractTranslator','clear','status','Light\x20','log','geometricProduct','_pipelineLayout','innerHTML','_envny','fill','updateBoxPose','_textFont','_canvasHeight','sin','setProperty','_textCanvas','STORAGE_BINDING','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','updateCubeScales','_scales','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','_envpy','applyMotorToDir','/assets/metal.jpg','readyState','pointer-events','style','extractRotor','float','loadShader','extractPoint','createSampler','Couldn\x27t\x20request\x20WebGPU\x20adapter.','updateCameraFocal','_coneBuffer','requestDevice','STORAGE','center','read-only-storage','_goldTexture','updateCameraPose','font','_paddingx','_textureParamBuffer','createPlaneFromPoints','_metalBitmap','rotateY','_envnzBitmap','_isProjective','height','_textureParams','renderToSelectedView','createBindGroupLayout','_paddingtop','createPipelineLayout','_params','_envnyTexture','166462PgDqJT','fragmentMain','mouseenter','renderCanvas','_imgWidth','rgba8unorm','Toon','createCommandEncoder','_lightBuffer','rotateZ','_gold','createBindGroup','_fontSize','copyExternalImageToTexture','push','none','1983612lzvOsh','getPreferredCanvasFormat','createRenderPipeline','Ray\x20Trace\x20Box\x20Layout\x20','createRotor','normalizeMotor','resetPose','Directional','503110rdRxDg','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','key','name','writeBuffer','4OwxWpc','/assets/envnegz.jpg','vertexMain','getBindGroupLayout','createBuffer','_sphereBuffer'];_0x4e14=function(){return _0x4e457b;};return _0x4e14();}class RayTracingTextureDemoSceneObject extends RayTracingObject{constructor(_0x2ce4f6,_0x32eef7,_0x3e8477,_0x40132e=!![]){const _0x13644e=_0xdf4916;super(_0x2ce4f6,_0x32eef7),this[_0x13644e(0x102)]=new UnitCube(),this[_0x13644e(0x12b)]=new UnitCube(),this[_0x13644e(0x1bd)]=new UnitSphere(),this[_0x13644e(0xee)]=new UnitCylinder(),this[_0x13644e(0x109)]=new UnitCone(),this[_0x13644e(0x1bb)]=_0x3e8477,this[_0x13644e(0x139)]=_0x40132e,this[_0x13644e(0x20a)]=new Int32Array([0x1,0x0,0x0,0x0]),this['_gold']=new Image(),this['_gold'][_0x13644e(0x183)]='/assets/gold.png',this[_0x13644e(0x1c4)]=new Image(),this[_0x13644e(0x1c4)][_0x13644e(0x183)]=_0x13644e(0x1ea),this[_0x13644e(0x1ba)]=new Image(),this[_0x13644e(0x1ba)][_0x13644e(0x183)]=_0x13644e(0x18b),this[_0x13644e(0x10a)]=new Image(),this[_0x13644e(0x10a)][_0x13644e(0x183)]=_0x13644e(0x114),this[_0x13644e(0x1db)]=new Image(),this['_envny'][_0x13644e(0x183)]=_0x13644e(0x11f),this[_0x13644e(0x182)]=new Image(),this[_0x13644e(0x182)][_0x13644e(0x183)]=_0x13644e(0x22a),this[_0x13644e(0x11e)]=new Image(),this[_0x13644e(0x11e)][_0x13644e(0x183)]=_0x13644e(0x119),this[_0x13644e(0x1e8)]=new Image(),this['_envpy']['src']='/assets/envposy.jpg',this[_0x13644e(0x15c)]=new Image(),this['_envpz'][_0x13644e(0x183)]=_0x13644e(0x14d),this[_0x13644e(0x205)]=new Int32Array([0x1,0x1,0x1,0x0]);}async['createGeometry'](){const _0x11a4c3=_0xdf4916;this['_cameraBuffer']=this['_device'][_0x11a4c3(0xdd)]({'label':'Camera\x20'+this['getName'](),'size':this[_0x11a4c3(0x1bb)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)]+this[_0x11a4c3(0x1bb)][_0x11a4c3(0x184)][_0x11a4c3(0x111)]+this['_camera']['_resolutions'][_0x11a4c3(0x111)],'usage':GPUBufferUsage[_0x11a4c3(0x13e)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['writeBuffer'](this[_0x11a4c3(0x19b)],0x0,this[_0x11a4c3(0x1bb)]['_pose']),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['writeBuffer'](this[_0x11a4c3(0x19b)],this[_0x11a4c3(0x1bb)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1bb)][_0x11a4c3(0x184)]),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this['_cameraBuffer'],this[_0x11a4c3(0x1bb)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)]+this[_0x11a4c3(0x1bb)]['_focal'][_0x11a4c3(0x111)],this[_0x11a4c3(0x1bb)][_0x11a4c3(0x174)]),this[_0x11a4c3(0x14c)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0xdd)]({'label':_0x11a4c3(0x1a8)+this[_0x11a4c3(0xef)](),'size':(this[_0x11a4c3(0x102)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)]+this['_box'][_0x11a4c3(0x1e6)][_0x11a4c3(0x111)]+this[_0x11a4c3(0x102)][_0x11a4c3(0x13c)][_0x11a4c3(0x111)]*0x6)*0x2,'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x11a4c3(0x17f)]});let _0x4a8319=0x0;this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['writeBuffer'](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)][_0x11a4c3(0x1c8)]),_0x4a8319+=this[_0x11a4c3(0x102)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)]['_scales']),_0x4a8319+=this['_box'][_0x11a4c3(0x1e6)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this['_box'][_0x11a4c3(0x1a9)]),_0x4a8319+=this[_0x11a4c3(0x102)][_0x11a4c3(0x1a9)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)][_0x11a4c3(0x136)]),_0x4a8319+=this[_0x11a4c3(0x102)][_0x11a4c3(0x136)][_0x11a4c3(0x111)],this['_device']['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)]['_left']),_0x4a8319+=this['_box'][_0x11a4c3(0x1bc)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)][_0x11a4c3(0x1b2)]),_0x4a8319+=this[_0x11a4c3(0x102)][_0x11a4c3(0x1b2)][_0x11a4c3(0x111)],this['_device'][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this['_box'][_0x11a4c3(0x13c)]),_0x4a8319+=this[_0x11a4c3(0x102)]['_top'][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x102)][_0x11a4c3(0x199)]),_0x4a8319+=this['_box']['_down'][_0x11a4c3(0x111)],this[_0x11a4c3(0x19f)]=_0x4a8319,this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this['_cube'][_0x11a4c3(0x1c8)]),_0x4a8319+=this['_cube'][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x12b)][_0x11a4c3(0x1e6)]),_0x4a8319+=this['_cube']['_scales'][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this['_cube'][_0x11a4c3(0x1a9)]),_0x4a8319+=this[_0x11a4c3(0x12b)][_0x11a4c3(0x1a9)]['byteLength'],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x12b)][_0x11a4c3(0x136)]),_0x4a8319+=this[_0x11a4c3(0x12b)][_0x11a4c3(0x136)][_0x11a4c3(0x111)],this['_device'][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this['_boxBuffer'],_0x4a8319,this[_0x11a4c3(0x12b)][_0x11a4c3(0x1bc)]),_0x4a8319+=this[_0x11a4c3(0x12b)]['_left'][_0x11a4c3(0x111)],this['_device'][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x12b)][_0x11a4c3(0x1b2)]),_0x4a8319+=this[_0x11a4c3(0x12b)]['_right']['byteLength'],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x12b)]['_top']),_0x4a8319+=this[_0x11a4c3(0x12b)][_0x11a4c3(0x13c)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0x14c)],_0x4a8319,this[_0x11a4c3(0x12b)][_0x11a4c3(0x199)]),this['_sphereBuffer']=this[_0x11a4c3(0x1ce)]['createBuffer']({'label':_0x11a4c3(0x16a)+this['getName'](),'size':this['_sphere'][_0x11a4c3(0x1c8)]['byteLength']+this[_0x11a4c3(0x1bd)][_0x11a4c3(0x1e6)][_0x11a4c3(0x111)],'usage':GPUBufferUsage[_0x11a4c3(0x1f7)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),_0x4a8319=0x0,this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x228)](this[_0x11a4c3(0xde)],_0x4a8319,this['_sphere'][_0x11a4c3(0x1c8)]),_0x4a8319+=this[_0x11a4c3(0x1bd)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0xde)],_0x4a8319,this[_0x11a4c3(0x1bd)][_0x11a4c3(0x1e6)]),this[_0x11a4c3(0x1f5)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0xdd)]({'label':'Cone\x20'+this[_0x11a4c3(0xef)](),'size':this[_0x11a4c3(0x109)]['_pose'][_0x11a4c3(0x111)]+this[_0x11a4c3(0x109)][_0x11a4c3(0x1e6)][_0x11a4c3(0x111)],'usage':GPUBufferUsage[_0x11a4c3(0x1f7)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),_0x4a8319=0x0,this['_device'][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this['_coneBuffer'],_0x4a8319,this[_0x11a4c3(0x109)][_0x11a4c3(0x1c8)]),_0x4a8319+=this[_0x11a4c3(0x109)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this['_device'][_0x11a4c3(0x15d)]['writeBuffer'](this[_0x11a4c3(0x1f5)],_0x4a8319,this[_0x11a4c3(0x109)][_0x11a4c3(0x1e6)]),this['_cylinderBuffer']=this['_device'][_0x11a4c3(0xdd)]({'label':'Cylinder\x20'+this[_0x11a4c3(0xef)](),'size':this[_0x11a4c3(0xee)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)]+this['_cylinder'][_0x11a4c3(0x1e6)]['byteLength'],'usage':GPUBufferUsage[_0x11a4c3(0x1f7)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),_0x4a8319=0x0,this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0xf3)],_0x4a8319,this['_cylinder'][_0x11a4c3(0x1c8)]),_0x4a8319+=this[_0x11a4c3(0xee)][_0x11a4c3(0x1c8)][_0x11a4c3(0x111)],this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0xf3)],_0x4a8319,this[_0x11a4c3(0xee)][_0x11a4c3(0x1e6)]),this[_0x11a4c3(0x19e)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0xdd)]({'label':'Parameters\x20'+this[_0x11a4c3(0xef)](),'size':this['_params']['byteLength'],'usage':GPUBufferUsage[_0x11a4c3(0x13e)]|GPUBufferUsage['COPY_DST']}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['writeBuffer'](this[_0x11a4c3(0x19e)],0x0,this[_0x11a4c3(0x20a)]),this[_0x11a4c3(0x214)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0xdd)]({'label':_0x11a4c3(0x1d6)+this[_0x11a4c3(0xef)](),'size':0x14*Float32Array[_0x11a4c3(0x17c)],'usage':GPUBufferUsage[_0x11a4c3(0x13e)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),await this['_gold'][_0x11a4c3(0x170)](),this['_goldBitmap']=await createImageBitmap(this[_0x11a4c3(0x216)]),this[_0x11a4c3(0x1fa)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x168)]({'label':_0x11a4c3(0x167)+this[_0x11a4c3(0xef)](),'size':[this[_0x11a4c3(0x1cb)][_0x11a4c3(0x171)],this[_0x11a4c3(0x1cb)][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x219)]({'source':this[_0x11a4c3(0x1cb)]},{'texture':this[_0x11a4c3(0x1fa)]},[this[_0x11a4c3(0x1cb)]['width'],this[_0x11a4c3(0x1cb)][_0x11a4c3(0x204)]]),await this[_0x11a4c3(0x1c4)]['decode'](),this[_0x11a4c3(0x200)]=await createImageBitmap(this[_0x11a4c3(0x1c4)]),this[_0x11a4c3(0x16d)]=this[_0x11a4c3(0x1ce)]['createTexture']({'label':_0x11a4c3(0x167)+this[_0x11a4c3(0xef)](),'size':[this[_0x11a4c3(0x200)][_0x11a4c3(0x171)],this[_0x11a4c3(0x200)][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x219)]({'source':this[_0x11a4c3(0x200)]},{'texture':this[_0x11a4c3(0x16d)]},[this['_metalBitmap'][_0x11a4c3(0x171)],this[_0x11a4c3(0x200)][_0x11a4c3(0x204)]]),await this['_light'][_0x11a4c3(0x170)](),this[_0x11a4c3(0x122)]=await createImageBitmap(this[_0x11a4c3(0x1ba)]),this[_0x11a4c3(0x14b)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x168)]({'label':_0x11a4c3(0x167)+this[_0x11a4c3(0xef)](),'size':[this['_lightBitmap'][_0x11a4c3(0x171)],this['_lightBitmap'][_0x11a4c3(0x204)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x219)]({'source':this['_lightBitmap']},{'texture':this[_0x11a4c3(0x14b)]},[this['_lightBitmap']['width'],this[_0x11a4c3(0x122)][_0x11a4c3(0x204)]]),await this[_0x11a4c3(0x10a)]['decode'](),this[_0x11a4c3(0x18d)]=await createImageBitmap(this[_0x11a4c3(0x10a)]),this[_0x11a4c3(0xf8)]=this[_0x11a4c3(0x1ce)]['createTexture']({'label':_0x11a4c3(0x167)+this[_0x11a4c3(0xef)](),'size':[this[_0x11a4c3(0x18d)][_0x11a4c3(0x171)],this['_envnxBitmap'][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['copyExternalImageToTexture']({'source':this[_0x11a4c3(0x18d)]},{'texture':this[_0x11a4c3(0xf8)]},[this[_0x11a4c3(0x18d)][_0x11a4c3(0x171)],this[_0x11a4c3(0x18d)]['height']]),await this['_envny'][_0x11a4c3(0x170)](),this[_0x11a4c3(0x147)]=await createImageBitmap(this[_0x11a4c3(0x1db)]),this[_0x11a4c3(0x20b)]=this['_device']['createTexture']({'label':'Texture\x20'+this[_0x11a4c3(0xef)](),'size':[this['_envnyBitmap'][_0x11a4c3(0x171)],this['_envnyBitmap']['height'],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x219)]({'source':this['_envnyBitmap']},{'texture':this[_0x11a4c3(0x20b)]},[this['_envnyBitmap'][_0x11a4c3(0x171)],this[_0x11a4c3(0x147)][_0x11a4c3(0x204)]]),await this[_0x11a4c3(0x182)][_0x11a4c3(0x170)](),this[_0x11a4c3(0x202)]=await createImageBitmap(this[_0x11a4c3(0x182)]),this[_0x11a4c3(0x1a3)]=this[_0x11a4c3(0x1ce)]['createTexture']({'label':'Texture\x20'+this[_0x11a4c3(0xef)](),'size':[this[_0x11a4c3(0x202)][_0x11a4c3(0x171)],this[_0x11a4c3(0x202)]['height'],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)]['queue']['copyExternalImageToTexture']({'source':this[_0x11a4c3(0x202)]},{'texture':this['_envnzTexture']},[this[_0x11a4c3(0x202)]['width'],this[_0x11a4c3(0x202)]['height']]),await this[_0x11a4c3(0x11e)][_0x11a4c3(0x170)](),this[_0x11a4c3(0x185)]=await createImageBitmap(this[_0x11a4c3(0x11e)]),this[_0x11a4c3(0x193)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x168)]({'label':_0x11a4c3(0x167)+this['getName'](),'size':[this[_0x11a4c3(0x185)]['width'],this[_0x11a4c3(0x185)][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)]['copyExternalImageToTexture']({'source':this[_0x11a4c3(0x185)]},{'texture':this['_envpxTexture']},[this[_0x11a4c3(0x185)][_0x11a4c3(0x171)],this[_0x11a4c3(0x185)][_0x11a4c3(0x204)]]),await this[_0x11a4c3(0x1e8)]['decode'](),this[_0x11a4c3(0x101)]=await createImageBitmap(this[_0x11a4c3(0x1e8)]),this[_0x11a4c3(0x163)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x168)]({'label':'Texture\x20'+this[_0x11a4c3(0xef)](),'size':[this['_envpyBitmap'][_0x11a4c3(0x171)],this['_envpyBitmap'][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage[_0x11a4c3(0x1b5)]|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this['_device']['queue']['copyExternalImageToTexture']({'source':this[_0x11a4c3(0x101)]},{'texture':this['_envpyTexture']},[this['_envpyBitmap']['width'],this[_0x11a4c3(0x101)][_0x11a4c3(0x204)]]),await this[_0x11a4c3(0x15c)][_0x11a4c3(0x170)](),this[_0x11a4c3(0xfe)]=await createImageBitmap(this[_0x11a4c3(0x15c)]),this[_0x11a4c3(0x1b6)]=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x168)]({'label':'Texture\x20'+this['getName'](),'size':[this[_0x11a4c3(0xfe)][_0x11a4c3(0x171)],this['_envpzBitmap'][_0x11a4c3(0x204)],0x1],'format':_0x11a4c3(0x211),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x11a4c3(0x17f)]|GPUTextureUsage[_0x11a4c3(0x144)]}),this[_0x11a4c3(0x1ce)]['queue'][_0x11a4c3(0x219)]({'source':this[_0x11a4c3(0xfe)]},{'texture':this[_0x11a4c3(0x1b6)]},[this[_0x11a4c3(0xfe)][_0x11a4c3(0x171)],this[_0x11a4c3(0xfe)][_0x11a4c3(0x204)]]),this['_sampler']=this[_0x11a4c3(0x1ce)][_0x11a4c3(0x1f2)]({'magFilter':_0x11a4c3(0x197),'minFilter':_0x11a4c3(0x197)}),this[_0x11a4c3(0x1fe)]=this['_device']['createBuffer']({'label':'Parameters\x20'+this[_0x11a4c3(0xef)](),'size':this[_0x11a4c3(0x205)]['byteLength'],'usage':GPUBufferUsage[_0x11a4c3(0x13e)]|GPUBufferUsage[_0x11a4c3(0x17f)]}),this[_0x11a4c3(0x1ce)][_0x11a4c3(0x15d)][_0x11a4c3(0x228)](this[_0x11a4c3(0x1fe)],0x0,this['_textureParams']);}[_0xdf4916(0x10f)](){const _0x46d161=_0xdf4916;this[_0x46d161(0x1bb)]['updateSize'](this[_0x46d161(0x210)],this[_0x46d161(0x181)]),this[_0x46d161(0x1ce)]['queue'][_0x46d161(0x228)](this[_0x46d161(0x19b)],this['_camera'][_0x46d161(0x1c8)][_0x46d161(0x111)]+this['_camera'][_0x46d161(0x184)][_0x46d161(0x111)],this['_camera'][_0x46d161(0x174)]);}['updateBoxPose'](){const _0x29dd7e=_0xdf4916;this[_0x29dd7e(0x1ce)][_0x29dd7e(0x15d)][_0x29dd7e(0x228)](this[_0x29dd7e(0x14c)],0x0,this[_0x29dd7e(0x102)][_0x29dd7e(0x1c8)]);}['updateBoxScales'](){const _0x14ae03=_0xdf4916;this[_0x14ae03(0x1ce)][_0x14ae03(0x15d)][_0x14ae03(0x228)](this['_boxBuffer'],this['_box'][_0x14ae03(0x1c8)]['byteLength'],this[_0x14ae03(0x102)][_0x14ae03(0x1e6)]);}[_0xdf4916(0xfb)](){const _0x3aed21=_0xdf4916;this[_0x3aed21(0x1ce)][_0x3aed21(0x15d)][_0x3aed21(0x228)](this[_0x3aed21(0x14c)],this[_0x3aed21(0x19f)],this[_0x3aed21(0x12b)][_0x3aed21(0x1c8)]);}['updateCubeScales'](){const _0x5a66c2=_0xdf4916;this[_0x5a66c2(0x1ce)][_0x5a66c2(0x15d)][_0x5a66c2(0x228)](this['_boxBuffer'],this[_0x5a66c2(0x19f)]+this[_0x5a66c2(0x12b)]['_pose'][_0x5a66c2(0x111)],this[_0x5a66c2(0x12b)][_0x5a66c2(0x1e6)]);}[_0xdf4916(0x10c)](){const _0x4db97a=_0xdf4916;this[_0x4db97a(0x1ce)][_0x4db97a(0x15d)]['writeBuffer'](this['_sphereBuffer'],0x0,this[_0x4db97a(0x1bd)][_0x4db97a(0x1c8)]);}[_0xdf4916(0x1cd)](){const _0x15ec06=_0xdf4916;this[_0x15ec06(0x1ce)][_0x15ec06(0x15d)][_0x15ec06(0x228)](this[_0x15ec06(0xde)],this[_0x15ec06(0x1bd)][_0x15ec06(0x1c8)][_0x15ec06(0x111)],this[_0x15ec06(0x1bd)][_0x15ec06(0x1e6)]);}['updateConePose'](){const _0xf848e8=_0xdf4916;this['_device'][_0xf848e8(0x15d)][_0xf848e8(0x228)](this['_coneBuffer'],0x0,this['_cone'][_0xf848e8(0x1c8)]);}[_0xdf4916(0x1c3)](){const _0x47c5f7=_0xdf4916;this['_device'][_0x47c5f7(0x15d)][_0x47c5f7(0x228)](this[_0x47c5f7(0x1f5)],this[_0x47c5f7(0x109)][_0x47c5f7(0x1c8)][_0x47c5f7(0x111)],this[_0x47c5f7(0x109)][_0x47c5f7(0x1e6)]);}['updateCylinderPose'](){const _0x291d53=_0xdf4916;this['_device'][_0x291d53(0x15d)][_0x291d53(0x228)](this[_0x291d53(0xf3)],0x0,this[_0x291d53(0xee)][_0x291d53(0x1c8)]);}['updateCylinderScales'](){const _0x3aa05c=_0xdf4916;this['_device'][_0x3aa05c(0x15d)][_0x3aa05c(0x228)](this[_0x3aa05c(0xf3)],this['_cylinder'][_0x3aa05c(0x1c8)][_0x3aa05c(0x111)],this['_cylinder']['_scales']);}['updateCameraPose'](){const _0x3c28dc=_0xdf4916;this[_0x3c28dc(0x1ce)][_0x3c28dc(0x15d)][_0x3c28dc(0x228)](this['_cameraBuffer'],0x0,this['_camera']['_pose']);}[_0xdf4916(0x1f4)](){const _0x250437=_0xdf4916;this[_0x250437(0x1ce)]['queue']['writeBuffer'](this['_cameraBuffer'],this[_0x250437(0x1bb)][_0x250437(0x1c8)][_0x250437(0x111)],this[_0x250437(0x1bb)][_0x250437(0x184)]);}[_0xdf4916(0x1b8)](){const _0x154771=_0xdf4916;this['_device'][_0x154771(0x15d)][_0x154771(0x228)](this['_paramBuffer'],0x0,this[_0x154771(0x20a)]);}[_0xdf4916(0x16f)](){const _0x1f51c7=_0xdf4916;this[_0x1f51c7(0x1ce)][_0x1f51c7(0x15d)][_0x1f51c7(0x228)](this['_textureParamBuffer'],0x0,this[_0x1f51c7(0x205)]);}[_0xdf4916(0x195)](_0x38d5e5){const _0x426f01=_0xdf4916;let _0x38933a=0x0;this[_0x426f01(0x1ce)][_0x426f01(0x15d)][_0x426f01(0x228)](this['_lightBuffer'],_0x38933a,_0x38d5e5[_0x426f01(0x19d)]),_0x38933a+=_0x38d5e5['_intensity'][_0x426f01(0x111)],this[_0x426f01(0x1ce)][_0x426f01(0x15d)][_0x426f01(0x228)](this[_0x426f01(0x214)],_0x38933a,_0x38d5e5['_position']),_0x38933a+=_0x38d5e5[_0x426f01(0x1a7)]['byteLength'],this['_device'][_0x426f01(0x15d)][_0x426f01(0x228)](this[_0x426f01(0x214)],_0x38933a,_0x38d5e5[_0x426f01(0x17d)]),_0x38933a+=_0x38d5e5['_direction'][_0x426f01(0x111)],this[_0x426f01(0x1ce)][_0x426f01(0x15d)]['writeBuffer'](this[_0x426f01(0x214)],_0x38933a,_0x38d5e5[_0x426f01(0x1b3)]),_0x38933a+=_0x38d5e5[_0x426f01(0x1b3)][_0x426f01(0x111)],this[_0x426f01(0x1ce)]['queue']['writeBuffer'](this[_0x426f01(0x214)],_0x38933a,_0x38d5e5[_0x426f01(0x20a)]);}async[_0xdf4916(0x165)](){const _0x21a2a3=_0xdf4916;let _0x467562=await this['loadShader'](_0x21a2a3(0x178));this['_shaderModule']=this[_0x21a2a3(0x1ce)][_0x21a2a3(0xfd)]({'label':_0x21a2a3(0xf5)+this[_0x21a2a3(0xef)](),'code':_0x467562}),this['_bindGroupLayout1']=this[_0x21a2a3(0x1ce)]['createBindGroupLayout']({'label':_0x21a2a3(0x21f)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{'type':_0x21a2a3(0x1f9)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'storageTexture':{'format':this['_canvasFormat']}},{'binding':0x3,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{'type':_0x21a2a3(0x1f9)}},{'binding':0x4,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{'type':_0x21a2a3(0x1f9)}},{'binding':0x5,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{'type':'read-only-storage'}},{'binding':0x6,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{}},{'binding':0x8,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'buffer':{}}]}),this[_0x21a2a3(0x1c5)]=this[_0x21a2a3(0x1ce)][_0x21a2a3(0x207)]({'label':_0x21a2a3(0x179)+this[_0x21a2a3(0xef)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x1,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x2,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':'float'}},{'binding':0x3,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x4,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x5,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x6,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x7,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x8,'visibility':GPUShaderStage[_0x21a2a3(0x106)],'texture':{'sampleType':_0x21a2a3(0x1ef)}},{'binding':0x9,'visibility':GPUShaderStage['COMPUTE'],'sampler':{}}]}),this[_0x21a2a3(0x1d9)]=this[_0x21a2a3(0x1ce)][_0x21a2a3(0x209)]({'label':_0x21a2a3(0x1e7),'bindGroupLayouts':[this['_bindGroupLayout1'],this[_0x21a2a3(0x1c5)]]});}async[_0xdf4916(0x166)](){const _0x243403=_0xdf4916;this[_0x243403(0x196)]=this[_0x243403(0x1ce)][_0x243403(0x166)]({'label':_0x243403(0x105)+this[_0x243403(0xef)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x243403(0x123)],'entryPoint':'computeMain'}});}[_0xdf4916(0x217)](_0x38eafc){const _0x551a17=_0xdf4916;this['_bindGroup1']=this['_device']['createBindGroup']({'label':'Ray\x20Trace\x20Box\x20Bind\x20Group\x201','layout':this[_0x551a17(0x196)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x551a17(0x19b)]}},{'binding':0x1,'resource':{'buffer':this[_0x551a17(0x14c)]}},{'binding':0x2,'resource':_0x38eafc[_0x551a17(0x1b1)]()},{'binding':0x3,'resource':{'buffer':this[_0x551a17(0xde)]}},{'binding':0x4,'resource':{'buffer':this[_0x551a17(0x1f5)]}},{'binding':0x5,'resource':{'buffer':this['_cylinderBuffer']}},{'binding':0x6,'resource':{'buffer':this[_0x551a17(0x19e)]}},{'binding':0x7,'resource':{'buffer':this[_0x551a17(0x214)]}},{'binding':0x8,'resource':{'buffer':this['_textureParamBuffer']}}]}),this[_0x551a17(0x13b)]=this[_0x551a17(0x1ce)][_0x551a17(0x217)]({'label':_0x551a17(0x12a),'layout':this[_0x551a17(0x196)][_0x551a17(0xdc)](0x1),'entries':[{'binding':0x0,'resource':this['_goldTexture'][_0x551a17(0x1b1)]()},{'binding':0x1,'resource':this['_metalTexture'][_0x551a17(0x1b1)]()},{'binding':0x2,'resource':this[_0x551a17(0x14b)][_0x551a17(0x1b1)]()},{'binding':0x3,'resource':this[_0x551a17(0xf8)][_0x551a17(0x1b1)]()},{'binding':0x4,'resource':this[_0x551a17(0x20b)][_0x551a17(0x1b1)]()},{'binding':0x5,'resource':this['_envnzTexture'][_0x551a17(0x1b1)]()},{'binding':0x6,'resource':this[_0x551a17(0x193)][_0x551a17(0x1b1)]()},{'binding':0x7,'resource':this['_envpyTexture'][_0x551a17(0x1b1)]()},{'binding':0x8,'resource':this[_0x551a17(0x1b6)]['createView']()},{'binding':0x9,'resource':this['_sampler']}]}),this[_0x551a17(0x1b9)]=Math[_0x551a17(0xe7)](_0x38eafc[_0x551a17(0x171)]),this[_0x551a17(0x154)]=Math[_0x551a17(0xe7)](_0x38eafc[_0x551a17(0x204)]);}['compute'](_0x1fd094){const _0x46cd8b=_0xdf4916;_0x1fd094[_0x46cd8b(0x175)](this[_0x46cd8b(0x196)]),_0x1fd094['setBindGroup'](0x0,this['_bindGroup1']),_0x1fd094[_0x46cd8b(0x164)](0x1,this[_0x46cd8b(0x13b)]),_0x1fd094[_0x46cd8b(0xdf)](Math['ceil'](this[_0x46cd8b(0x1b9)]/0x10),Math[_0x46cd8b(0xe7)](this['_wgHeight']/0x10));}}class PGA3D{static[_0xdf4916(0x1d8)](_0x176e04,_0x3c031a){return[_0x176e04[0x0]*_0x3c031a[0x0]-_0x176e04[0x1]*_0x3c031a[0x1]-_0x176e04[0x2]*_0x3c031a[0x2]-_0x176e04[0x3]*_0x3c031a[0x3]-_0x176e04[0x7]*_0x3c031a[0x7]+_0x176e04[0xb]*_0x3c031a[0xb]+_0x176e04[0xc]*_0x3c031a[0xc]+_0x176e04[0xd]*_0x3c031a[0xd],_0x176e04[0x0]*_0x3c031a[0x1]+_0x176e04[0x1]*_0x3c031a[0x0]-_0x176e04[0x2]*_0x3c031a[0x3]+_0x176e04[0x3]*_0x3c031a[0x2]+_0x176e04[0x7]*_0x3c031a[0xd]+_0x176e04[0xb]*_0x3c031a[0xc]-_0x176e04[0xc]*_0x3c031a[0xb]+_0x176e04[0xd]*_0x3c031a[0x7],_0x176e04[0x0]*_0x3c031a[0x2]+_0x176e04[0x1]*_0x3c031a[0x3]+_0x176e04[0x2]*_0x3c031a[0x0]-_0x176e04[0x3]*_0x3c031a[0x1]-_0x176e04[0x7]*_0x3c031a[0xc]+_0x176e04[0xb]*_0x3c031a[0xd]-_0x176e04[0xc]*_0x3c031a[0x7]-_0x176e04[0xd]*_0x3c031a[0xb],_0x176e04[0x0]*_0x3c031a[0x3]-_0x176e04[0x1]*_0x3c031a[0x2]+_0x176e04[0x2]*_0x3c031a[0x1]+_0x176e04[0x3]*_0x3c031a[0x0]+_0x176e04[0x7]*_0x3c031a[0xb]+_0x176e04[0xb]*_0x3c031a[0x7]+_0x176e04[0xc]*_0x3c031a[0xd]-_0x176e04[0xd]*_0x3c031a[0xc],_0x176e04[0x0]*_0x3c031a[0x4]+_0x176e04[0x1]*_0x3c031a[0x5]+_0x176e04[0x2]*_0x3c031a[0x6]-_0x176e04[0x3]*_0x3c031a[0xf]+_0x176e04[0x4]*_0x3c031a[0x0]-_0x176e04[0x5]*_0x3c031a[0x1]-_0x176e04[0x6]*_0x3c031a[0x2]+_0x176e04[0x7]*_0x3c031a[0xa]+_0x176e04[0x8]*_0x3c031a[0xc]+_0x176e04[0x9]*_0x3c031a[0xd]-_0x176e04[0xa]*_0x3c031a[0x7]-_0x176e04[0xb]*_0x3c031a[0xe]+_0x176e04[0xc]*_0x3c031a[0x8]+_0x176e04[0xd]*_0x3c031a[0x9]+_0x176e04[0xe]*_0x3c031a[0xb]-_0x176e04[0xf]*_0x3c031a[0x3],_0x176e04[0x0]*_0x3c031a[0x5]-_0x176e04[0x1]*_0x3c031a[0x4]+_0x176e04[0x2]*_0x3c031a[0xf]+_0x176e04[0x3]*_0x3c031a[0x6]+_0x176e04[0x4]*_0x3c031a[0x1]+_0x176e04[0x5]*_0x3c031a[0x0]-_0x176e04[0x6]*_0x3c031a[0x3]-_0x176e04[0x7]*_0x3c031a[0x9]-_0x176e04[0x8]*_0x3c031a[0xb]+_0x176e04[0x9]*_0x3c031a[0x7]+_0x176e04[0xa]*_0x3c031a[0xc]-_0x176e04[0xb]*_0x3c031a[0x8]-_0x176e04[0xc]*_0x3c031a[0xe]+_0x176e04[0xd]*_0x3c031a[0xa]+_0x176e04[0xe]*_0x3c031a[0xc]+_0x176e04[0xf]*_0x3c031a[0x2],_0x176e04[0x0]*_0x3c031a[0x6]-_0x176e04[0x1]*_0x3c031a[0xf]-_0x176e04[0x2]*_0x3c031a[0x4]-_0x176e04[0x3]*_0x3c031a[0x5]+_0x176e04[0x4]*_0x3c031a[0x2]+_0x176e04[0x5]*_0x3c031a[0x3]+_0x176e04[0x6]*_0x3c031a[0x0]+_0x176e04[0x7]*_0x3c031a[0x8]-_0x176e04[0x8]*_0x3c031a[0x7]-_0x176e04[0x9]*_0x3c031a[0xb]-_0x176e04[0xa]*_0x3c031a[0xc]-_0x176e04[0xb]*_0x3c031a[0x9]-_0x176e04[0xc]*_0x3c031a[0xa]-_0x176e04[0xd]*_0x3c031a[0xe]+_0x176e04[0xe]*_0x3c031a[0xd]-_0x176e04[0xf]*_0x3c031a[0x1],_0x176e04[0x0]*_0x3c031a[0x7]+_0x176e04[0x1]*_0x3c031a[0xd]-_0x176e04[0x2]*_0x3c031a[0xc]+_0x176e04[0x3]*_0x3c031a[0xb]+_0x176e04[0x7]*_0x3c031a[0x0]+_0x176e04[0xb]*_0x3c031a[0x3]-_0x176e04[0xc]*_0x3c031a[0x2]+_0x176e04[0xd]*_0x3c031a[0x1],_0x176e04[0x0]*_0x3c031a[0x8]+_0x176e04[0x1]*_0x3c031a[0xe]-_0x176e04[0x2]*_0x3c031a[0xa]+_0x176e04[0x3]*_0x3c031a[0x9]+_0x176e04[0x4]*_0x3c031a[0xc]-_0x176e04[0x5]*_0x3c031a[0xb]+_0x176e04[0x6]*_0x3c031a[0x7]-_0x176e04[0x7]*_0x3c031a[0x6]+_0x176e04[0x8]*_0x3c031a[0x0]-_0x176e04[0x9]*_0x3c031a[0x3]+_0x176e04[0xa]*_0x3c031a[0x2]-_0x176e04[0xb]*_0x3c031a[0x5]+_0x176e04[0xc]*_0x3c031a[0x4]-_0x176e04[0xd]*_0x3c031a[0xf]+_0x176e04[0xe]*_0x3c031a[0x1]+_0x176e04[0xf]*_0x3c031a[0xd],_0x176e04[0x0]*_0x3c031a[0x9]+_0x176e04[0x1]*_0x3c031a[0xa]+_0x176e04[0x2]*_0x3c031a[0xe]-_0x176e04[0x3]*_0x3c031a[0x8]+_0x176e04[0x4]*_0x3c031a[0xd]-_0x176e04[0x5]*_0x3c031a[0x7]-_0x176e04[0x6]*_0x3c031a[0xb]+_0x176e04[0x7]*_0x3c031a[0x5]+_0x176e04[0x8]*_0x3c031a[0x3]+_0x176e04[0x9]*_0x3c031a[0x0]-_0x176e04[0xa]*_0x3c031a[0x1]-_0x176e04[0xb]*_0x3c031a[0x6]+_0x176e04[0xc]*_0x3c031a[0xf]+_0x176e04[0xd]*_0x3c031a[0x4]+_0x176e04[0xe]*_0x3c031a[0x2]-_0x176e04[0xf]*_0x3c031a[0xc],_0x176e04[0x0]*_0x3c031a[0xa]-_0x176e04[0x1]*_0x3c031a[0x9]+_0x176e04[0x2]*_0x3c031a[0x8]+_0x176e04[0x3]*_0x3c031a[0xe]+_0x176e04[0x4]*_0x3c031a[0x7]+_0x176e04[0x5]*_0x3c031a[0xd]-_0x176e04[0x6]*_0x3c031a[0xc]-_0x176e04[0x7]*_0x3c031a[0x4]-_0x176e04[0x8]*_0x3c031a[0x2]+_0x176e04[0x9]*_0x3c031a[0x1]+_0x176e04[0xa]*_0x3c031a[0x0]-_0x176e04[0xb]*_0x3c031a[0xf]-_0x176e04[0xc]*_0x3c031a[0x6]+_0x176e04[0xd]*_0x3c031a[0x5]+_0x176e04[0xe]*_0x3c031a[0x3]+_0x176e04[0xf]*_0x3c031a[0xb],_0x176e04[0x0]*_0x3c031a[0xb]+_0x176e04[0x1]*_0x3c031a[0xc]+_0x176e04[0x2]*_0x3c031a[0xd]-_0x176e04[0x3]*_0x3c031a[0x7]-_0x176e04[0x7]*_0x3c031a[0x3]+_0x176e04[0xb]*_0x3c031a[0x0]-_0x176e04[0xc]*_0x3c031a[0x1]-_0x176e04[0xd]*_0x3c031a[0x2],_0x176e04[0x0]*_0x3c031a[0xc]-_0x176e04[0x1]*_0x3c031a[0xb]+_0x176e04[0x2]*_0x3c031a[0x7]+_0x176e04[0x3]*_0x3c031a[0xd]+_0x176e04[0x7]*_0x3c031a[0x2]+_0x176e04[0xb]*_0x3c031a[0x1]+_0x176e04[0xc]*_0x3c031a[0x0]-_0x176e04[0xd]*_0x3c031a[0x3],_0x176e04[0x0]*_0x3c031a[0xd]-_0x176e04[0x1]*_0x3c031a[0x7]-_0x176e04[0x2]*_0x3c031a[0xb]-_0x176e04[0x3]*_0x3c031a[0xc]-_0x176e04[0x7]*_0x3c031a[0x1]+_0x176e04[0xb]*_0x3c031a[0x2]+_0x176e04[0xc]*_0x3c031a[0x3]+_0x176e04[0xd]*_0x3c031a[0x0],_0x176e04[0x0]*_0x3c031a[0xe]-_0x176e04[0x1]*_0x3c031a[0x8]-_0x176e04[0x2]*_0x3c031a[0x9]-_0x176e04[0x3]*_0x3c031a[0xa]+_0x176e04[0x4]*_0x3c031a[0xb]+_0x176e04[0x5]*_0x3c031a[0xc]+_0x176e04[0x6]*_0x3c031a[0xd]+_0x176e04[0x7]*_0x3c031a[0xf]-_0x176e04[0x8]*_0x3c031a[0x1]-_0x176e04[0x9]*_0x3c031a[0x2]-_0x176e04[0xa]*_0x3c031a[0x3]-_0x176e04[0xb]*_0x3c031a[0x4]-_0x176e04[0xc]*_0x3c031a[0x5]-_0x176e04[0xd]*_0x3c031a[0x6]+_0x176e04[0xe]*_0x3c031a[0x0]-_0x176e04[0xf]*_0x3c031a[0x7],_0x176e04[0x0]*_0x3c031a[0xf]+_0x176e04[0x1]*_0x3c031a[0x6]-_0x176e04[0x2]*_0x3c031a[0x5]+_0x176e04[0x3]*_0x3c031a[0x4]+_0x176e04[0x4]*_0x3c031a[0x3]-_0x176e04[0x5]*_0x3c031a[0x2]+_0x176e04[0x6]*_0x3c031a[0x1]-_0x176e04[0x7]*_0x3c031a[0xe]+_0x176e04[0x8]*_0x3c031a[0xd]-_0x176e04[0x9]*_0x3c031a[0xc]+_0x176e04[0xa]*_0x3c031a[0xb]-_0x176e04[0xb]*_0x3c031a[0xa]+_0x176e04[0xc]*_0x3c031a[0x9]-_0x176e04[0xd]*_0x3c031a[0x8]+_0x176e04[0xe]*_0x3c031a[0x7]+_0x176e04[0xf]*_0x3c031a[0x0]];}static['reverse'](_0x21b9ed){return[_0x21b9ed[0x0],-_0x21b9ed[0x1],-_0x21b9ed[0x2],-_0x21b9ed[0x3],-_0x21b9ed[0x4],-_0x21b9ed[0x5],-_0x21b9ed[0x6],-_0x21b9ed[0x7],-_0x21b9ed[0x8],-_0x21b9ed[0x9],-_0x21b9ed[0xa],_0x21b9ed[0xb],_0x21b9ed[0xc],_0x21b9ed[0xd],_0x21b9ed[0xe],_0x21b9ed[0xf]];}static['applyMotor'](_0x18d8d3,_0xe5ae69){const _0x3e2d04=_0xdf4916;return PGA3D[_0x3e2d04(0x1d8)](_0xe5ae69,PGA3D[_0x3e2d04(0x1d8)](_0x18d8d3,PGA3D[_0x3e2d04(0x188)](_0xe5ae69)));}static['motorNorm'](_0x490eb1){const _0x318ac5=_0xdf4916;return Math[_0x318ac5(0x118)](_0x490eb1[_0x318ac5(0x1c0)](_0xeaded2=>_0xeaded2*_0xeaded2)['reduce']((_0x25eb37,_0x3a52b8)=>_0x25eb37+_0x3a52b8,0x0));}static['createTranslator'](_0x2bc7c7,_0x34826f,_0x30be5d){return[0x1,0x0,0x0,0x0,-_0x2bc7c7/0x2,-_0x34826f/0x2,-_0x30be5d/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x1d3)](_0x536026){return[0x1,0x0,0x0,0x0,_0x536026[0x4],_0x536026[0x5],_0x536026[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x220)](_0x3c604e,_0x3e5938=0x1,_0x37e3c8=0x0,_0x3a9dba=0x0,_0x518ccb=0x0,_0x52e785=0x0,_0xfd0b11=0x0){const _0x2ee553=_0xdf4916;let _0x49f8cb=Math[_0x2ee553(0x110)](_0x3c604e/0x2),_0x454102=Math[_0x2ee553(0x1e0)](_0x3c604e/0x2),_0xc5c8c3=PGA3D[_0x2ee553(0x192)](_0x518ccb,_0x52e785,_0xfd0b11,_0x3e5938,_0x37e3c8,_0x3a9dba);return[_0x49f8cb,_0x454102*_0xc5c8c3[0x1],_0x454102*_0xc5c8c3[0x2],_0x454102*_0xc5c8c3[0x3],_0x454102*_0xc5c8c3[0x4],_0x454102*_0xc5c8c3[0x5],_0x454102*_0xc5c8c3[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x1ee)](_0x14d0e7){return[_0x14d0e7[0x0],_0x14d0e7[0x1],_0x14d0e7[0x2],_0x14d0e7[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x137)](_0x260209,_0x187e4d,_0x542c1c){return[0x0,_0x542c1c,-_0x187e4d,_0x260209,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x192)](_0xa79cde,_0x2f5e33,_0x1f4361,_0x5de009,_0x3af640,_0x3ac960){const _0x6fcbac=_0xdf4916;let _0x581cfb=PGA3D[_0x6fcbac(0x137)](_0x5de009,_0x3af640,_0x3ac960),_0x510bfd=PGA3D['normalizeMotor'](_0x581cfb);return[0x0,_0x510bfd[0x1],_0x510bfd[0x2],_0x510bfd[0x3],-(-_0x510bfd[0x2]*_0x1f4361-_0x510bfd[0x1]*_0x2f5e33),-(_0x510bfd[0x1]*_0xa79cde-_0x510bfd[0x3]*_0x1f4361),-(_0x510bfd[0x3]*_0x2f5e33+_0x510bfd[0x2]*_0xa79cde),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x1c6)](_0x2d19fe,_0x58096d,_0x62102a){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x62102a,_0x58096d,-_0x2d19fe,0x0,0x0,0x0,0x0,0x0];}static[_0xdf4916(0x1f1)](_0x3debe2){return[-_0x3debe2[0xa]/_0x3debe2[0x7],_0x3debe2[0x9]/_0x3debe2[0x7],-_0x3debe2[0x8]/_0x3debe2[0x7]];}static[_0xdf4916(0x124)](_0xf5bed3,_0x21e697,_0xf614ad,_0x4e60c0){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0xf5bed3,_0x21e697,_0xf614ad,-_0x4e60c0,0x0];}static[_0xdf4916(0x1ff)](_0x2ff165,_0x55cfcf,_0x17dde3){let _0x370c62=_0x55cfcf[0x1]*_0x17dde3[0x2]-_0x17dde3[0x1]*_0x55cfcf[0x2]-(_0x2ff165[0x1]*_0x17dde3[0x2]-_0x17dde3[0x1]*_0x2ff165[0x2])+(_0x2ff165[0x1]*_0x55cfcf[0x2]-_0x55cfcf[0x1]*_0x2ff165[0x2]),_0x32f8ad=_0x55cfcf[0x0]*_0x17dde3[0x2]-_0x17dde3[0x0]*_0x55cfcf[0x2]-(_0x2ff165[0x0]*_0x17dde3[0x2]-_0x17dde3[0x0]*_0x2ff165[0x2])+(_0x2ff165[0x0]*_0x55cfcf[0x2]-_0x55cfcf[0x0]*_0x2ff165[0x2]),_0x1ea0a9=_0x55cfcf[0x0]*_0x17dde3[0x1]-_0x17dde3[0x0]*_0x55cfcf[0x1]-(_0x2ff165[0x0]*_0x17dde3[0x1]-_0x17dde3[0x0]*_0x2ff165[0x1])+(_0x2ff165[0x0]*_0x55cfcf[0x1]-_0x55cfcf[0x0]*_0x2ff165[0x1]),_0x5d7016=_0x2ff165[0x0]*(_0x55cfcf[0x1]*_0x17dde3[0x2]-_0x17dde3[0x1]*_0x55cfcf[0x2])-_0x55cfcf[0x0]*(_0x2ff165[0x1]*_0x17dde3[0x2]-_0x17dde3[0x1]*_0x2ff165[0x2])+_0x17dde3[0x0]*(_0x2ff165[0x1]*_0x55cfcf[0x2]-_0x55cfcf[0x1]*_0x2ff165[0x2]);return PGA3D['createPlane'](_0x370c62,-_0x32f8ad,_0x1ea0a9,_0x5d7016);}static[_0xdf4916(0x155)](_0x19c6a4,_0x105d13){const _0x1fb745=_0xdf4916;let _0x3c2a3b=PGA3D[_0x1fb745(0x1d8)](_0x19c6a4,_0x105d13),_0xb98b55=Math[_0x1fb745(0x1b0)](_0x3c2a3b[0x7])<=1e-8,_0xced91b=_0xb98b55&&Math[_0x1fb745(0x1b0)](_0x3c2a3b[0x8])<=1e-8&&Math[_0x1fb745(0x1b0)](_0x3c2a3b[0x9])<=1e-8&&Math['abs'](_0x3c2a3b[0xa])<=1e-8;return[PGA3D[_0x1fb745(0x1f1)](_0x3c2a3b),!_0xb98b55,_0xced91b];}static[_0xdf4916(0x221)](_0x51c79b){const _0x2e640e=_0xdf4916;let _0x1a5f23=PGA3D[_0x2e640e(0x1b4)](_0x51c79b);if(_0x1a5f23==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x51c79b[_0x2e640e(0x1c0)](_0xe2941a=>_0xe2941a/_0x1a5f23);}static[_0xdf4916(0x15f)](_0x5494cf,_0x7cb6e7){const _0x303717=_0xdf4916;let _0x3c1b11=PGA3D['applyMotor'](PGA3D[_0x303717(0x1c6)](_0x5494cf[0x0],_0x5494cf[0x1],_0x5494cf[0x2]),_0x7cb6e7);return PGA3D[_0x303717(0x1f1)](_0x3c1b11);}static[_0xdf4916(0x1e9)](_0x697dc8,_0x42707a){const _0x5e7e5b=_0xdf4916;let _0x1031e2=PGA3D['extractRotor'](_0x42707a),_0x2360c0=PGA3D[_0x5e7e5b(0x146)](PGA3D[_0x5e7e5b(0x1c6)](_0x697dc8[0x0],_0x697dc8[0x1],_0x697dc8[0x2]),_0x1031e2);return PGA3D[_0x5e7e5b(0x1f1)](_0x2360c0);}static[_0xdf4916(0x18e)](_0x4be4f8,_0x595594,_0xbb20a1,_0x3c8e6d){const _0x452be3=_0xdf4916;let _0x322551=PGA3D[_0x452be3(0x1c6)](_0x4be4f8[0x0],_0x4be4f8[0x1],_0x4be4f8[0x2]),_0x4d5588=PGA3D[_0x452be3(0x1c6)](_0x595594[0x0],_0x595594[0x1],_0x595594[0x2]),_0x3d97ff=PGA3D[_0x452be3(0x1c6)](_0xbb20a1[0x0],_0xbb20a1[0x1],_0xbb20a1[0x2]),_0x381941=PGA3D[_0x452be3(0x1c6)](_0x3c8e6d[0x0],_0x3c8e6d[0x1],_0x3c8e6d[0x2]),_0x4ae475=PGA3D[_0x452be3(0x1ff)](_0x4be4f8,_0x595594,_0xbb20a1),_0x3fa242=PGA3D[_0x452be3(0x1ff)](_0x3c8e6d,_0x595594,_0xbb20a1),_0x1dcd27=PGA3D[_0x452be3(0x1ff)](_0x4be4f8,_0x3c8e6d,_0xbb20a1),_0x13677a=PGA3D['createPlaneFromPoints'](_0x4be4f8,_0x595594,_0x3c8e6d),_0x285d0f=_0x4ae475[0xb]*_0x4ae475[0xb]+_0x4ae475[0xc]*_0x4ae475[0xc]+_0x4ae475[0xd]*_0x4ae475[0xd]+_0x4ae475[0xe]*_0x4ae475[0xe],_0x47b02d=_0x4ae475[0xb]*_0x3fa242[0xb]+_0x4ae475[0xc]*_0x3fa242[0xc]+_0x4ae475[0xd]*_0x3fa242[0xd]+_0x4ae475[0xe]*_0x3fa242[0xe],_0x254c4f=_0x4ae475[0xb]*_0x1dcd27[0xb]+_0x4ae475[0xc]*_0x1dcd27[0xc]+_0x4ae475[0xd]*_0x1dcd27[0xd]+_0x4ae475[0xe]*_0x1dcd27[0xe],_0x511b32=_0x4ae475[0xb]*_0x13677a[0xb]+_0x4ae475[0xc]*_0x13677a[0xc]+_0x4ae475[0xd]*_0x13677a[0xd]+_0x4ae475[0xe]*_0x13677a[0xe],_0x570b84=_0x47b02d/_0x285d0f,_0x822ad8=_0x254c4f/_0x285d0f,_0x35aefc=_0x511b32/_0x285d0f;return _0x570b84>=0x0&&_0x570b84<=0x1&&_0x822ad8>=0x0&&_0x822ad8<=0x1&&_0x35aefc>=0x0&&_0x35aefc<=0x1;}}class Camera{constructor(_0x405c0f,_0x509011){const _0x3f0d32=_0xdf4916;this['_pose']=new Float32Array(Array(0x10)[_0x3f0d32(0x1dc)](0x0)),this[_0x3f0d32(0x1c8)][0x0]=0x1,this[_0x3f0d32(0x184)]=new Float32Array(Array(0x2)[_0x3f0d32(0x1dc)](0x1)),this[_0x3f0d32(0x174)]=new Float32Array([_0x405c0f,_0x509011]),this[_0x3f0d32(0x203)]=![];}[_0xdf4916(0x222)](){const _0x41d0da=_0xdf4916;this[_0x41d0da(0x1c8)][0x0]=0x1;for(let _0x3b432e=0x1;_0x3b432e<0x10;++_0x3b432e)this[_0x41d0da(0x1c8)][_0x3b432e]=0x0;this[_0x41d0da(0x184)][0x0]=0x1,this[_0x41d0da(0x184)][0x1]=0x1;}['updatePose'](_0xf1bf70){const _0x5ac5d8=_0xdf4916;for(let _0x1599d9=0x0;_0x1599d9<0x10;++_0x1599d9)this[_0x5ac5d8(0x1c8)][_0x1599d9]=_0xf1bf70[_0x1599d9];}[_0xdf4916(0x131)](_0x5706d7,_0x5c1f01){const _0x1b2d81=_0xdf4916;this[_0x1b2d81(0x174)][0x0]=_0x5706d7,this[_0x1b2d81(0x174)][0x1]=_0x5c1f01;}[_0xdf4916(0x152)](_0x10fc50){const _0x5ae481=_0xdf4916;let _0x2715ef=PGA3D[_0x5ae481(0x1e9)]([0x1,0x0,0x0],this[_0x5ae481(0x1c8)]),_0x3dd308=PGA3D['createTranslator'](_0x10fc50*_0x2715ef[0x0],_0x10fc50*_0x2715ef[0x1],_0x10fc50*_0x2715ef[0x2]),_0x550e36=PGA3D[_0x5ae481(0x221)](PGA3D[_0x5ae481(0x1d8)](_0x3dd308,this[_0x5ae481(0x1c8)]));this[_0x5ae481(0xf7)](_0x550e36);}[_0xdf4916(0x18c)](_0x5c4a3c){const _0x2973df=_0xdf4916;let _0x2e4d32=PGA3D[_0x2973df(0x1e9)]([0x0,0x1,0x0],this[_0x2973df(0x1c8)]),_0x5f1672=PGA3D['createTranslator'](_0x5c4a3c*_0x2e4d32[0x0],_0x5c4a3c*_0x2e4d32[0x1],_0x5c4a3c*_0x2e4d32[0x2]),_0x31bd90=PGA3D[_0x2973df(0x221)](PGA3D[_0x2973df(0x1d8)](_0x5f1672,this['_pose']));this[_0x2973df(0xf7)](_0x31bd90);}['moveZ'](_0x5a00d1){const _0x3a7a3e=_0xdf4916;let _0xb09cb5=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this['_pose']),_0x26d50d=PGA3D[_0x3a7a3e(0x14a)](_0x5a00d1*_0xb09cb5[0x0],_0x5a00d1*_0xb09cb5[0x1],_0x5a00d1*_0xb09cb5[0x2]),_0x357cd7=PGA3D[_0x3a7a3e(0x221)](PGA3D['geometricProduct'](_0x26d50d,this[_0x3a7a3e(0x1c8)]));this[_0x3a7a3e(0xf7)](_0x357cd7);}['rotateX'](_0x511df5){const _0x45f5b3=_0xdf4916;let _0x57d1ca=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this['_pose']),_0x202490=PGA3D[_0x45f5b3(0x1e9)]([0x1,0x0,0x0],this[_0x45f5b3(0x1c8)]),_0x448bd5=PGA3D['createRotor'](_0x511df5,_0x202490[0x0],_0x202490[0x1],_0x202490[0x2],_0x57d1ca[0x0],_0x57d1ca[0x1],_0x57d1ca[0x2]),_0x5ee2f0=PGA3D[_0x45f5b3(0x221)](PGA3D[_0x45f5b3(0x1d8)](_0x448bd5,this[_0x45f5b3(0x1c8)]));this['updatePose'](_0x5ee2f0);}['rotateY'](_0x2d1874){const _0x14cf6d=_0xdf4916;let _0x5a982b=PGA3D[_0x14cf6d(0x15f)]([0x0,0x0,0x0],this[_0x14cf6d(0x1c8)]),_0x368b2f=PGA3D[_0x14cf6d(0x1e9)]([0x0,0x1,0x0],this[_0x14cf6d(0x1c8)]),_0x5ae42b=PGA3D[_0x14cf6d(0x220)](_0x2d1874,_0x368b2f[0x0],_0x368b2f[0x1],_0x368b2f[0x2],_0x5a982b[0x0],_0x5a982b[0x1],_0x5a982b[0x2]),_0x4f34ab=PGA3D[_0x14cf6d(0x221)](PGA3D[_0x14cf6d(0x1d8)](_0x5ae42b,this[_0x14cf6d(0x1c8)]));this['updatePose'](_0x4f34ab);}[_0xdf4916(0x215)](_0x9358a4){const _0x11f6f3=_0xdf4916;let _0x58a5fd=PGA3D[_0x11f6f3(0x15f)]([0x0,0x0,0x0],this[_0x11f6f3(0x1c8)]),_0x3060ac=PGA3D[_0x11f6f3(0x1e9)]([0x0,0x0,0x1],this[_0x11f6f3(0x1c8)]),_0x30de48=PGA3D[_0x11f6f3(0x220)](_0x9358a4,_0x3060ac[0x0],_0x3060ac[0x1],_0x3060ac[0x2],_0x58a5fd[0x0],_0x58a5fd[0x1],_0x58a5fd[0x2]),_0x3603ac=PGA3D[_0x11f6f3(0x221)](PGA3D['geometricProduct'](_0x30de48,this[_0x11f6f3(0x1c8)]));this['updatePose'](_0x3603ac);}}class Light{constructor(){const _0x28b01b=_0xdf4916;this[_0x28b01b(0x19d)]=new Float32Array(Array(0x4)[_0x28b01b(0x1dc)](0x0)),this['_position']=new Float32Array(Array(0x4)[_0x28b01b(0x1dc)](0x0)),this[_0x28b01b(0x17d)]=new Float32Array(Array(0x4)[_0x28b01b(0x1dc)](0x0)),this[_0x28b01b(0x1b3)]=new Float32Array(Array(0x4)['fill'](0x0)),this[_0x28b01b(0x1b3)][0x0]=0x1,this['_params']=new Float32Array(Array(0x4)[_0x28b01b(0x1dc)](0x0));}}class PointLight extends Light{constructor(_0x3118ff=[0x1,0x1,0x1],_0x392a90=[0x0,0x0,0x0],_0x5d256f=[0x1,0.1,0.01]){const _0x21b0f0=_0xdf4916;super();for(let _0x5eb0b8=0x0;_0x5eb0b8<0x3;++_0x5eb0b8){this[_0x21b0f0(0x19d)][_0x5eb0b8]=_0x3118ff[_0x5eb0b8],this[_0x21b0f0(0x1a7)][_0x5eb0b8]=_0x392a90[_0x5eb0b8],this[_0x21b0f0(0x1b3)][_0x5eb0b8]=_0x5d256f[_0x5eb0b8];}}}function _0x5df0(_0x125f78,_0x496016){const _0x4e141b=_0x4e14();return _0x5df0=function(_0x5df0db,_0x1de331){_0x5df0db=_0x5df0db-0xdc;let _0x15b2b3=_0x4e141b[_0x5df0db];return _0x15b2b3;},_0x5df0(_0x125f78,_0x496016);}class RectangularLight extends Light{constructor(_0x13b776=[0x1,0x1,0x1],_0x210404=[0x0,0x0,0x0],_0x39a72a=[0x1,0.5,0.5],_0x328fb2=0.1,_0x48332f=0.1){const _0x2e41f5=_0xdf4916;super();for(let _0x1bd353=0x0;_0x1bd353<0x3;++_0x1bd353){this[_0x2e41f5(0x19d)][_0x1bd353]=_0x13b776[_0x1bd353],this[_0x2e41f5(0x1a7)][_0x1bd353]=_0x210404[_0x1bd353],this[_0x2e41f5(0x1b3)][_0x1bd353]=_0x39a72a[_0x1bd353];}this[_0x2e41f5(0x20a)][0x0]=_0x328fb2,this[_0x2e41f5(0x20a)][0x1]=_0x48332f;}}class SphericalLight extends Light{constructor(_0x58c446=[0x1,0x1,0x1],_0x9b6a1e=[0x0,0x0,0x0],_0x22bca9=[0x1,0.5,0.5],_0x130530=0.1){const _0x143ae5=_0xdf4916;super();for(let _0xd1b9b9=0x0;_0xd1b9b9<0x3;++_0xd1b9b9){this[_0x143ae5(0x19d)][_0xd1b9b9]=_0x58c446[_0xd1b9b9],this['_position'][_0xd1b9b9]=_0x9b6a1e[_0xd1b9b9],this[_0x143ae5(0x1b3)][_0xd1b9b9]=_0x22bca9[_0xd1b9b9];}this[_0x143ae5(0x20a)][0x0]=_0x130530;}}class DirectionalLight extends Light{constructor(_0x4861c3=[0x1,0x1,0x1],_0x35ec42=[Math[_0xdf4916(0x118)](0x3),Math['sqrt'](0x3),Math[_0xdf4916(0x118)](0x3)]){const _0xfe059a=_0xdf4916;super();for(let _0x424e9d=0x0;_0x424e9d<0x3;++_0x424e9d){this['_intensity'][_0x424e9d]=_0x4861c3[_0x424e9d],this[_0xfe059a(0x17d)][_0x424e9d]=_0x35ec42[_0x424e9d];}}}class SpotLight extends Light{constructor(_0x41aefc=[0x1,0x1,0x1],_0x3712cc=[0x0,0x0,0x0],_0x41bc83=[0x0,0x1,0x0],_0x33c5b9=[0x1,0.1,0.01],_0x4fa9bf=0.785,_0x2d8c51=0x5){const _0x24581e=_0xdf4916;super();for(let _0x526732=0x0;_0x526732<0x3;++_0x526732){this[_0x24581e(0x19d)][_0x526732]=_0x41aefc[_0x526732],this[_0x24581e(0x1a7)][_0x526732]=_0x3712cc[_0x526732],this[_0x24581e(0x17d)][_0x526732]=_0x41bc83[_0x526732],this[_0x24581e(0x1b3)][_0x526732]=_0x33c5b9[_0x526732];}this[_0x24581e(0x20a)][0x0]=_0x4fa9bf,this[_0x24581e(0x20a)][0x1]=_0x2d8c51;}}async function init(){const _0x326bb8=_0xdf4916,_0x91155a=document['createElement']('canvas');_0x91155a['id']=_0x326bb8(0x20f),document[_0x326bb8(0x10e)][_0x326bb8(0x189)](_0x91155a);const _0x28b592=new RayTracer(_0x91155a);await _0x28b592[_0x326bb8(0x1a1)]();var _0x10e770=new Camera(),_0x30a6f5=new RayTracingTextureDemoSceneObject(_0x28b592[_0x326bb8(0x1ce)],_0x28b592[_0x326bb8(0x15a)],_0x10e770);await _0x28b592['setTracerObject'](_0x30a6f5),_0x30a6f5['_box']['_scales'][0x0]=0x2,_0x30a6f5[_0x326bb8(0x102)][_0x326bb8(0x1e6)][0x1]=1.25,_0x30a6f5[_0x326bb8(0x102)]['_scales'][0x2]=0x2,_0x30a6f5['updateBoxScales'](),_0x30a6f5[_0x326bb8(0x102)]['_pose'][0x6]=-0.2*_0x30a6f5[_0x326bb8(0x102)]['_scales'][0x2],_0x30a6f5[_0x326bb8(0x1dd)](),_0x30a6f5[_0x326bb8(0x12b)][_0x326bb8(0x1e6)][0x0]=0.3,_0x30a6f5['_cube']['_scales'][0x1]=0.5,_0x30a6f5[_0x326bb8(0x12b)]['_scales'][0x2]=0.3,_0x30a6f5[_0x326bb8(0x1e5)](),_0x30a6f5[_0x326bb8(0x12b)][_0x326bb8(0x1c8)][0x4]=0.25,_0x30a6f5[_0x326bb8(0x12b)][_0x326bb8(0x1c8)][0x5]=-0.1875,_0x30a6f5[_0x326bb8(0x12b)][_0x326bb8(0x1c8)][0x6]=-0.5,_0x30a6f5[_0x326bb8(0xfb)](),_0x30a6f5['_sphere'][_0x326bb8(0x1e6)][0x0]=0.25,_0x30a6f5[_0x326bb8(0x1bd)]['_scales'][0x1]=0.25,_0x30a6f5[_0x326bb8(0x1bd)][_0x326bb8(0x1e6)][0x2]=0.25,_0x30a6f5['updateSphereScales'](),_0x30a6f5[_0x326bb8(0x1bd)][_0x326bb8(0x1c8)][0x4]=-0.225,_0x30a6f5[_0x326bb8(0x1bd)][_0x326bb8(0x1c8)][0x5]=-0.1875,_0x30a6f5[_0x326bb8(0x1bd)][_0x326bb8(0x1c8)][0x6]=-0.6,_0x30a6f5[_0x326bb8(0x10c)](),_0x30a6f5['_cylinder'][_0x326bb8(0x1e6)][0x0]=0.2,_0x30a6f5[_0x326bb8(0xee)]['_scales'][0x1]=1.25,_0x30a6f5[_0x326bb8(0xee)][_0x326bb8(0x1e6)][0x2]=0.2,_0x30a6f5[_0x326bb8(0x161)](),_0x30a6f5[_0x326bb8(0xee)][_0x326bb8(0x1c8)][0x5]=0.3125,_0x30a6f5[_0x326bb8(0xee)][_0x326bb8(0x1c8)][0x6]=-0.75,_0x30a6f5[_0x326bb8(0xe1)](),_0x30a6f5[_0x326bb8(0x109)][_0x326bb8(0x1e6)][0x0]=0.2,_0x30a6f5[_0x326bb8(0x109)][_0x326bb8(0x1e6)][0x1]=-0.6,_0x30a6f5[_0x326bb8(0x109)][_0x326bb8(0x1e6)][0x2]=0.2,_0x30a6f5[_0x326bb8(0x1c3)](),_0x30a6f5['_cone'][_0x326bb8(0x1c8)][0x4]=-0.05,_0x30a6f5[_0x326bb8(0x109)][_0x326bb8(0x1c8)][0x5]=-0.3125,_0x30a6f5[_0x326bb8(0x109)][_0x326bb8(0x1c8)][0x6]=-0.4,_0x30a6f5['updateConePose']();var _0x2df02c='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0ag/G:\x20Change\x20sphere\x20shininess\x0ay/Y:\x20Show/Hide\x20Cube\x20Map\x0at/T:\x20Show/Hide\x20Texture\x0ab/B:\x20Show/Hide\x20Bump\x20Map\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper',_0xf71555=new StandardTextObject(_0x2df02c);let _0x1de4f2='??';var _0x1588f6=new StandardTextObject(_0x326bb8(0x19c)+_0x1de4f2),_0x4cc6e1=0.05;_0x30a6f5[_0x326bb8(0x20a)][0x1]=0x0;var _0x53b309=[_0x326bb8(0x11a),_0x326bb8(0x223),_0x326bb8(0x135)];_0x30a6f5['_params'][0x2]=0x0;var _0x291b1a=['Emit\x20only',_0x326bb8(0x13a),_0x326bb8(0x158),_0x326bb8(0x212)];_0x30a6f5[_0x326bb8(0x20a)][0x3]=0x19;var _0x53b83f=0x3,_0x47d3f5=[_0x326bb8(0x18f),'Green',_0x326bb8(0x1a6),_0x326bb8(0x176)];_0x2df02c=_0x2df02c['replace']('???????????',_0x53b309[_0x30a6f5[_0x326bb8(0x20a)][0x1]]),_0x2df02c=_0x2df02c[_0x326bb8(0x1cc)](_0x326bb8(0xf2),_0x291b1a[_0x30a6f5['_params'][0x2]]),_0x2df02c=_0x2df02c[_0x326bb8(0x1cc)](_0x326bb8(0x18a),_0x47d3f5[_0x53b83f]),_0xf71555[_0x326bb8(0x14e)](_0x2df02c);var _0x114401=null;let _0x4fd6d3=async()=>{const _0x52a9d1=_0x326bb8;switch(_0x30a6f5[_0x52a9d1(0x20a)][0x1]){case 0x0:_0x114401=new PointLight();break;case 0x1:_0x114401=new DirectionalLight();break;case 0x2:_0x114401=new SpotLight();break;case 0x3:_0x114401=new RectangularLight();break;case 0x4:_0x114401=new SphericalLight();break;}switch(_0x53b83f){case 0x0:_0x114401[_0x52a9d1(0x19d)][0x1]=0x0,_0x114401[_0x52a9d1(0x19d)][0x2]=0x0;break;case 0x1:_0x114401['_intensity'][0x0]=0x0,_0x114401[_0x52a9d1(0x19d)][0x2]=0x0;break;case 0x2:_0x114401['_intensity'][0x0]=0x0,_0x114401['_intensity'][0x1]=0x0;break;}_0x114401[_0x52a9d1(0x1a7)][0x1]=-0.624,_0x114401[_0x52a9d1(0x1a7)][0x2]=0.75;};await _0x4fd6d3(),_0x30a6f5[_0x326bb8(0x195)](_0x114401);let _0x4ab9ea=async()=>{const _0x39cb22=_0x326bb8;_0x30a6f5[_0x39cb22(0x205)][0x0]?(_0x30a6f5[_0x39cb22(0x102)][_0x39cb22(0x1e6)][0x0]=0x1000,_0x30a6f5[_0x39cb22(0x102)][_0x39cb22(0x1e6)][0x1]=0x1000,_0x30a6f5['_box']['_scales'][0x2]=0x1000,_0x30a6f5[_0x39cb22(0xe3)]()):(_0x30a6f5['_box'][_0x39cb22(0x1e6)][0x0]=0x2,_0x30a6f5[_0x39cb22(0x102)][_0x39cb22(0x1e6)][0x1]=1.25,_0x30a6f5[_0x39cb22(0x102)][_0x39cb22(0x1e6)][0x2]=0x2,_0x30a6f5[_0x39cb22(0xe3)](),_0x30a6f5['_box']['_pose'][0x6]=-0.2*_0x30a6f5[_0x39cb22(0x102)][_0x39cb22(0x1e6)][0x2],_0x30a6f5[_0x39cb22(0x1dd)]());};await _0x4ab9ea(),window[_0x326bb8(0x157)](_0x326bb8(0xe2),async _0x47506e=>{const _0x216b6c=_0x326bb8;switch(_0x47506e[_0x216b6c(0x226)]){case'h':case'H':_0xf71555[_0x216b6c(0x11c)]();break;case'f':case'F':_0x1588f6[_0x216b6c(0x11c)]();break;case'w':case'W':_0x10e770['moveY'](-_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case's':case'S':_0x10e770['moveY'](_0x4cc6e1),_0x30a6f5['updateCameraPose']();break;case'a':case'A':_0x10e770[_0x216b6c(0x152)](-_0x4cc6e1),_0x30a6f5['updateCameraPose']();break;case'd':case'D':_0x10e770[_0x216b6c(0x152)](_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'q':case'Q':_0x10e770['moveZ'](-_0x4cc6e1),_0x30a6f5['updateCameraPose']();break;case'e':case'E':_0x10e770['moveZ'](_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'i':case'I':_0x10e770[_0x216b6c(0x17e)](-_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'k':case'K':_0x10e770[_0x216b6c(0x17e)](_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'j':case'J':_0x10e770[_0x216b6c(0x201)](_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'l':case'L':_0x10e770[_0x216b6c(0x201)](-_0x4cc6e1),_0x30a6f5['updateCameraPose']();break;case'u':case'U':_0x10e770['rotateZ'](-_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'o':case'O':_0x10e770[_0x216b6c(0x215)](_0x4cc6e1),_0x30a6f5[_0x216b6c(0x1fb)]();break;case'c':case'C':_0x30a6f5['_params'][0x0]=!_0x30a6f5['_params'][0x0],_0x30a6f5['updateParam']();break;case'r':case'R':_0x10e770[_0x216b6c(0x222)](),_0x30a6f5['updateCameraPose'](),_0x30a6f5[_0x216b6c(0x1f4)]();break;case'[':_0x10e770[_0x216b6c(0x184)][0x0]*=1.1,_0x30a6f5['updateCameraFocal']();break;case']':_0x10e770['_focal'][0x0]/=1.1,_0x30a6f5[_0x216b6c(0x1f4)]();break;case'{':_0x10e770['_focal'][0x1]*=1.1,_0x30a6f5[_0x216b6c(0x1f4)]();break;case'}':_0x10e770['_focal'][0x1]/=1.1,_0x30a6f5[_0x216b6c(0x1f4)]();break;case'n':case'N':let _0x5a68fb=(_0x30a6f5[_0x216b6c(0x20a)][0x1]+0x1)%_0x53b309[_0x216b6c(0x14f)];_0x2df02c=_0x2df02c[_0x216b6c(0x1cc)](_0x53b309[_0x30a6f5[_0x216b6c(0x20a)][0x1]],_0x53b309[_0x5a68fb]),_0xf71555[_0x216b6c(0x14e)](_0x2df02c),_0x30a6f5[_0x216b6c(0x20a)][0x1]=_0x5a68fb,await _0x4fd6d3(),_0x30a6f5[_0x216b6c(0x1b8)](),_0x30a6f5['updateLight'](_0x114401);break;case'm':case'M':let _0xaceb43=(_0x30a6f5['_params'][0x2]+0x1)%_0x291b1a[_0x216b6c(0x14f)];_0x2df02c=_0x2df02c['replace'](_0x291b1a[_0x30a6f5[_0x216b6c(0x20a)][0x2]],_0x291b1a[_0xaceb43]),_0xf71555[_0x216b6c(0x14e)](_0x2df02c),_0x30a6f5[_0x216b6c(0x20a)][0x2]=_0xaceb43,_0x30a6f5[_0x216b6c(0x1b8)]();break;case'v':case'V':let _0x480c08=(_0x53b83f+0x1)%_0x47d3f5[_0x216b6c(0x14f)];_0x2df02c=_0x2df02c[_0x216b6c(0x1cc)](_0x47d3f5[_0x53b83f],_0x47d3f5[_0x480c08]),_0xf71555['updateText'](_0x2df02c),_0x53b83f=_0x480c08,await _0x4fd6d3(),_0x30a6f5[_0x216b6c(0x195)](_0x114401);break;case'g':_0x30a6f5[_0x216b6c(0x20a)][0x3]=_0x30a6f5[_0x216b6c(0x20a)][0x3]+0x1,_0x30a6f5[_0x216b6c(0x1b8)]();break;case'G':_0x30a6f5[_0x216b6c(0x20a)][0x3]=_0x30a6f5[_0x216b6c(0x20a)][0x3]-0x1;if(_0x30a6f5[_0x216b6c(0x20a)][0x3]<0x1)_0x30a6f5[_0x216b6c(0x20a)][0x3]=0x1;_0x30a6f5['updateParam']();break;case'y':case'Y':_0x30a6f5[_0x216b6c(0x205)][0x0]=!_0x30a6f5[_0x216b6c(0x205)][0x0],_0x30a6f5[_0x216b6c(0x16f)](),await _0x4ab9ea();break;case't':case'T':_0x30a6f5[_0x216b6c(0x205)][0x1]=!_0x30a6f5[_0x216b6c(0x205)][0x1],_0x30a6f5[_0x216b6c(0x16f)]();break;case'b':case'B':_0x30a6f5['_textureParams'][0x2]=!_0x30a6f5[_0x216b6c(0x205)][0x2],_0x30a6f5['updateTextureParam']();break;}}),window[_0x326bb8(0x157)](_0x326bb8(0x160),_0x2f9617=>{});let _0x25e3fe=async _0x285d87=>{},_0x45dd76=async _0x2fa1b0=>{},_0x2d5746=_0x4e5d21=>{};_0x91155a[_0x326bb8(0x157)](_0x326bb8(0xf9),_0x25e3fe),_0x91155a['addEventListener'](_0x326bb8(0x1af),_0x45dd76),_0x91155a[_0x326bb8(0x157)](_0x326bb8(0xfa),_0x2d5746),_0x91155a[_0x326bb8(0x157)](_0x326bb8(0x20e),_0x4ef57c=>{}),_0x91155a[_0x326bb8(0x157)](_0x326bb8(0xe0),_0x54a6d5=>{}),_0x91155a['addEventListener']('touchstart',_0x25e3fe),_0x91155a[_0x326bb8(0x157)](_0x326bb8(0x190),_0x45dd76),_0x91155a[_0x326bb8(0x157)](_0x326bb8(0x149),_0x2d5746),_0xf71555[_0x326bb8(0x1e2)][_0x326bb8(0x1ed)]['setProperty']('pointer-events',_0x326bb8(0x21b)),_0x1588f6[_0x326bb8(0x1e2)][_0x326bb8(0x1ed)][_0x326bb8(0x1e1)](_0x326bb8(0x1ec),'none');var _0xa87fcf=0x0,_0xf2b71=0x3c,_0x408cd8=0x1/_0xf2b71,_0x529d4d=_0x408cd8*0x3e8,_0x1896d0;let _0x2e2307=()=>{const _0x107266=_0x326bb8;let _0x370954=Date[_0x107266(0x151)]()-_0x1896d0;_0x370954>_0x529d4d&&(++_0xa87fcf,_0x1896d0=Date['now']()-_0x370954%_0x529d4d,_0x28b592['render']()),requestAnimationFrame(_0x2e2307);};return _0x1896d0=Date['now'](),_0x2e2307(),_0x1588f6['_textCanvas']['style'][_0x326bb8(0x1e1)](_0x326bb8(0x145),_0x326bb8(0x120)),_0x1588f6[_0x326bb8(0x1e2)]['style'][_0x326bb8(0xe4)]=_0x326bb8(0x129),setInterval(()=>{const _0x2d698b=_0x326bb8;_0x1de4f2=_0xa87fcf,_0xa87fcf=0x0,_0x1588f6[_0x2d698b(0x14e)](_0x2d698b(0x19c)+_0x1de4f2);},0x3e8),_0x28b592;}init()[_0xdf4916(0x115)](_0x3e9003=>{const _0x435f1d=_0xdf4916;console[_0x435f1d(0x1d7)](_0x3e9003);})[_0xdf4916(0x1d0)](_0x22b392=>{const _0x31c428=_0xdf4916,_0xeea937=document[_0x31c428(0x16b)]('p');_0xeea937[_0x31c428(0x1da)]=navigator[_0x31c428(0x103)]+_0x31c428(0x1ac)+_0x22b392['message'],document['body']['appendChild'](_0xeea937),document[_0x31c428(0x177)]('renderCanvas')[_0x31c428(0x180)]();});
