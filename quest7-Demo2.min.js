/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x476a85=_0x400a;(function(_0x580089,_0x75b92f){const _0x5d5506=_0x400a,_0x30e6d0=_0x580089();while(!![]){try{const _0x44e840=parseInt(_0x5d5506(0x2be))/0x1+parseInt(_0x5d5506(0x2a6))/0x2+-parseInt(_0x5d5506(0x22a))/0x3+parseInt(_0x5d5506(0x191))/0x4+-parseInt(_0x5d5506(0x1e5))/0x5*(-parseInt(_0x5d5506(0x27c))/0x6)+parseInt(_0x5d5506(0x222))/0x7+parseInt(_0x5d5506(0x25a))/0x8*(-parseInt(_0x5d5506(0x1bd))/0x9);if(_0x44e840===_0x75b92f)break;else _0x30e6d0['push'](_0x30e6d0['shift']());}catch(_0x31fb6b){_0x30e6d0['push'](_0x30e6d0['shift']());}}}(_0x1b79,0x7ea3f));class Renderer{constructor(_0x101427){const _0x285083=_0x400a;this[_0x285083(0x1c1)]=_0x101427,this[_0x285083(0x27b)]=[],this[_0x285083(0x1c2)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x476a85(0x279)](){const _0x12cebb=_0x476a85;if(!navigator[_0x12cebb(0x257)])throw Error(_0x12cebb(0x244));const _0x320cf4=await navigator[_0x12cebb(0x257)][_0x12cebb(0x1ca)]();if(!_0x320cf4)throw Error(_0x12cebb(0x1cc));this[_0x12cebb(0x2b7)]=await _0x320cf4[_0x12cebb(0x26f)](),this[_0x12cebb(0x1ff)]=this[_0x12cebb(0x1c1)][_0x12cebb(0x289)](_0x12cebb(0x220)),this['_canvasFormat']=navigator[_0x12cebb(0x257)][_0x12cebb(0x1fe)](),this[_0x12cebb(0x1ff)][_0x12cebb(0x1b7)]({'device':this[_0x12cebb(0x2b7)],'format':this['_canvasFormat']}),this[_0x12cebb(0x193)](),window[_0x12cebb(0x1dc)](_0x12cebb(0x232),this[_0x12cebb(0x193)][_0x12cebb(0x19b)](this));}[_0x476a85(0x193)](){const _0x161389=_0x476a85,_0x40b1dc=window[_0x161389(0x221)]||0x1,_0x339374=window['innerWidth']*_0x40b1dc,_0x137aae=window[_0x161389(0x27e)]*_0x40b1dc;this['_canvas'][_0x161389(0x226)]=_0x339374,this[_0x161389(0x1c1)][_0x161389(0x2c0)]=_0x137aae,this[_0x161389(0x1c1)][_0x161389(0x2a7)][_0x161389(0x226)]=window[_0x161389(0x1b4)]+'px',this[_0x161389(0x1c1)][_0x161389(0x2a7)][_0x161389(0x2c0)]=window[_0x161389(0x27e)]+'px',this['_canvas'][_0x161389(0x2a7)][_0x161389(0x2c1)]='center',this[_0x161389(0x1e3)]();}async['appendSceneObject'](_0x5d895e){const _0x3d297c=_0x476a85;await _0x5d895e[_0x3d297c(0x279)](),this[_0x3d297c(0x27b)][_0x3d297c(0x188)](_0x5d895e);}[_0x476a85(0x284)](_0x464596){const _0x3c0fa9=_0x476a85;for(const _0x58f930 of this[_0x3c0fa9(0x27b)]){_0x58f930?.['updateGeometry']();}let _0x3b0555=this[_0x3c0fa9(0x2b7)][_0x3c0fa9(0x1e1)]();const _0xfeebe2=_0x3b0555['beginRenderPass']({'colorAttachments':[{'view':_0x464596,'clearValue':this['_clearColor'],'loadOp':_0x3c0fa9(0x298),'storeOp':_0x3c0fa9(0x1ba)}]});for(const _0x4dfff8 of this[_0x3c0fa9(0x27b)]){_0x4dfff8?.[_0x3c0fa9(0x1e3)](_0xfeebe2);}_0xfeebe2[_0x3c0fa9(0x1df)]();const _0x103b3a=_0x3b0555[_0x3c0fa9(0x264)]();for(const _0x34081c of this[_0x3c0fa9(0x27b)]){_0x34081c?.[_0x3c0fa9(0x196)](_0x103b3a);}_0x103b3a[_0x3c0fa9(0x1df)]();const _0x1bf012=_0x3b0555['finish']();this[_0x3c0fa9(0x2b7)][_0x3c0fa9(0x2a1)][_0x3c0fa9(0x1d6)]([_0x1bf012]);}[_0x476a85(0x1e3)](){const _0x1ef66f=_0x476a85;this[_0x1ef66f(0x284)](this['_context'][_0x1ef66f(0x23f)]()[_0x1ef66f(0x1ed)]());}}function _0x1b79(){const _0x26e698=['_dataBuffer','absolute','fps:\x20','Ray\x20Tracer\x20output\x20size\x20buffer','body','_bindGroup1','length','createPlane','beginComputePass','renderCanvas','mousemove','_ocean','copyExternalImageToTexture','createTranslator','_imgHeight','reverse','_mossBitmap','left','regenerate','requestDevice','/assets/Stone.png','fill','_lines','log','touchmove','_wgHeight','_dirtTexture','createRenderPipeline','auto','init','_paddingx','_objects','121782xUqFlj','_data','innerHeight','white','Ray\x20Trace\x20Volume\x20Bind\x20Group\x202','_sampler','applyMotorToPoint','open','renderToSelectedView','Network\x20error\x20loading\x20volume\x20byte\x20data','Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20','isLittleEndian','writeBuffer','getContext','fragmentMain','int','initial','createComputePipeline','moveX','remove','moveZ','18px\x20Arial','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','map','UNIFORM','getInt32','pow','Error\x20loading\x20volume\x20byte\x20data:\x20','clear','1px\x20solid\x20red','pointer-events','mouseenter','updateCameraFocal','rotateY','_mudTexture','finish','dispatchWorkgroups','queue','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','setPipeline','userAgent','_stone','1893496OPNFRn','style','_camera','setInt16','read','geometricProduct','getElementById','uint','updateGeometry','extractPoint','data','_grass','/assets/Grass.png','keyup','noise2d','_mountainBitmap','Ray\x20Trace\x20Volume\x20Bind\x20Group\x201','_device','floor','_imgWidth','octaveNoise2d','createBuffer','uchar','read-only-storage','303389SpAzTg','createPipelineLayout','height','transformOrigin','updateSize','_filename','fillText','_oceanTexture','_dims','clearRect','noise3d','reduce','computeMain','_fontSize','getFloat64','download.raws','push','ceil','getName','_cameraBuffer','Volume\x20','GET','createShaderModule','createBindGroupLayout','_water','3135296WNtnQk','setProperty','resizeCanvas','/assets/Mud.png','_bindGroupLayout1','compute','from','Ray\x20Tracing\x20Bind\x20Group','/assets/Blue.png','_stoneTexture','bind','buffer','createElement','_volumeBuffer','send','border','Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20','_stoneBitmap','_lineSpacing','linePlaneIntersection','COMPUTE','_focal','WASDQE:\x20Move\x20Camera\x0aIJKL:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x20&\x20Regenerate\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','rgba8unorm','rgba(1,\x201,\x201,\x200.5)','_oceanBitmap','max','byteLength','_grassBitmap','keydown','Cache-Control','_bindGroup','DONE','\x20Shader\x20','Texture\x20','innerWidth','_mountainTexture','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','configure','hidden','canvas','store','createSampler','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','28998XuyjsC','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','status','moveY','_canvas','_clearColor','then','href','name','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','rotateZ','_shaderModule','_outputSizeBuffer','requestAdapter','Ray\x20Tracer\x20Shader','Couldn\x27t\x20request\x20WebGPU\x20adapter.','sqrt','float','gradient','_objectCnt','_paddingtop','Ray\x20Trace\x20Volume\x20Layout\x201\x20','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','_pipelineLayout','setBindGroup','submit','draw','onerror','gradientPermutation','_offScreenTexture','getUint8','addEventListener','_bindGroupLayout2','_textFont','end','key','createCommandEncoder','10px','render','setRequestHeader','170uGBXzo','onload','Data\x20','readBytes','updatePose','short','createTexture','fillRect','createView','setTracerObject','updateTextRegion','beginRenderPass','linear','appendChild','_computeProjectivePipeline','/assets/LightBlue.png','createRotor','response','_pose','noise1d','mousedown','constructor','write','_width','ushort','getPreferredCanvasFormat','_context','readyState','_dirtBitmap','decode','statusText','_mudBitmap','_permutation','createShaders','BYTES_PER_ELEMENT','_waterTexture','updateText','_perlinNoise','createPoint','forEach','normalizeMotor','_moss','STORAGE_BINDING','RENDER_ATTACHMENT','innerHTML','readBinary','_sizes','touchstart','createLine','none','mouseup','/assets/Calcite.png','getBindGroupLayout','applyMotor','motorNorm','_isProjective','</br>','textBaseline','download','webgpu','devicePixelRatio','342972BuWEMf','loadShader','no-cache,\x20no-store,\x20max-age=0','match','width','_mountain','resetPose','updateCameraPose','1098732yMaLfg','_waterBitmap','Ray\x20Trace\x20Volume\x20Layout\x202\x20','_canvasHeight','isInside','getInt8','position','toString','resize','mouseleave','split','arraybuffer','_mossTexture','_resolutions','_bindGroup2','rotateX','_mud','_grassTexture','toggleVisibility','createGeometry','STORAGE','getCurrentTexture','createDir','Ray\x20Tracing\x20Pipeline\x20','char','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','_canvasFormat','_dirt','_height','/assets/Moss.png','_computePipeline','createPlaneFromPoints','Camera\x20','createBindGroup','src','_canvasWidth','abs','TEXTURE_BINDING','_volume','_wgWidth','applyMotorToDir','_pipeline','extractRotor','COPY_DST','gpu','_textCanvas','_textContext','4688yIgmnP','_tracer'];_0x1b79=function(){return _0x26e698;};return _0x1b79();}class RayTracer extends Renderer{constructor(_0x45a812){super(_0x45a812),this['_tracer']=null;}async['init'](){const _0x57ff93=_0x476a85;if(!navigator[_0x57ff93(0x257)])throw Error(_0x57ff93(0x244));const _0x28519d=await navigator['gpu'][_0x57ff93(0x1ca)]();if(!_0x28519d)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x57ff93(0x2b7)]=await _0x28519d[_0x57ff93(0x26f)](),this[_0x57ff93(0x1ff)]=this[_0x57ff93(0x1c1)][_0x57ff93(0x289)](_0x57ff93(0x220)),this['_canvasFormat']=_0x57ff93(0x1a8),this[_0x57ff93(0x1ff)][_0x57ff93(0x1b7)]({'device':this['_device'],'format':this[_0x57ff93(0x245)]}),this[_0x57ff93(0x1c8)]=this[_0x57ff93(0x2b7)][_0x57ff93(0x18e)]({'label':_0x57ff93(0x1cb),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this[_0x57ff93(0x1c9)]=this[_0x57ff93(0x2b7)][_0x57ff93(0x2bb)]({'label':_0x57ff93(0x25f),'size':0x8,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x57ff93(0x256)]}),this[_0x57ff93(0x254)]=this['_device'][_0x57ff93(0x277)]({'label':'Ray\x20Tracer\x20Pipeline','layout':'auto','vertex':{'module':this[_0x57ff93(0x1c8)],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x57ff93(0x1c8)],'entryPoint':_0x57ff93(0x28a),'targets':[{'format':this[_0x57ff93(0x245)]}]}}),this[_0x57ff93(0x281)]=this[_0x57ff93(0x2b7)]['createSampler']({'label':'Ray\x20Tracer\x20Sampler','magFilter':_0x57ff93(0x1f1),'minFilter':_0x57ff93(0x1f1)}),this[_0x57ff93(0x193)](),window[_0x57ff93(0x1dc)](_0x57ff93(0x232),this[_0x57ff93(0x193)]['bind'](this));}['resizeCanvas'](){const _0x437d33=_0x476a85,_0x224b1f=window[_0x437d33(0x221)]||0x1,_0xeede01=window[_0x437d33(0x1b4)]*_0x224b1f,_0x4b2a09=window['innerHeight']*_0x224b1f,_0x5c6364=_0xeede01/_0x4b2a09,_0x35c1d7=_0x4b2a09;let _0x2665e6={'width':_0x35c1d7*_0x5c6364,'height':_0x35c1d7};this['_offScreenTexture']=this[_0x437d33(0x2b7)]['createTexture']({'size':_0x2665e6,'format':this['_canvasFormat'],'usage':GPUTextureUsage[_0x437d33(0x250)]|GPUTextureUsage[_0x437d33(0x20f)]}),this[_0x437d33(0x25b)]&&(this[_0x437d33(0x25b)][_0x437d33(0x2b9)]=this['_offScreenTexture']['width'],this['_tracer'][_0x437d33(0x26a)]=this[_0x437d33(0x1da)]['height'],this[_0x437d33(0x25b)][_0x437d33(0x2ae)](),this[_0x437d33(0x25b)][_0x437d33(0x24c)](this[_0x437d33(0x1da)])),this[_0x437d33(0x1b0)]=this[_0x437d33(0x2b7)][_0x437d33(0x24c)]({'label':_0x437d33(0x1bc),'layout':this[_0x437d33(0x254)][_0x437d33(0x219)](0x0),'entries':[{'binding':0x0,'resource':this[_0x437d33(0x1da)]['createView']()},{'binding':0x1,'resource':this[_0x437d33(0x281)]},{'binding':0x2,'resource':{'buffer':this[_0x437d33(0x1c9)]}}]}),super[_0x437d33(0x193)](),this[_0x437d33(0x2b7)]['queue'][_0x437d33(0x288)](this[_0x437d33(0x1c9)],0x0,new Float32Array([_0xeede01,_0x4b2a09]));}async[_0x476a85(0x1ee)](_0x57861e){const _0x370775=_0x476a85;await _0x57861e['init'](),_0x57861e[_0x370775(0x2b9)]=this[_0x370775(0x1da)][_0x370775(0x226)],_0x57861e[_0x370775(0x26a)]=this['_offScreenTexture'][_0x370775(0x2c0)],_0x57861e[_0x370775(0x2ae)](),this['_tracer']=_0x57861e,this[_0x370775(0x25b)][_0x370775(0x24c)](this[_0x370775(0x1da)]);}[_0x476a85(0x1e3)](){const _0x311bb6=_0x476a85;if(this[_0x311bb6(0x25b)]){let _0x456b5e=this['_device'][_0x311bb6(0x1e1)]();const _0x35e0ac=_0x456b5e['beginComputePass']();this['_tracer']['compute'](_0x35e0ac),_0x35e0ac['end'](),this['_device']['queue'][_0x311bb6(0x1d6)]([_0x456b5e[_0x311bb6(0x29f)]()]);}let _0x219f31=this[_0x311bb6(0x2b7)][_0x311bb6(0x1e1)]();const _0x5bba3a=_0x219f31[_0x311bb6(0x1f0)]({'colorAttachments':[{'view':this[_0x311bb6(0x1ff)]['getCurrentTexture']()['createView'](),'clearValue':this['_clearColor'],'loadOp':_0x311bb6(0x298),'storeOp':_0x311bb6(0x1ba)}]});_0x5bba3a['setPipeline'](this[_0x311bb6(0x254)]),_0x5bba3a['setBindGroup'](0x0,this[_0x311bb6(0x1b0)]),_0x5bba3a[_0x311bb6(0x1d7)](0x6),_0x5bba3a[_0x311bb6(0x1df)](),this['_device'][_0x311bb6(0x2a1)]['submit']([_0x219f31[_0x311bb6(0x29f)]()]);}}class StandardTextObject{constructor(_0x2efab4,_0x54956f=0x5,_0x57739d=_0x476a85(0x291)){const _0xba61c7=_0x476a85;this[_0xba61c7(0x1de)]=_0x57739d,this[_0xba61c7(0x1a3)]=_0x54956f,this['_textCanvas']=document['createElement'](_0xba61c7(0x1b9)),this[_0xba61c7(0x259)]=this[_0xba61c7(0x258)][_0xba61c7(0x289)]('2d'),this[_0xba61c7(0x1ef)](_0x2efab4),this[_0xba61c7(0x209)](_0x2efab4),this[_0xba61c7(0x258)][_0xba61c7(0x2a7)][_0xba61c7(0x230)]=_0xba61c7(0x25d),this[_0xba61c7(0x258)][_0xba61c7(0x2a7)]['top']=_0xba61c7(0x1e2),this[_0xba61c7(0x258)][_0xba61c7(0x2a7)]['left']=_0xba61c7(0x1e2),this['_textCanvas']['style'][_0xba61c7(0x1a0)]=_0xba61c7(0x299),document[_0xba61c7(0x260)][_0xba61c7(0x1f2)](this[_0xba61c7(0x258)]);}['toggleVisibility'](){const _0x1d1387=_0x476a85;this[_0x1d1387(0x258)][_0x1d1387(0x1b8)]=!this['_textCanvas'][_0x1d1387(0x1b8)];}[_0x476a85(0x1ef)](_0x281e78){const _0x3bb2c0=_0x476a85;this[_0x3bb2c0(0x259)]['font']=this[_0x3bb2c0(0x1de)],this[_0x3bb2c0(0x272)]=_0x281e78[_0x3bb2c0(0x234)]('\x0a'),this[_0x3bb2c0(0x1fc)]=Math[_0x3bb2c0(0x1ab)](...this['_lines'][_0x3bb2c0(0x293)](_0x2f29aa=>this[_0x3bb2c0(0x259)]['measureText'](_0x2f29aa)[_0x3bb2c0(0x226)]));const _0xae948d=this['_textFont'][_0x3bb2c0(0x225)](/(\d+)px/);_0xae948d?this[_0x3bb2c0(0x2cb)]=parseInt(_0xae948d[0x1],0xa):(this[_0x3bb2c0(0x2cb)]=0x12,this[_0x3bb2c0(0x1de)]=_0x3bb2c0(0x291)),this[_0x3bb2c0(0x247)]=this['_lines'][_0x3bb2c0(0x262)]*(this[_0x3bb2c0(0x2cb)]+this[_0x3bb2c0(0x1a3)]),this[_0x3bb2c0(0x27a)]=0x5,this[_0x3bb2c0(0x1d1)]=0x3,this['_canvasWidth']=Math[_0x3bb2c0(0x189)](this[_0x3bb2c0(0x1fc)]+this[_0x3bb2c0(0x27a)]*0x2),this[_0x3bb2c0(0x22d)]=Math[_0x3bb2c0(0x189)](this[_0x3bb2c0(0x247)]+this['_paddingtop']),this[_0x3bb2c0(0x258)][_0x3bb2c0(0x226)]=this['_canvasWidth'],this[_0x3bb2c0(0x258)][_0x3bb2c0(0x2c0)]=this['_canvasHeight'],this[_0x3bb2c0(0x259)]['font']=this['_textFont'],this[_0x3bb2c0(0x259)][_0x3bb2c0(0x21e)]='top';}['updateText'](_0x6a40c1){const _0x3fa8e0=_0x476a85;this[_0x3fa8e0(0x272)]=_0x6a40c1[_0x3fa8e0(0x234)]('\x0a'),this[_0x3fa8e0(0x259)]['fillStyle']=_0x3fa8e0(0x1a9),this[_0x3fa8e0(0x259)][_0x3fa8e0(0x2c7)](0x0,0x0,this[_0x3fa8e0(0x24e)],this[_0x3fa8e0(0x22d)]),this['_textContext'][_0x3fa8e0(0x1ec)](0x0,0x0,this[_0x3fa8e0(0x24e)],this[_0x3fa8e0(0x22d)]),this[_0x3fa8e0(0x259)]['fillStyle']=_0x3fa8e0(0x27f),this['_lines'][_0x3fa8e0(0x20c)]((_0x3858f1,_0x3563ce)=>{const _0x4cc5a3=_0x3fa8e0,_0x1030da=this['_paddingx'],_0x5788ab=this[_0x4cc5a3(0x1d1)]+_0x3563ce*(this[_0x4cc5a3(0x2cb)]+this[_0x4cc5a3(0x1a3)]);this[_0x4cc5a3(0x259)][_0x4cc5a3(0x2c4)](_0x3858f1,_0x1030da,_0x5788ab);});}}class SceneObject{static [_0x476a85(0x1d0)]=0x0;constructor(_0x70c5ee,_0x42c626){const _0x37e2a9=_0x476a85;if(this[_0x37e2a9(0x1fa)]==SceneObject)throw new Error(_0x37e2a9(0x2a2));this[_0x37e2a9(0x2b7)]=_0x70c5ee,this['_canvasFormat']=_0x42c626,SceneObject['_objectCnt']+=0x1;}[_0x476a85(0x18a)](){const _0x1c6a89=_0x476a85;return this[_0x1c6a89(0x1fa)][_0x1c6a89(0x1c5)]+'\x20'+SceneObject[_0x1c6a89(0x1d0)][_0x1c6a89(0x231)]();}async['init'](){const _0x158b7b=_0x476a85;await this[_0x158b7b(0x23d)](),await this[_0x158b7b(0x206)](),await this['createRenderPipeline'](),await this['createComputePipeline']();}async[_0x476a85(0x23d)](){const _0xd2b9d3=_0x476a85;throw new Error(_0xd2b9d3(0x1b6));}[_0x476a85(0x2ae)](){}[_0x476a85(0x223)](_0x157413){return new Promise((_0x5787f5,_0x13f1e5)=>{const _0x192bdd=_0x400a,_0x3a2434=new XMLHttpRequest();_0x3a2434['open'](_0x192bdd(0x18d),_0x157413),_0x3a2434[_0x192bdd(0x1e4)](_0x192bdd(0x1af),_0x192bdd(0x224)),_0x3a2434[_0x192bdd(0x1e6)]=function(){const _0x28231b=_0x192bdd;_0x3a2434['readyState']===XMLHttpRequest[_0x28231b(0x1b1)]&&_0x3a2434['status']===0xc8?_0x5787f5(_0x3a2434['responseText']):_0x13f1e5({'status':_0x3a2434[_0x28231b(0x1bf)],'statusText':_0x3a2434[_0x28231b(0x203)]});},_0x3a2434[_0x192bdd(0x1d8)]=function(){const _0xa24fd1=_0x192bdd;_0x13f1e5({'status':_0x3a2434[_0xa24fd1(0x1bf)],'statusText':_0x3a2434['statusText']});},_0x3a2434[_0x192bdd(0x19f)]();});}async[_0x476a85(0x206)](){const _0xb7aa88=_0x476a85;throw new Error(_0xb7aa88(0x243));}async[_0x476a85(0x277)](){const _0xeeef3b=_0x476a85;throw new Error(_0xeeef3b(0x1d3));}[_0x476a85(0x1e3)](_0x4fba0a){const _0x4925c6=_0x476a85;throw new Error(_0x4925c6(0x292));}async[_0x476a85(0x28d)](){const _0x179297=_0x476a85;throw new Error(_0x179297(0x1c6));}[_0x476a85(0x196)](_0x1c86a9){const _0x5b3a3c=_0x476a85;throw new Error(_0x5b3a3c(0x1be));}}class RayTracingObject extends SceneObject{async[_0x476a85(0x23d)](){}async[_0x476a85(0x206)](){const _0x25eccd=_0x476a85;let _0x54e81c=await this[_0x25eccd(0x223)]('/shaders/optimized_tracenothing.wgsl');this[_0x25eccd(0x1c8)]=this[_0x25eccd(0x2b7)]['createShaderModule']({'label':_0x25eccd(0x1b2)+this[_0x25eccd(0x18a)](),'code':_0x54e81c});}[_0x476a85(0x2ae)](){}async[_0x476a85(0x277)](){}[_0x476a85(0x1e3)](_0x21917c){}async[_0x476a85(0x28d)](){const _0x8df51b=_0x476a85;this[_0x8df51b(0x249)]=this[_0x8df51b(0x2b7)][_0x8df51b(0x28d)]({'label':_0x8df51b(0x241)+this[_0x8df51b(0x18a)](),'layout':_0x8df51b(0x278),'compute':{'module':this[_0x8df51b(0x1c8)],'entryPoint':_0x8df51b(0x2ca)}});}[_0x476a85(0x24c)](_0x10610e){const _0x55d5e8=_0x476a85;this[_0x55d5e8(0x1b0)]=this[_0x55d5e8(0x2b7)][_0x55d5e8(0x24c)]({'label':_0x55d5e8(0x198),'layout':this[_0x55d5e8(0x249)][_0x55d5e8(0x219)](0x0),'entries':[{'binding':0x0,'resource':_0x10610e[_0x55d5e8(0x1ed)]()}]}),this[_0x55d5e8(0x252)]=Math[_0x55d5e8(0x189)](_0x10610e[_0x55d5e8(0x226)]),this[_0x55d5e8(0x275)]=Math[_0x55d5e8(0x189)](_0x10610e[_0x55d5e8(0x2c0)]);}[_0x476a85(0x196)](_0x588bb7){const _0x2238fc=_0x476a85;_0x588bb7[_0x2238fc(0x2a3)](this[_0x2238fc(0x249)]),_0x588bb7[_0x2238fc(0x1d5)](0x0,this[_0x2238fc(0x1b0)]),_0x588bb7[_0x2238fc(0x2a0)](Math[_0x2238fc(0x189)](this['_wgWidth']/0x10),Math[_0x2238fc(0x189)](this[_0x2238fc(0x275)]/0x10));}}class VolumeByteIO{constructor(){}static[_0x476a85(0x212)](_0x310013){return new Promise((_0x5f410e,_0x314b3b)=>{const _0x5e3e36=_0x400a,_0x2cd662=new XMLHttpRequest();_0x2cd662[_0x5e3e36(0x283)](_0x5e3e36(0x18d),_0x310013),_0x2cd662[_0x5e3e36(0x1e4)](_0x5e3e36(0x1af),_0x5e3e36(0x224)),_0x2cd662['responseType']=_0x5e3e36(0x235),_0x2cd662['onload']=function(){const _0x16a5c9=_0x5e3e36;_0x2cd662[_0x16a5c9(0x200)]===XMLHttpRequest[_0x16a5c9(0x1b1)]&&_0x2cd662[_0x16a5c9(0x1bf)]===0xc8?_0x5f410e(_0x2cd662[_0x16a5c9(0x1f6)]):_0x314b3b(new Error(_0x16a5c9(0x297)+_0x2cd662[_0x16a5c9(0x1bf)]));},_0x2cd662[_0x5e3e36(0x1d8)]=function(){const _0xbc9485=_0x5e3e36;_0x314b3b(new Error(_0xbc9485(0x285)));},_0x2cd662['send']();});}static[_0x476a85(0x1e8)](_0x4c2d71,_0x2f349a,_0x218ad6,_0x5bc15d){const _0x2d987b=_0x476a85;switch(_0x5bc15d){case _0x2d987b(0x242):return[_0x4c2d71[_0x2d987b(0x22f)](_0x2f349a,0x1)];break;case _0x2d987b(0x2bc):return[_0x4c2d71[_0x2d987b(0x1db)](_0x2f349a,0x1)];break;case _0x2d987b(0x1ea):return[_0x4c2d71['getInt16'](_0x2f349a,_0x218ad6),0x2];break;case _0x2d987b(0x1fd):return[_0x4c2d71['getUint16'](_0x2f349a,_0x218ad6),0x2];break;case _0x2d987b(0x28b):return[_0x4c2d71[_0x2d987b(0x295)](_0x2f349a,_0x218ad6),0x4];break;case _0x2d987b(0x2ad):return[_0x4c2d71['getUint32'](_0x2f349a,_0x218ad6),0x4];break;case _0x2d987b(0x1ce):return[_0x4c2d71['getFloat32'](_0x2f349a,_0x218ad6),0x4];break;case'double':return[_0x4c2d71[_0x2d987b(0x186)](_0x2f349a,_0x218ad6),0x8];break;}}static async[_0x476a85(0x2aa)](_0x4ff735){const _0x161ed3=_0x476a85;let _0xd541b5=await VolumeByteIO[_0x161ed3(0x212)](_0x4ff735),_0x2d8992=new TextDecoder()[_0x161ed3(0x202)](_0xd541b5);const _0x4b854e=[0xb5,0xd9,0xb5],_0x5b3ab=[0x1,0x1,0x1],_0x1bdc71=[];let _0x4344d4=0x0,_0x21e740=new DataView(_0xd541b5);for(let _0x34fe83=0x0;_0x34fe83<_0x4b854e[_0x161ed3(0x2c9)]((_0x419193,_0x232453)=>_0x419193*_0x232453,0x1);++_0x34fe83){const [_0x5ab4b2,_0x2e4a3f]=VolumeByteIO['readBytes'](_0x21e740,_0x4344d4,!![],'short');_0x1bdc71[_0x161ed3(0x188)](_0x5ab4b2),_0x4344d4+=_0x2e4a3f;}return[_0x4b854e,_0x5b3ab,_0x1bdc71];}static[_0x476a85(0x287)](){const _0x451fb2=_0x476a85,_0x581512=new ArrayBuffer(0x2),_0x1e13f9=new DataView(_0x581512);return _0x1e13f9[_0x451fb2(0x2a9)](0x0,0x100,!![]),_0x1e13f9[_0x451fb2(0x22f)](0x0)===0x0;}static async[_0x476a85(0x1fb)](_0x1ec04f,_0x8c282a){const _0x403f8f=_0x476a85,_0x46f7f5=new Uint8Array(_0x1ec04f[_0x403f8f(0x2b0)][_0x403f8f(0x262)]*0x2);_0x1ec04f[_0x403f8f(0x2b0)][_0x403f8f(0x20c)]((_0x3072f2,_0x1c8f56)=>{const _0xb6dafc=_0x403f8f,_0x36bf51=new Uint16Array([_0x3072f2]);_0x46f7f5['set'](new Uint8Array(_0x36bf51[_0xb6dafc(0x19c)]),_0x1c8f56*0x2);});const _0x911614=new Blob([_0x46f7f5],{'type':'application/octet-stream'}),_0x101c80=document[_0x403f8f(0x19d)]('a');_0x101c80[_0x403f8f(0x1c4)]=URL['createObjectURL'](_0x911614),_0x101c80[_0x403f8f(0x21f)]=_0x403f8f(0x187),_0x101c80['click'](),URL['revokeObjectURL'](_0x101c80['href']);}}class PerlinNoise{constructor(){const _0x17d446=_0x476a85;this[_0x17d446(0x1d9)]();}['gradientPermutation'](){const _0x219fe8=_0x476a85;this[_0x219fe8(0x205)]=Array[_0x219fe8(0x197)]({'length':0x100},(_0x558b51,_0x324cc7)=>_0x324cc7);for(let _0x67027a=this[_0x219fe8(0x205)][_0x219fe8(0x262)]-0x1;_0x67027a>0x0;--_0x67027a){const _0x7f9a09=Math[_0x219fe8(0x2b8)](Math['random']()*(_0x67027a+0x1));[this[_0x219fe8(0x205)][_0x67027a],this[_0x219fe8(0x205)][_0x7f9a09]]=[this[_0x219fe8(0x205)][_0x7f9a09],this[_0x219fe8(0x205)][_0x67027a]];}}[_0x476a85(0x1cf)](_0x6bd0ca,_0x47c595,_0x4842ed=0x0,_0x293be5=0x0){switch(_0x6bd0ca&0xf){case 0x0:case 0xc:return _0x47c595+_0x4842ed;case 0x1:case 0xd:return-_0x47c595+_0x4842ed;case 0x2:case 0xe:return _0x47c595-_0x4842ed;case 0x3:case 0xf:return-_0x47c595-_0x4842ed;case 0x4:return _0x47c595+_0x293be5;case 0x5:return-_0x47c595+_0x293be5;case 0x6:return _0x47c595-_0x293be5;case 0x7:return-_0x47c595-_0x293be5;case 0x8:return _0x4842ed+_0x293be5;case 0x9:return-_0x4842ed+_0x293be5;case 0xa:return _0x4842ed-_0x293be5;case 0xb:return-_0x4842ed-_0x293be5;}}[_0x476a85(0x1f8)](_0x5790ae){const _0x398107=_0x476a85,_0x4aa221=_0x4cc731=>{return _0x4cc731*_0x4cc731*_0x4cc731*(_0x4cc731*(_0x4cc731*0x6-0xf)+0xa);},_0x1352d9=(_0x369a71,_0x38f153,_0x17d6c2)=>{return _0x369a71*_0x17d6c2+_0x38f153*(0x1-_0x17d6c2);},_0x679f7c=Math[_0x398107(0x2b8)](_0x5790ae)&0xff,_0x53106d=_0x679f7c+0x1&0xff;_0x5790ae-=Math[_0x398107(0x2b8)](_0x5790ae);let _0x1a4327=_0x4aa221(_0x5790ae),_0x3b6489=this[_0x398107(0x205)][_0x679f7c],_0x153827=this[_0x398107(0x205)][_0x53106d],_0x5b6bed=this['gradient'](_0x3b6489,_0x5790ae),_0x2312ad=this['gradient'](_0x153827,_0x5790ae-0x1);return _0x1352d9(_0x5b6bed,_0x2312ad,_0x1a4327);}[_0x476a85(0x2b4)](_0x5e2ebf,_0x577529){const _0x2e6c96=_0x476a85,_0x1feef8=_0x41d257=>{return _0x41d257*_0x41d257*_0x41d257*(_0x41d257*(_0x41d257*0x6-0xf)+0xa);},_0x327c5a=(_0x3b3dba,_0x4a1752,_0x43df2b)=>{return _0x3b3dba*_0x43df2b+_0x4a1752*(0x1-_0x43df2b);},_0x33044d=Math[_0x2e6c96(0x2b8)](_0x5e2ebf)&0xff,_0x1a8d97=_0x33044d+0x1&0xff,_0x4952be=Math[_0x2e6c96(0x2b8)](_0x577529)&0xff,_0x4a773a=_0x4952be+0x1&0xff;_0x5e2ebf-=Math[_0x2e6c96(0x2b8)](_0x5e2ebf),_0x577529-=Math[_0x2e6c96(0x2b8)](_0x577529);let _0x31462e=_0x1feef8(_0x5e2ebf),_0x315819=_0x1feef8(_0x577529),_0x3fa129=this['_permutation'][this['_permutation'][_0x33044d]+_0x4952be&0xff],_0xc2581d=this[_0x2e6c96(0x205)][this['_permutation'][_0x33044d]+_0x4a773a&0xff],_0x133525=this[_0x2e6c96(0x205)][this[_0x2e6c96(0x205)][_0x1a8d97]+_0x4952be&0xff],_0x33ba6f=this[_0x2e6c96(0x205)][this['_permutation'][_0x1a8d97]+_0x4a773a&0xff],_0x1cbcc1=this[_0x2e6c96(0x1cf)](_0x3fa129,_0x5e2ebf,_0x577529),_0x32003b=this[_0x2e6c96(0x1cf)](_0xc2581d,_0x5e2ebf,_0x577529-0x1),_0x1e102e=this[_0x2e6c96(0x1cf)](_0x133525,_0x5e2ebf-0x1,_0x577529),_0x381ee6=this[_0x2e6c96(0x1cf)](_0x33ba6f,_0x5e2ebf-0x1,_0x577529-0x1),_0x5b2820=_0x327c5a(_0x1cbcc1,_0x1e102e,_0x31462e),_0x3aa62f=_0x327c5a(_0x32003b,_0x381ee6,_0x31462e);return _0x327c5a(_0x5b2820,_0x3aa62f,_0x315819);}[_0x476a85(0x2c8)](_0x23e4f7,_0x1996a4,_0x33717e){const _0x3d0b08=_0x476a85,_0x595705=_0x148165=>{return _0x148165*_0x148165*_0x148165*(_0x148165*(_0x148165*0x6-0xf)+0xa);},_0x4ee213=(_0x2fa96f,_0x5a6c3e,_0x85acf0)=>{return _0x2fa96f*_0x85acf0+_0x5a6c3e*(0x1-_0x85acf0);},_0xdf15b5=Math[_0x3d0b08(0x2b8)](_0x23e4f7)&0xff,_0x47258e=_0xdf15b5+0x1&0xff,_0x4160bf=Math[_0x3d0b08(0x2b8)](_0x1996a4)&0xff,_0x3d4e3c=_0x4160bf+0x1&0xff,_0x19eba7=Math[_0x3d0b08(0x2b8)](_0x33717e)&0xff,_0xb9d0c8=_0x19eba7+0x1&0xff;_0x23e4f7-=Math['floor'](_0x23e4f7),_0x1996a4-=Math[_0x3d0b08(0x2b8)](_0x1996a4),_0x33717e-=Math[_0x3d0b08(0x2b8)](_0x33717e);let _0x5c450f=_0x595705(_0x23e4f7),_0x41fa7b=_0x595705(_0x1996a4),_0x27bf91=_0x595705(_0x33717e),_0x45e3fe=this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][_0xdf15b5]+_0x4160bf&0xff]+_0x19eba7&0xff],_0x2c94dd=this['_permutation'][this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][_0xdf15b5]+_0x3d4e3c&0xff]+_0x19eba7&0xff],_0x40cff4=this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][_0xdf15b5]+_0x4160bf&0xff]+_0xb9d0c8&0xff],_0x51c747=this[_0x3d0b08(0x205)][this['_permutation'][this['_permutation'][_0xdf15b5]+_0x3d4e3c&0xff]+_0xb9d0c8&0xff],_0x5cd1d4=this['_permutation'][this['_permutation'][this[_0x3d0b08(0x205)][_0x47258e]+_0x4160bf&0xff]+_0x19eba7&0xff],_0x20c5b6=this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][_0x47258e]+_0x3d4e3c&0xff]+_0x19eba7&0xff],_0x5afb6e=this[_0x3d0b08(0x205)][this[_0x3d0b08(0x205)][this['_permutation'][_0x47258e]+_0x4160bf&0xff]+_0xb9d0c8&0xff],_0x4bcd6b=this[_0x3d0b08(0x205)][this['_permutation'][this[_0x3d0b08(0x205)][_0x47258e]+_0x3d4e3c&0xff]+_0xb9d0c8&0xff],_0x2c56e5=this['gradient'](_0x45e3fe,_0x23e4f7,_0x1996a4,_0x33717e),_0xbfe51b=this[_0x3d0b08(0x1cf)](_0x2c94dd,_0x23e4f7,_0x1996a4-0x1,_0x33717e),_0x4a96ae=this[_0x3d0b08(0x1cf)](_0x40cff4,_0x23e4f7,_0x1996a4,_0x33717e-0x1),_0x49450b=this[_0x3d0b08(0x1cf)](_0x51c747,_0x23e4f7,_0x1996a4-0x1,_0x33717e-0x1),_0x1db1d4=this[_0x3d0b08(0x1cf)](_0x5cd1d4,_0x23e4f7-0x1,_0x1996a4,_0x33717e),_0x58aa8c=this[_0x3d0b08(0x1cf)](_0x20c5b6,_0x23e4f7-0x1,_0x1996a4-0x1,_0x33717e),_0x2fb76=this[_0x3d0b08(0x1cf)](_0x5afb6e,_0x23e4f7-0x1,_0x1996a4,_0x33717e-0x1),_0x149792=this[_0x3d0b08(0x1cf)](_0x4bcd6b,_0x23e4f7-0x1,_0x1996a4-0x1,_0x33717e-0x1),_0x5b6ce8=_0x4ee213(_0x2c56e5,_0x1db1d4,_0x5c450f),_0x148d48=_0x4ee213(_0xbfe51b,_0x58aa8c,_0x5c450f),_0xe8721a=_0x4ee213(_0x4a96ae,_0x2fb76,_0x5c450f),_0x537791=_0x4ee213(_0x49450b,_0x149792,_0x5c450f),_0x4b5c03=_0x4ee213(_0x5b6ce8,_0x148d48,_0x41fa7b),_0x20bc56=_0x4ee213(_0xe8721a,_0x537791,_0x41fa7b);return _0x4ee213(_0x4b5c03,_0x20bc56,_0x27bf91);}[_0x476a85(0x2ba)](_0x28b216,_0xe1f554,_0x1119b6=0.005,_0x2e5dc0=0x1,_0x573aa9=0.99,_0x1f1f82=0x4,_0x530a46=0x2){const _0x2b0d5a=_0x476a85;let _0x5b59e6=0x0,_0x2062a0=0x0;for(let _0x3d2464=0x0;_0x3d2464<_0x1f1f82;++_0x3d2464){let _0x2ee65c=Math[_0x2b0d5a(0x296)](_0x1119b6,-_0x573aa9*_0x3d2464);_0x2e5dc0*=_0x2ee65c,_0x5b59e6+=this[_0x2b0d5a(0x2b4)](_0x28b216*_0x1119b6,_0xe1f554*_0x1119b6)*_0x2e5dc0,_0x2062a0+=_0x2e5dc0,_0x1119b6*=_0x530a46;}return _0x5b59e6/_0x2062a0;}}class TerrainData{constructor(_0x42e1eb){const _0x3b7558=_0x476a85;this[_0x3b7558(0x2c3)]=_0x42e1eb,this[_0x3b7558(0x2c6)]=[0x40,0x40,0x40],this[_0x3b7558(0x213)]=[0x2,0x2,0x2];}async['init'](){const _0x5e61b2=_0x476a85;this[_0x5e61b2(0x20a)]=new PerlinNoise(),this[_0x5e61b2(0x27d)]=Array(this[_0x5e61b2(0x2c6)][0x0]*this['_dims'][0x1]*this['_dims'][0x2])[_0x5e61b2(0x271)](0x0);for(let _0x4ed34d=0x0;_0x4ed34d<this['_dims'][0x2];++_0x4ed34d){for(let _0x3a1857=0x0;_0x3a1857<this[_0x5e61b2(0x2c6)][0x0];++_0x3a1857){let _0x429e3c=(this[_0x5e61b2(0x20a)]['octaveNoise2d'](_0x3a1857,_0x4ed34d)+0x2)/0x4;if(_0x429e3c<0.4)for(let _0x5bdf78=0x0;_0x5bdf78<this[_0x5e61b2(0x2c6)][0x1];++_0x5bdf78){let _0x4c6a7e=0x1-_0x5bdf78/this[_0x5e61b2(0x2c6)][0x1];if(_0x4c6a7e<0.3)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x5bdf78*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.1*0xfff;else _0x4c6a7e<0.4&&(this['_data'][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x5bdf78*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.2*0xfff);}else{if(_0x429e3c<0.6)for(let _0x76cdab=0x0;_0x76cdab<this[_0x5e61b2(0x2c6)][0x1];++_0x76cdab){let _0xe5c3b8=0x1-_0x76cdab/this[_0x5e61b2(0x2c6)][0x1];if(_0xe5c3b8<0.3)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x76cdab*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.3*0xfff;else{if(_0xe5c3b8<0.4)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x76cdab*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.4*0xfff;else{if(_0xe5c3b8<0.5)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x76cdab*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.6*0xfff;else _0xe5c3b8<0.6&&(this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x76cdab*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.5*0xfff);}}}else{if(_0x429e3c<0.7)for(let _0x47454c=0x0;_0x47454c<this[_0x5e61b2(0x2c6)][0x1];++_0x47454c){let _0x225fed=0x1-_0x47454c/this[_0x5e61b2(0x2c6)][0x1];if(_0x225fed<0.3)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x47454c*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.3*0xfff;else{if(_0x225fed<0.4)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x47454c*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.4*0xfff;else{if(_0x225fed<0.5)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x47454c*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.6*0xfff;else{if(_0x225fed<0.6)this['_data'][_0x4ed34d*this['_dims'][0x0]*this['_dims'][0x1]+_0x47454c*this['_dims'][0x0]+_0x3a1857]=0.5*0xfff;else _0x225fed<_0x429e3c&&(this['_data'][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this['_dims'][0x1]+_0x47454c*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.7*0xfff);}}}}else for(let _0x19ee68=0x0;_0x19ee68<this[_0x5e61b2(0x2c6)][0x1];++_0x19ee68){let _0x45e665=0x1-_0x19ee68/this[_0x5e61b2(0x2c6)][0x1];if(_0x45e665<0.3)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x19ee68*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.3*0xfff;else{if(_0x45e665<0.4)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x19ee68*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.4*0xfff;else{if(_0x45e665<0.5)this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this[_0x5e61b2(0x2c6)][0x1]+_0x19ee68*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.6*0xfff;else _0x45e665<0.6&&(this[_0x5e61b2(0x27d)][_0x4ed34d*this[_0x5e61b2(0x2c6)][0x0]*this['_dims'][0x1]+_0x19ee68*this[_0x5e61b2(0x2c6)][0x0]+_0x3a1857]=0.5*0xfff);}}}}}}}}}class VolumeRenderingProceduralTerrainObject extends RayTracingObject{constructor(_0x203c32,_0x111498,_0x3c6068){const _0x39136f=_0x476a85;super(_0x203c32,_0x111498),this[_0x39136f(0x251)]=new TerrainData(),this[_0x39136f(0x2a8)]=_0x3c6068,this['_stone']=new Image(),this[_0x39136f(0x2a5)][_0x39136f(0x24d)]=_0x39136f(0x270),this[_0x39136f(0x2b1)]=new Image(),this[_0x39136f(0x2b1)][_0x39136f(0x24d)]=_0x39136f(0x2b2),this[_0x39136f(0x246)]=new Image(),this[_0x39136f(0x246)]['src']='/assets/Dirt.png',this[_0x39136f(0x20e)]=new Image(),this[_0x39136f(0x20e)][_0x39136f(0x24d)]=_0x39136f(0x248),this['_water']=new Image(),this[_0x39136f(0x190)]['src']=_0x39136f(0x1f4),this['_ocean']=new Image(),this[_0x39136f(0x267)][_0x39136f(0x24d)]=_0x39136f(0x199),this[_0x39136f(0x227)]=new Image(),this['_mountain'][_0x39136f(0x24d)]=_0x39136f(0x218),this['_mud']=new Image(),this[_0x39136f(0x23a)][_0x39136f(0x24d)]=_0x39136f(0x194);}async[_0x476a85(0x23d)](){const _0x7fd9e4=_0x476a85;this[_0x7fd9e4(0x18b)]=this[_0x7fd9e4(0x2b7)]['createBuffer']({'label':_0x7fd9e4(0x24b)+this[_0x7fd9e4(0x18a)](),'size':this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1f7)][_0x7fd9e4(0x1ac)]+this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1a6)]['byteLength']+this['_camera']['_resolutions'][_0x7fd9e4(0x1ac)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x7fd9e4(0x256)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x288)](this[_0x7fd9e4(0x18b)],0x0,this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1f7)]),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x288)](this[_0x7fd9e4(0x18b)],this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1f7)]['byteLength'],this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1a6)]),this[_0x7fd9e4(0x2b7)]['queue'][_0x7fd9e4(0x288)](this[_0x7fd9e4(0x18b)],this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x1f7)]['byteLength']+this['_camera'][_0x7fd9e4(0x1a6)]['byteLength'],this[_0x7fd9e4(0x2a8)][_0x7fd9e4(0x237)]),this[_0x7fd9e4(0x19e)]=this['_device'][_0x7fd9e4(0x2bb)]({'label':_0x7fd9e4(0x18c)+this['getName'](),'size':(this[_0x7fd9e4(0x251)][_0x7fd9e4(0x2c6)][_0x7fd9e4(0x262)]+this[_0x7fd9e4(0x251)][_0x7fd9e4(0x213)][_0x7fd9e4(0x262)]+0x2)*Float32Array[_0x7fd9e4(0x207)],'usage':GPUBufferUsage[_0x7fd9e4(0x294)]|GPUBufferUsage[_0x7fd9e4(0x256)]}),this['_device'][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x288)](this['_volumeBuffer'],0x0,new Float32Array([...this['_volume'][_0x7fd9e4(0x2c6)],0x0,...this[_0x7fd9e4(0x251)][_0x7fd9e4(0x213)],0x0])),this[_0x7fd9e4(0x25c)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2bb)]({'label':_0x7fd9e4(0x1e7)+this['getName'](),'size':this[_0x7fd9e4(0x251)][_0x7fd9e4(0x2c6)][0x0]*this[_0x7fd9e4(0x251)][_0x7fd9e4(0x2c6)][0x1]*this[_0x7fd9e4(0x251)]['_dims'][0x2]*Float32Array[_0x7fd9e4(0x207)],'usage':GPUBufferUsage[_0x7fd9e4(0x23e)]|GPUBufferUsage[_0x7fd9e4(0x256)]}),await this[_0x7fd9e4(0x26e)](),await this[_0x7fd9e4(0x2a5)][_0x7fd9e4(0x202)](),this[_0x7fd9e4(0x1a2)]=await createImageBitmap(this[_0x7fd9e4(0x2a5)]),this['_stoneTexture']=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':_0x7fd9e4(0x1b3)+this['getName'](),'size':[this['_stoneBitmap']['width'],this[_0x7fd9e4(0x1a2)][_0x7fd9e4(0x2c0)],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this['_device'][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x268)]({'source':this[_0x7fd9e4(0x1a2)]},{'texture':this[_0x7fd9e4(0x19a)]},[this[_0x7fd9e4(0x1a2)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x1a2)][_0x7fd9e4(0x2c0)]]),await this['_dirt'][_0x7fd9e4(0x202)](),this[_0x7fd9e4(0x201)]=await createImageBitmap(this[_0x7fd9e4(0x246)]),this[_0x7fd9e4(0x276)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':'Texture\x20'+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x201)]['width'],this[_0x7fd9e4(0x201)][_0x7fd9e4(0x2c0)],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage[_0x7fd9e4(0x250)]|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)]['copyExternalImageToTexture']({'source':this[_0x7fd9e4(0x201)]},{'texture':this[_0x7fd9e4(0x276)]},[this[_0x7fd9e4(0x201)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x201)][_0x7fd9e4(0x2c0)]]),await this[_0x7fd9e4(0x2b1)][_0x7fd9e4(0x202)](),this[_0x7fd9e4(0x1ad)]=await createImageBitmap(this[_0x7fd9e4(0x2b1)]),this[_0x7fd9e4(0x23b)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':_0x7fd9e4(0x1b3)+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x1ad)]['width'],this[_0x7fd9e4(0x1ad)][_0x7fd9e4(0x2c0)],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x268)]({'source':this[_0x7fd9e4(0x1ad)]},{'texture':this['_grassTexture']},[this[_0x7fd9e4(0x1ad)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x1ad)][_0x7fd9e4(0x2c0)]]),await this[_0x7fd9e4(0x20e)][_0x7fd9e4(0x202)](),this['_mossBitmap']=await createImageBitmap(this['_moss']),this['_mossTexture']=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':_0x7fd9e4(0x1b3)+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x26c)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x26c)]['height'],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage[_0x7fd9e4(0x250)]|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)][_0x7fd9e4(0x268)]({'source':this[_0x7fd9e4(0x26c)]},{'texture':this[_0x7fd9e4(0x236)]},[this['_mossBitmap'][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x26c)][_0x7fd9e4(0x2c0)]]),await this['_water'][_0x7fd9e4(0x202)](),this[_0x7fd9e4(0x22b)]=await createImageBitmap(this[_0x7fd9e4(0x190)]),this[_0x7fd9e4(0x208)]=this['_device']['createTexture']({'label':_0x7fd9e4(0x1b3)+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x22b)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x22b)][_0x7fd9e4(0x2c0)],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage[_0x7fd9e4(0x250)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x7fd9e4(0x210)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)]['copyExternalImageToTexture']({'source':this[_0x7fd9e4(0x22b)]},{'texture':this[_0x7fd9e4(0x208)]},[this['_waterBitmap'][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x22b)][_0x7fd9e4(0x2c0)]]),await this['_ocean'][_0x7fd9e4(0x202)](),this[_0x7fd9e4(0x1aa)]=await createImageBitmap(this[_0x7fd9e4(0x267)]),this[_0x7fd9e4(0x2c5)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':_0x7fd9e4(0x1b3)+this[_0x7fd9e4(0x18a)](),'size':[this['_oceanBitmap'][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x1aa)][_0x7fd9e4(0x2c0)],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x2a1)]['copyExternalImageToTexture']({'source':this[_0x7fd9e4(0x1aa)]},{'texture':this['_oceanTexture']},[this[_0x7fd9e4(0x1aa)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x1aa)][_0x7fd9e4(0x2c0)]]),await this[_0x7fd9e4(0x227)]['decode'](),this['_mountainBitmap']=await createImageBitmap(this[_0x7fd9e4(0x227)]),this[_0x7fd9e4(0x1b5)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':_0x7fd9e4(0x1b3)+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x2b5)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x2b5)]['height'],0x1],'format':_0x7fd9e4(0x1a8),'usage':GPUTextureUsage[_0x7fd9e4(0x250)]|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage['RENDER_ATTACHMENT']}),this[_0x7fd9e4(0x2b7)]['queue'][_0x7fd9e4(0x268)]({'source':this[_0x7fd9e4(0x2b5)]},{'texture':this[_0x7fd9e4(0x1b5)]},[this['_mountainBitmap']['width'],this[_0x7fd9e4(0x2b5)]['height']]),await this[_0x7fd9e4(0x23a)][_0x7fd9e4(0x202)](),this['_mudBitmap']=await createImageBitmap(this[_0x7fd9e4(0x23a)]),this[_0x7fd9e4(0x29e)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1eb)]({'label':'Texture\x20'+this[_0x7fd9e4(0x18a)](),'size':[this[_0x7fd9e4(0x204)]['width'],this[_0x7fd9e4(0x204)][_0x7fd9e4(0x2c0)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage[_0x7fd9e4(0x250)]|GPUTextureUsage[_0x7fd9e4(0x256)]|GPUTextureUsage[_0x7fd9e4(0x210)]}),this['_device']['queue'][_0x7fd9e4(0x268)]({'source':this[_0x7fd9e4(0x204)]},{'texture':this[_0x7fd9e4(0x29e)]},[this[_0x7fd9e4(0x204)][_0x7fd9e4(0x226)],this[_0x7fd9e4(0x204)][_0x7fd9e4(0x2c0)]]),this[_0x7fd9e4(0x281)]=this[_0x7fd9e4(0x2b7)][_0x7fd9e4(0x1bb)]({'magFilter':'linear','minFilter':_0x7fd9e4(0x1f1)});}async[_0x476a85(0x26e)](){const _0x1f6eb7=_0x476a85;await this[_0x1f6eb7(0x251)][_0x1f6eb7(0x279)](),this[_0x1f6eb7(0x2b7)]['queue'][_0x1f6eb7(0x288)](this[_0x1f6eb7(0x25c)],0x0,new Float32Array(this[_0x1f6eb7(0x251)][_0x1f6eb7(0x27d)]));}[_0x476a85(0x2ae)](){const _0x583a92=_0x476a85;this[_0x583a92(0x2a8)][_0x583a92(0x2c2)](this['_imgWidth'],this[_0x583a92(0x26a)]),this[_0x583a92(0x2b7)][_0x583a92(0x2a1)][_0x583a92(0x288)](this[_0x583a92(0x18b)],this[_0x583a92(0x2a8)][_0x583a92(0x1f7)][_0x583a92(0x1ac)]+this[_0x583a92(0x2a8)]['_focal'][_0x583a92(0x1ac)],this[_0x583a92(0x2a8)]['_resolutions']);}['updateCameraPose'](){const _0x228009=_0x476a85;this[_0x228009(0x2b7)]['queue'][_0x228009(0x288)](this[_0x228009(0x18b)],0x0,this[_0x228009(0x2a8)][_0x228009(0x1f7)]);}[_0x476a85(0x29c)](){const _0x5064e7=_0x476a85;this[_0x5064e7(0x2b7)][_0x5064e7(0x2a1)][_0x5064e7(0x288)](this[_0x5064e7(0x18b)],this[_0x5064e7(0x2a8)]['_pose']['byteLength'],this['_camera'][_0x5064e7(0x1a6)]);}async['createShaders'](){const _0x59f913=_0x476a85;let _0x513b4e=await this[_0x59f913(0x223)]('/shaders/optimized_tracevolumeprocedural.wgsl');this[_0x59f913(0x1c8)]=this[_0x59f913(0x2b7)][_0x59f913(0x18e)]({'label':_0x59f913(0x1b2)+this[_0x59f913(0x18a)](),'code':_0x513b4e}),this[_0x59f913(0x195)]=this['_device'][_0x59f913(0x18f)]({'label':_0x59f913(0x1d2)+this[_0x59f913(0x18a)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'buffer':{'type':_0x59f913(0x2bd)}},{'binding':0x3,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'storageTexture':{'format':this['_canvasFormat']}}]}),this['_bindGroupLayout2']=this[_0x59f913(0x2b7)][_0x59f913(0x18f)]({'label':_0x59f913(0x22c)+this[_0x59f913(0x18a)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':'float'}},{'binding':0x1,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x3,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x4,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x5,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x6,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x7,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'texture':{'sampleType':_0x59f913(0x1ce)}},{'binding':0x8,'visibility':GPUShaderStage[_0x59f913(0x1a5)],'sampler':{}}]}),this[_0x59f913(0x1d4)]=this['_device'][_0x59f913(0x2bf)]({'label':'Ray\x20Trace\x20Volume\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x59f913(0x195)],this[_0x59f913(0x1dd)]]});}async[_0x476a85(0x28d)](){const _0x2d3400=_0x476a85;this[_0x2d3400(0x249)]=this[_0x2d3400(0x2b7)][_0x2d3400(0x28d)]({'label':_0x2d3400(0x1a1)+this[_0x2d3400(0x18a)](),'layout':this[_0x2d3400(0x1d4)],'compute':{'module':this[_0x2d3400(0x1c8)],'entryPoint':'computeOrthogonalMain'}}),this[_0x2d3400(0x1f3)]=this['_device'][_0x2d3400(0x28d)]({'label':_0x2d3400(0x286)+this['getName'](),'layout':this[_0x2d3400(0x1d4)],'compute':{'module':this[_0x2d3400(0x1c8)],'entryPoint':'computeProjectiveMain'}});}[_0x476a85(0x24c)](_0x48169a){const _0x30b984=_0x476a85;this[_0x30b984(0x261)]=this[_0x30b984(0x2b7)]['createBindGroup']({'label':_0x30b984(0x2b6),'layout':this[_0x30b984(0x249)][_0x30b984(0x219)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x30b984(0x18b)]}},{'binding':0x1,'resource':{'buffer':this[_0x30b984(0x19e)]}},{'binding':0x2,'resource':{'buffer':this['_dataBuffer']}},{'binding':0x3,'resource':_0x48169a['createView']()}]}),this['_bindGroup2']=this['_device'][_0x30b984(0x24c)]({'label':_0x30b984(0x280),'layout':this[_0x30b984(0x249)][_0x30b984(0x219)](0x1),'entries':[{'binding':0x0,'resource':this[_0x30b984(0x19a)][_0x30b984(0x1ed)]()},{'binding':0x1,'resource':this[_0x30b984(0x276)][_0x30b984(0x1ed)]()},{'binding':0x2,'resource':this[_0x30b984(0x23b)]['createView']()},{'binding':0x3,'resource':this[_0x30b984(0x236)]['createView']()},{'binding':0x4,'resource':this['_waterTexture']['createView']()},{'binding':0x5,'resource':this['_oceanTexture'][_0x30b984(0x1ed)]()},{'binding':0x6,'resource':this[_0x30b984(0x1b5)][_0x30b984(0x1ed)]()},{'binding':0x7,'resource':this['_mudTexture'][_0x30b984(0x1ed)]()},{'binding':0x8,'resource':this[_0x30b984(0x281)]}]}),this[_0x30b984(0x252)]=Math[_0x30b984(0x189)](_0x48169a[_0x30b984(0x226)]),this[_0x30b984(0x275)]=Math[_0x30b984(0x189)](_0x48169a['height']);}[_0x476a85(0x196)](_0x1652aa){const _0x192d70=_0x476a85;this[_0x192d70(0x2a8)]?.[_0x192d70(0x21c)]?_0x1652aa[_0x192d70(0x2a3)](this[_0x192d70(0x1f3)]):_0x1652aa[_0x192d70(0x2a3)](this[_0x192d70(0x249)]),_0x1652aa[_0x192d70(0x1d5)](0x0,this[_0x192d70(0x261)]),_0x1652aa[_0x192d70(0x1d5)](0x1,this[_0x192d70(0x238)]),_0x1652aa[_0x192d70(0x2a0)](Math[_0x192d70(0x189)](this['_wgWidth']/0x10),Math['ceil'](this[_0x192d70(0x275)]/0x10));}}function _0x400a(_0x2c2a73,_0x3c2002){const _0x1b7967=_0x1b79();return _0x400a=function(_0x400ad2,_0x3dcac4){_0x400ad2=_0x400ad2-0x186;let _0x2ca237=_0x1b7967[_0x400ad2];return _0x2ca237;},_0x400a(_0x2c2a73,_0x3c2002);}class PGA3D{static[_0x476a85(0x2ab)](_0x15a5ba,_0x26d381){return[_0x15a5ba[0x0]*_0x26d381[0x0]-_0x15a5ba[0x1]*_0x26d381[0x1]-_0x15a5ba[0x2]*_0x26d381[0x2]-_0x15a5ba[0x3]*_0x26d381[0x3]-_0x15a5ba[0x7]*_0x26d381[0x7]+_0x15a5ba[0xb]*_0x26d381[0xb]+_0x15a5ba[0xc]*_0x26d381[0xc]+_0x15a5ba[0xd]*_0x26d381[0xd],_0x15a5ba[0x0]*_0x26d381[0x1]+_0x15a5ba[0x1]*_0x26d381[0x0]-_0x15a5ba[0x2]*_0x26d381[0x3]+_0x15a5ba[0x3]*_0x26d381[0x2]+_0x15a5ba[0x7]*_0x26d381[0xd]+_0x15a5ba[0xb]*_0x26d381[0xc]-_0x15a5ba[0xc]*_0x26d381[0xb]+_0x15a5ba[0xd]*_0x26d381[0x7],_0x15a5ba[0x0]*_0x26d381[0x2]+_0x15a5ba[0x1]*_0x26d381[0x3]+_0x15a5ba[0x2]*_0x26d381[0x0]-_0x15a5ba[0x3]*_0x26d381[0x1]-_0x15a5ba[0x7]*_0x26d381[0xc]+_0x15a5ba[0xb]*_0x26d381[0xd]-_0x15a5ba[0xc]*_0x26d381[0x7]-_0x15a5ba[0xd]*_0x26d381[0xb],_0x15a5ba[0x0]*_0x26d381[0x3]-_0x15a5ba[0x1]*_0x26d381[0x2]+_0x15a5ba[0x2]*_0x26d381[0x1]+_0x15a5ba[0x3]*_0x26d381[0x0]+_0x15a5ba[0x7]*_0x26d381[0xb]+_0x15a5ba[0xb]*_0x26d381[0x7]+_0x15a5ba[0xc]*_0x26d381[0xd]-_0x15a5ba[0xd]*_0x26d381[0xc],_0x15a5ba[0x0]*_0x26d381[0x4]+_0x15a5ba[0x1]*_0x26d381[0x5]+_0x15a5ba[0x2]*_0x26d381[0x6]-_0x15a5ba[0x3]*_0x26d381[0xf]+_0x15a5ba[0x4]*_0x26d381[0x0]-_0x15a5ba[0x5]*_0x26d381[0x1]-_0x15a5ba[0x6]*_0x26d381[0x2]+_0x15a5ba[0x7]*_0x26d381[0xa]+_0x15a5ba[0x8]*_0x26d381[0xc]+_0x15a5ba[0x9]*_0x26d381[0xd]-_0x15a5ba[0xa]*_0x26d381[0x7]-_0x15a5ba[0xb]*_0x26d381[0xe]+_0x15a5ba[0xc]*_0x26d381[0x8]+_0x15a5ba[0xd]*_0x26d381[0x9]+_0x15a5ba[0xe]*_0x26d381[0xb]-_0x15a5ba[0xf]*_0x26d381[0x3],_0x15a5ba[0x0]*_0x26d381[0x5]-_0x15a5ba[0x1]*_0x26d381[0x4]+_0x15a5ba[0x2]*_0x26d381[0xf]+_0x15a5ba[0x3]*_0x26d381[0x6]+_0x15a5ba[0x4]*_0x26d381[0x1]+_0x15a5ba[0x5]*_0x26d381[0x0]-_0x15a5ba[0x6]*_0x26d381[0x3]-_0x15a5ba[0x7]*_0x26d381[0x9]-_0x15a5ba[0x8]*_0x26d381[0xb]+_0x15a5ba[0x9]*_0x26d381[0x7]+_0x15a5ba[0xa]*_0x26d381[0xc]-_0x15a5ba[0xb]*_0x26d381[0x8]-_0x15a5ba[0xc]*_0x26d381[0xe]+_0x15a5ba[0xd]*_0x26d381[0xa]+_0x15a5ba[0xe]*_0x26d381[0xc]+_0x15a5ba[0xf]*_0x26d381[0x2],_0x15a5ba[0x0]*_0x26d381[0x6]-_0x15a5ba[0x1]*_0x26d381[0xf]-_0x15a5ba[0x2]*_0x26d381[0x4]-_0x15a5ba[0x3]*_0x26d381[0x5]+_0x15a5ba[0x4]*_0x26d381[0x2]+_0x15a5ba[0x5]*_0x26d381[0x3]+_0x15a5ba[0x6]*_0x26d381[0x0]+_0x15a5ba[0x7]*_0x26d381[0x8]-_0x15a5ba[0x8]*_0x26d381[0x7]-_0x15a5ba[0x9]*_0x26d381[0xb]-_0x15a5ba[0xa]*_0x26d381[0xc]-_0x15a5ba[0xb]*_0x26d381[0x9]-_0x15a5ba[0xc]*_0x26d381[0xa]-_0x15a5ba[0xd]*_0x26d381[0xe]+_0x15a5ba[0xe]*_0x26d381[0xd]-_0x15a5ba[0xf]*_0x26d381[0x1],_0x15a5ba[0x0]*_0x26d381[0x7]+_0x15a5ba[0x1]*_0x26d381[0xd]-_0x15a5ba[0x2]*_0x26d381[0xc]+_0x15a5ba[0x3]*_0x26d381[0xb]+_0x15a5ba[0x7]*_0x26d381[0x0]+_0x15a5ba[0xb]*_0x26d381[0x3]-_0x15a5ba[0xc]*_0x26d381[0x2]+_0x15a5ba[0xd]*_0x26d381[0x1],_0x15a5ba[0x0]*_0x26d381[0x8]+_0x15a5ba[0x1]*_0x26d381[0xe]-_0x15a5ba[0x2]*_0x26d381[0xa]+_0x15a5ba[0x3]*_0x26d381[0x9]+_0x15a5ba[0x4]*_0x26d381[0xc]-_0x15a5ba[0x5]*_0x26d381[0xb]+_0x15a5ba[0x6]*_0x26d381[0x7]-_0x15a5ba[0x7]*_0x26d381[0x6]+_0x15a5ba[0x8]*_0x26d381[0x0]-_0x15a5ba[0x9]*_0x26d381[0x3]+_0x15a5ba[0xa]*_0x26d381[0x2]-_0x15a5ba[0xb]*_0x26d381[0x5]+_0x15a5ba[0xc]*_0x26d381[0x4]-_0x15a5ba[0xd]*_0x26d381[0xf]+_0x15a5ba[0xe]*_0x26d381[0x1]+_0x15a5ba[0xf]*_0x26d381[0xd],_0x15a5ba[0x0]*_0x26d381[0x9]+_0x15a5ba[0x1]*_0x26d381[0xa]+_0x15a5ba[0x2]*_0x26d381[0xe]-_0x15a5ba[0x3]*_0x26d381[0x8]+_0x15a5ba[0x4]*_0x26d381[0xd]-_0x15a5ba[0x5]*_0x26d381[0x7]-_0x15a5ba[0x6]*_0x26d381[0xb]+_0x15a5ba[0x7]*_0x26d381[0x5]+_0x15a5ba[0x8]*_0x26d381[0x3]+_0x15a5ba[0x9]*_0x26d381[0x0]-_0x15a5ba[0xa]*_0x26d381[0x1]-_0x15a5ba[0xb]*_0x26d381[0x6]+_0x15a5ba[0xc]*_0x26d381[0xf]+_0x15a5ba[0xd]*_0x26d381[0x4]+_0x15a5ba[0xe]*_0x26d381[0x2]-_0x15a5ba[0xf]*_0x26d381[0xc],_0x15a5ba[0x0]*_0x26d381[0xa]-_0x15a5ba[0x1]*_0x26d381[0x9]+_0x15a5ba[0x2]*_0x26d381[0x8]+_0x15a5ba[0x3]*_0x26d381[0xe]+_0x15a5ba[0x4]*_0x26d381[0x7]+_0x15a5ba[0x5]*_0x26d381[0xd]-_0x15a5ba[0x6]*_0x26d381[0xc]-_0x15a5ba[0x7]*_0x26d381[0x4]-_0x15a5ba[0x8]*_0x26d381[0x2]+_0x15a5ba[0x9]*_0x26d381[0x1]+_0x15a5ba[0xa]*_0x26d381[0x0]-_0x15a5ba[0xb]*_0x26d381[0xf]-_0x15a5ba[0xc]*_0x26d381[0x6]+_0x15a5ba[0xd]*_0x26d381[0x5]+_0x15a5ba[0xe]*_0x26d381[0x3]+_0x15a5ba[0xf]*_0x26d381[0xb],_0x15a5ba[0x0]*_0x26d381[0xb]+_0x15a5ba[0x1]*_0x26d381[0xc]+_0x15a5ba[0x2]*_0x26d381[0xd]-_0x15a5ba[0x3]*_0x26d381[0x7]-_0x15a5ba[0x7]*_0x26d381[0x3]+_0x15a5ba[0xb]*_0x26d381[0x0]-_0x15a5ba[0xc]*_0x26d381[0x1]-_0x15a5ba[0xd]*_0x26d381[0x2],_0x15a5ba[0x0]*_0x26d381[0xc]-_0x15a5ba[0x1]*_0x26d381[0xb]+_0x15a5ba[0x2]*_0x26d381[0x7]+_0x15a5ba[0x3]*_0x26d381[0xd]+_0x15a5ba[0x7]*_0x26d381[0x2]+_0x15a5ba[0xb]*_0x26d381[0x1]+_0x15a5ba[0xc]*_0x26d381[0x0]-_0x15a5ba[0xd]*_0x26d381[0x3],_0x15a5ba[0x0]*_0x26d381[0xd]-_0x15a5ba[0x1]*_0x26d381[0x7]-_0x15a5ba[0x2]*_0x26d381[0xb]-_0x15a5ba[0x3]*_0x26d381[0xc]-_0x15a5ba[0x7]*_0x26d381[0x1]+_0x15a5ba[0xb]*_0x26d381[0x2]+_0x15a5ba[0xc]*_0x26d381[0x3]+_0x15a5ba[0xd]*_0x26d381[0x0],_0x15a5ba[0x0]*_0x26d381[0xe]-_0x15a5ba[0x1]*_0x26d381[0x8]-_0x15a5ba[0x2]*_0x26d381[0x9]-_0x15a5ba[0x3]*_0x26d381[0xa]+_0x15a5ba[0x4]*_0x26d381[0xb]+_0x15a5ba[0x5]*_0x26d381[0xc]+_0x15a5ba[0x6]*_0x26d381[0xd]+_0x15a5ba[0x7]*_0x26d381[0xf]-_0x15a5ba[0x8]*_0x26d381[0x1]-_0x15a5ba[0x9]*_0x26d381[0x2]-_0x15a5ba[0xa]*_0x26d381[0x3]-_0x15a5ba[0xb]*_0x26d381[0x4]-_0x15a5ba[0xc]*_0x26d381[0x5]-_0x15a5ba[0xd]*_0x26d381[0x6]+_0x15a5ba[0xe]*_0x26d381[0x0]-_0x15a5ba[0xf]*_0x26d381[0x7],_0x15a5ba[0x0]*_0x26d381[0xf]+_0x15a5ba[0x1]*_0x26d381[0x6]-_0x15a5ba[0x2]*_0x26d381[0x5]+_0x15a5ba[0x3]*_0x26d381[0x4]+_0x15a5ba[0x4]*_0x26d381[0x3]-_0x15a5ba[0x5]*_0x26d381[0x2]+_0x15a5ba[0x6]*_0x26d381[0x1]-_0x15a5ba[0x7]*_0x26d381[0xe]+_0x15a5ba[0x8]*_0x26d381[0xd]-_0x15a5ba[0x9]*_0x26d381[0xc]+_0x15a5ba[0xa]*_0x26d381[0xb]-_0x15a5ba[0xb]*_0x26d381[0xa]+_0x15a5ba[0xc]*_0x26d381[0x9]-_0x15a5ba[0xd]*_0x26d381[0x8]+_0x15a5ba[0xe]*_0x26d381[0x7]+_0x15a5ba[0xf]*_0x26d381[0x0]];}static[_0x476a85(0x26b)](_0x36ec7c){return[_0x36ec7c[0x0],-_0x36ec7c[0x1],-_0x36ec7c[0x2],-_0x36ec7c[0x3],-_0x36ec7c[0x4],-_0x36ec7c[0x5],-_0x36ec7c[0x6],-_0x36ec7c[0x7],-_0x36ec7c[0x8],-_0x36ec7c[0x9],-_0x36ec7c[0xa],_0x36ec7c[0xb],_0x36ec7c[0xc],_0x36ec7c[0xd],_0x36ec7c[0xe],_0x36ec7c[0xf]];}static[_0x476a85(0x21a)](_0x4b6de7,_0xfc40f0){const _0x565514=_0x476a85;return PGA3D[_0x565514(0x2ab)](_0xfc40f0,PGA3D[_0x565514(0x2ab)](_0x4b6de7,PGA3D['reverse'](_0xfc40f0)));}static[_0x476a85(0x21b)](_0x148198){const _0x3f8b48=_0x476a85;return Math[_0x3f8b48(0x1cd)](_0x148198[_0x3f8b48(0x293)](_0x2fce8a=>_0x2fce8a*_0x2fce8a)['reduce']((_0x1301bb,_0x3adf7f)=>_0x1301bb+_0x3adf7f,0x0));}static[_0x476a85(0x269)](_0xe26f1d,_0x3487f2,_0x1f2be3){return[0x1,0x0,0x0,0x0,-_0xe26f1d/0x2,-_0x3487f2/0x2,-_0x1f2be3/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['extractTranslator'](_0x3723ff){return[0x1,0x0,0x0,0x0,_0x3723ff[0x4],_0x3723ff[0x5],_0x3723ff[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x476a85(0x1f5)](_0x1442ed,_0x11df9f=0x1,_0x54acf5=0x0,_0x43dc73=0x0,_0x1b77ea=0x0,_0x42098c=0x0,_0x30b8e7=0x0){let _0x164ac0=Math['cos'](_0x1442ed/0x2),_0x506a6d=Math['sin'](_0x1442ed/0x2),_0x1eef1b=PGA3D['createLine'](_0x1b77ea,_0x42098c,_0x30b8e7,_0x11df9f,_0x54acf5,_0x43dc73);return[_0x164ac0,_0x506a6d*_0x1eef1b[0x1],_0x506a6d*_0x1eef1b[0x2],_0x506a6d*_0x1eef1b[0x3],_0x506a6d*_0x1eef1b[0x4],_0x506a6d*_0x1eef1b[0x5],_0x506a6d*_0x1eef1b[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x476a85(0x255)](_0x5af3eb){return[_0x5af3eb[0x0],_0x5af3eb[0x1],_0x5af3eb[0x2],_0x5af3eb[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x476a85(0x240)](_0xd8b4e7,_0x23fb63,_0x2e238a){return[0x0,_0x2e238a,-_0x23fb63,_0xd8b4e7,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x476a85(0x215)](_0x3ec208,_0x2a0b0e,_0x8b152a,_0xab2d11,_0x35602f,_0x1ba5cd){const _0x4f96d1=_0x476a85;let _0x4d1c96=PGA3D[_0x4f96d1(0x240)](_0xab2d11,_0x35602f,_0x1ba5cd),_0x2efb41=PGA3D[_0x4f96d1(0x20d)](_0x4d1c96);return[0x0,_0x2efb41[0x1],_0x2efb41[0x2],_0x2efb41[0x3],-(-_0x2efb41[0x2]*_0x8b152a-_0x2efb41[0x1]*_0x2a0b0e),-(_0x2efb41[0x1]*_0x3ec208-_0x2efb41[0x3]*_0x8b152a),-(_0x2efb41[0x3]*_0x2a0b0e+_0x2efb41[0x2]*_0x3ec208),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x476a85(0x20b)](_0x14e583,_0x3936,_0x5d066d){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x5d066d,_0x3936,-_0x14e583,0x0,0x0,0x0,0x0,0x0];}static['extractPoint'](_0x2c6443){return[-_0x2c6443[0xa]/_0x2c6443[0x7],_0x2c6443[0x9]/_0x2c6443[0x7],-_0x2c6443[0x8]/_0x2c6443[0x7]];}static[_0x476a85(0x263)](_0xf09168,_0x59e404,_0x303e20,_0x5f5470){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0xf09168,_0x59e404,_0x303e20,-_0x5f5470,0x0];}static[_0x476a85(0x24a)](_0x17cf28,_0x57b9c8,_0x52b8ed){let _0x1b9496=_0x57b9c8[0x1]*_0x52b8ed[0x2]-_0x52b8ed[0x1]*_0x57b9c8[0x2]-(_0x17cf28[0x1]*_0x52b8ed[0x2]-_0x52b8ed[0x1]*_0x17cf28[0x2])+(_0x17cf28[0x1]*_0x57b9c8[0x2]-_0x57b9c8[0x1]*_0x17cf28[0x2]),_0x4bf812=_0x57b9c8[0x0]*_0x52b8ed[0x2]-_0x52b8ed[0x0]*_0x57b9c8[0x2]-(_0x17cf28[0x0]*_0x52b8ed[0x2]-_0x52b8ed[0x0]*_0x17cf28[0x2])+(_0x17cf28[0x0]*_0x57b9c8[0x2]-_0x57b9c8[0x0]*_0x17cf28[0x2]),_0x146601=_0x57b9c8[0x0]*_0x52b8ed[0x1]-_0x52b8ed[0x0]*_0x57b9c8[0x1]-(_0x17cf28[0x0]*_0x52b8ed[0x1]-_0x52b8ed[0x0]*_0x17cf28[0x1])+(_0x17cf28[0x0]*_0x57b9c8[0x1]-_0x57b9c8[0x0]*_0x17cf28[0x1]),_0x1e15cd=_0x17cf28[0x0]*(_0x57b9c8[0x1]*_0x52b8ed[0x2]-_0x52b8ed[0x1]*_0x57b9c8[0x2])-_0x57b9c8[0x0]*(_0x17cf28[0x1]*_0x52b8ed[0x2]-_0x52b8ed[0x1]*_0x17cf28[0x2])+_0x52b8ed[0x0]*(_0x17cf28[0x1]*_0x57b9c8[0x2]-_0x57b9c8[0x1]*_0x17cf28[0x2]);return PGA3D['createPlane'](_0x1b9496,-_0x4bf812,_0x146601,_0x1e15cd);}static[_0x476a85(0x1a4)](_0x3dc94c,_0x2a30eb){const _0x15c9e0=_0x476a85;let _0x1277ac=PGA3D[_0x15c9e0(0x2ab)](_0x3dc94c,_0x2a30eb),_0x27785d=Math[_0x15c9e0(0x24f)](_0x1277ac[0x7])<=1e-8,_0x2f094d=_0x27785d&&Math[_0x15c9e0(0x24f)](_0x1277ac[0x8])<=1e-8&&Math[_0x15c9e0(0x24f)](_0x1277ac[0x9])<=1e-8&&Math[_0x15c9e0(0x24f)](_0x1277ac[0xa])<=1e-8;return[PGA3D[_0x15c9e0(0x2af)](_0x1277ac),!_0x27785d,_0x2f094d];}static[_0x476a85(0x20d)](_0xb38cc8){const _0x17af28=_0x476a85;let _0x1e6755=PGA3D['motorNorm'](_0xb38cc8);if(_0x1e6755==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0xb38cc8[_0x17af28(0x293)](_0x76034c=>_0x76034c/_0x1e6755);}static[_0x476a85(0x282)](_0x38f48a,_0x4b8ce4){const _0x5b02fc=_0x476a85;let _0x459549=PGA3D['applyMotor'](PGA3D[_0x5b02fc(0x20b)](_0x38f48a[0x0],_0x38f48a[0x1],_0x38f48a[0x2]),_0x4b8ce4);return PGA3D[_0x5b02fc(0x2af)](_0x459549);}static['applyMotorToDir'](_0x3e9f13,_0x2335b8){const _0x2ac72e=_0x476a85;let _0x3ade78=PGA3D[_0x2ac72e(0x255)](_0x2335b8),_0x4062db=PGA3D[_0x2ac72e(0x21a)](PGA3D[_0x2ac72e(0x20b)](_0x3e9f13[0x0],_0x3e9f13[0x1],_0x3e9f13[0x2]),_0x3ade78);return PGA3D[_0x2ac72e(0x2af)](_0x4062db);}static[_0x476a85(0x22e)](_0x444b2c,_0x3f1bc3,_0x242618,_0x55ff3c){const _0x214325=_0x476a85;let _0x4471ac=PGA3D['createPoint'](_0x444b2c[0x0],_0x444b2c[0x1],_0x444b2c[0x2]),_0x89bb57=PGA3D[_0x214325(0x20b)](_0x3f1bc3[0x0],_0x3f1bc3[0x1],_0x3f1bc3[0x2]),_0x549c64=PGA3D[_0x214325(0x20b)](_0x242618[0x0],_0x242618[0x1],_0x242618[0x2]),_0x123599=PGA3D[_0x214325(0x20b)](_0x55ff3c[0x0],_0x55ff3c[0x1],_0x55ff3c[0x2]),_0x3b081e=PGA3D[_0x214325(0x24a)](_0x444b2c,_0x3f1bc3,_0x242618),_0x5927f7=PGA3D['createPlaneFromPoints'](_0x55ff3c,_0x3f1bc3,_0x242618),_0x4d2763=PGA3D[_0x214325(0x24a)](_0x444b2c,_0x55ff3c,_0x242618),_0x3d0c9f=PGA3D[_0x214325(0x24a)](_0x444b2c,_0x3f1bc3,_0x55ff3c),_0x28dfb1=_0x3b081e[0xb]*_0x3b081e[0xb]+_0x3b081e[0xc]*_0x3b081e[0xc]+_0x3b081e[0xd]*_0x3b081e[0xd]+_0x3b081e[0xe]*_0x3b081e[0xe],_0x348f2f=_0x3b081e[0xb]*_0x5927f7[0xb]+_0x3b081e[0xc]*_0x5927f7[0xc]+_0x3b081e[0xd]*_0x5927f7[0xd]+_0x3b081e[0xe]*_0x5927f7[0xe],_0x3b7573=_0x3b081e[0xb]*_0x4d2763[0xb]+_0x3b081e[0xc]*_0x4d2763[0xc]+_0x3b081e[0xd]*_0x4d2763[0xd]+_0x3b081e[0xe]*_0x4d2763[0xe],_0x2a989b=_0x3b081e[0xb]*_0x3d0c9f[0xb]+_0x3b081e[0xc]*_0x3d0c9f[0xc]+_0x3b081e[0xd]*_0x3d0c9f[0xd]+_0x3b081e[0xe]*_0x3d0c9f[0xe],_0x267816=_0x348f2f/_0x28dfb1,_0x5627c7=_0x3b7573/_0x28dfb1,_0x2caca4=_0x2a989b/_0x28dfb1;return _0x267816>=0x0&&_0x267816<=0x1&&_0x5627c7>=0x0&&_0x5627c7<=0x1&&_0x2caca4>=0x0&&_0x2caca4<=0x1;}}class Camera{constructor(_0x1ada45,_0x4b4177){const _0x19e7ca=_0x476a85;this[_0x19e7ca(0x1f7)]=new Float32Array(Array(0x10)[_0x19e7ca(0x271)](0x0)),this[_0x19e7ca(0x1f7)][0x0]=0x1,this['_focal']=new Float32Array(Array(0x2)[_0x19e7ca(0x271)](0x1)),this[_0x19e7ca(0x237)]=new Float32Array([_0x1ada45,_0x4b4177]),this['_isProjective']=![];}[_0x476a85(0x228)](){const _0x1067c8=_0x476a85;this[_0x1067c8(0x1f7)][0x0]=0x1;for(let _0x441dac=0x1;_0x441dac<0x10;++_0x441dac)this['_pose'][_0x441dac]=0x0;this[_0x1067c8(0x1a6)][0x0]=0x1,this['_focal'][0x1]=0x1;}[_0x476a85(0x1e9)](_0x9d567c){const _0x3547a3=_0x476a85;for(let _0x512256=0x0;_0x512256<0x10;++_0x512256)this[_0x3547a3(0x1f7)][_0x512256]=_0x9d567c[_0x512256];}[_0x476a85(0x2c2)](_0x2f7034,_0x4f4b8e){const _0x458a9d=_0x476a85;this[_0x458a9d(0x237)][0x0]=_0x2f7034,this['_resolutions'][0x1]=_0x4f4b8e;}[_0x476a85(0x28e)](_0x45213c){const _0x457ba0=_0x476a85;let _0x29e77f=PGA3D[_0x457ba0(0x253)]([0x1,0x0,0x0],this['_pose']),_0x26b031=PGA3D['createTranslator'](_0x45213c*_0x29e77f[0x0],_0x45213c*_0x29e77f[0x1],_0x45213c*_0x29e77f[0x2]),_0x2d6189=PGA3D[_0x457ba0(0x20d)](PGA3D[_0x457ba0(0x2ab)](_0x26b031,this['_pose']));this['updatePose'](_0x2d6189);}['moveY'](_0x5e2c8c){const _0x294981=_0x476a85;let _0x472fe8=PGA3D['applyMotorToDir']([0x0,0x1,0x0],this[_0x294981(0x1f7)]),_0x54e0da=PGA3D['createTranslator'](_0x5e2c8c*_0x472fe8[0x0],_0x5e2c8c*_0x472fe8[0x1],_0x5e2c8c*_0x472fe8[0x2]),_0x4fa75c=PGA3D['normalizeMotor'](PGA3D[_0x294981(0x2ab)](_0x54e0da,this[_0x294981(0x1f7)]));this['updatePose'](_0x4fa75c);}[_0x476a85(0x290)](_0x17ae63){const _0x48209f=_0x476a85;let _0x2f67b6=PGA3D[_0x48209f(0x253)]([0x0,0x0,0x1],this['_pose']),_0xcdb652=PGA3D[_0x48209f(0x269)](_0x17ae63*_0x2f67b6[0x0],_0x17ae63*_0x2f67b6[0x1],_0x17ae63*_0x2f67b6[0x2]),_0x3b8b00=PGA3D[_0x48209f(0x20d)](PGA3D[_0x48209f(0x2ab)](_0xcdb652,this[_0x48209f(0x1f7)]));this[_0x48209f(0x1e9)](_0x3b8b00);}[_0x476a85(0x239)](_0x3ebd16){const _0x2487e8=_0x476a85;let _0x2a6173=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this['_pose']),_0x581fda=PGA3D[_0x2487e8(0x253)]([0x1,0x0,0x0],this['_pose']),_0xa60543=PGA3D[_0x2487e8(0x1f5)](_0x3ebd16,_0x581fda[0x0],_0x581fda[0x1],_0x581fda[0x2],_0x2a6173[0x0],_0x2a6173[0x1],_0x2a6173[0x2]),_0x5af621=PGA3D[_0x2487e8(0x20d)](PGA3D[_0x2487e8(0x2ab)](_0xa60543,this[_0x2487e8(0x1f7)]));this['updatePose'](_0x5af621);}[_0x476a85(0x29d)](_0x168468){const _0x3e7981=_0x476a85;let _0x179b0b=PGA3D[_0x3e7981(0x282)]([0x0,0x0,0x0],this[_0x3e7981(0x1f7)]),_0x94c908=PGA3D[_0x3e7981(0x253)]([0x0,0x1,0x0],this[_0x3e7981(0x1f7)]),_0x33f611=PGA3D[_0x3e7981(0x1f5)](_0x168468,_0x94c908[0x0],_0x94c908[0x1],_0x94c908[0x2],_0x179b0b[0x0],_0x179b0b[0x1],_0x179b0b[0x2]),_0x32c4a0=PGA3D[_0x3e7981(0x20d)](PGA3D['geometricProduct'](_0x33f611,this[_0x3e7981(0x1f7)]));this[_0x3e7981(0x1e9)](_0x32c4a0);}['rotateZ'](_0x5cf4c6){const _0x187a85=_0x476a85;let _0x5196b6=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this[_0x187a85(0x1f7)]),_0x5d360c=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x187a85(0x1f7)]),_0x611bf3=PGA3D[_0x187a85(0x1f5)](_0x5cf4c6,_0x5d360c[0x0],_0x5d360c[0x1],_0x5d360c[0x2],_0x5196b6[0x0],_0x5196b6[0x1],_0x5196b6[0x2]),_0x1d575d=PGA3D[_0x187a85(0x20d)](PGA3D[_0x187a85(0x2ab)](_0x611bf3,this['_pose']));this[_0x187a85(0x1e9)](_0x1d575d);}}async function init(){const _0x281757=_0x476a85,_0x414088=document[_0x281757(0x19d)]('canvas');_0x414088['id']=_0x281757(0x265),document['body'][_0x281757(0x1f2)](_0x414088);const _0x365ac8=new RayTracer(_0x414088);await _0x365ac8['init']();var _0x28ff6b=_0x281757(0x1a7),_0x2253d8=new StandardTextObject(_0x28ff6b);let _0xdd18ab=new Camera();_0xdd18ab[_0x281757(0x1f7)][0x0]=0.7017657160758972,_0xdd18ab[_0x281757(0x1f7)][0x1]=-0.00295079848729074,_0xdd18ab[_0x281757(0x1f7)][0x2]=0.09049465507268906,_0xdd18ab['_pose'][0x3]=0.25295335054397583,_0xdd18ab[_0x281757(0x1f7)][0x4]=0.09122809022665024,_0xdd18ab[_0x281757(0x1f7)][0x5]=0.0996963232755661,_0xdd18ab[_0x281757(0x1f7)][0x6]=0.6455848813056946,_0xdd18ab[_0x281757(0x21c)]=!![];var _0x4ae18b=new VolumeRenderingProceduralTerrainObject(_0x365ac8[_0x281757(0x2b7)],_0x365ac8[_0x281757(0x245)],_0xdd18ab);await _0x365ac8[_0x281757(0x1ee)](_0x4ae18b);let _0x53563c='??';var _0x410764=new StandardTextObject('fps:\x20'+_0x53563c),_0x245e19=0.001,_0x4c4e49=0.01;window['addEventListener'](_0x281757(0x1ae),async _0x53c938=>{const _0x2c3e55=_0x281757;switch(_0x53c938[_0x2c3e55(0x1e0)]){case'h':case'H':_0x2253d8[_0x2c3e55(0x23c)]();break;case'f':case'F':_0x410764[_0x2c3e55(0x23c)]();break;case'w':case'W':_0xdd18ab[_0x2c3e55(0x290)](_0x245e19),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case's':case'S':_0xdd18ab[_0x2c3e55(0x290)](-_0x245e19),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'a':case'A':_0xdd18ab[_0x2c3e55(0x28e)](-_0x245e19),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'd':case'D':_0xdd18ab['moveX'](_0x245e19),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'q':case'Q':_0xdd18ab[_0x2c3e55(0x1c0)](-_0x245e19),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'e':case'E':_0xdd18ab[_0x2c3e55(0x1c0)](_0x245e19),_0x4ae18b?.['updateCameraPose']();break;case'i':case'I':_0xdd18ab[_0x2c3e55(0x239)](-_0x4c4e49),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'k':case'K':_0xdd18ab[_0x2c3e55(0x239)](_0x4c4e49),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'j':case'J':_0xdd18ab[_0x2c3e55(0x29d)](_0x4c4e49),_0x4ae18b?.['updateCameraPose']();break;case'l':case'L':_0xdd18ab[_0x2c3e55(0x29d)](-_0x4c4e49),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'u':case'U':_0xdd18ab[_0x2c3e55(0x1c7)](_0x4c4e49),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'o':case'O':_0xdd18ab[_0x2c3e55(0x1c7)](-_0x4c4e49),_0x4ae18b?.[_0x2c3e55(0x229)]();break;case'c':case'C':_0xdd18ab['_isProjective']=!_0xdd18ab[_0x2c3e55(0x21c)];break;case'r':case'R':_0xdd18ab[_0x2c3e55(0x228)](),_0xdd18ab[_0x2c3e55(0x1f7)][0x0]=0.7017657160758972,_0xdd18ab[_0x2c3e55(0x1f7)][0x1]=-0.00295079848729074,_0xdd18ab[_0x2c3e55(0x1f7)][0x2]=0.09049465507268906,_0xdd18ab[_0x2c3e55(0x1f7)][0x3]=0.25295335054397583,_0xdd18ab[_0x2c3e55(0x1f7)][0x4]=0.09122809022665024,_0xdd18ab[_0x2c3e55(0x1f7)][0x5]=0.0996963232755661,_0xdd18ab[_0x2c3e55(0x1f7)][0x6]=0.6455848813056946,await _0x4ae18b?.[_0x2c3e55(0x26e)](),_0x4ae18b?.[_0x2c3e55(0x229)](),_0x4ae18b?.[_0x2c3e55(0x29c)]();break;case'[':_0xdd18ab['_focal'][0x0]*=1.1,_0x4ae18b?.[_0x2c3e55(0x29c)]();break;case']':_0xdd18ab[_0x2c3e55(0x1a6)][0x0]/=1.1,_0x4ae18b?.[_0x2c3e55(0x29c)]();break;case'{':_0xdd18ab[_0x2c3e55(0x1a6)][0x1]*=1.1,_0x4ae18b?.[_0x2c3e55(0x29c)]();break;case'}':_0xdd18ab[_0x2c3e55(0x1a6)][0x1]/=1.1,_0x4ae18b?.[_0x2c3e55(0x29c)]();break;}}),window[_0x281757(0x1dc)](_0x281757(0x2b3),_0x4e18a7=>{});let _0x575f85=async _0x2f7b2e=>{},_0x4f0b16=async _0x30f8eb=>{},_0x46abe9=_0x4a3082=>{};_0x414088[_0x281757(0x1dc)](_0x281757(0x1f9),_0x575f85),_0x414088['addEventListener'](_0x281757(0x266),_0x4f0b16),_0x414088[_0x281757(0x1dc)](_0x281757(0x217),_0x46abe9),_0x414088['addEventListener'](_0x281757(0x29b),_0x186843=>{}),_0x414088[_0x281757(0x1dc)](_0x281757(0x233),_0x27429a=>{}),_0x414088['addEventListener'](_0x281757(0x214),_0x575f85),_0x414088[_0x281757(0x1dc)](_0x281757(0x274),_0x4f0b16),_0x414088[_0x281757(0x1dc)]('touchend',_0x46abe9),_0x2253d8['_textCanvas'][_0x281757(0x2a7)][_0x281757(0x192)](_0x281757(0x29a),'none'),_0x410764[_0x281757(0x258)][_0x281757(0x2a7)][_0x281757(0x192)](_0x281757(0x29a),_0x281757(0x216));var _0x13cbe0=0x0,_0x4e9f1d=0x3c,_0x13ea61=0x1/_0x4e9f1d,_0x4e13aa=_0x13ea61*0x3e8,_0x410bde;let _0x6596bd=()=>{let _0x5bdbbe=Date['now']()-_0x410bde;_0x5bdbbe>_0x4e13aa&&(++_0x13cbe0,_0x410bde=Date['now']()-_0x5bdbbe%_0x4e13aa,_0x365ac8['render']()),requestAnimationFrame(_0x6596bd);};return _0x410bde=Date['now'](),_0x6596bd(),_0x410764['_textCanvas']['style'][_0x281757(0x192)](_0x281757(0x26d),_0x281757(0x28c)),_0x410764[_0x281757(0x258)][_0x281757(0x2a7)]['right']=_0x281757(0x1e2),setInterval(()=>{const _0x2b12cf=_0x281757;_0x53563c=_0x13cbe0,_0x13cbe0=0x0,_0x410764[_0x2b12cf(0x209)](_0x2b12cf(0x25e)+_0x53563c);},0x3e8),_0x365ac8;}init()[_0x476a85(0x1c3)](_0x4f8599=>{const _0x1153e4=_0x476a85;console[_0x1153e4(0x273)](_0x4f8599);})['catch'](_0x22b53c=>{const _0x42a81c=_0x476a85,_0x27bb4a=document['createElement']('p');_0x27bb4a[_0x42a81c(0x211)]=navigator[_0x42a81c(0x2a4)]+_0x42a81c(0x21d)+_0x22b53c['message'],document['body'][_0x42a81c(0x1f2)](_0x27bb4a),document[_0x42a81c(0x2ac)](_0x42a81c(0x265))[_0x42a81c(0x28f)]();});
