/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
 const _0x12778f=_0x49de;(function(_0x2a8b35,_0x359646){const _0x56360a=_0x49de,_0x55376c=_0x2a8b35();while(!![]){try{const _0x5ef36b=-parseInt(_0x56360a(0x132))/0x1+parseInt(_0x56360a(0x1d0))/0x2*(-parseInt(_0x56360a(0x124))/0x3)+-parseInt(_0x56360a(0xb5))/0x4*(parseInt(_0x56360a(0xa4))/0x5)+parseInt(_0x56360a(0x160))/0x6*(parseInt(_0x56360a(0x130))/0x7)+-parseInt(_0x56360a(0xea))/0x8+parseInt(_0x56360a(0x16a))/0x9+parseInt(_0x56360a(0x186))/0xa;if(_0x5ef36b===_0x359646)break;else _0x55376c['push'](_0x55376c['shift']());}catch(_0x23fcd1){_0x55376c['push'](_0x55376c['shift']());}}}(_0x5299,0x4a556));class Renderer{constructor(_0x48859f){const _0x3d6029=_0x49de;this['_canvas']=_0x48859f,this[_0x3d6029(0x191)]=[],this[_0x3d6029(0x157)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async['init'](){const _0x505c07=_0x49de;if(!navigator['gpu'])throw Error(_0x505c07(0x1bc));const _0x55a0cb=await navigator[_0x505c07(0xe8)]['requestAdapter']();if(!_0x55a0cb)throw Error(_0x505c07(0x121));this['_device']=await _0x55a0cb[_0x505c07(0x175)](),this[_0x505c07(0xc8)]=this[_0x505c07(0x96)][_0x505c07(0x14c)]('webgpu'),this['_canvasFormat']=navigator[_0x505c07(0xe8)][_0x505c07(0xa2)](),this[_0x505c07(0xc8)][_0x505c07(0x140)]({'device':this[_0x505c07(0x197)],'format':this[_0x505c07(0x16b)]}),this[_0x505c07(0x126)](),window[_0x505c07(0x16c)](_0x505c07(0xf2),this[_0x505c07(0x126)][_0x505c07(0x13b)](this));}[_0x12778f(0x126)](){const _0x3ae472=_0x12778f,_0x3e5840=window[_0x3ae472(0x9b)]||0x1,_0x3232c0=window[_0x3ae472(0x1b4)]*_0x3e5840,_0x5f0d01=window[_0x3ae472(0x180)]*_0x3e5840;this['_canvas'][_0x3ae472(0x111)]=_0x3232c0,this['_canvas'][_0x3ae472(0x113)]=_0x5f0d01,this[_0x3ae472(0x96)][_0x3ae472(0x13f)][_0x3ae472(0x111)]=window['innerWidth']+'px',this[_0x3ae472(0x96)][_0x3ae472(0x13f)][_0x3ae472(0x113)]=window[_0x3ae472(0x180)]+'px',this[_0x3ae472(0x96)]['style'][_0x3ae472(0xef)]=_0x3ae472(0x10d),this[_0x3ae472(0xdf)]();}async[_0x12778f(0x15e)](_0xf7ca4a){const _0x5ed2ee=_0x12778f;await _0xf7ca4a['init'](),this[_0x5ed2ee(0x191)]['push'](_0xf7ca4a);}[_0x12778f(0x149)](_0x331d5e){const _0x4374c2=_0x12778f;for(const _0x543581 of this[_0x4374c2(0x191)]){_0x543581?.['updateGeometry']();}let _0x57a89f=this[_0x4374c2(0x197)]['createCommandEncoder']();const _0x1dcb57=_0x57a89f[_0x4374c2(0x10c)]({'colorAttachments':[{'view':_0x331d5e,'clearValue':this[_0x4374c2(0x157)],'loadOp':_0x4374c2(0xe2),'storeOp':_0x4374c2(0x1b2)}]});for(const _0x58589c of this[_0x4374c2(0x191)]){_0x58589c?.[_0x4374c2(0xdf)](_0x1dcb57);}_0x1dcb57[_0x4374c2(0x125)]();const _0x30d63e=_0x57a89f[_0x4374c2(0x161)]();for(const _0x53c810 of this[_0x4374c2(0x191)]){_0x53c810?.['compute'](_0x30d63e);}_0x30d63e[_0x4374c2(0x125)]();const _0x23e75b=_0x57a89f[_0x4374c2(0xa5)]();this[_0x4374c2(0x197)]['queue'][_0x4374c2(0x14a)]([_0x23e75b]);}[_0x12778f(0xdf)](){const _0x349f7e=_0x12778f;this[_0x349f7e(0x149)](this[_0x349f7e(0xc8)][_0x349f7e(0x17a)]()['createView']());}}class RayTracer extends Renderer{constructor(_0x266126){const _0x3b5424=_0x12778f;super(_0x266126),this[_0x3b5424(0xba)]=null;}async[_0x12778f(0x1a1)](){const _0x4a92a8=_0x12778f;if(!navigator[_0x4a92a8(0xe8)])throw Error(_0x4a92a8(0x1bc));const _0x3df12c=await navigator[_0x4a92a8(0xe8)]['requestAdapter']();if(!_0x3df12c)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x4a92a8(0x197)]=await _0x3df12c['requestDevice'](),this[_0x4a92a8(0xc8)]=this[_0x4a92a8(0x96)]['getContext'](_0x4a92a8(0x13d)),this[_0x4a92a8(0x16b)]=_0x4a92a8(0x17d),this['_context'][_0x4a92a8(0x140)]({'device':this['_device'],'format':this[_0x4a92a8(0x16b)]}),this[_0x4a92a8(0x1c6)]=this[_0x4a92a8(0x197)][_0x4a92a8(0x142)]({'label':_0x4a92a8(0xdd),'code':_0x4a92a8(0xb0)}),this[_0x4a92a8(0x188)]=this[_0x4a92a8(0x197)][_0x4a92a8(0xd9)]({'label':_0x4a92a8(0x1b1),'size':0x8,'usage':GPUBufferUsage[_0x4a92a8(0x1a7)]|GPUBufferUsage[_0x4a92a8(0x105)]}),this['_pipeline']=this[_0x4a92a8(0x197)]['createRenderPipeline']({'label':_0x4a92a8(0xb9),'layout':_0x4a92a8(0x118),'vertex':{'module':this['_shaderModule'],'entryPoint':_0x4a92a8(0xcc)},'fragment':{'module':this[_0x4a92a8(0x1c6)],'entryPoint':'fragmentMain','targets':[{'format':this[_0x4a92a8(0x16b)]}]}}),this['_sampler']=this[_0x4a92a8(0x197)]['createSampler']({'label':_0x4a92a8(0x112),'magFilter':_0x4a92a8(0x8e),'minFilter':'linear'}),this[_0x4a92a8(0x126)](),window['addEventListener'](_0x4a92a8(0xf2),this[_0x4a92a8(0x126)]['bind'](this));}[_0x12778f(0x126)](){const _0x509f98=_0x12778f,_0x40a476=window[_0x509f98(0x9b)]||0x1,_0x5e3d26=window[_0x509f98(0x1b4)]*_0x40a476,_0x4bf542=window[_0x509f98(0x180)]*_0x40a476,_0x40c4a2=_0x5e3d26/_0x4bf542,_0x2b89e9=_0x4bf542;let _0x5f30bd={'width':_0x2b89e9*_0x40c4a2,'height':_0x2b89e9};this[_0x509f98(0x102)]=this[_0x509f98(0x197)]['createTexture']({'size':_0x5f30bd,'format':this[_0x509f98(0x16b)],'usage':GPUTextureUsage[_0x509f98(0x13e)]|GPUTextureUsage[_0x509f98(0x1cd)]}),this[_0x509f98(0xba)]&&(this[_0x509f98(0xba)]['_imgWidth']=this['_offScreenTexture'][_0x509f98(0x111)],this[_0x509f98(0xba)]['_imgHeight']=this[_0x509f98(0x102)][_0x509f98(0x113)],this[_0x509f98(0xba)][_0x509f98(0x17b)](),this[_0x509f98(0xba)][_0x509f98(0x17e)](this[_0x509f98(0x102)])),this[_0x509f98(0xac)]=this['_device'][_0x509f98(0x17e)]({'label':_0x509f98(0xf8),'layout':this[_0x509f98(0x18d)][_0x509f98(0x152)](0x0),'entries':[{'binding':0x0,'resource':this[_0x509f98(0x102)][_0x509f98(0x1b7)]()},{'binding':0x1,'resource':this['_sampler']},{'binding':0x2,'resource':{'buffer':this[_0x509f98(0x188)]}}]}),super[_0x509f98(0x126)](),this[_0x509f98(0x197)][_0x509f98(0x18c)][_0x509f98(0x9f)](this[_0x509f98(0x188)],0x0,new Float32Array([_0x5e3d26,_0x4bf542]));}async[_0x12778f(0xe3)](_0x5c2cc9){const _0x1e3bfd=_0x12778f;await _0x5c2cc9['init'](),_0x5c2cc9[_0x1e3bfd(0xee)]=this[_0x1e3bfd(0x102)][_0x1e3bfd(0x111)],_0x5c2cc9[_0x1e3bfd(0x10e)]=this[_0x1e3bfd(0x102)][_0x1e3bfd(0x113)],_0x5c2cc9[_0x1e3bfd(0x17b)](),this[_0x1e3bfd(0xba)]=_0x5c2cc9,this[_0x1e3bfd(0xba)][_0x1e3bfd(0x17e)](this[_0x1e3bfd(0x102)]);}[_0x12778f(0xdf)](){const _0x1d442d=_0x12778f;if(this[_0x1d442d(0xba)]){let _0x4f3561=this[_0x1d442d(0x197)][_0x1d442d(0x110)]();const _0x9aa4c0=_0x4f3561[_0x1d442d(0x161)]();this[_0x1d442d(0xba)]['compute'](_0x9aa4c0),_0x9aa4c0[_0x1d442d(0x125)](),this[_0x1d442d(0x197)][_0x1d442d(0x18c)][_0x1d442d(0x14a)]([_0x4f3561[_0x1d442d(0xa5)]()]);}let _0x511dd5=this[_0x1d442d(0x197)][_0x1d442d(0x110)]();const _0x3aac7b=_0x511dd5['beginRenderPass']({'colorAttachments':[{'view':this[_0x1d442d(0xc8)]['getCurrentTexture']()[_0x1d442d(0x1b7)](),'clearValue':this['_clearColor'],'loadOp':_0x1d442d(0xe2),'storeOp':_0x1d442d(0x1b2)}]});_0x3aac7b[_0x1d442d(0x1b3)](this[_0x1d442d(0x18d)]),_0x3aac7b[_0x1d442d(0x1c1)](0x0,this[_0x1d442d(0xac)]),_0x3aac7b['draw'](0x6),_0x3aac7b[_0x1d442d(0x125)](),this['_device'][_0x1d442d(0x18c)][_0x1d442d(0x14a)]([_0x511dd5['finish']()]);}}class StandardTextObject{constructor(_0x1632bf,_0x38a610=0x5,_0x258f31=_0x12778f(0x17f)){const _0x3c58c4=_0x12778f;this['_textFont']=_0x258f31,this[_0x3c58c4(0x108)]=_0x38a610,this[_0x3c58c4(0x94)]=document[_0x3c58c4(0x135)](_0x3c58c4(0xd2)),this[_0x3c58c4(0x114)]=this[_0x3c58c4(0x94)][_0x3c58c4(0x14c)]('2d'),this[_0x3c58c4(0x9c)](_0x1632bf),this['updateText'](_0x1632bf),this[_0x3c58c4(0x94)][_0x3c58c4(0x13f)][_0x3c58c4(0x14d)]=_0x3c58c4(0x14e),this[_0x3c58c4(0x94)][_0x3c58c4(0x13f)][_0x3c58c4(0xbb)]=_0x3c58c4(0x12f),this[_0x3c58c4(0x94)][_0x3c58c4(0x13f)][_0x3c58c4(0x150)]=_0x3c58c4(0x12f),this['_textCanvas']['style'][_0x3c58c4(0x117)]=_0x3c58c4(0x1cb),document['body'][_0x3c58c4(0x1ae)](this[_0x3c58c4(0x94)]);}[_0x12778f(0x99)](){const _0x376603=_0x12778f;this['_textCanvas'][_0x376603(0x95)]=!this[_0x376603(0x94)][_0x376603(0x95)];}[_0x12778f(0x9c)](_0x14d937){const _0x2a6a94=_0x12778f;this[_0x2a6a94(0x114)][_0x2a6a94(0x1a9)]=this[_0x2a6a94(0xf4)],this[_0x2a6a94(0x194)]=_0x14d937[_0x2a6a94(0x1b5)]('\x0a'),this[_0x2a6a94(0xfa)]=Math['max'](...this['_lines'][_0x2a6a94(0xc3)](_0x1532b1=>this['_textContext']['measureText'](_0x1532b1)[_0x2a6a94(0x111)]));const _0x501a60=this[_0x2a6a94(0xf4)]['match'](/(\d+)px/);_0x501a60?this[_0x2a6a94(0x156)]=parseInt(_0x501a60[0x1],0xa):(this[_0x2a6a94(0x156)]=0x12,this[_0x2a6a94(0xf4)]='18px\x20Arial'),this[_0x2a6a94(0xa9)]=this[_0x2a6a94(0x194)]['length']*(this[_0x2a6a94(0x156)]+this['_lineSpacing']),this[_0x2a6a94(0x1a4)]=0x5,this[_0x2a6a94(0x189)]=0x3,this['_canvasWidth']=Math[_0x2a6a94(0x1cc)](this[_0x2a6a94(0xfa)]+this[_0x2a6a94(0x1a4)]*0x2),this[_0x2a6a94(0xc4)]=Math[_0x2a6a94(0x1cc)](this[_0x2a6a94(0xa9)]+this['_paddingtop']),this[_0x2a6a94(0x94)][_0x2a6a94(0x111)]=this['_canvasWidth'],this[_0x2a6a94(0x94)][_0x2a6a94(0x113)]=this[_0x2a6a94(0xc4)],this[_0x2a6a94(0x114)][_0x2a6a94(0x1a9)]=this[_0x2a6a94(0xf4)],this[_0x2a6a94(0x114)][_0x2a6a94(0xe1)]=_0x2a6a94(0xbb);}[_0x12778f(0x170)](_0x43be79){const _0x4711cb=_0x12778f;this[_0x4711cb(0x194)]=_0x43be79[_0x4711cb(0x1b5)]('\x0a'),this[_0x4711cb(0x114)][_0x4711cb(0x101)]=_0x4711cb(0x163),this[_0x4711cb(0x114)][_0x4711cb(0xe9)](0x0,0x0,this[_0x4711cb(0xa3)],this[_0x4711cb(0xc4)]),this['_textContext'][_0x4711cb(0x13a)](0x0,0x0,this[_0x4711cb(0xa3)],this['_canvasHeight']),this[_0x4711cb(0x114)][_0x4711cb(0x101)]=_0x4711cb(0x133),this[_0x4711cb(0x194)][_0x4711cb(0x1c2)]((_0x1698f7,_0x13e4b0)=>{const _0x5b09ad=_0x4711cb,_0x21c7ae=this[_0x5b09ad(0x1a4)],_0x1e338e=this[_0x5b09ad(0x189)]+_0x13e4b0*(this['_fontSize']+this[_0x5b09ad(0x108)]);this[_0x5b09ad(0x114)]['fillText'](_0x1698f7,_0x21c7ae,_0x1e338e);});}}class SceneObject{static [_0x12778f(0xa0)]=0x0;constructor(_0x21ed35,_0xf21619){const _0x478682=_0x12778f;if(this[_0x478682(0x143)]==SceneObject)throw new Error(_0x478682(0x15f));this[_0x478682(0x197)]=_0x21ed35,this['_canvasFormat']=_0xf21619,SceneObject[_0x478682(0xa0)]+=0x1;}[_0x12778f(0x106)](){const _0x471ddf=_0x12778f;return this[_0x471ddf(0x143)][_0x471ddf(0x159)]+'\x20'+SceneObject['_objectCnt']['toString']();}async[_0x12778f(0x1a1)](){const _0x253927=_0x12778f;await this[_0x253927(0x9e)](),await this['createShaders'](),await this[_0x253927(0x1c5)](),await this[_0x253927(0x97)]();}async['createGeometry'](){const _0x3dda60=_0x12778f;throw new Error(_0x3dda60(0x1b0));}[_0x12778f(0x17b)](){}[_0x12778f(0x167)](_0x2d59fd){return new Promise((_0xc91f1c,_0x2b2a15)=>{const _0x3b54ec=_0x49de,_0x16125a=new XMLHttpRequest();_0x16125a[_0x3b54ec(0x11b)](_0x3b54ec(0xf6),_0x2d59fd),_0x16125a['setRequestHeader'](_0x3b54ec(0x128),'no-cache,\x20no-store,\x20max-age=0'),_0x16125a[_0x3b54ec(0x15a)]=function(){const _0x58a52d=_0x3b54ec;_0x16125a[_0x58a52d(0x15d)]===XMLHttpRequest[_0x58a52d(0x1c7)]&&_0x16125a['status']===0xc8?_0xc91f1c(_0x16125a[_0x58a52d(0x18b)]):_0x2b2a15({'status':_0x16125a['status'],'statusText':_0x16125a[_0x58a52d(0x10b)]});},_0x16125a[_0x3b54ec(0xeb)]=function(){const _0x1cbfa2=_0x3b54ec;_0x2b2a15({'status':_0x16125a[_0x1cbfa2(0x14f)],'statusText':_0x16125a[_0x1cbfa2(0x10b)]});},_0x16125a[_0x3b54ec(0x100)]();});}async['createShaders'](){const _0x26aa4c=_0x12778f;throw new Error(_0x26aa4c(0xf7));}async['createRenderPipeline'](){throw new Error('Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.');}[_0x12778f(0xdf)](_0x2213ab){const _0x351cae=_0x12778f;throw new Error(_0x351cae(0x13c));}async[_0x12778f(0x97)](){const _0x3702a1=_0x12778f;throw new Error(_0x3702a1(0x11c));}['compute'](_0x19a36c){const _0x5768a9=_0x12778f;throw new Error(_0x5768a9(0xde));}}class RayTracingObject extends SceneObject{async['createGeometry'](){}async[_0x12778f(0x92)](){const _0x5b1b8c=_0x12778f;let _0x5d0b3=await this[_0x5b1b8c(0x167)](_0x5b1b8c(0x1ad));this[_0x5b1b8c(0x1c6)]=this[_0x5b1b8c(0x197)]['createShaderModule']({'label':_0x5b1b8c(0x1c3)+this['getName'](),'code':_0x5d0b3});}[_0x12778f(0x17b)](){}async[_0x12778f(0x1c5)](){}['render'](_0x44d46c){}async[_0x12778f(0x97)](){const _0x2ec61b=_0x12778f;this[_0x2ec61b(0x16d)]=this[_0x2ec61b(0x197)][_0x2ec61b(0x97)]({'label':_0x2ec61b(0xff)+this[_0x2ec61b(0x106)](),'layout':_0x2ec61b(0x118),'compute':{'module':this[_0x2ec61b(0x1c6)],'entryPoint':_0x2ec61b(0xfd)}});}[_0x12778f(0x17e)](_0x4099d9){const _0x9d61ed=_0x12778f;this[_0x9d61ed(0xac)]=this[_0x9d61ed(0x197)][_0x9d61ed(0x17e)]({'label':_0x9d61ed(0x103),'layout':this[_0x9d61ed(0x16d)][_0x9d61ed(0x152)](0x0),'entries':[{'binding':0x0,'resource':_0x4099d9[_0x9d61ed(0x1b7)]()}]}),this[_0x9d61ed(0xb7)]=Math[_0x9d61ed(0x1cc)](_0x4099d9[_0x9d61ed(0x111)]),this[_0x9d61ed(0x9d)]=Math[_0x9d61ed(0x1cc)](_0x4099d9[_0x9d61ed(0x113)]);}[_0x12778f(0x136)](_0x7858a7){const _0x2f4942=_0x12778f;_0x7858a7[_0x2f4942(0x1b3)](this[_0x2f4942(0x16d)]),_0x7858a7[_0x2f4942(0x1c1)](0x0,this[_0x2f4942(0xac)]),_0x7858a7[_0x2f4942(0x11f)](Math[_0x2f4942(0x1cc)](this[_0x2f4942(0xb7)]/0x10),Math[_0x2f4942(0x1cc)](this[_0x2f4942(0x9d)]/0x10));}}class UnitCube{constructor(){const _0x336031=_0x12778f;this[_0x336031(0xcf)]=new Float32Array(Array(0x8)[_0x336031(0x19b)](0x0)),this[_0x336031(0xb1)]=new Float32Array(Array(0x4)['fill'](0x1)),this['_front']=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x336031(0xce)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_left']=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x336031(0x145)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x336031(0x1a5)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x336031(0x12b)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x12778f(0x15b)](_0x858749){const _0x5f0098=_0x12778f;for(let _0x58cbdd=0x0;_0x58cbdd<0x8;++_0x58cbdd)this[_0x5f0098(0xcf)][_0x58cbdd]=_0x858749[_0x58cbdd];}}function _0x49de(_0x34c894,_0x38f61c){const _0x529981=_0x5299();return _0x49de=function(_0x49def8,_0x59b4c7){_0x49def8=_0x49def8-0x8e;let _0x654138=_0x529981[_0x49def8];return _0x654138;},_0x49de(_0x34c894,_0x38f61c);}function _0x5299(){const _0x174c32=['replace','34976FwVgWC','linear','Texture\x20','Toon','_envnzTexture','createShaders','createTexture','_textCanvas','hidden','_canvas','createComputePipeline','rotate','toggleVisibility','Directional','devicePixelRatio','updateTextRegion','_wgHeight','createGeometry','writeBuffer','_objectCnt','_front','getPreferredCanvasFormat','_canvasWidth','269540uLnysS','finish','_envnxTexture','/assets/envnegz.jpg','/assets/envnegx.jpg','_height','read-only-storage','_goldBitmap','_bindGroup','initial','fps:\x20','_envnx','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','_scales','Box\x20','_envpxTexture','_sampler','16QZJyeH','/assets/envposy.jpg','_wgWidth','none','Ray\x20Tracer\x20Pipeline','_tracer','top','Green','Red','key','_sphereBuffer','/assets/gold.png','_direction','_envnyTexture','map','_canvasHeight','updateTextureParam','/assets/envposz.jpg','</br>','_context','_lightTexture','_envny','_intensity','vertexMain','message','_back','_pose','updateCylinderPose','/shaders/optimized_tracedemotexturebox2.wgsl','canvas','Ray\x20Trace\x20Box\x20Layout\x20','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','White','updateCameraFocal','_envpxBitmap','updateCylinderScales','createBuffer','updateCubePose','innerHTML','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','Ray\x20Tracer\x20Shader','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','render','_envpx','textBaseline','clear','setTracerObject','keyup','body','updateBoxPose','_envpy','gpu','clearRect','1084624oMTpsl','onerror','_gold','_cylinderBuffer','_imgWidth','transformOrigin','???????????','Lambertian','resize','_isProjective','_textFont','touchstart','GET','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','cos','_width','updateSize','Cylinder\x20','computeMain','updateCubeScales','Ray\x20Tracing\x20Pipeline\x20','send','fillStyle','_offScreenTexture','Ray\x20Tracing\x20Bind\x20Group','STORAGE','COPY_DST','getName','RENDER_ATTACHMENT','_lineSpacing','_metal','Cone\x20','statusText','beginRenderPass','center','_imgHeight','_box','createCommandEncoder','width','Ray\x20Tracer\x20Sampler','height','_textContext','mouseup','_boxBuffer','border','auto','decode','moveY','open','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','Emit\x20only','Ray\x20Trace\x20Box\x20Bind\x20Group\x201','dispatchWorkgroups','applyPoseToPoint','Couldn\x27t\x20request\x20WebGPU\x20adapter.','now','_cubeOffset','48nfWqoU','end','resizeCanvas','_bindGroupLayout2','Cache-Control','_bindGroup1','/assets/normal.jpg','_down','_metalBitmap','Phong','/assets/metal.jpg','10px','21pLenNT','copyExternalImageToTexture','127329fVIcPr','white','updateSphereScales','createElement','compute','updateSpherePose','_showTexture','_envpz','fillRect','bind','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','webgpu','TEXTURE_BINDING','style','configure','_envpyTexture','createShaderModule','constructor','_envpzTexture','_right','setProperty','touchend','Light\x20','renderToSelectedView','submit','pointer-events','getContext','position','absolute','status','left','_envnxBitmap','getBindGroupLayout','rotateX','length','updateParam','_fontSize','_clearColor','rotateY','name','onload','updatePose','??????????','readyState','appendSceneObject','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','998190YwoZOh','beginComputePass','_textureParams','rgba(1,\x201,\x201,\x200.5)','_cone','applyPoseToDir','_light','loadShader','mouseenter','updateConeScales','1983231pBQaJJ','_canvasFormat','addEventListener','_computePipeline','_cylinder','updateCameraPose','updateText','Ray\x20Trace\x20Box\x20Bind\x20Group\x202','_envpzBitmap','_coneBuffer','_position','requestDevice','byteLength','rotateZ','_bindGroup2','resetPose','getCurrentTexture','updateGeometry','_cameraBuffer','rgba8unorm','createBindGroup','18px\x20Arial','innerHeight','createPipelineLayout','src','_cube','_attenuation','moveZ','3433630xSwoKG','moveX','_outputSizeBuffer','_paddingtop','_envnzBitmap','responseText','queue','_pipeline','_metalTexture','renderCanvas','float','_objects','_lightBitmap','_envnz','_lines','updateConePose','_goldTexture','_device','updateBoxScales','_lightBuffer','COMPUTE','fill','Spotlight','sqrt','then','mousemove','right','init','_envpyBitmap','_left','_paddingx','_top','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0ag/G:\x20Change\x20sphere\x20shininess\x0ay/Y:\x20Show/Hide\x20Cube\x20Map\x0at/T:\x20Show/Hide\x20Texture\x0ab/B:\x20Show/Hide\x20Bump\x20Map\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','UNIFORM','sin','font','_camera','_focal','userAgent','/shaders/optimized_tracenothing.wgsl','appendChild','updateLight','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','Ray\x20Tracer\x20output\x20size\x20buffer','store','setPipeline','innerWidth','split','translate','createView','getElementById','_envnyBitmap','_bindGroupLayout1','_params','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','_paramBuffer','_resolutions','_pipelineLayout','log','setBindGroup','forEach','\x20Shader\x20','_sphere','createRenderPipeline','_shaderModule','DONE','_textureParamBuffer','createSampler','Ray\x20Trace\x20Volume\x20Layout\x202\x20','1px\x20solid\x20red','ceil','STORAGE_BINDING','Parameters\x20'];_0x5299=function(){return _0x174c32;};return _0x5299();}class UnitSphere{constructor(){const _0x4ef1ca=_0x12778f;this[_0x4ef1ca(0xcf)]=new Float32Array(Array(0x8)['fill'](0x0)),this[_0x4ef1ca(0xb1)]=new Float32Array(Array(0x4)[_0x4ef1ca(0x19b)](0x1));}}class UnitCylinder{constructor(){const _0x45155e=_0x12778f;this[_0x45155e(0xcf)]=new Float32Array(Array(0x8)[_0x45155e(0x19b)](0x0)),this[_0x45155e(0xb1)]=new Float32Array(Array(0x4)[_0x45155e(0x19b)](0x1));}}class UnitCone{constructor(){const _0x52d402=_0x12778f;this[_0x52d402(0xcf)]=new Float32Array(Array(0x8)['fill'](0x0)),this['_scales']=new Float32Array(Array(0x4)[_0x52d402(0x19b)](0x1));}}class RayTracingTextureDemoSceneObject extends RayTracingObject{constructor(_0x8f0856,_0x56b82d,_0x4a74d8,_0x1a3231=!![]){const _0x5cdcec=_0x12778f;super(_0x8f0856,_0x56b82d),this[_0x5cdcec(0x10f)]=new UnitCube(),this[_0x5cdcec(0x183)]=new UnitCube(),this[_0x5cdcec(0x1c4)]=new UnitSphere(),this['_cylinder']=new UnitCylinder(),this[_0x5cdcec(0x164)]=new UnitCone(),this[_0x5cdcec(0x1aa)]=_0x4a74d8,this[_0x5cdcec(0x138)]=_0x1a3231,this[_0x5cdcec(0x1bb)]=new Int32Array([0x1,0x0,0x0,0x0]),this['_gold']=new Image(),this[_0x5cdcec(0xec)][_0x5cdcec(0x182)]=_0x5cdcec(0xc0),this[_0x5cdcec(0x109)]=new Image(),this[_0x5cdcec(0x109)][_0x5cdcec(0x182)]=_0x5cdcec(0x12e),this[_0x5cdcec(0x166)]=new Image(),this[_0x5cdcec(0x166)]['src']=_0x5cdcec(0x12a),this[_0x5cdcec(0xaf)]=new Image(),this['_envnx']['src']=_0x5cdcec(0xa8),this[_0x5cdcec(0xca)]=new Image(),this[_0x5cdcec(0xca)][_0x5cdcec(0x182)]='/assets/envnegy.jpg',this[_0x5cdcec(0x193)]=new Image(),this['_envnz'][_0x5cdcec(0x182)]=_0x5cdcec(0xa7),this[_0x5cdcec(0xe0)]=new Image(),this[_0x5cdcec(0xe0)][_0x5cdcec(0x182)]='/assets/envposx.jpg',this['_envpy']=new Image(),this[_0x5cdcec(0xe7)][_0x5cdcec(0x182)]=_0x5cdcec(0xb6),this[_0x5cdcec(0x139)]=new Image(),this[_0x5cdcec(0x139)][_0x5cdcec(0x182)]=_0x5cdcec(0xc6),this[_0x5cdcec(0x162)]=new Int32Array([0x1,0x1,0x1,0x0]);}async[_0x12778f(0x9e)](){const _0x1a612c=_0x12778f;this['_cameraBuffer']=this[_0x1a612c(0x197)][_0x1a612c(0xd9)]({'label':'Camera\x20'+this['getName'](),'size':this[_0x1a612c(0x1aa)][_0x1a612c(0xcf)][_0x1a612c(0x176)]+this[_0x1a612c(0x1aa)][_0x1a612c(0x1ab)][_0x1a612c(0x176)]+this['_camera'][_0x1a612c(0x1be)][_0x1a612c(0x176)],'usage':GPUBufferUsage[_0x1a612c(0x1a7)]|GPUBufferUsage['COPY_DST']}),this['_device'][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x17c)],0x0,this[_0x1a612c(0x1aa)][_0x1a612c(0xcf)]),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x17c)],this[_0x1a612c(0x1aa)]['_pose'][_0x1a612c(0x176)],this[_0x1a612c(0x1aa)][_0x1a612c(0x1ab)]),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x17c)],this[_0x1a612c(0x1aa)][_0x1a612c(0xcf)]['byteLength']+this[_0x1a612c(0x1aa)][_0x1a612c(0x1ab)]['byteLength'],this[_0x1a612c(0x1aa)][_0x1a612c(0x1be)]),this[_0x1a612c(0x116)]=this[_0x1a612c(0x197)][_0x1a612c(0xd9)]({'label':_0x1a612c(0xb2)+this['getName'](),'size':(this['_box'][_0x1a612c(0xcf)][_0x1a612c(0x176)]+this[_0x1a612c(0x10f)][_0x1a612c(0xb1)][_0x1a612c(0x176)]+this['_box'][_0x1a612c(0x1a5)][_0x1a612c(0x176)]*0x6)*0x2,'usage':GPUBufferUsage[_0x1a612c(0x104)]|GPUBufferUsage[_0x1a612c(0x105)]});let _0x5084e7=0x0;this[_0x1a612c(0x197)][_0x1a612c(0x18c)]['writeBuffer'](this[_0x1a612c(0x116)],_0x5084e7,this['_box'][_0x1a612c(0xcf)]),_0x5084e7+=this[_0x1a612c(0x10f)][_0x1a612c(0xcf)]['byteLength'],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this['_boxBuffer'],_0x5084e7,this[_0x1a612c(0x10f)]['_scales']),_0x5084e7+=this['_box'][_0x1a612c(0xb1)][_0x1a612c(0x176)],this[_0x1a612c(0x197)]['queue']['writeBuffer'](this[_0x1a612c(0x116)],_0x5084e7,this['_box'][_0x1a612c(0xa1)]),_0x5084e7+=this[_0x1a612c(0x10f)]['_front'][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)]['writeBuffer'](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x10f)]['_back']),_0x5084e7+=this[_0x1a612c(0x10f)][_0x1a612c(0xce)]['byteLength'],this[_0x1a612c(0x197)]['queue'][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x10f)][_0x1a612c(0x1a3)]),_0x5084e7+=this['_box']['_left'][_0x1a612c(0x176)],this['_device']['queue'][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x10f)][_0x1a612c(0x145)]),_0x5084e7+=this[_0x1a612c(0x10f)][_0x1a612c(0x145)][_0x1a612c(0x176)],this[_0x1a612c(0x197)]['queue']['writeBuffer'](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x10f)][_0x1a612c(0x1a5)]),_0x5084e7+=this['_box'][_0x1a612c(0x1a5)]['byteLength'],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this['_box']['_down']),_0x5084e7+=this['_box'][_0x1a612c(0x12b)][_0x1a612c(0x176)],this[_0x1a612c(0x123)]=_0x5084e7,this[_0x1a612c(0x197)]['queue']['writeBuffer'](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)]['_pose']),_0x5084e7+=this[_0x1a612c(0x183)][_0x1a612c(0xcf)][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this['_cube'][_0x1a612c(0xb1)]),_0x5084e7+=this[_0x1a612c(0x183)][_0x1a612c(0xb1)][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)][_0x1a612c(0xa1)]),_0x5084e7+=this['_cube'][_0x1a612c(0xa1)][_0x1a612c(0x176)],this['_device'][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)]['_back']),_0x5084e7+=this['_cube'][_0x1a612c(0xce)][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)]['_left']),_0x5084e7+=this[_0x1a612c(0x183)][_0x1a612c(0x1a3)]['byteLength'],this[_0x1a612c(0x197)]['queue'][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)][_0x1a612c(0x145)]),_0x5084e7+=this[_0x1a612c(0x183)][_0x1a612c(0x145)][_0x1a612c(0x176)],this['_device'][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)][_0x1a612c(0x1a5)]),_0x5084e7+=this[_0x1a612c(0x183)][_0x1a612c(0x1a5)]['byteLength'],this[_0x1a612c(0x197)]['queue'][_0x1a612c(0x9f)](this[_0x1a612c(0x116)],_0x5084e7,this[_0x1a612c(0x183)][_0x1a612c(0x12b)]),this['_sphereBuffer']=this[_0x1a612c(0x197)]['createBuffer']({'label':'Sphere\x20'+this['getName'](),'size':this['_sphere'][_0x1a612c(0xcf)][_0x1a612c(0x176)]+this[_0x1a612c(0x1c4)]['_scales'][_0x1a612c(0x176)],'usage':GPUBufferUsage[_0x1a612c(0x104)]|GPUBufferUsage[_0x1a612c(0x105)]}),_0x5084e7=0x0,this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0xbf)],_0x5084e7,this[_0x1a612c(0x1c4)][_0x1a612c(0xcf)]),_0x5084e7+=this[_0x1a612c(0x1c4)][_0x1a612c(0xcf)][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0xbf)],_0x5084e7,this[_0x1a612c(0x1c4)][_0x1a612c(0xb1)]),this[_0x1a612c(0x173)]=this[_0x1a612c(0x197)][_0x1a612c(0xd9)]({'label':_0x1a612c(0x10a)+this[_0x1a612c(0x106)](),'size':this['_cone']['_pose'][_0x1a612c(0x176)]+this[_0x1a612c(0x164)][_0x1a612c(0xb1)][_0x1a612c(0x176)],'usage':GPUBufferUsage[_0x1a612c(0x104)]|GPUBufferUsage[_0x1a612c(0x105)]}),_0x5084e7=0x0,this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x173)],_0x5084e7,this[_0x1a612c(0x164)][_0x1a612c(0xcf)]),_0x5084e7+=this[_0x1a612c(0x164)]['_pose'][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x173)],_0x5084e7,this[_0x1a612c(0x164)][_0x1a612c(0xb1)]),this[_0x1a612c(0xed)]=this[_0x1a612c(0x197)][_0x1a612c(0xd9)]({'label':_0x1a612c(0xfc)+this[_0x1a612c(0x106)](),'size':this[_0x1a612c(0x16e)]['_pose'][_0x1a612c(0x176)]+this[_0x1a612c(0x16e)][_0x1a612c(0xb1)][_0x1a612c(0x176)],'usage':GPUBufferUsage[_0x1a612c(0x104)]|GPUBufferUsage['COPY_DST']}),_0x5084e7=0x0,this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0xed)],_0x5084e7,this[_0x1a612c(0x16e)]['_pose']),_0x5084e7+=this['_cylinder'][_0x1a612c(0xcf)][_0x1a612c(0x176)],this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0xed)],_0x5084e7,this[_0x1a612c(0x16e)][_0x1a612c(0xb1)]),this[_0x1a612c(0x1bd)]=this[_0x1a612c(0x197)]['createBuffer']({'label':_0x1a612c(0x1ce)+this[_0x1a612c(0x106)](),'size':this[_0x1a612c(0x1bb)][_0x1a612c(0x176)],'usage':GPUBufferUsage[_0x1a612c(0x1a7)]|GPUBufferUsage[_0x1a612c(0x105)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x1bd)],0x0,this[_0x1a612c(0x1bb)]),this[_0x1a612c(0x199)]=this[_0x1a612c(0x197)]['createBuffer']({'label':_0x1a612c(0x148)+this[_0x1a612c(0x106)](),'size':0x14*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage[_0x1a612c(0x1a7)]|GPUBufferUsage[_0x1a612c(0x105)]}),await this['_gold'][_0x1a612c(0x119)](),this[_0x1a612c(0xab)]=await createImageBitmap(this[_0x1a612c(0xec)]),this[_0x1a612c(0x196)]=this[_0x1a612c(0x197)][_0x1a612c(0x93)]({'label':'Texture\x20'+this[_0x1a612c(0x106)](),'size':[this[_0x1a612c(0xab)][_0x1a612c(0x111)],this[_0x1a612c(0xab)][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)]['queue']['copyExternalImageToTexture']({'source':this[_0x1a612c(0xab)]},{'texture':this[_0x1a612c(0x196)]},[this[_0x1a612c(0xab)]['width'],this[_0x1a612c(0xab)][_0x1a612c(0x113)]]),await this['_metal'][_0x1a612c(0x119)](),this[_0x1a612c(0x12c)]=await createImageBitmap(this[_0x1a612c(0x109)]),this[_0x1a612c(0x18e)]=this[_0x1a612c(0x197)][_0x1a612c(0x93)]({'label':_0x1a612c(0x8f)+this[_0x1a612c(0x106)](),'size':[this['_metalBitmap']['width'],this[_0x1a612c(0x12c)][_0x1a612c(0x113)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage[_0x1a612c(0x13e)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)]['queue'][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x12c)]},{'texture':this[_0x1a612c(0x18e)]},[this[_0x1a612c(0x12c)][_0x1a612c(0x111)],this[_0x1a612c(0x12c)][_0x1a612c(0x113)]]),await this[_0x1a612c(0x166)]['decode'](),this[_0x1a612c(0x192)]=await createImageBitmap(this[_0x1a612c(0x166)]),this['_lightTexture']=this['_device'][_0x1a612c(0x93)]({'label':_0x1a612c(0x8f)+this[_0x1a612c(0x106)](),'size':[this[_0x1a612c(0x192)][_0x1a612c(0x111)],this['_lightBitmap'][_0x1a612c(0x113)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this['_device'][_0x1a612c(0x18c)]['copyExternalImageToTexture']({'source':this[_0x1a612c(0x192)]},{'texture':this[_0x1a612c(0xc9)]},[this[_0x1a612c(0x192)][_0x1a612c(0x111)],this[_0x1a612c(0x192)][_0x1a612c(0x113)]]),await this[_0x1a612c(0xaf)][_0x1a612c(0x119)](),this[_0x1a612c(0x151)]=await createImageBitmap(this['_envnx']),this[_0x1a612c(0xa6)]=this[_0x1a612c(0x197)][_0x1a612c(0x93)]({'label':'Texture\x20'+this[_0x1a612c(0x106)](),'size':[this[_0x1a612c(0x151)][_0x1a612c(0x111)],this[_0x1a612c(0x151)][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage[_0x1a612c(0x13e)]|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x151)]},{'texture':this['_envnxTexture']},[this['_envnxBitmap'][_0x1a612c(0x111)],this[_0x1a612c(0x151)][_0x1a612c(0x113)]]),await this[_0x1a612c(0xca)][_0x1a612c(0x119)](),this[_0x1a612c(0x1b9)]=await createImageBitmap(this['_envny']),this[_0x1a612c(0xc2)]=this[_0x1a612c(0x197)][_0x1a612c(0x93)]({'label':_0x1a612c(0x8f)+this[_0x1a612c(0x106)](),'size':[this['_envnyBitmap']['width'],this[_0x1a612c(0x1b9)][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x1b9)]},{'texture':this[_0x1a612c(0xc2)]},[this['_envnyBitmap'][_0x1a612c(0x111)],this['_envnyBitmap']['height']]),await this['_envnz']['decode'](),this[_0x1a612c(0x18a)]=await createImageBitmap(this[_0x1a612c(0x193)]),this[_0x1a612c(0x91)]=this[_0x1a612c(0x197)]['createTexture']({'label':_0x1a612c(0x8f)+this[_0x1a612c(0x106)](),'size':[this[_0x1a612c(0x18a)][_0x1a612c(0x111)],this['_envnzBitmap'][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this['_device'][_0x1a612c(0x18c)][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x18a)]},{'texture':this[_0x1a612c(0x91)]},[this[_0x1a612c(0x18a)]['width'],this[_0x1a612c(0x18a)][_0x1a612c(0x113)]]),await this[_0x1a612c(0xe0)][_0x1a612c(0x119)](),this[_0x1a612c(0xd7)]=await createImageBitmap(this[_0x1a612c(0xe0)]),this[_0x1a612c(0xb3)]=this['_device'][_0x1a612c(0x93)]({'label':_0x1a612c(0x8f)+this['getName'](),'size':[this[_0x1a612c(0xd7)][_0x1a612c(0x111)],this[_0x1a612c(0xd7)][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x131)]({'source':this[_0x1a612c(0xd7)]},{'texture':this[_0x1a612c(0xb3)]},[this[_0x1a612c(0xd7)][_0x1a612c(0x111)],this['_envpxBitmap'][_0x1a612c(0x113)]]),await this[_0x1a612c(0xe7)][_0x1a612c(0x119)](),this[_0x1a612c(0x1a2)]=await createImageBitmap(this[_0x1a612c(0xe7)]),this['_envpyTexture']=this[_0x1a612c(0x197)][_0x1a612c(0x93)]({'label':_0x1a612c(0x8f)+this[_0x1a612c(0x106)](),'size':[this[_0x1a612c(0x1a2)][_0x1a612c(0x111)],this[_0x1a612c(0x1a2)]['height'],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage[_0x1a612c(0x13e)]|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x1a2)]},{'texture':this[_0x1a612c(0x141)]},[this[_0x1a612c(0x1a2)][_0x1a612c(0x111)],this['_envpyBitmap'][_0x1a612c(0x113)]]),await this[_0x1a612c(0x139)][_0x1a612c(0x119)](),this[_0x1a612c(0x172)]=await createImageBitmap(this[_0x1a612c(0x139)]),this[_0x1a612c(0x144)]=this[_0x1a612c(0x197)]['createTexture']({'label':_0x1a612c(0x8f)+this['getName'](),'size':[this[_0x1a612c(0x172)][_0x1a612c(0x111)],this['_envpzBitmap'][_0x1a612c(0x113)],0x1],'format':_0x1a612c(0x17d),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x1a612c(0x105)]|GPUTextureUsage[_0x1a612c(0x107)]}),this[_0x1a612c(0x197)]['queue'][_0x1a612c(0x131)]({'source':this[_0x1a612c(0x172)]},{'texture':this[_0x1a612c(0x144)]},[this[_0x1a612c(0x172)]['width'],this[_0x1a612c(0x172)][_0x1a612c(0x113)]]),this[_0x1a612c(0xb4)]=this[_0x1a612c(0x197)][_0x1a612c(0x1c9)]({'magFilter':_0x1a612c(0x8e),'minFilter':_0x1a612c(0x8e)}),this[_0x1a612c(0x1c8)]=this[_0x1a612c(0x197)][_0x1a612c(0xd9)]({'label':_0x1a612c(0x1ce)+this[_0x1a612c(0x106)](),'size':this[_0x1a612c(0x162)][_0x1a612c(0x176)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x1a612c(0x105)]}),this[_0x1a612c(0x197)][_0x1a612c(0x18c)][_0x1a612c(0x9f)](this[_0x1a612c(0x1c8)],0x0,this[_0x1a612c(0x162)]);}[_0x12778f(0x17b)](){const _0x21a30b=_0x12778f;this[_0x21a30b(0x1aa)][_0x21a30b(0xfb)](this[_0x21a30b(0xee)],this['_imgHeight']),this[_0x21a30b(0x197)][_0x21a30b(0x18c)][_0x21a30b(0x9f)](this[_0x21a30b(0x17c)],this['_camera'][_0x21a30b(0xcf)][_0x21a30b(0x176)]+this[_0x21a30b(0x1aa)][_0x21a30b(0x1ab)][_0x21a30b(0x176)],this[_0x21a30b(0x1aa)][_0x21a30b(0x1be)]);}[_0x12778f(0xe6)](){const _0x324f21=_0x12778f;this[_0x324f21(0x197)][_0x324f21(0x18c)][_0x324f21(0x9f)](this[_0x324f21(0x116)],0x0,this[_0x324f21(0x10f)]['_pose']);}[_0x12778f(0x198)](){const _0x2b72ba=_0x12778f;this['_device'][_0x2b72ba(0x18c)]['writeBuffer'](this['_boxBuffer'],this[_0x2b72ba(0x10f)][_0x2b72ba(0xcf)][_0x2b72ba(0x176)],this[_0x2b72ba(0x10f)][_0x2b72ba(0xb1)]);}[_0x12778f(0xda)](){const _0x2d7de0=_0x12778f;this[_0x2d7de0(0x197)][_0x2d7de0(0x18c)][_0x2d7de0(0x9f)](this[_0x2d7de0(0x116)],this[_0x2d7de0(0x123)],this[_0x2d7de0(0x183)][_0x2d7de0(0xcf)]);}[_0x12778f(0xfe)](){const _0x50a79a=_0x12778f;this[_0x50a79a(0x197)][_0x50a79a(0x18c)][_0x50a79a(0x9f)](this[_0x50a79a(0x116)],this[_0x50a79a(0x123)]+this[_0x50a79a(0x183)][_0x50a79a(0xcf)][_0x50a79a(0x176)],this['_cube'][_0x50a79a(0xb1)]);}[_0x12778f(0x137)](){const _0x3b006f=_0x12778f;this[_0x3b006f(0x197)]['queue'][_0x3b006f(0x9f)](this[_0x3b006f(0xbf)],0x0,this[_0x3b006f(0x1c4)][_0x3b006f(0xcf)]);}['updateSphereScales'](){const _0x442b53=_0x12778f;this[_0x442b53(0x197)]['queue'][_0x442b53(0x9f)](this[_0x442b53(0xbf)],this[_0x442b53(0x1c4)][_0x442b53(0xcf)][_0x442b53(0x176)],this[_0x442b53(0x1c4)][_0x442b53(0xb1)]);}[_0x12778f(0x195)](){const _0x29ca38=_0x12778f;this[_0x29ca38(0x197)]['queue'][_0x29ca38(0x9f)](this['_coneBuffer'],0x0,this[_0x29ca38(0x164)][_0x29ca38(0xcf)]);}[_0x12778f(0x169)](){const _0x41c9bd=_0x12778f;this['_device']['queue']['writeBuffer'](this['_coneBuffer'],this['_cone']['_pose'][_0x41c9bd(0x176)],this[_0x41c9bd(0x164)]['_scales']);}[_0x12778f(0xd0)](){const _0x786c6e=_0x12778f;this[_0x786c6e(0x197)][_0x786c6e(0x18c)]['writeBuffer'](this[_0x786c6e(0xed)],0x0,this[_0x786c6e(0x16e)]['_pose']);}[_0x12778f(0xd8)](){const _0x5cd2e4=_0x12778f;this[_0x5cd2e4(0x197)][_0x5cd2e4(0x18c)][_0x5cd2e4(0x9f)](this[_0x5cd2e4(0xed)],this[_0x5cd2e4(0x16e)][_0x5cd2e4(0xcf)]['byteLength'],this['_cylinder']['_scales']);}['updateCameraPose'](){const _0x3a9719=_0x12778f;this[_0x3a9719(0x197)][_0x3a9719(0x18c)][_0x3a9719(0x9f)](this['_cameraBuffer'],0x0,this[_0x3a9719(0x1aa)][_0x3a9719(0xcf)]);}['updateCameraFocal'](){const _0x4722a8=_0x12778f;this[_0x4722a8(0x197)][_0x4722a8(0x18c)][_0x4722a8(0x9f)](this['_cameraBuffer'],this[_0x4722a8(0x1aa)][_0x4722a8(0xcf)][_0x4722a8(0x176)],this['_camera'][_0x4722a8(0x1ab)]);}[_0x12778f(0x155)](){const _0x43d625=_0x12778f;this['_device'][_0x43d625(0x18c)][_0x43d625(0x9f)](this[_0x43d625(0x1bd)],0x0,this[_0x43d625(0x1bb)]);}[_0x12778f(0xc5)](){const _0x1e5a34=_0x12778f;this['_device'][_0x1e5a34(0x18c)][_0x1e5a34(0x9f)](this[_0x1e5a34(0x1c8)],0x0,this[_0x1e5a34(0x162)]);}[_0x12778f(0x1af)](_0x47fe7a){const _0x3c7820=_0x12778f;let _0x3fbe94=0x0;this[_0x3c7820(0x197)][_0x3c7820(0x18c)][_0x3c7820(0x9f)](this[_0x3c7820(0x199)],_0x3fbe94,_0x47fe7a[_0x3c7820(0xcb)]),_0x3fbe94+=_0x47fe7a[_0x3c7820(0xcb)][_0x3c7820(0x176)],this['_device'][_0x3c7820(0x18c)][_0x3c7820(0x9f)](this[_0x3c7820(0x199)],_0x3fbe94,_0x47fe7a[_0x3c7820(0x174)]),_0x3fbe94+=_0x47fe7a[_0x3c7820(0x174)][_0x3c7820(0x176)],this[_0x3c7820(0x197)][_0x3c7820(0x18c)][_0x3c7820(0x9f)](this['_lightBuffer'],_0x3fbe94,_0x47fe7a[_0x3c7820(0xc1)]),_0x3fbe94+=_0x47fe7a[_0x3c7820(0xc1)][_0x3c7820(0x176)],this[_0x3c7820(0x197)][_0x3c7820(0x18c)]['writeBuffer'](this[_0x3c7820(0x199)],_0x3fbe94,_0x47fe7a[_0x3c7820(0x184)]),_0x3fbe94+=_0x47fe7a[_0x3c7820(0x184)][_0x3c7820(0x176)],this['_device'][_0x3c7820(0x18c)][_0x3c7820(0x9f)](this[_0x3c7820(0x199)],_0x3fbe94,_0x47fe7a[_0x3c7820(0x1bb)]);}async['createShaders'](){const _0x35965d=_0x12778f;let _0x494743=await this[_0x35965d(0x167)](_0x35965d(0xd1));this['_shaderModule']=this['_device']['createShaderModule']({'label':'\x20Shader\x20'+this['getName'](),'code':_0x494743}),this[_0x35965d(0x1ba)]=this[_0x35965d(0x197)]['createBindGroupLayout']({'label':_0x35965d(0xd3)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{'type':_0x35965d(0xaa)}},{'binding':0x2,'visibility':GPUShaderStage[_0x35965d(0x19a)],'storageTexture':{'format':this[_0x35965d(0x16b)]}},{'binding':0x3,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{'type':'read-only-storage'}},{'binding':0x4,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{'type':_0x35965d(0xaa)}},{'binding':0x5,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x35965d(0xaa)}},{'binding':0x6,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{}},{'binding':0x8,'visibility':GPUShaderStage[_0x35965d(0x19a)],'buffer':{}}]}),this[_0x35965d(0x127)]=this[_0x35965d(0x197)]['createBindGroupLayout']({'label':_0x35965d(0x1ca)+this[_0x35965d(0x106)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x1,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x2,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':'float'}},{'binding':0x3,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x4,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x5,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':'float'}},{'binding':0x6,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x7,'visibility':GPUShaderStage[_0x35965d(0x19a)],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x8,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x35965d(0x190)}},{'binding':0x9,'visibility':GPUShaderStage['COMPUTE'],'sampler':{}}]}),this[_0x35965d(0x1bf)]=this[_0x35965d(0x197)][_0x35965d(0x181)]({'label':_0x35965d(0xdc),'bindGroupLayouts':[this[_0x35965d(0x1ba)],this['_bindGroupLayout2']]});}async[_0x12778f(0x97)](){const _0x3b2d2a=_0x12778f;this[_0x3b2d2a(0x16d)]=this[_0x3b2d2a(0x197)][_0x3b2d2a(0x97)]({'label':_0x3b2d2a(0xd4)+this[_0x3b2d2a(0x106)](),'layout':this[_0x3b2d2a(0x1bf)],'compute':{'module':this[_0x3b2d2a(0x1c6)],'entryPoint':_0x3b2d2a(0xfd)}});}['createBindGroup'](_0x1839d4){const _0x337d05=_0x12778f;this[_0x337d05(0x129)]=this['_device']['createBindGroup']({'label':_0x337d05(0x11e),'layout':this['_computePipeline'][_0x337d05(0x152)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_cameraBuffer']}},{'binding':0x1,'resource':{'buffer':this[_0x337d05(0x116)]}},{'binding':0x2,'resource':_0x1839d4[_0x337d05(0x1b7)]()},{'binding':0x3,'resource':{'buffer':this[_0x337d05(0xbf)]}},{'binding':0x4,'resource':{'buffer':this[_0x337d05(0x173)]}},{'binding':0x5,'resource':{'buffer':this[_0x337d05(0xed)]}},{'binding':0x6,'resource':{'buffer':this[_0x337d05(0x1bd)]}},{'binding':0x7,'resource':{'buffer':this[_0x337d05(0x199)]}},{'binding':0x8,'resource':{'buffer':this[_0x337d05(0x1c8)]}}]}),this[_0x337d05(0x178)]=this[_0x337d05(0x197)][_0x337d05(0x17e)]({'label':_0x337d05(0x171),'layout':this['_computePipeline'][_0x337d05(0x152)](0x1),'entries':[{'binding':0x0,'resource':this['_goldTexture']['createView']()},{'binding':0x1,'resource':this['_metalTexture'][_0x337d05(0x1b7)]()},{'binding':0x2,'resource':this['_lightTexture'][_0x337d05(0x1b7)]()},{'binding':0x3,'resource':this[_0x337d05(0xa6)][_0x337d05(0x1b7)]()},{'binding':0x4,'resource':this[_0x337d05(0xc2)][_0x337d05(0x1b7)]()},{'binding':0x5,'resource':this[_0x337d05(0x91)][_0x337d05(0x1b7)]()},{'binding':0x6,'resource':this[_0x337d05(0xb3)][_0x337d05(0x1b7)]()},{'binding':0x7,'resource':this[_0x337d05(0x141)][_0x337d05(0x1b7)]()},{'binding':0x8,'resource':this['_envpzTexture'][_0x337d05(0x1b7)]()},{'binding':0x9,'resource':this[_0x337d05(0xb4)]}]}),this['_wgWidth']=Math[_0x337d05(0x1cc)](_0x1839d4[_0x337d05(0x111)]),this[_0x337d05(0x9d)]=Math[_0x337d05(0x1cc)](_0x1839d4[_0x337d05(0x113)]);}[_0x12778f(0x136)](_0x319476){const _0xbdcd8f=_0x12778f;_0x319476[_0xbdcd8f(0x1b3)](this[_0xbdcd8f(0x16d)]),_0x319476['setBindGroup'](0x0,this[_0xbdcd8f(0x129)]),_0x319476[_0xbdcd8f(0x1c1)](0x1,this[_0xbdcd8f(0x178)]),_0x319476[_0xbdcd8f(0x11f)](Math[_0xbdcd8f(0x1cc)](this[_0xbdcd8f(0xb7)]/0x10),Math[_0xbdcd8f(0x1cc)](this[_0xbdcd8f(0x9d)]/0x10));}}class Math3D{static[_0x12778f(0x1b6)](_0x5f03f0,_0x26c434=0x0,_0x247f0f=0x0,_0x5474a2=0x0){return[_0x5f03f0[0x0]+_0x26c434,_0x5f03f0[0x1]+_0x247f0f,_0x5f03f0[0x2]+_0x5474a2];}static[_0x12778f(0x98)](_0x4fcf4b,_0x24f160,_0x4f927c){const _0x5c09fb=_0x12778f;let _0x407b44=Math[_0x5c09fb(0xf9)](_0x4f927c),_0x437555=Math[_0x5c09fb(0x1a8)](_0x4f927c);switch(_0x24f160){case 0x0:return[_0x4fcf4b[0x0],_0x4fcf4b[0x1]*_0x407b44-_0x4fcf4b[0x2]*_0x437555,_0x4fcf4b[0x1]*_0x437555+_0x4fcf4b[0x2]*_0x407b44];case 0x1:return[_0x4fcf4b[0x0]*_0x407b44+_0x4fcf4b[0x2]*_0x437555,_0x4fcf4b[0x1],-_0x4fcf4b[0x0]*_0x437555+_0x4fcf4b[0x2]*_0x407b44];case 0x2:return[_0x4fcf4b[0x0]*_0x407b44-_0x4fcf4b[0x1]*_0x437555,_0x4fcf4b[0x0]*_0x437555+_0x4fcf4b[0x1]*_0x407b44,_0x4fcf4b[0x2]];default:return _0x4fcf4b;}}static[_0x12778f(0x120)](_0x382100,_0x4fb169){const _0x26b55d=_0x12778f;return _0x382100=Math3D[_0x26b55d(0x98)](_0x382100,0x0,_0x4fb169[0x4]),_0x382100=Math3D[_0x26b55d(0x98)](_0x382100,0x1,_0x4fb169[0x5]),_0x382100=Math3D[_0x26b55d(0x98)](_0x382100,0x2,_0x4fb169[0x6]),_0x382100=Math3D[_0x26b55d(0x1b6)](_0x382100,_0x4fb169[0x0],_0x4fb169[0x1],_0x4fb169[0x2]),_0x382100;}static[_0x12778f(0x165)](_0x1447fa,_0x1852b0){const _0xaeee3c=_0x12778f;return _0x1447fa=Math3D[_0xaeee3c(0x98)](_0x1447fa,0x0,_0x1852b0[0x4]),_0x1447fa=Math3D[_0xaeee3c(0x98)](_0x1447fa,0x1,_0x1852b0[0x5]),_0x1447fa=Math3D[_0xaeee3c(0x98)](_0x1447fa,0x2,_0x1852b0[0x6]),_0x1447fa;}static[_0x12778f(0x120)](_0x5b3e0d,_0xb3842c){const _0x212cbb=_0x12778f;return _0x5b3e0d=Math3D['translate'](_0x5b3e0d,-_0xb3842c[0x0],-_0xb3842c[0x1],-_0xb3842c[0x2]),_0x5b3e0d=Math3D['rotate'](_0x5b3e0d,0x2,-_0xb3842c[0x6]),_0x5b3e0d=Math3D[_0x212cbb(0x98)](_0x5b3e0d,0x1,-_0xb3842c[0x5]),_0x5b3e0d=Math3D['rotate'](_0x5b3e0d,0x0,-_0xb3842c[0x4]),_0x5b3e0d;}static[_0x12778f(0x165)](_0x3940e9,_0x4e3281){const _0x28e0c8=_0x12778f;return _0x3940e9=Math3D[_0x28e0c8(0x98)](_0x3940e9,0x2,-_0x4e3281[0x6]),_0x3940e9=Math3D[_0x28e0c8(0x98)](_0x3940e9,0x1,-_0x4e3281[0x5]),_0x3940e9=Math3D[_0x28e0c8(0x98)](_0x3940e9,0x0,-_0x4e3281[0x4]),_0x3940e9;}}class Camera{constructor(_0x5ee6b5,_0x5d72dc){const _0x56b9c9=_0x12778f;this['_pose']=new Float32Array(Array(0x8)[_0x56b9c9(0x19b)](0x0)),this['_focal']=new Float32Array(Array(0x2)[_0x56b9c9(0x19b)](0x1)),this[_0x56b9c9(0x1be)]=new Float32Array([_0x5ee6b5,_0x5d72dc]),this[_0x56b9c9(0xf3)]=![];}[_0x12778f(0x179)](){const _0x5c43f1=_0x12778f;for(let _0x59abe2=0x0;_0x59abe2<0x8;++_0x59abe2)this[_0x5c43f1(0xcf)][_0x59abe2]=0x0;this[_0x5c43f1(0x1ab)][0x0]=0x1,this[_0x5c43f1(0x1ab)][0x1]=0x1;}[_0x12778f(0x15b)](_0xe9f9b3){for(let _0x5377ae=0x0;_0x5377ae<0x8;++_0x5377ae)this['_pose'][_0x5377ae]=_0xe9f9b3[_0x5377ae];}[_0x12778f(0xfb)](_0x2f6ed0,_0x5dbee0){const _0x5a9ef0=_0x12778f;this[_0x5a9ef0(0x1be)][0x0]=_0x2f6ed0,this[_0x5a9ef0(0x1be)][0x1]=_0x5dbee0;}['moveX'](_0x5304a4){const _0x17d55d=_0x12778f;let _0x70295d=Math3D['applyPoseToDir']([0x1,0x0,0x0],this[_0x17d55d(0xcf)]);this[_0x17d55d(0xcf)][0x0]+=_0x5304a4*_0x70295d[0x0],this['_pose'][0x1]-=_0x5304a4*_0x70295d[0x1],this[_0x17d55d(0xcf)][0x2]-=_0x5304a4*_0x70295d[0x2];}[_0x12778f(0x11a)](_0x3dc57a){const _0x3325f0=_0x12778f;let _0x10bc7f=Math3D[_0x3325f0(0x165)]([0x0,0x1,0x0],this[_0x3325f0(0xcf)]);this[_0x3325f0(0xcf)][0x0]+=_0x3dc57a*_0x10bc7f[0x0],this[_0x3325f0(0xcf)][0x1]+=_0x3dc57a*_0x10bc7f[0x1],this[_0x3325f0(0xcf)][0x2]+=_0x3dc57a*_0x10bc7f[0x2];}[_0x12778f(0x185)](_0x31f19e){const _0x5b256e=_0x12778f;let _0x26eb78=Math3D[_0x5b256e(0x165)]([0x0,0x0,0x1],this[_0x5b256e(0xcf)]);this[_0x5b256e(0xcf)][0x0]+=_0x31f19e*_0x26eb78[0x0],this[_0x5b256e(0xcf)][0x1]-=_0x31f19e*_0x26eb78[0x1],this[_0x5b256e(0xcf)][0x2]+=_0x31f19e*_0x26eb78[0x2];}['rotateX'](_0x49b1b0){this['_pose'][0x4]+=_0x49b1b0;}[_0x12778f(0x158)](_0x592d19){this['_pose'][0x5]+=_0x592d19;}['rotateZ'](_0x3024e7){const _0x39d07=_0x12778f;this[_0x39d07(0xcf)][0x6]+=_0x3024e7;}}class Light{constructor(){const _0x4e38f8=_0x12778f;this[_0x4e38f8(0xcb)]=new Float32Array(Array(0x4)['fill'](0x0)),this[_0x4e38f8(0x174)]=new Float32Array(Array(0x4)['fill'](0x0)),this[_0x4e38f8(0xc1)]=new Float32Array(Array(0x4)[_0x4e38f8(0x19b)](0x0)),this[_0x4e38f8(0x184)]=new Float32Array(Array(0x4)[_0x4e38f8(0x19b)](0x0)),this['_attenuation'][0x0]=0x1,this[_0x4e38f8(0x1bb)]=new Float32Array(Array(0x4)[_0x4e38f8(0x19b)](0x0));}}class PointLight extends Light{constructor(_0x300d17=[0x1,0x1,0x1],_0x20216f=[0x0,0x0,0x0],_0x44f476=[0x1,0.1,0.01]){const _0x338ab6=_0x12778f;super();for(let _0x1aac76=0x0;_0x1aac76<0x3;++_0x1aac76){this[_0x338ab6(0xcb)][_0x1aac76]=_0x300d17[_0x1aac76],this[_0x338ab6(0x174)][_0x1aac76]=_0x20216f[_0x1aac76],this['_attenuation'][_0x1aac76]=_0x44f476[_0x1aac76];}}}class RectangularLight extends Light{constructor(_0x495dfa=[0x1,0x1,0x1],_0x20b8c4=[0x0,0x0,0x0],_0x475667=[0x1,0.5,0.5],_0x6fe57a=0.1,_0x4fe390=0.1){const _0x404f8b=_0x12778f;super();for(let _0x2c26d2=0x0;_0x2c26d2<0x3;++_0x2c26d2){this[_0x404f8b(0xcb)][_0x2c26d2]=_0x495dfa[_0x2c26d2],this[_0x404f8b(0x174)][_0x2c26d2]=_0x20b8c4[_0x2c26d2],this[_0x404f8b(0x184)][_0x2c26d2]=_0x475667[_0x2c26d2];}this[_0x404f8b(0x1bb)][0x0]=_0x6fe57a,this[_0x404f8b(0x1bb)][0x1]=_0x4fe390;}}class SphericalLight extends Light{constructor(_0x11f7e5=[0x1,0x1,0x1],_0x393f8e=[0x0,0x0,0x0],_0x365c6e=[0x1,0.5,0.5],_0x2f6b31=0.1){const _0xdc4edf=_0x12778f;super();for(let _0x387954=0x0;_0x387954<0x3;++_0x387954){this[_0xdc4edf(0xcb)][_0x387954]=_0x11f7e5[_0x387954],this[_0xdc4edf(0x174)][_0x387954]=_0x393f8e[_0x387954],this[_0xdc4edf(0x184)][_0x387954]=_0x365c6e[_0x387954];}this[_0xdc4edf(0x1bb)][0x0]=_0x2f6b31;}}class DirectionalLight extends Light{constructor(_0x543fc1=[0x1,0x1,0x1],_0x625aad=[Math[_0x12778f(0x19d)](0x3),Math[_0x12778f(0x19d)](0x3),Math[_0x12778f(0x19d)](0x3)]){const _0x277c90=_0x12778f;super();for(let _0x5625b4=0x0;_0x5625b4<0x3;++_0x5625b4){this[_0x277c90(0xcb)][_0x5625b4]=_0x543fc1[_0x5625b4],this[_0x277c90(0xc1)][_0x5625b4]=_0x625aad[_0x5625b4];}}}class SpotLight extends Light{constructor(_0x59ed6d=[0x1,0x1,0x1],_0x21e82d=[0x0,0x0,0x0],_0x353fda=[0x0,0x1,0x0],_0x326c64=[0x1,0.1,0.01],_0x18f81b=0.785,_0xea9125=0x5){const _0x51dbf9=_0x12778f;super();for(let _0x4cdba7=0x0;_0x4cdba7<0x3;++_0x4cdba7){this[_0x51dbf9(0xcb)][_0x4cdba7]=_0x59ed6d[_0x4cdba7],this[_0x51dbf9(0x174)][_0x4cdba7]=_0x21e82d[_0x4cdba7],this[_0x51dbf9(0xc1)][_0x4cdba7]=_0x353fda[_0x4cdba7],this[_0x51dbf9(0x184)][_0x4cdba7]=_0x326c64[_0x4cdba7];}this[_0x51dbf9(0x1bb)][0x0]=_0x18f81b,this['_params'][0x1]=_0xea9125;}}async function init(){const _0x83b11c=_0x12778f,_0x264911=document[_0x83b11c(0x135)](_0x83b11c(0xd2));_0x264911['id']=_0x83b11c(0x18f),document[_0x83b11c(0xe5)][_0x83b11c(0x1ae)](_0x264911);const _0x5ab3d4=new RayTracer(_0x264911);await _0x5ab3d4[_0x83b11c(0x1a1)]();var _0xb9c07f=new Camera(),_0x18b63a=new RayTracingTextureDemoSceneObject(_0x5ab3d4['_device'],_0x5ab3d4[_0x83b11c(0x16b)],_0xb9c07f);await _0x5ab3d4[_0x83b11c(0xe3)](_0x18b63a),_0x18b63a['_box'][_0x83b11c(0xcf)][0x2]=0.4*0x2,_0x18b63a[_0x83b11c(0xe6)](),_0x18b63a[_0x83b11c(0x10f)]['_scales'][0x0]=0x2,_0x18b63a[_0x83b11c(0x10f)]['_scales'][0x1]=1.25,_0x18b63a[_0x83b11c(0x10f)][_0x83b11c(0xb1)][0x2]=0x2,_0x18b63a['updateBoxScales'](),_0x18b63a[_0x83b11c(0x183)][_0x83b11c(0xb1)][0x0]=0.3,_0x18b63a['_cube'][_0x83b11c(0xb1)][0x1]=0.5,_0x18b63a[_0x83b11c(0x183)][_0x83b11c(0xb1)][0x2]=0.3,_0x18b63a[_0x83b11c(0xfe)](),_0x18b63a[_0x83b11c(0x183)][_0x83b11c(0xcf)][0x0]=-0.25*0x2,_0x18b63a['_cube'][_0x83b11c(0xcf)][0x1]=0.1875*0x2,_0x18b63a[_0x83b11c(0x183)]['_pose'][0x2]=0.5*0x2,_0x18b63a[_0x83b11c(0xda)](),_0x18b63a[_0x83b11c(0x1c4)]['_scales'][0x0]=0.25,_0x18b63a[_0x83b11c(0x1c4)][_0x83b11c(0xb1)][0x1]=0.25,_0x18b63a[_0x83b11c(0x1c4)][_0x83b11c(0xb1)][0x2]=0.25,_0x18b63a[_0x83b11c(0x134)](),_0x18b63a[_0x83b11c(0x1c4)]['_pose'][0x0]=0.225*0x2,_0x18b63a[_0x83b11c(0x1c4)][_0x83b11c(0xcf)][0x1]=0.1875*0x2,_0x18b63a[_0x83b11c(0x1c4)]['_pose'][0x2]=0.6*0x2,_0x18b63a[_0x83b11c(0x137)](),_0x18b63a['_cylinder'][_0x83b11c(0xb1)][0x0]=0.2,_0x18b63a['_cylinder']['_scales'][0x1]=1.25,_0x18b63a['_cylinder']['_scales'][0x2]=0.2,_0x18b63a[_0x83b11c(0xd8)](),_0x18b63a[_0x83b11c(0x16e)]['_pose'][0x1]=-0.3125*0x2,_0x18b63a[_0x83b11c(0x16e)]['_pose'][0x2]=0.75*0x2,_0x18b63a['updateCylinderPose'](),_0x18b63a[_0x83b11c(0x164)][_0x83b11c(0xb1)][0x0]=0.2,_0x18b63a['_cone']['_scales'][0x1]=-0.6,_0x18b63a[_0x83b11c(0x164)]['_scales'][0x2]=0.2,_0x18b63a[_0x83b11c(0x169)](),_0x18b63a[_0x83b11c(0x164)][_0x83b11c(0xcf)][0x0]=0.05*0x2,_0x18b63a['_cone'][_0x83b11c(0xcf)][0x1]=0.3125*0x2,_0x18b63a[_0x83b11c(0x164)][_0x83b11c(0xcf)][0x2]=0.4*0x2,_0x18b63a[_0x83b11c(0x195)]();var _0x387f51=_0x83b11c(0x1a6),_0x2ffa56=new StandardTextObject(_0x387f51);let _0x558c87='??';var _0x1a571f=new StandardTextObject(_0x83b11c(0xae)+_0x558c87),_0x48d1c2=0.05;_0x18b63a[_0x83b11c(0x1bb)][0x1]=0x0;var _0x44862b=['Point',_0x83b11c(0x9a),_0x83b11c(0x19c)];_0x18b63a['_params'][0x2]=0x0;var _0x37767e=[_0x83b11c(0x11d),_0x83b11c(0xf1),_0x83b11c(0x12d),_0x83b11c(0x90)];_0x18b63a[_0x83b11c(0x1bb)][0x3]=0x19;var _0x2a4e3f=0x3,_0x7d5249=[_0x83b11c(0xbd),_0x83b11c(0xbc),'Blue',_0x83b11c(0xd5)];_0x387f51=_0x387f51[_0x83b11c(0x1cf)](_0x83b11c(0xf0),_0x44862b[_0x18b63a['_params'][0x1]]),_0x387f51=_0x387f51['replace'](_0x83b11c(0x15c),_0x37767e[_0x18b63a[_0x83b11c(0x1bb)][0x2]]),_0x387f51=_0x387f51[_0x83b11c(0x1cf)]('?????',_0x7d5249[_0x2a4e3f]),_0x2ffa56['updateText'](_0x387f51);var _0x303d73=null;let _0x418a0a=async()=>{const _0xeedd1f=_0x83b11c;switch(_0x18b63a[_0xeedd1f(0x1bb)][0x1]){case 0x0:_0x303d73=new PointLight();break;case 0x1:_0x303d73=new DirectionalLight();break;case 0x2:_0x303d73=new SpotLight();break;case 0x3:_0x303d73=new RectangularLight();break;case 0x4:_0x303d73=new SphericalLight();break;}switch(_0x2a4e3f){case 0x0:_0x303d73[_0xeedd1f(0xcb)][0x1]=0x0,_0x303d73[_0xeedd1f(0xcb)][0x2]=0x0;break;case 0x1:_0x303d73[_0xeedd1f(0xcb)][0x0]=0x0,_0x303d73[_0xeedd1f(0xcb)][0x2]=0x0;break;case 0x2:_0x303d73['_intensity'][0x0]=0x0,_0x303d73[_0xeedd1f(0xcb)][0x1]=0x0;break;}_0x303d73[_0xeedd1f(0x174)][0x1]=-0.624,_0x303d73[_0xeedd1f(0x174)][0x2]=0.75;};await _0x418a0a(),_0x18b63a['updateLight'](_0x303d73);let _0x190864=async()=>{const _0x5018af=_0x83b11c;_0x18b63a[_0x5018af(0x162)][0x0]?(_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x0]=0x1000,_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x1]=0x1000,_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x2]=0x1000,_0x18b63a[_0x5018af(0x198)]()):(_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x0]=0x2,_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x1]=1.25,_0x18b63a[_0x5018af(0x10f)]['_scales'][0x2]=0x2,_0x18b63a[_0x5018af(0x198)](),_0x18b63a[_0x5018af(0x10f)]['_pose'][0x2]=0.4*_0x18b63a[_0x5018af(0x10f)][_0x5018af(0xb1)][0x2],_0x18b63a[_0x5018af(0xe6)]());};await _0x190864(),window[_0x83b11c(0x16c)]('keydown',async _0x3d5a94=>{const _0x36949d=_0x83b11c;switch(_0x3d5a94[_0x36949d(0xbe)]){case'h':case'H':_0x2ffa56[_0x36949d(0x99)]();break;case'f':case'F':_0x1a571f['toggleVisibility']();break;case'w':case'W':_0xb9c07f[_0x36949d(0x11a)](-_0x48d1c2),_0x18b63a['updateCameraPose']();break;case's':case'S':_0xb9c07f['moveY'](_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'a':case'A':_0xb9c07f['moveX'](-_0x48d1c2),_0x18b63a['updateCameraPose']();break;case'd':case'D':_0xb9c07f[_0x36949d(0x187)](_0x48d1c2),_0x18b63a['updateCameraPose']();break;case'q':case'Q':_0xb9c07f[_0x36949d(0x185)](-_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'e':case'E':_0xb9c07f[_0x36949d(0x185)](_0x48d1c2),_0x18b63a['updateCameraPose']();break;case'i':case'I':_0xb9c07f['rotateX'](-_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'k':case'K':_0xb9c07f[_0x36949d(0x153)](_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'j':case'J':_0xb9c07f[_0x36949d(0x158)](_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'l':case'L':_0xb9c07f[_0x36949d(0x158)](-_0x48d1c2),_0x18b63a['updateCameraPose']();break;case'u':case'U':_0xb9c07f[_0x36949d(0x177)](-_0x48d1c2),_0x18b63a['updateCameraPose']();break;case'o':case'O':_0xb9c07f[_0x36949d(0x177)](_0x48d1c2),_0x18b63a[_0x36949d(0x16f)]();break;case'c':case'C':_0x18b63a['_params'][0x0]=!_0x18b63a['_params'][0x0],_0x18b63a['updateParam']();break;case'r':case'R':_0xb9c07f[_0x36949d(0x179)](),_0x18b63a[_0x36949d(0x16f)](),_0x18b63a[_0x36949d(0xd6)]();break;case'[':_0xb9c07f[_0x36949d(0x1ab)][0x0]*=1.1,_0x18b63a[_0x36949d(0xd6)]();break;case']':_0xb9c07f[_0x36949d(0x1ab)][0x0]/=1.1,_0x18b63a[_0x36949d(0xd6)]();break;case'{':_0xb9c07f['_focal'][0x1]*=1.1,_0x18b63a[_0x36949d(0xd6)]();break;case'}':_0xb9c07f[_0x36949d(0x1ab)][0x1]/=1.1,_0x18b63a[_0x36949d(0xd6)]();break;case'n':case'N':let _0x3aef4b=(_0x18b63a[_0x36949d(0x1bb)][0x1]+0x1)%_0x44862b[_0x36949d(0x154)];_0x387f51=_0x387f51[_0x36949d(0x1cf)](_0x44862b[_0x18b63a[_0x36949d(0x1bb)][0x1]],_0x44862b[_0x3aef4b]),_0x2ffa56[_0x36949d(0x170)](_0x387f51),_0x18b63a[_0x36949d(0x1bb)][0x1]=_0x3aef4b,await _0x418a0a(),_0x18b63a[_0x36949d(0x155)](),_0x18b63a[_0x36949d(0x1af)](_0x303d73);break;case'm':case'M':let _0x454a4b=(_0x18b63a[_0x36949d(0x1bb)][0x2]+0x1)%_0x37767e[_0x36949d(0x154)];_0x387f51=_0x387f51[_0x36949d(0x1cf)](_0x37767e[_0x18b63a[_0x36949d(0x1bb)][0x2]],_0x37767e[_0x454a4b]),_0x2ffa56[_0x36949d(0x170)](_0x387f51),_0x18b63a[_0x36949d(0x1bb)][0x2]=_0x454a4b,_0x18b63a[_0x36949d(0x155)]();break;case'v':case'V':let _0x7d75ee=(_0x2a4e3f+0x1)%_0x7d5249['length'];_0x387f51=_0x387f51[_0x36949d(0x1cf)](_0x7d5249[_0x2a4e3f],_0x7d5249[_0x7d75ee]),_0x2ffa56[_0x36949d(0x170)](_0x387f51),_0x2a4e3f=_0x7d75ee,await _0x418a0a(),_0x18b63a[_0x36949d(0x1af)](_0x303d73);break;case'g':_0x18b63a[_0x36949d(0x1bb)][0x3]=_0x18b63a[_0x36949d(0x1bb)][0x3]+0x1,_0x18b63a['updateParam']();break;case'G':_0x18b63a[_0x36949d(0x1bb)][0x3]=_0x18b63a['_params'][0x3]-0x1;if(_0x18b63a['_params'][0x3]<0x1)_0x18b63a[_0x36949d(0x1bb)][0x3]=0x1;_0x18b63a['updateParam']();break;case'y':case'Y':_0x18b63a['_textureParams'][0x0]=!_0x18b63a[_0x36949d(0x162)][0x0],_0x18b63a[_0x36949d(0xc5)](),await _0x190864();break;case't':case'T':_0x18b63a[_0x36949d(0x162)][0x1]=!_0x18b63a['_textureParams'][0x1],_0x18b63a[_0x36949d(0xc5)]();break;case'b':case'B':_0x18b63a['_textureParams'][0x2]=!_0x18b63a['_textureParams'][0x2],_0x18b63a[_0x36949d(0xc5)]();break;}}),window[_0x83b11c(0x16c)](_0x83b11c(0xe4),_0x468c52=>{});let _0x240ed8=async _0x35fafd=>{},_0x29bbab=async _0x315689=>{},_0x4b7a92=_0x25284b=>{};_0x264911['addEventListener']('mousedown',_0x240ed8),_0x264911[_0x83b11c(0x16c)](_0x83b11c(0x19f),_0x29bbab),_0x264911[_0x83b11c(0x16c)](_0x83b11c(0x115),_0x4b7a92),_0x264911[_0x83b11c(0x16c)](_0x83b11c(0x168),_0x101b66=>{}),_0x264911[_0x83b11c(0x16c)]('mouseleave',_0x277854=>{}),_0x264911[_0x83b11c(0x16c)](_0x83b11c(0xf5),_0x240ed8),_0x264911[_0x83b11c(0x16c)]('touchmove',_0x29bbab),_0x264911['addEventListener'](_0x83b11c(0x147),_0x4b7a92),_0x2ffa56[_0x83b11c(0x94)][_0x83b11c(0x13f)]['setProperty'](_0x83b11c(0x14b),_0x83b11c(0xb8)),_0x1a571f['_textCanvas']['style'][_0x83b11c(0x146)]('pointer-events',_0x83b11c(0xb8));var _0x3921f4=0x0,_0x1e5575=0x3c,_0x15e44a=0x1/_0x1e5575,_0x554828=_0x15e44a*0x3e8,_0x3b5e6e;let _0x3016c9=()=>{const _0x211c43=_0x83b11c;let _0x571a2d=Date['now']()-_0x3b5e6e;_0x571a2d>_0x554828&&(++_0x3921f4,_0x3b5e6e=Date[_0x211c43(0x122)]()-_0x571a2d%_0x554828,_0x5ab3d4[_0x211c43(0xdf)]()),requestAnimationFrame(_0x3016c9);};return _0x3b5e6e=Date['now'](),_0x3016c9(),_0x1a571f[_0x83b11c(0x94)][_0x83b11c(0x13f)][_0x83b11c(0x146)]('left',_0x83b11c(0xad)),_0x1a571f[_0x83b11c(0x94)][_0x83b11c(0x13f)][_0x83b11c(0x1a0)]=_0x83b11c(0x12f),setInterval(()=>{const _0x2d7baa=_0x83b11c;_0x558c87=_0x3921f4,_0x3921f4=0x0,_0x1a571f['updateText'](_0x2d7baa(0xae)+_0x558c87);},0x3e8),_0x5ab3d4;}init()[_0x12778f(0x19e)](_0x578e33=>{const _0x1ece1f=_0x12778f;console[_0x1ece1f(0x1c0)](_0x578e33);})['catch'](_0x2894de=>{const _0x521774=_0x12778f,_0x18ab29=document[_0x521774(0x135)]('p');_0x18ab29[_0x521774(0xdb)]=navigator[_0x521774(0x1ac)]+_0x521774(0xc7)+_0x2894de[_0x521774(0xcd)],document['body']['appendChild'](_0x18ab29),document[_0x521774(0x1b8)](_0x521774(0x18f))['remove']();});
