/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x132d88=_0xba02;(function(_0x7df9f7,_0x7db524){const _0x7854ad=_0xba02,_0x356027=_0x7df9f7();while(!![]){try{const _0x3d9cd9=parseInt(_0x7854ad(0x1c1))/0x1+parseInt(_0x7854ad(0xef))/0x2*(parseInt(_0x7854ad(0x178))/0x3)+-parseInt(_0x7854ad(0x11a))/0x4*(-parseInt(_0x7854ad(0x183))/0x5)+parseInt(_0x7854ad(0x193))/0x6+parseInt(_0x7854ad(0xbb))/0x7*(-parseInt(_0x7854ad(0x156))/0x8)+parseInt(_0x7854ad(0xab))/0x9+-parseInt(_0x7854ad(0x11b))/0xa*(parseInt(_0x7854ad(0xb8))/0xb);if(_0x3d9cd9===_0x7db524)break;else _0x356027['push'](_0x356027['shift']());}catch(_0x4032ac){_0x356027['push'](_0x356027['shift']());}}}(_0x7a13,0xa775d));class Renderer{constructor(_0x2b381f){const _0x3ef1bb=_0xba02;this[_0x3ef1bb(0xaa)]=_0x2b381f,this[_0x3ef1bb(0x100)]=[],this[_0x3ef1bb(0x174)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x132d88(0x135)](){const _0x13f686=_0x132d88;if(!navigator[_0x13f686(0x115)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x5b85b6=await navigator[_0x13f686(0x115)][_0x13f686(0x12e)]();if(!_0x5b85b6)throw Error(_0x13f686(0x17f));this[_0x13f686(0x16c)]=await _0x5b85b6[_0x13f686(0xfd)](),this[_0x13f686(0x108)]=this[_0x13f686(0xaa)][_0x13f686(0x172)](_0x13f686(0xb1)),this[_0x13f686(0xf0)]=navigator[_0x13f686(0x115)]['getPreferredCanvasFormat'](),this[_0x13f686(0x108)][_0x13f686(0x109)]({'device':this[_0x13f686(0x16c)],'format':this[_0x13f686(0xf0)]}),this[_0x13f686(0x190)](),window[_0x13f686(0x170)](_0x13f686(0x1b6),this[_0x13f686(0x190)][_0x13f686(0x105)](this));}['resizeCanvas'](){const _0x28a06a=_0x132d88,_0xd34a68=window[_0x28a06a(0x149)]||0x1,_0x5cd4dc=window[_0x28a06a(0x10d)]*_0xd34a68,_0x91d542=window['innerHeight']*_0xd34a68;this[_0x28a06a(0xaa)][_0x28a06a(0x16f)]=_0x5cd4dc,this['_canvas'][_0x28a06a(0xba)]=_0x91d542,this[_0x28a06a(0xaa)][_0x28a06a(0x14e)][_0x28a06a(0x16f)]=window[_0x28a06a(0x10d)]+'px',this[_0x28a06a(0xaa)]['style'][_0x28a06a(0xba)]=window['innerHeight']+'px',this['_canvas'][_0x28a06a(0x14e)]['transformOrigin']=_0x28a06a(0xbc),this[_0x28a06a(0xb7)]();}async[_0x132d88(0x152)](_0x3d8501){const _0x1ac5c1=_0x132d88;await _0x3d8501[_0x1ac5c1(0x135)](),this[_0x1ac5c1(0x100)]['push'](_0x3d8501);}[_0x132d88(0x1b1)](_0x1a56f0){const _0x2814cf=_0x132d88;for(const _0x1b351f of this['_objects']){_0x1b351f?.[_0x2814cf(0x131)]();}let _0x58fc0d=this[_0x2814cf(0x16c)]['createCommandEncoder']();const _0x5e94df=_0x58fc0d[_0x2814cf(0x1b7)]({'colorAttachments':[{'view':_0x1a56f0,'clearValue':this['_clearColor'],'loadOp':_0x2814cf(0xeb),'storeOp':_0x2814cf(0x142)}]});for(const _0x5b96e5 of this[_0x2814cf(0x100)]){_0x5b96e5?.[_0x2814cf(0xb7)](_0x5e94df);}_0x5e94df['end']();const _0x1c8642=_0x58fc0d[_0x2814cf(0x194)]();for(const _0x47bf3a of this['_objects']){_0x47bf3a?.[_0x2814cf(0x1a3)](_0x1c8642);}_0x1c8642[_0x2814cf(0xcd)]();const _0x3394c0=_0x58fc0d[_0x2814cf(0x111)]();this[_0x2814cf(0x16c)][_0x2814cf(0xe2)][_0x2814cf(0x128)]([_0x3394c0]);}[_0x132d88(0xb7)](){const _0x404607=_0x132d88;this[_0x404607(0x1b1)](this[_0x404607(0x108)]['getCurrentTexture']()[_0x404607(0x161)]());}}class RayTracer extends Renderer{constructor(_0x47f737){const _0x3110e7=_0x132d88;super(_0x47f737),this[_0x3110e7(0x1bf)]=null;}async[_0x132d88(0x135)](){const _0x4b27aa=_0x132d88;if(!navigator[_0x4b27aa(0x115)])throw Error(_0x4b27aa(0xb2));const _0x3879b5=await navigator['gpu']['requestAdapter']();if(!_0x3879b5)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this['_device']=await _0x3879b5[_0x4b27aa(0xfd)](),this[_0x4b27aa(0x108)]=this[_0x4b27aa(0xaa)][_0x4b27aa(0x172)](_0x4b27aa(0xb1)),this[_0x4b27aa(0xf0)]=_0x4b27aa(0xcf),this[_0x4b27aa(0x108)][_0x4b27aa(0x109)]({'device':this['_device'],'format':this[_0x4b27aa(0xf0)]}),this[_0x4b27aa(0x1ab)]=this['_device'][_0x4b27aa(0xf6)]({'label':_0x4b27aa(0xda),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this['_outputSizeBuffer']=this[_0x4b27aa(0x16c)]['createBuffer']({'label':_0x4b27aa(0x18d),'size':0x8,'usage':GPUBufferUsage[_0x4b27aa(0x1be)]|GPUBufferUsage[_0x4b27aa(0x125)]}),this[_0x4b27aa(0xc7)]=this[_0x4b27aa(0x16c)][_0x4b27aa(0xaf)]({'label':_0x4b27aa(0xdd),'layout':_0x4b27aa(0x10a),'vertex':{'module':this[_0x4b27aa(0x1ab)],'entryPoint':_0x4b27aa(0x188)},'fragment':{'module':this[_0x4b27aa(0x1ab)],'entryPoint':_0x4b27aa(0x145),'targets':[{'format':this[_0x4b27aa(0xf0)]}]}}),this['_sampler']=this[_0x4b27aa(0x16c)][_0x4b27aa(0x12a)]({'label':'Ray\x20Tracer\x20Sampler','magFilter':'linear','minFilter':_0x4b27aa(0xc1)}),this['resizeCanvas'](),window[_0x4b27aa(0x170)](_0x4b27aa(0x1b6),this[_0x4b27aa(0x190)][_0x4b27aa(0x105)](this));}[_0x132d88(0x190)](){const _0x10f6c6=_0x132d88,_0x4d344a=window[_0x10f6c6(0x149)]||0x1,_0x55617c=window[_0x10f6c6(0x10d)]*_0x4d344a,_0x7bfd06=window[_0x10f6c6(0x129)]*_0x4d344a,_0xc40263=_0x55617c/_0x7bfd06,_0x520180=_0x7bfd06;let _0x391e88={'width':_0x520180*_0xc40263,'height':_0x520180};this['_offScreenTexture']=this[_0x10f6c6(0x16c)][_0x10f6c6(0xf8)]({'size':_0x391e88,'format':this[_0x10f6c6(0xf0)],'usage':GPUTextureUsage[_0x10f6c6(0xae)]|GPUTextureUsage[_0x10f6c6(0x192)]}),this['_tracer']&&(this[_0x10f6c6(0x1bf)]['_imgWidth']=this[_0x10f6c6(0xb5)]['width'],this[_0x10f6c6(0x1bf)]['_imgHeight']=this[_0x10f6c6(0xb5)][_0x10f6c6(0xba)],this[_0x10f6c6(0x1bf)][_0x10f6c6(0x131)](),this['_tracer'][_0x10f6c6(0x1ac)](this['_offScreenTexture'])),this[_0x10f6c6(0x181)]=this['_device']['createBindGroup']({'label':'Ray\x20Tracer\x20Renderer\x20Bind\x20Group','layout':this['_pipeline'][_0x10f6c6(0x106)](0x0),'entries':[{'binding':0x0,'resource':this[_0x10f6c6(0xb5)][_0x10f6c6(0x161)]()},{'binding':0x1,'resource':this[_0x10f6c6(0x146)]},{'binding':0x2,'resource':{'buffer':this[_0x10f6c6(0x12c)]}}]}),super['resizeCanvas'](),this[_0x10f6c6(0x16c)][_0x10f6c6(0xe2)]['writeBuffer'](this['_outputSizeBuffer'],0x0,new Float32Array([_0x55617c,_0x7bfd06]));}async[_0x132d88(0xb9)](_0x5d1899){const _0x3a60ae=_0x132d88;await _0x5d1899[_0x3a60ae(0x135)](),_0x5d1899['_imgWidth']=this[_0x3a60ae(0xb5)][_0x3a60ae(0x16f)],_0x5d1899[_0x3a60ae(0x11c)]=this[_0x3a60ae(0xb5)][_0x3a60ae(0xba)],_0x5d1899[_0x3a60ae(0x131)](),this['_tracer']=_0x5d1899,this[_0x3a60ae(0x1bf)][_0x3a60ae(0x1ac)](this['_offScreenTexture']);}[_0x132d88(0xb7)](){const _0xbaed72=_0x132d88;if(this[_0xbaed72(0x1bf)]){let _0xee439=this[_0xbaed72(0x16c)]['createCommandEncoder']();const _0x5d84d3=_0xee439[_0xbaed72(0x194)]();this[_0xbaed72(0x1bf)][_0xbaed72(0x1a3)](_0x5d84d3),_0x5d84d3[_0xbaed72(0xcd)](),this[_0xbaed72(0x16c)]['queue']['submit']([_0xee439[_0xbaed72(0x111)]()]);}let _0x3a716d=this[_0xbaed72(0x16c)]['createCommandEncoder']();const _0x2468a1=_0x3a716d[_0xbaed72(0x1b7)]({'colorAttachments':[{'view':this['_context']['getCurrentTexture']()[_0xbaed72(0x161)](),'clearValue':this[_0xbaed72(0x174)],'loadOp':_0xbaed72(0xeb),'storeOp':_0xbaed72(0x142)}]});_0x2468a1[_0xbaed72(0x19f)](this[_0xbaed72(0xc7)]),_0x2468a1[_0xbaed72(0x118)](0x0,this[_0xbaed72(0x181)]),_0x2468a1['draw'](0x6),_0x2468a1[_0xbaed72(0xcd)](),this[_0xbaed72(0x16c)]['queue'][_0xbaed72(0x128)]([_0x3a716d[_0xbaed72(0x111)]()]);}}class StandardTextObject{constructor(_0xce5316,_0x1b6f5c=0x5,_0x8ef44='18px\x20Arial'){const _0x23e159=_0x132d88;this['_textFont']=_0x8ef44,this[_0x23e159(0x116)]=_0x1b6f5c,this[_0x23e159(0x16e)]=document[_0x23e159(0x1a7)](_0x23e159(0x136)),this[_0x23e159(0x121)]=this[_0x23e159(0x16e)][_0x23e159(0x172)]('2d'),this['updateTextRegion'](_0xce5316),this[_0x23e159(0x150)](_0xce5316),this[_0x23e159(0x16e)][_0x23e159(0x14e)][_0x23e159(0x14c)]='absolute',this[_0x23e159(0x16e)]['style'][_0x23e159(0xd8)]=_0x23e159(0x19a),this[_0x23e159(0x16e)][_0x23e159(0x14e)][_0x23e159(0x127)]=_0x23e159(0x19a),this[_0x23e159(0x16e)][_0x23e159(0x14e)][_0x23e159(0x122)]=_0x23e159(0x1a4),document['body']['appendChild'](this[_0x23e159(0x16e)]);}[_0x132d88(0x1b4)](){const _0x529baa=_0x132d88;this[_0x529baa(0x16e)][_0x529baa(0x165)]=!this['_textCanvas']['hidden'];}[_0x132d88(0xd2)](_0x1ef3c0){const _0x34baf9=_0x132d88;this[_0x34baf9(0x121)][_0x34baf9(0x186)]=this[_0x34baf9(0x1bd)],this[_0x34baf9(0x187)]=_0x1ef3c0[_0x34baf9(0xe5)]('\x0a'),this['_width']=Math[_0x34baf9(0x133)](...this[_0x34baf9(0x187)]['map'](_0x3d47f4=>this[_0x34baf9(0x121)][_0x34baf9(0xac)](_0x3d47f4)[_0x34baf9(0x16f)]));const _0x4eb235=this[_0x34baf9(0x1bd)][_0x34baf9(0x12d)](/(\d+)px/);_0x4eb235?this['_fontSize']=parseInt(_0x4eb235[0x1],0xa):(this[_0x34baf9(0x10e)]=0x12,this[_0x34baf9(0x1bd)]=_0x34baf9(0x151)),this[_0x34baf9(0x147)]=this[_0x34baf9(0x187)][_0x34baf9(0xa9)]*(this[_0x34baf9(0x10e)]+this[_0x34baf9(0x116)]),this[_0x34baf9(0x15e)]=0x5,this[_0x34baf9(0x154)]=0x3,this[_0x34baf9(0x195)]=Math[_0x34baf9(0xc6)](this['_width']+this[_0x34baf9(0x15e)]*0x2),this[_0x34baf9(0xad)]=Math['ceil'](this['_height']+this[_0x34baf9(0x154)]),this[_0x34baf9(0x16e)][_0x34baf9(0x16f)]=this[_0x34baf9(0x195)],this['_textCanvas'][_0x34baf9(0xba)]=this[_0x34baf9(0xad)],this[_0x34baf9(0x121)][_0x34baf9(0x186)]=this[_0x34baf9(0x1bd)],this[_0x34baf9(0x121)]['textBaseline']=_0x34baf9(0xd8);}[_0x132d88(0x150)](_0x55f485){const _0x37bde2=_0x132d88;this[_0x37bde2(0x187)]=_0x55f485['split']('\x0a'),this[_0x37bde2(0x121)][_0x37bde2(0x134)]='rgba(1,\x201,\x201,\x200.5)',this['_textContext'][_0x37bde2(0x10f)](0x0,0x0,this['_canvasWidth'],this['_canvasHeight']),this[_0x37bde2(0x121)][_0x37bde2(0xd4)](0x0,0x0,this['_canvasWidth'],this['_canvasHeight']),this['_textContext'][_0x37bde2(0x134)]=_0x37bde2(0x1a9),this[_0x37bde2(0x187)][_0x37bde2(0x143)]((_0x4e08e7,_0x450f2a)=>{const _0x4429ea=_0x37bde2,_0x4c916b=this[_0x4429ea(0x15e)],_0xaa5897=this[_0x4429ea(0x154)]+_0x450f2a*(this[_0x4429ea(0x10e)]+this['_lineSpacing']);this['_textContext'][_0x4429ea(0xde)](_0x4e08e7,_0x4c916b,_0xaa5897);});}}class SceneObject{static [_0x132d88(0xd9)]=0x0;constructor(_0x85fc36,_0x1f9f4c){const _0x1110ea=_0x132d88;if(this[_0x1110ea(0xc9)]==SceneObject)throw new Error(_0x1110ea(0x180));this['_device']=_0x85fc36,this[_0x1110ea(0xf0)]=_0x1f9f4c,SceneObject[_0x1110ea(0xd9)]+=0x1;}[_0x132d88(0x17c)](){const _0x43ac1f=_0x132d88;return this[_0x43ac1f(0xc9)][_0x43ac1f(0x15c)]+'\x20'+SceneObject[_0x43ac1f(0xd9)][_0x43ac1f(0x15d)]();}async[_0x132d88(0x135)](){const _0x10b5da=_0x132d88;await this[_0x10b5da(0x17e)](),await this[_0x10b5da(0x1af)](),await this['createRenderPipeline'](),await this[_0x10b5da(0xc4)]();}async[_0x132d88(0x17e)](){const _0xeb0eaa=_0x132d88;throw new Error(_0xeb0eaa(0xb0));}['updateGeometry'](){}['loadShader'](_0x1e88c9){return new Promise((_0x1e3913,_0x34af7a)=>{const _0x13edca=_0xba02,_0x4c734a=new XMLHttpRequest();_0x4c734a['open'](_0x13edca(0x18e),_0x1e88c9),_0x4c734a[_0x13edca(0x1bb)]('Cache-Control',_0x13edca(0x1ae)),_0x4c734a[_0x13edca(0x15f)]=function(){const _0x4004e8=_0x13edca;_0x4c734a['readyState']===XMLHttpRequest['DONE']&&_0x4c734a[_0x4004e8(0xf3)]===0xc8?_0x1e3913(_0x4c734a['responseText']):_0x34af7a({'status':_0x4c734a[_0x4004e8(0xf3)],'statusText':_0x4c734a[_0x4004e8(0xe6)]});},_0x4c734a[_0x13edca(0x158)]=function(){const _0x9b1e66=_0x13edca;_0x34af7a({'status':_0x4c734a['status'],'statusText':_0x4c734a[_0x9b1e66(0xe6)]});},_0x4c734a['send']();});}async[_0x132d88(0x1af)](){const _0x5b84f4=_0x132d88;throw new Error(_0x5b84f4(0x1c2));}async['createRenderPipeline'](){const _0x9e08f1=_0x132d88;throw new Error(_0x9e08f1(0x1b9));}[_0x132d88(0xb7)](_0x2365e5){const _0x14b610=_0x132d88;throw new Error(_0x14b610(0x1a0));}async[_0x132d88(0xc4)](){const _0x1b4140=_0x132d88;throw new Error(_0x1b4140(0xb3));}['compute'](_0x492296){throw new Error('Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.');}}function _0x7a13(){const _0x528b63=['left','submit','innerHeight','createSampler','short','_outputSizeBuffer','match','requestAdapter','_resolutions','extractPoint','updateGeometry','float','max','fillStyle','init','canvas','createLine','map','Camera\x20','Ray\x20Trace\x20Volume\x20Projective\x20Pipeline\x20','updatePose','replace','fps:\x20','Linear','updateCameraPose','arraybuffer','writeBuffer','store','forEach','DRR','fragmentMain','_sampler','_height','extractTranslator','devicePixelRatio','_bindGroupLayout','moveX','position','_imgWidth','style','abs','updateText','18px\x20Arial','appendSceneObject','/shaders/optimized_tracenothing.wgsl','_paddingtop','????????','2669432eOENZz','createBuffer','onerror','innerHTML','sqrt','revokeObjectURL','name','toString','_paddingx','onload','getInt16','createView','moveZ','motorNorm','Ray\x20Trace\x20Volume\x20Pipeline\x20Layout','hidden','body','dispatchWorkgroups','rotateX','rotateZ','open','getInt8','_device','_volumeBuffer','_textCanvas','width','addEventListener','COMPUTE','getContext','DONE','_clearColor','key','getFloat32','responseType','3GskBtC','STORAGE','updateSize','_volume','getName','getFloat64','createGeometry','Couldn\x27t\x20request\x20WebGPU\x20adapter.','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','_bindGroup','\x20Shader\x20','1640IENwPZ','_filename','_isProjective','font','_lines','vertexMain','right','BYTES_PER_ELEMENT','set','createBindGroupLayout','Ray\x20Tracer\x20output\x20size\x20buffer','GET','reduce','resizeCanvas','data','STORAGE_BINDING','4520244tPlKYk','beginComputePass','_canvasWidth','touchmove','updateCameraFocal','getElementById','pointer-events','10px','appendChild','mousedown','Network\x20error\x20loading\x20volume\x20byte\x20data','/shaders/optimized_tracevolumelinear.wgsl','setPipeline','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_focal','touchstart','compute','1px\x20solid\x20red','userAgent','createRotor','createElement','mouseenter','white','isInside','_shaderModule','createBindGroup','createObjectURL','no-cache,\x20no-store,\x20max-age=0','createShaders','applyMotorToPoint','renderToSelectedView','_sizes','Ray\x20Tracing\x20Bind\x20Group','toggleVisibility','extractRotor','resize','beginRenderPass','response','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','createPlane','setRequestHeader','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0am/M:\x20Change\x20Transfer\x20Function\x20(????????)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','_textFont','UNIFORM','_tracer','readBinary','178097DAULCK','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','length','_canvas','1809360jZokNr','measureText','_canvasHeight','TEXTURE_BINDING','createRenderPipeline','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','webgpu','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20','_offScreenTexture','geometricProduct','render','121781aqOpRC','setTracerObject','height','21yEinBK','center','createTranslator','/assets/brainweb-t1-1mm-pn0-rf0.raws','setProperty','fill','linear','normalizeMotor','applyMotor','createComputePipeline','_computeProjectivePipeline','ceil','_pipeline','_wgHeight','constructor','log','computeMain','href','end','Depth','rgba8unorm','_wgWidth','_computePipeline','updateTextRegion','isLittleEndian','fillRect','keydown','byteLength','computeOrthogonalMain','top','_objectCnt','Ray\x20Tracer\x20Shader','none','_cameraBuffer','Ray\x20Tracer\x20Pipeline','fillText','read','createDir','getUint8','queue','getUint16','resetPose','split','statusText','linePlaneIntersection','Ray\x20Trace\x20Volume\x20Bind\x20Group','_data','_pose','clear','int','rotateY','/shaders/optimized_tracevolumemip.wgsl','580018XylyWk','_canvasFormat','loadShader','createPoint','status','read-only-storage','moveY','createShaderModule','createPipelineLayout','createTexture','/shaders/optimized_tracevolumelineardepth.wgsl','Data\x20','Cinematic','_dims','requestDevice','Ray\x20Trace\x20Volume\x20Layout\x20','computeProjectiveMain','_objects','_camera','mousemove','_dataBuffer','Error\x20loading\x20volume\x20byte\x20data:\x20','bind','getBindGroupLayout','push','_context','configure','auto','initial','Volume\x20','innerWidth','_fontSize','clearRect','write','finish','_pipelineLayout','createPlaneFromPoints','renderCanvas','gpu','_lineSpacing','click','setBindGroup','mouseleave','16456YNGYdp','980MtfwNK','_imgHeight','Simple','double','now','reverse','_textContext','border','download','readBytes','COPY_DST','applyMotorToDir'];_0x7a13=function(){return _0x528b63;};return _0x7a13();}class RayTracingObject extends SceneObject{async[_0x132d88(0x17e)](){}async['createShaders'](){const _0x1ac9b8=_0x132d88;let _0x30861f=await this[_0x1ac9b8(0xf1)](_0x1ac9b8(0x153));this[_0x1ac9b8(0x1ab)]=this[_0x1ac9b8(0x16c)][_0x1ac9b8(0xf6)]({'label':_0x1ac9b8(0x182)+this[_0x1ac9b8(0x17c)](),'code':_0x30861f});}[_0x132d88(0x131)](){}async[_0x132d88(0xaf)](){}[_0x132d88(0xb7)](_0x5f07ed){}async['createComputePipeline'](){const _0x521f87=_0x132d88;this[_0x521f87(0xd1)]=this[_0x521f87(0x16c)][_0x521f87(0xc4)]({'label':'Ray\x20Tracing\x20Pipeline\x20'+this['getName'](),'layout':_0x521f87(0x10a),'compute':{'module':this['_shaderModule'],'entryPoint':_0x521f87(0xcb)}});}[_0x132d88(0x1ac)](_0x43174b){const _0xa8fe9f=_0x132d88;this['_bindGroup']=this[_0xa8fe9f(0x16c)]['createBindGroup']({'label':_0xa8fe9f(0x1b3),'layout':this[_0xa8fe9f(0xd1)][_0xa8fe9f(0x106)](0x0),'entries':[{'binding':0x0,'resource':_0x43174b['createView']()}]}),this[_0xa8fe9f(0xd0)]=Math[_0xa8fe9f(0xc6)](_0x43174b[_0xa8fe9f(0x16f)]),this['_wgHeight']=Math[_0xa8fe9f(0xc6)](_0x43174b[_0xa8fe9f(0xba)]);}[_0x132d88(0x1a3)](_0x3cdbae){const _0xc4db75=_0x132d88;_0x3cdbae['setPipeline'](this[_0xc4db75(0xd1)]),_0x3cdbae[_0xc4db75(0x118)](0x0,this[_0xc4db75(0x181)]),_0x3cdbae[_0xc4db75(0x167)](Math[_0xc4db75(0xc6)](this[_0xc4db75(0xd0)]/0x10),Math[_0xc4db75(0xc6)](this[_0xc4db75(0xc8)]/0x10));}}class VolumeByteIO{constructor(){}static['readBinary'](_0x538837){return new Promise((_0x15f033,_0x4d7d68)=>{const _0x5ecc80=_0xba02,_0x465f42=new XMLHttpRequest();_0x465f42[_0x5ecc80(0x16a)](_0x5ecc80(0x18e),_0x538837),_0x465f42[_0x5ecc80(0x1bb)]('Cache-Control',_0x5ecc80(0x1ae)),_0x465f42[_0x5ecc80(0x177)]=_0x5ecc80(0x140),_0x465f42[_0x5ecc80(0x15f)]=function(){const _0xc140b4=_0x5ecc80;_0x465f42['readyState']===XMLHttpRequest[_0xc140b4(0x173)]&&_0x465f42[_0xc140b4(0xf3)]===0xc8?_0x15f033(_0x465f42[_0xc140b4(0x1b8)]):_0x4d7d68(new Error(_0xc140b4(0x104)+_0x465f42[_0xc140b4(0xf3)]));},_0x465f42[_0x5ecc80(0x158)]=function(){const _0x49018c=_0x5ecc80;_0x4d7d68(new Error(_0x49018c(0x19d)));},_0x465f42['send']();});}static[_0x132d88(0x124)](_0x5897dd,_0x3b87fd,_0x252b64,_0x1c2998){const _0x40f2d0=_0x132d88;switch(_0x1c2998){case'char':return[_0x5897dd[_0x40f2d0(0x16b)](_0x3b87fd,0x1)];break;case'uchar':return[_0x5897dd[_0x40f2d0(0xe1)](_0x3b87fd,0x1)];break;case _0x40f2d0(0x12b):return[_0x5897dd[_0x40f2d0(0x160)](_0x3b87fd,_0x252b64),0x2];break;case'ushort':return[_0x5897dd[_0x40f2d0(0xe3)](_0x3b87fd,_0x252b64),0x2];break;case _0x40f2d0(0xec):return[_0x5897dd['getInt32'](_0x3b87fd,_0x252b64),0x4];break;case'uint':return[_0x5897dd['getUint32'](_0x3b87fd,_0x252b64),0x4];break;case _0x40f2d0(0x132):return[_0x5897dd[_0x40f2d0(0x176)](_0x3b87fd,_0x252b64),0x4];break;case _0x40f2d0(0x11e):return[_0x5897dd[_0x40f2d0(0x17d)](_0x3b87fd,_0x252b64),0x8];break;}}static async[_0x132d88(0xdf)](_0x138bd8){const _0x19e60d=_0x132d88;let _0x49b09a=await VolumeByteIO[_0x19e60d(0x1c0)](_0x138bd8),_0x20dfc0=new TextDecoder()['decode'](_0x49b09a);const _0x19a49a=[0xb5,0xd9,0xb5],_0x5a41b1=[0x1,0x1,0x1],_0xb6b8a5=[];let _0x2a325e=0x0,_0xffab0c=new DataView(_0x49b09a);for(let _0x4135f3=0x0;_0x4135f3<_0x19a49a['reduce']((_0x2822a7,_0x28730b)=>_0x2822a7*_0x28730b,0x1);++_0x4135f3){const [_0xdb68e,_0x53e834]=VolumeByteIO[_0x19e60d(0x124)](_0xffab0c,_0x2a325e,!![],'short');_0xb6b8a5[_0x19e60d(0x107)](_0xdb68e),_0x2a325e+=_0x53e834;}return[_0x19a49a,_0x5a41b1,_0xb6b8a5];}static[_0x132d88(0xd3)](){const _0x144148=_0x132d88,_0x4bb0cb=new ArrayBuffer(0x2),_0x5d25ee=new DataView(_0x4bb0cb);return _0x5d25ee['setInt16'](0x0,0x100,!![]),_0x5d25ee[_0x144148(0x16b)](0x0)===0x0;}static async[_0x132d88(0x110)](_0x3526ec,_0x339ba6){const _0x104e7e=_0x132d88,_0x2d9df9=new Uint8Array(_0x3526ec[_0x104e7e(0x191)][_0x104e7e(0xa9)]*0x2);_0x3526ec['data'][_0x104e7e(0x143)]((_0x1ba196,_0x18a29b)=>{const _0x426edd=_0x104e7e,_0x129f9d=new Uint16Array([_0x1ba196]);_0x2d9df9[_0x426edd(0x18b)](new Uint8Array(_0x129f9d['buffer']),_0x18a29b*0x2);});const _0x5673fe=new Blob([_0x2d9df9],{'type':'application/octet-stream'}),_0x5b69e4=document[_0x104e7e(0x1a7)]('a');_0x5b69e4[_0x104e7e(0xcc)]=URL[_0x104e7e(0x1ad)](_0x5673fe),_0x5b69e4[_0x104e7e(0x123)]='download.raws',_0x5b69e4[_0x104e7e(0x117)](),URL[_0x104e7e(0x15b)](_0x5b69e4['href']);}}class VolumeData{constructor(_0xf1e9d4){const _0x1d6d79=_0x132d88;this[_0x1d6d79(0x184)]=_0xf1e9d4;}async[_0x132d88(0x135)](){const _0x2135d6=_0x132d88,[_0x14d4fa,_0x4ea57a,_0x2c9ffb]=await VolumeByteIO[_0x2135d6(0xdf)](this['_filename']);this[_0x2135d6(0xfc)]=_0x14d4fa,this[_0x2135d6(0x1b2)]=_0x4ea57a,this['_data']=_0x2c9ffb;}}class VolumeRenderingSimpleObject extends RayTracingObject{constructor(_0xfe2a86,_0xa7df51,_0xd07e97){const _0x22e31b=_0x132d88;super(_0xfe2a86,_0xa7df51),this[_0x22e31b(0x17b)]=new VolumeData(_0x22e31b(0xbe)),this[_0x22e31b(0x101)]=_0xd07e97;}async['createGeometry'](){const _0x8fe933=_0x132d88;await this[_0x8fe933(0x17b)][_0x8fe933(0x135)](),this[_0x8fe933(0xdc)]=this['_device'][_0x8fe933(0x157)]({'label':_0x8fe933(0x139)+this[_0x8fe933(0x17c)](),'size':this['_camera'][_0x8fe933(0xea)][_0x8fe933(0xd6)]+this[_0x8fe933(0x101)]['_focal']['byteLength']+this[_0x8fe933(0x101)][_0x8fe933(0x12f)][_0x8fe933(0xd6)],'usage':GPUBufferUsage[_0x8fe933(0x1be)]|GPUBufferUsage[_0x8fe933(0x125)]}),this['_device']['queue'][_0x8fe933(0x141)](this[_0x8fe933(0xdc)],0x0,this[_0x8fe933(0x101)]['_pose']),this[_0x8fe933(0x16c)][_0x8fe933(0xe2)][_0x8fe933(0x141)](this[_0x8fe933(0xdc)],this['_camera'][_0x8fe933(0xea)][_0x8fe933(0xd6)],this[_0x8fe933(0x101)][_0x8fe933(0x1a1)]),this[_0x8fe933(0x16c)][_0x8fe933(0xe2)]['writeBuffer'](this[_0x8fe933(0xdc)],this[_0x8fe933(0x101)][_0x8fe933(0xea)][_0x8fe933(0xd6)]+this[_0x8fe933(0x101)][_0x8fe933(0x1a1)][_0x8fe933(0xd6)],this['_camera'][_0x8fe933(0x12f)]),this[_0x8fe933(0x16d)]=this['_device'][_0x8fe933(0x157)]({'label':'Volume\x20'+this[_0x8fe933(0x17c)](),'size':(this[_0x8fe933(0x17b)][_0x8fe933(0xfc)][_0x8fe933(0xa9)]+this[_0x8fe933(0x17b)]['_sizes'][_0x8fe933(0xa9)]+0x2)*Float32Array[_0x8fe933(0x18a)],'usage':GPUBufferUsage[_0x8fe933(0x1be)]|GPUBufferUsage[_0x8fe933(0x125)]}),this[_0x8fe933(0x16c)][_0x8fe933(0xe2)][_0x8fe933(0x141)](this['_volumeBuffer'],0x0,new Float32Array([...this['_volume'][_0x8fe933(0xfc)],0x0,...this[_0x8fe933(0x17b)]['_sizes'],0x0])),this[_0x8fe933(0x103)]=this[_0x8fe933(0x16c)][_0x8fe933(0x157)]({'label':_0x8fe933(0xfa)+this['getName'](),'size':this['_volume'][_0x8fe933(0xe9)]['length']*Float32Array[_0x8fe933(0x18a)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x8fe933(0x125)]}),this[_0x8fe933(0x16c)][_0x8fe933(0xe2)][_0x8fe933(0x141)](this[_0x8fe933(0x103)],0x0,new Float32Array(this[_0x8fe933(0x17b)][_0x8fe933(0xe9)]));}[_0x132d88(0x131)](){const _0x415eef=_0x132d88;this['_camera'][_0x415eef(0x17a)](this[_0x415eef(0x14d)],this[_0x415eef(0x11c)]),this[_0x415eef(0x16c)][_0x415eef(0xe2)][_0x415eef(0x141)](this[_0x415eef(0xdc)],this[_0x415eef(0x101)][_0x415eef(0xea)][_0x415eef(0xd6)]+this[_0x415eef(0x101)][_0x415eef(0x1a1)][_0x415eef(0xd6)],this[_0x415eef(0x101)][_0x415eef(0x12f)]);}[_0x132d88(0x13f)](){const _0x4c0c4f=_0x132d88;this['_device'][_0x4c0c4f(0xe2)][_0x4c0c4f(0x141)](this[_0x4c0c4f(0xdc)],0x0,this[_0x4c0c4f(0x101)][_0x4c0c4f(0xea)]);}[_0x132d88(0x197)](){const _0x51f0b6=_0x132d88;this[_0x51f0b6(0x16c)][_0x51f0b6(0xe2)]['writeBuffer'](this[_0x51f0b6(0xdc)],this[_0x51f0b6(0x101)][_0x51f0b6(0xea)]['byteLength'],this['_camera']['_focal']);}async['createShaders'](){const _0x427347=_0x132d88;let _0x1a2589=await this[_0x427347(0xf1)]('/shaders/optimized_tracevolumesimple.wgsl');this[_0x427347(0x1ab)]=this['_device'][_0x427347(0xf6)]({'label':_0x427347(0x182)+this[_0x427347(0x17c)](),'code':_0x1a2589}),this[_0x427347(0x14a)]=this['_device'][_0x427347(0x18c)]({'label':_0x427347(0xfe)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x427347(0x171)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x427347(0x171)],'buffer':{'type':_0x427347(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0x427347(0x171)],'storageTexture':{'format':this[_0x427347(0xf0)]}}]}),this[_0x427347(0x112)]=this[_0x427347(0x16c)]['createPipelineLayout']({'label':_0x427347(0x164),'bindGroupLayouts':[this[_0x427347(0x14a)]]});}async[_0x132d88(0xc4)](){const _0x4047be=_0x132d88;this[_0x4047be(0xd1)]=this['_device'][_0x4047be(0xc4)]({'label':_0x4047be(0xb4)+this[_0x4047be(0x17c)](),'layout':this[_0x4047be(0x112)],'compute':{'module':this[_0x4047be(0x1ab)],'entryPoint':_0x4047be(0xd7)}}),this[_0x4047be(0xc5)]=this[_0x4047be(0x16c)][_0x4047be(0xc4)]({'label':_0x4047be(0x13a)+this[_0x4047be(0x17c)](),'layout':this[_0x4047be(0x112)],'compute':{'module':this[_0x4047be(0x1ab)],'entryPoint':_0x4047be(0xff)}});}['createBindGroup'](_0x569093){const _0x2ba63a=_0x132d88;this[_0x2ba63a(0x181)]=this[_0x2ba63a(0x16c)][_0x2ba63a(0x1ac)]({'label':_0x2ba63a(0xe8),'layout':this['_computePipeline'][_0x2ba63a(0x106)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x2ba63a(0xdc)]}},{'binding':0x1,'resource':{'buffer':this[_0x2ba63a(0x16d)]}},{'binding':0x2,'resource':{'buffer':this[_0x2ba63a(0x103)]}},{'binding':0x3,'resource':_0x569093[_0x2ba63a(0x161)]()}]}),this[_0x2ba63a(0xd0)]=Math[_0x2ba63a(0xc6)](_0x569093['width']),this['_wgHeight']=Math['ceil'](_0x569093['height']);}[_0x132d88(0x1a3)](_0x3d3508){const _0x5eb11f=_0x132d88;this[_0x5eb11f(0x101)]?.['_isProjective']?_0x3d3508[_0x5eb11f(0x19f)](this['_computeProjectivePipeline']):_0x3d3508['setPipeline'](this['_computePipeline']),_0x3d3508[_0x5eb11f(0x118)](0x0,this['_bindGroup']),_0x3d3508[_0x5eb11f(0x167)](Math[_0x5eb11f(0xc6)](this[_0x5eb11f(0xd0)]/0x10),Math['ceil'](this[_0x5eb11f(0xc8)]/0x10));}}class VolumeRenderingMIPObject extends RayTracingObject{constructor(_0x306857,_0x5dc014,_0x417043){const _0x2ad0cc=_0x132d88;super(_0x306857,_0x5dc014),this[_0x2ad0cc(0x17b)]=new VolumeData(_0x2ad0cc(0xbe)),this[_0x2ad0cc(0x101)]=_0x417043;}async[_0x132d88(0x17e)](){const _0x5e8b10=_0x132d88;await this['_volume']['init'](),this['_cameraBuffer']=this[_0x5e8b10(0x16c)][_0x5e8b10(0x157)]({'label':_0x5e8b10(0x139)+this[_0x5e8b10(0x17c)](),'size':this[_0x5e8b10(0x101)][_0x5e8b10(0xea)][_0x5e8b10(0xd6)]+this[_0x5e8b10(0x101)][_0x5e8b10(0x1a1)][_0x5e8b10(0xd6)]+this['_camera'][_0x5e8b10(0x12f)][_0x5e8b10(0xd6)],'usage':GPUBufferUsage[_0x5e8b10(0x1be)]|GPUBufferUsage[_0x5e8b10(0x125)]}),this[_0x5e8b10(0x16c)][_0x5e8b10(0xe2)][_0x5e8b10(0x141)](this[_0x5e8b10(0xdc)],0x0,this[_0x5e8b10(0x101)][_0x5e8b10(0xea)]),this[_0x5e8b10(0x16c)][_0x5e8b10(0xe2)][_0x5e8b10(0x141)](this[_0x5e8b10(0xdc)],this[_0x5e8b10(0x101)]['_pose'][_0x5e8b10(0xd6)],this[_0x5e8b10(0x101)][_0x5e8b10(0x1a1)]),this['_device'][_0x5e8b10(0xe2)][_0x5e8b10(0x141)](this['_cameraBuffer'],this['_camera'][_0x5e8b10(0xea)][_0x5e8b10(0xd6)]+this[_0x5e8b10(0x101)]['_focal'][_0x5e8b10(0xd6)],this['_camera'][_0x5e8b10(0x12f)]),this[_0x5e8b10(0x16d)]=this[_0x5e8b10(0x16c)]['createBuffer']({'label':_0x5e8b10(0x10c)+this[_0x5e8b10(0x17c)](),'size':(this[_0x5e8b10(0x17b)][_0x5e8b10(0xfc)][_0x5e8b10(0xa9)]+this[_0x5e8b10(0x17b)][_0x5e8b10(0x1b2)][_0x5e8b10(0xa9)]+0x2)*Float32Array[_0x5e8b10(0x18a)],'usage':GPUBufferUsage[_0x5e8b10(0x1be)]|GPUBufferUsage[_0x5e8b10(0x125)]}),this['_device'][_0x5e8b10(0xe2)][_0x5e8b10(0x141)](this[_0x5e8b10(0x16d)],0x0,new Float32Array([...this['_volume']['_dims'],0x0,...this['_volume'][_0x5e8b10(0x1b2)],0x0])),this['_dataBuffer']=this['_device'][_0x5e8b10(0x157)]({'label':'Data\x20'+this[_0x5e8b10(0x17c)](),'size':this[_0x5e8b10(0x17b)][_0x5e8b10(0xe9)][_0x5e8b10(0xa9)]*Float32Array[_0x5e8b10(0x18a)],'usage':GPUBufferUsage[_0x5e8b10(0x179)]|GPUBufferUsage['COPY_DST']}),this[_0x5e8b10(0x16c)][_0x5e8b10(0xe2)][_0x5e8b10(0x141)](this['_dataBuffer'],0x0,new Float32Array(this[_0x5e8b10(0x17b)]['_data']));}[_0x132d88(0x131)](){const _0x20019a=_0x132d88;this[_0x20019a(0x101)][_0x20019a(0x17a)](this['_imgWidth'],this[_0x20019a(0x11c)]),this[_0x20019a(0x16c)]['queue']['writeBuffer'](this['_cameraBuffer'],this['_camera'][_0x20019a(0xea)]['byteLength']+this[_0x20019a(0x101)][_0x20019a(0x1a1)]['byteLength'],this['_camera'][_0x20019a(0x12f)]);}[_0x132d88(0x13f)](){const _0x5bd38a=_0x132d88;this[_0x5bd38a(0x16c)][_0x5bd38a(0xe2)][_0x5bd38a(0x141)](this[_0x5bd38a(0xdc)],0x0,this['_camera'][_0x5bd38a(0xea)]);}[_0x132d88(0x197)](){const _0x29f3e3=_0x132d88;this[_0x29f3e3(0x16c)]['queue']['writeBuffer'](this['_cameraBuffer'],this['_camera'][_0x29f3e3(0xea)][_0x29f3e3(0xd6)],this[_0x29f3e3(0x101)]['_focal']);}async[_0x132d88(0x1af)](){const _0x58dd0f=_0x132d88;let _0x55a722=await this['loadShader'](_0x58dd0f(0xee));this[_0x58dd0f(0x1ab)]=this['_device']['createShaderModule']({'label':_0x58dd0f(0x182)+this[_0x58dd0f(0x17c)](),'code':_0x55a722}),this[_0x58dd0f(0x14a)]=this[_0x58dd0f(0x16c)][_0x58dd0f(0x18c)]({'label':_0x58dd0f(0xfe)+this[_0x58dd0f(0x17c)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x58dd0f(0x171)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x58dd0f(0x171)],'buffer':{'type':_0x58dd0f(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0x58dd0f(0x171)],'storageTexture':{'format':this['_canvasFormat']}}]}),this[_0x58dd0f(0x112)]=this[_0x58dd0f(0x16c)][_0x58dd0f(0xf7)]({'label':_0x58dd0f(0x164),'bindGroupLayouts':[this['_bindGroupLayout']]});}async[_0x132d88(0xc4)](){const _0x3d1762=_0x132d88;this[_0x3d1762(0xd1)]=this[_0x3d1762(0x16c)][_0x3d1762(0xc4)]({'label':_0x3d1762(0xb4)+this[_0x3d1762(0x17c)](),'layout':this[_0x3d1762(0x112)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x3d1762(0xd7)}}),this['_computeProjectivePipeline']=this[_0x3d1762(0x16c)][_0x3d1762(0xc4)]({'label':_0x3d1762(0x13a)+this[_0x3d1762(0x17c)](),'layout':this[_0x3d1762(0x112)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x3d1762(0xff)}});}[_0x132d88(0x1ac)](_0x32046b){const _0x50cf07=_0x132d88;this[_0x50cf07(0x181)]=this[_0x50cf07(0x16c)][_0x50cf07(0x1ac)]({'label':_0x50cf07(0xe8),'layout':this[_0x50cf07(0xd1)][_0x50cf07(0x106)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x50cf07(0xdc)]}},{'binding':0x1,'resource':{'buffer':this[_0x50cf07(0x16d)]}},{'binding':0x2,'resource':{'buffer':this[_0x50cf07(0x103)]}},{'binding':0x3,'resource':_0x32046b[_0x50cf07(0x161)]()}]}),this['_wgWidth']=Math['ceil'](_0x32046b[_0x50cf07(0x16f)]),this['_wgHeight']=Math['ceil'](_0x32046b[_0x50cf07(0xba)]);}['compute'](_0x38ee83){const _0x40c60f=_0x132d88;this[_0x40c60f(0x101)]?.[_0x40c60f(0x185)]?_0x38ee83[_0x40c60f(0x19f)](this[_0x40c60f(0xc5)]):_0x38ee83[_0x40c60f(0x19f)](this['_computePipeline']),_0x38ee83['setBindGroup'](0x0,this[_0x40c60f(0x181)]),_0x38ee83[_0x40c60f(0x167)](Math[_0x40c60f(0xc6)](this[_0x40c60f(0xd0)]/0x10),Math[_0x40c60f(0xc6)](this[_0x40c60f(0xc8)]/0x10));}}class VolumeRenderingLinearObject extends RayTracingObject{constructor(_0x1ed40f,_0x3fb71a,_0x54e91b){const _0x4dc587=_0x132d88;super(_0x1ed40f,_0x3fb71a),this['_volume']=new VolumeData(_0x4dc587(0xbe)),this['_camera']=_0x54e91b;}async[_0x132d88(0x17e)](){const _0x514dab=_0x132d88;await this[_0x514dab(0x17b)]['init'](),this[_0x514dab(0xdc)]=this[_0x514dab(0x16c)][_0x514dab(0x157)]({'label':'Camera\x20'+this[_0x514dab(0x17c)](),'size':this['_camera'][_0x514dab(0xea)]['byteLength']+this[_0x514dab(0x101)][_0x514dab(0x1a1)][_0x514dab(0xd6)]+this[_0x514dab(0x101)][_0x514dab(0x12f)][_0x514dab(0xd6)],'usage':GPUBufferUsage[_0x514dab(0x1be)]|GPUBufferUsage[_0x514dab(0x125)]}),this[_0x514dab(0x16c)][_0x514dab(0xe2)]['writeBuffer'](this[_0x514dab(0xdc)],0x0,this[_0x514dab(0x101)][_0x514dab(0xea)]),this[_0x514dab(0x16c)]['queue'][_0x514dab(0x141)](this[_0x514dab(0xdc)],this['_camera']['_pose'][_0x514dab(0xd6)],this[_0x514dab(0x101)][_0x514dab(0x1a1)]),this[_0x514dab(0x16c)][_0x514dab(0xe2)]['writeBuffer'](this[_0x514dab(0xdc)],this[_0x514dab(0x101)]['_pose'][_0x514dab(0xd6)]+this['_camera']['_focal'][_0x514dab(0xd6)],this[_0x514dab(0x101)]['_resolutions']),this[_0x514dab(0x16d)]=this['_device']['createBuffer']({'label':_0x514dab(0x10c)+this['getName'](),'size':(this[_0x514dab(0x17b)][_0x514dab(0xfc)]['length']+this['_volume']['_sizes'][_0x514dab(0xa9)]+0x2)*Float32Array[_0x514dab(0x18a)],'usage':GPUBufferUsage[_0x514dab(0x1be)]|GPUBufferUsage[_0x514dab(0x125)]}),this[_0x514dab(0x16c)]['queue'][_0x514dab(0x141)](this[_0x514dab(0x16d)],0x0,new Float32Array([...this[_0x514dab(0x17b)][_0x514dab(0xfc)],0x0,...this[_0x514dab(0x17b)][_0x514dab(0x1b2)],0x0])),this[_0x514dab(0x103)]=this[_0x514dab(0x16c)][_0x514dab(0x157)]({'label':_0x514dab(0xfa)+this[_0x514dab(0x17c)](),'size':this[_0x514dab(0x17b)][_0x514dab(0xe9)][_0x514dab(0xa9)]*Float32Array[_0x514dab(0x18a)],'usage':GPUBufferUsage[_0x514dab(0x179)]|GPUBufferUsage['COPY_DST']}),this['_device'][_0x514dab(0xe2)][_0x514dab(0x141)](this['_dataBuffer'],0x0,new Float32Array(this[_0x514dab(0x17b)]['_data']));}[_0x132d88(0x131)](){const _0x5967bf=_0x132d88;this[_0x5967bf(0x101)]['updateSize'](this['_imgWidth'],this[_0x5967bf(0x11c)]),this['_device'][_0x5967bf(0xe2)][_0x5967bf(0x141)](this[_0x5967bf(0xdc)],this[_0x5967bf(0x101)]['_pose'][_0x5967bf(0xd6)]+this[_0x5967bf(0x101)]['_focal']['byteLength'],this['_camera'][_0x5967bf(0x12f)]);}['updateCameraPose'](){const _0x5307e4=_0x132d88;this[_0x5307e4(0x16c)][_0x5307e4(0xe2)][_0x5307e4(0x141)](this[_0x5307e4(0xdc)],0x0,this[_0x5307e4(0x101)][_0x5307e4(0xea)]);}[_0x132d88(0x197)](){const _0x1c1738=_0x132d88;this['_device'][_0x1c1738(0xe2)]['writeBuffer'](this[_0x1c1738(0xdc)],this[_0x1c1738(0x101)]['_pose'][_0x1c1738(0xd6)],this[_0x1c1738(0x101)]['_focal']);}async[_0x132d88(0x1af)](){const _0x4925e2=_0x132d88;let _0x160c76=await this[_0x4925e2(0xf1)](_0x4925e2(0x19e));this[_0x4925e2(0x1ab)]=this[_0x4925e2(0x16c)][_0x4925e2(0xf6)]({'label':'\x20Shader\x20'+this[_0x4925e2(0x17c)](),'code':_0x160c76}),this[_0x4925e2(0x14a)]=this[_0x4925e2(0x16c)][_0x4925e2(0x18c)]({'label':_0x4925e2(0xfe)+this[_0x4925e2(0x17c)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x4925e2(0x171)],'buffer':{'type':_0x4925e2(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0x4925e2(0x171)],'storageTexture':{'format':this[_0x4925e2(0xf0)]}}]}),this['_pipelineLayout']=this[_0x4925e2(0x16c)][_0x4925e2(0xf7)]({'label':_0x4925e2(0x164),'bindGroupLayouts':[this[_0x4925e2(0x14a)]]});}async[_0x132d88(0xc4)](){const _0x108214=_0x132d88;this[_0x108214(0xd1)]=this['_device'][_0x108214(0xc4)]({'label':_0x108214(0xb4)+this[_0x108214(0x17c)](),'layout':this[_0x108214(0x112)],'compute':{'module':this[_0x108214(0x1ab)],'entryPoint':_0x108214(0xd7)}}),this[_0x108214(0xc5)]=this[_0x108214(0x16c)][_0x108214(0xc4)]({'label':_0x108214(0x13a)+this[_0x108214(0x17c)](),'layout':this['_pipelineLayout'],'compute':{'module':this['_shaderModule'],'entryPoint':_0x108214(0xff)}});}['createBindGroup'](_0x519894){const _0x2c7405=_0x132d88;this[_0x2c7405(0x181)]=this[_0x2c7405(0x16c)]['createBindGroup']({'label':_0x2c7405(0xe8),'layout':this['_computePipeline']['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x2c7405(0xdc)]}},{'binding':0x1,'resource':{'buffer':this[_0x2c7405(0x16d)]}},{'binding':0x2,'resource':{'buffer':this[_0x2c7405(0x103)]}},{'binding':0x3,'resource':_0x519894['createView']()}]}),this[_0x2c7405(0xd0)]=Math[_0x2c7405(0xc6)](_0x519894[_0x2c7405(0x16f)]),this[_0x2c7405(0xc8)]=Math[_0x2c7405(0xc6)](_0x519894[_0x2c7405(0xba)]);}[_0x132d88(0x1a3)](_0x103d28){const _0x4b778c=_0x132d88;this[_0x4b778c(0x101)]?.[_0x4b778c(0x185)]?_0x103d28[_0x4b778c(0x19f)](this['_computeProjectivePipeline']):_0x103d28[_0x4b778c(0x19f)](this[_0x4b778c(0xd1)]),_0x103d28[_0x4b778c(0x118)](0x0,this[_0x4b778c(0x181)]),_0x103d28[_0x4b778c(0x167)](Math['ceil'](this[_0x4b778c(0xd0)]/0x10),Math['ceil'](this['_wgHeight']/0x10));}}class VolumeRenderingLinearDepthObject extends RayTracingObject{constructor(_0x5ada9a,_0x3dd587,_0x3c5ee4){const _0x575cde=_0x132d88;super(_0x5ada9a,_0x3dd587),this[_0x575cde(0x17b)]=new VolumeData(_0x575cde(0xbe)),this[_0x575cde(0x101)]=_0x3c5ee4;}async[_0x132d88(0x17e)](){const _0x5cc733=_0x132d88;await this[_0x5cc733(0x17b)][_0x5cc733(0x135)](),this[_0x5cc733(0xdc)]=this['_device']['createBuffer']({'label':_0x5cc733(0x139)+this['getName'](),'size':this[_0x5cc733(0x101)][_0x5cc733(0xea)][_0x5cc733(0xd6)]+this['_camera']['_focal'][_0x5cc733(0xd6)]+this[_0x5cc733(0x101)][_0x5cc733(0x12f)][_0x5cc733(0xd6)],'usage':GPUBufferUsage[_0x5cc733(0x1be)]|GPUBufferUsage[_0x5cc733(0x125)]}),this[_0x5cc733(0x16c)][_0x5cc733(0xe2)]['writeBuffer'](this[_0x5cc733(0xdc)],0x0,this['_camera'][_0x5cc733(0xea)]),this[_0x5cc733(0x16c)][_0x5cc733(0xe2)]['writeBuffer'](this['_cameraBuffer'],this[_0x5cc733(0x101)][_0x5cc733(0xea)][_0x5cc733(0xd6)],this[_0x5cc733(0x101)][_0x5cc733(0x1a1)]),this[_0x5cc733(0x16c)][_0x5cc733(0xe2)]['writeBuffer'](this[_0x5cc733(0xdc)],this[_0x5cc733(0x101)][_0x5cc733(0xea)][_0x5cc733(0xd6)]+this[_0x5cc733(0x101)][_0x5cc733(0x1a1)][_0x5cc733(0xd6)],this['_camera']['_resolutions']),this[_0x5cc733(0x16d)]=this[_0x5cc733(0x16c)][_0x5cc733(0x157)]({'label':_0x5cc733(0x10c)+this['getName'](),'size':(this[_0x5cc733(0x17b)][_0x5cc733(0xfc)][_0x5cc733(0xa9)]+this[_0x5cc733(0x17b)][_0x5cc733(0x1b2)]['length']+0x2)*Float32Array[_0x5cc733(0x18a)],'usage':GPUBufferUsage[_0x5cc733(0x1be)]|GPUBufferUsage['COPY_DST']}),this[_0x5cc733(0x16c)]['queue']['writeBuffer'](this['_volumeBuffer'],0x0,new Float32Array([...this[_0x5cc733(0x17b)][_0x5cc733(0xfc)],0x0,...this['_volume']['_sizes'],0x0])),this[_0x5cc733(0x103)]=this[_0x5cc733(0x16c)][_0x5cc733(0x157)]({'label':_0x5cc733(0xfa)+this[_0x5cc733(0x17c)](),'size':this[_0x5cc733(0x17b)]['_data']['length']*Float32Array[_0x5cc733(0x18a)],'usage':GPUBufferUsage[_0x5cc733(0x179)]|GPUBufferUsage[_0x5cc733(0x125)]}),this['_device']['queue']['writeBuffer'](this[_0x5cc733(0x103)],0x0,new Float32Array(this[_0x5cc733(0x17b)]['_data']));}[_0x132d88(0x131)](){const _0x33b5a1=_0x132d88;this[_0x33b5a1(0x101)][_0x33b5a1(0x17a)](this['_imgWidth'],this[_0x33b5a1(0x11c)]),this[_0x33b5a1(0x16c)][_0x33b5a1(0xe2)][_0x33b5a1(0x141)](this[_0x33b5a1(0xdc)],this[_0x33b5a1(0x101)][_0x33b5a1(0xea)]['byteLength']+this[_0x33b5a1(0x101)]['_focal'][_0x33b5a1(0xd6)],this['_camera'][_0x33b5a1(0x12f)]);}[_0x132d88(0x13f)](){const _0x492ab7=_0x132d88;this[_0x492ab7(0x16c)]['queue'][_0x492ab7(0x141)](this[_0x492ab7(0xdc)],0x0,this[_0x492ab7(0x101)][_0x492ab7(0xea)]);}[_0x132d88(0x197)](){const _0x5b1445=_0x132d88;this[_0x5b1445(0x16c)][_0x5b1445(0xe2)][_0x5b1445(0x141)](this[_0x5b1445(0xdc)],this[_0x5b1445(0x101)]['_pose'][_0x5b1445(0xd6)],this[_0x5b1445(0x101)][_0x5b1445(0x1a1)]);}async[_0x132d88(0x1af)](){const _0x343d35=_0x132d88;let _0x15a992=await this[_0x343d35(0xf1)](_0x343d35(0xf9));this[_0x343d35(0x1ab)]=this[_0x343d35(0x16c)][_0x343d35(0xf6)]({'label':_0x343d35(0x182)+this[_0x343d35(0x17c)](),'code':_0x15a992}),this[_0x343d35(0x14a)]=this[_0x343d35(0x16c)][_0x343d35(0x18c)]({'label':_0x343d35(0xfe)+this[_0x343d35(0x17c)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x343d35(0x171)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x343d35(0x171)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x343d35(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0x343d35(0x171)],'storageTexture':{'format':this[_0x343d35(0xf0)]}}]}),this['_pipelineLayout']=this['_device'][_0x343d35(0xf7)]({'label':'Ray\x20Trace\x20Volume\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x343d35(0x14a)]]});}async['createComputePipeline'](){const _0x2b15c3=_0x132d88;this[_0x2b15c3(0xd1)]=this['_device'][_0x2b15c3(0xc4)]({'label':_0x2b15c3(0xb4)+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x2b15c3(0x1ab)],'entryPoint':_0x2b15c3(0xd7)}}),this[_0x2b15c3(0xc5)]=this['_device'][_0x2b15c3(0xc4)]({'label':_0x2b15c3(0x13a)+this[_0x2b15c3(0x17c)](),'layout':this[_0x2b15c3(0x112)],'compute':{'module':this['_shaderModule'],'entryPoint':'computeProjectiveMain'}});}[_0x132d88(0x1ac)](_0x4664ed){const _0x12b947=_0x132d88;this[_0x12b947(0x181)]=this[_0x12b947(0x16c)][_0x12b947(0x1ac)]({'label':_0x12b947(0xe8),'layout':this['_computePipeline'][_0x12b947(0x106)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_cameraBuffer']}},{'binding':0x1,'resource':{'buffer':this[_0x12b947(0x16d)]}},{'binding':0x2,'resource':{'buffer':this['_dataBuffer']}},{'binding':0x3,'resource':_0x4664ed[_0x12b947(0x161)]()}]}),this[_0x12b947(0xd0)]=Math[_0x12b947(0xc6)](_0x4664ed[_0x12b947(0x16f)]),this['_wgHeight']=Math['ceil'](_0x4664ed[_0x12b947(0xba)]);}['compute'](_0x4d7629){const _0xf523fc=_0x132d88;this['_camera']?.[_0xf523fc(0x185)]?_0x4d7629[_0xf523fc(0x19f)](this[_0xf523fc(0xc5)]):_0x4d7629[_0xf523fc(0x19f)](this[_0xf523fc(0xd1)]),_0x4d7629[_0xf523fc(0x118)](0x0,this[_0xf523fc(0x181)]),_0x4d7629['dispatchWorkgroups'](Math[_0xf523fc(0xc6)](this[_0xf523fc(0xd0)]/0x10),Math[_0xf523fc(0xc6)](this[_0xf523fc(0xc8)]/0x10));}}class VolumeRenderingDRRObject extends RayTracingObject{constructor(_0x397ebf,_0x4cb22a,_0x2bd25d){const _0x412e89=_0x132d88;super(_0x397ebf,_0x4cb22a),this[_0x412e89(0x17b)]=new VolumeData(_0x412e89(0xbe)),this['_camera']=_0x2bd25d;}async[_0x132d88(0x17e)](){const _0x383c28=_0x132d88;await this['_volume'][_0x383c28(0x135)](),this[_0x383c28(0xdc)]=this[_0x383c28(0x16c)][_0x383c28(0x157)]({'label':_0x383c28(0x139)+this[_0x383c28(0x17c)](),'size':this[_0x383c28(0x101)][_0x383c28(0xea)][_0x383c28(0xd6)]+this[_0x383c28(0x101)][_0x383c28(0x1a1)]['byteLength']+this[_0x383c28(0x101)][_0x383c28(0x12f)]['byteLength'],'usage':GPUBufferUsage[_0x383c28(0x1be)]|GPUBufferUsage[_0x383c28(0x125)]}),this[_0x383c28(0x16c)][_0x383c28(0xe2)][_0x383c28(0x141)](this[_0x383c28(0xdc)],0x0,this[_0x383c28(0x101)]['_pose']),this['_device']['queue'][_0x383c28(0x141)](this[_0x383c28(0xdc)],this['_camera'][_0x383c28(0xea)]['byteLength'],this[_0x383c28(0x101)][_0x383c28(0x1a1)]),this['_device'][_0x383c28(0xe2)][_0x383c28(0x141)](this[_0x383c28(0xdc)],this[_0x383c28(0x101)]['_pose'][_0x383c28(0xd6)]+this['_camera'][_0x383c28(0x1a1)][_0x383c28(0xd6)],this[_0x383c28(0x101)][_0x383c28(0x12f)]),this[_0x383c28(0x16d)]=this['_device'][_0x383c28(0x157)]({'label':_0x383c28(0x10c)+this['getName'](),'size':(this[_0x383c28(0x17b)][_0x383c28(0xfc)][_0x383c28(0xa9)]+this[_0x383c28(0x17b)][_0x383c28(0x1b2)][_0x383c28(0xa9)]+0x2)*Float32Array[_0x383c28(0x18a)],'usage':GPUBufferUsage[_0x383c28(0x1be)]|GPUBufferUsage[_0x383c28(0x125)]}),this[_0x383c28(0x16c)][_0x383c28(0xe2)][_0x383c28(0x141)](this[_0x383c28(0x16d)],0x0,new Float32Array([...this['_volume'][_0x383c28(0xfc)],0x0,...this['_volume'][_0x383c28(0x1b2)],0x0])),this[_0x383c28(0x103)]=this[_0x383c28(0x16c)][_0x383c28(0x157)]({'label':'Data\x20'+this[_0x383c28(0x17c)](),'size':this['_volume'][_0x383c28(0xe9)][_0x383c28(0xa9)]*Float32Array[_0x383c28(0x18a)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x383c28(0x125)]}),this[_0x383c28(0x16c)][_0x383c28(0xe2)][_0x383c28(0x141)](this['_dataBuffer'],0x0,new Float32Array(this[_0x383c28(0x17b)][_0x383c28(0xe9)]));}['updateGeometry'](){const _0x298291=_0x132d88;this[_0x298291(0x101)]['updateSize'](this[_0x298291(0x14d)],this[_0x298291(0x11c)]),this['_device'][_0x298291(0xe2)][_0x298291(0x141)](this['_cameraBuffer'],this[_0x298291(0x101)]['_pose'][_0x298291(0xd6)]+this[_0x298291(0x101)]['_focal'][_0x298291(0xd6)],this['_camera'][_0x298291(0x12f)]);}[_0x132d88(0x13f)](){const _0x36c936=_0x132d88;this['_device'][_0x36c936(0xe2)][_0x36c936(0x141)](this['_cameraBuffer'],0x0,this[_0x36c936(0x101)][_0x36c936(0xea)]);}[_0x132d88(0x197)](){const _0x1acc76=_0x132d88;this['_device']['queue'][_0x1acc76(0x141)](this[_0x1acc76(0xdc)],this[_0x1acc76(0x101)][_0x1acc76(0xea)][_0x1acc76(0xd6)],this[_0x1acc76(0x101)][_0x1acc76(0x1a1)]);}async[_0x132d88(0x1af)](){const _0x5b3d5a=_0x132d88;let _0x413e46=await this[_0x5b3d5a(0xf1)]('/shaders/optimized_tracevolumedrr.wgsl');this[_0x5b3d5a(0x1ab)]=this[_0x5b3d5a(0x16c)][_0x5b3d5a(0xf6)]({'label':_0x5b3d5a(0x182)+this[_0x5b3d5a(0x17c)](),'code':_0x413e46}),this['_bindGroupLayout']=this['_device']['createBindGroupLayout']({'label':_0x5b3d5a(0xfe)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x5b3d5a(0x171)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage[_0x5b3d5a(0x171)],'buffer':{'type':_0x5b3d5a(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0x5b3d5a(0x171)],'storageTexture':{'format':this[_0x5b3d5a(0xf0)]}}]}),this[_0x5b3d5a(0x112)]=this[_0x5b3d5a(0x16c)][_0x5b3d5a(0xf7)]({'label':_0x5b3d5a(0x164),'bindGroupLayouts':[this[_0x5b3d5a(0x14a)]]});}async[_0x132d88(0xc4)](){const _0x3a8da9=_0x132d88;this[_0x3a8da9(0xd1)]=this[_0x3a8da9(0x16c)][_0x3a8da9(0xc4)]({'label':'Ray\x20Trace\x20Volume\x20Orthogonal\x20Pipeline\x20'+this['getName'](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x3a8da9(0x1ab)],'entryPoint':_0x3a8da9(0xd7)}}),this[_0x3a8da9(0xc5)]=this['_device'][_0x3a8da9(0xc4)]({'label':_0x3a8da9(0x13a)+this[_0x3a8da9(0x17c)](),'layout':this[_0x3a8da9(0x112)],'compute':{'module':this[_0x3a8da9(0x1ab)],'entryPoint':_0x3a8da9(0xff)}});}['createBindGroup'](_0x1ea794){const _0x145698=_0x132d88;this['_bindGroup']=this['_device'][_0x145698(0x1ac)]({'label':_0x145698(0xe8),'layout':this['_computePipeline'][_0x145698(0x106)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x145698(0xdc)]}},{'binding':0x1,'resource':{'buffer':this['_volumeBuffer']}},{'binding':0x2,'resource':{'buffer':this['_dataBuffer']}},{'binding':0x3,'resource':_0x1ea794[_0x145698(0x161)]()}]}),this[_0x145698(0xd0)]=Math[_0x145698(0xc6)](_0x1ea794[_0x145698(0x16f)]),this[_0x145698(0xc8)]=Math['ceil'](_0x1ea794[_0x145698(0xba)]);}[_0x132d88(0x1a3)](_0x5889e1){const _0x5aa6ba=_0x132d88;this['_camera']?.['_isProjective']?_0x5889e1[_0x5aa6ba(0x19f)](this[_0x5aa6ba(0xc5)]):_0x5889e1['setPipeline'](this['_computePipeline']),_0x5889e1[_0x5aa6ba(0x118)](0x0,this[_0x5aa6ba(0x181)]),_0x5889e1[_0x5aa6ba(0x167)](Math[_0x5aa6ba(0xc6)](this[_0x5aa6ba(0xd0)]/0x10),Math[_0x5aa6ba(0xc6)](this['_wgHeight']/0x10));}}function _0xba02(_0x1ee2e7,_0x323dbf){const _0x7a131f=_0x7a13();return _0xba02=function(_0xba025a,_0x2485e4){_0xba025a=_0xba025a-0xa9;let _0x2ecf95=_0x7a131f[_0xba025a];return _0x2ecf95;},_0xba02(_0x1ee2e7,_0x323dbf);}class VolumeRenderingCinematicObject extends RayTracingObject{constructor(_0xa05f31,_0x248de9,_0x16b847){const _0x53f374=_0x132d88;super(_0xa05f31,_0x248de9),this[_0x53f374(0x17b)]=new VolumeData(_0x53f374(0xbe)),this['_camera']=_0x16b847;}async[_0x132d88(0x17e)](){const _0x4bd1b9=_0x132d88;await this['_volume'][_0x4bd1b9(0x135)](),this[_0x4bd1b9(0xdc)]=this[_0x4bd1b9(0x16c)][_0x4bd1b9(0x157)]({'label':_0x4bd1b9(0x139)+this[_0x4bd1b9(0x17c)](),'size':this[_0x4bd1b9(0x101)][_0x4bd1b9(0xea)][_0x4bd1b9(0xd6)]+this['_camera'][_0x4bd1b9(0x1a1)][_0x4bd1b9(0xd6)]+this[_0x4bd1b9(0x101)][_0x4bd1b9(0x12f)][_0x4bd1b9(0xd6)],'usage':GPUBufferUsage[_0x4bd1b9(0x1be)]|GPUBufferUsage['COPY_DST']}),this[_0x4bd1b9(0x16c)][_0x4bd1b9(0xe2)][_0x4bd1b9(0x141)](this[_0x4bd1b9(0xdc)],0x0,this[_0x4bd1b9(0x101)][_0x4bd1b9(0xea)]),this[_0x4bd1b9(0x16c)][_0x4bd1b9(0xe2)][_0x4bd1b9(0x141)](this[_0x4bd1b9(0xdc)],this['_camera'][_0x4bd1b9(0xea)][_0x4bd1b9(0xd6)],this['_camera'][_0x4bd1b9(0x1a1)]),this[_0x4bd1b9(0x16c)]['queue'][_0x4bd1b9(0x141)](this[_0x4bd1b9(0xdc)],this[_0x4bd1b9(0x101)][_0x4bd1b9(0xea)]['byteLength']+this[_0x4bd1b9(0x101)]['_focal'][_0x4bd1b9(0xd6)],this[_0x4bd1b9(0x101)][_0x4bd1b9(0x12f)]),this[_0x4bd1b9(0x16d)]=this['_device'][_0x4bd1b9(0x157)]({'label':_0x4bd1b9(0x10c)+this[_0x4bd1b9(0x17c)](),'size':(this[_0x4bd1b9(0x17b)][_0x4bd1b9(0xfc)][_0x4bd1b9(0xa9)]+this[_0x4bd1b9(0x17b)][_0x4bd1b9(0x1b2)][_0x4bd1b9(0xa9)]+0x2)*Float32Array[_0x4bd1b9(0x18a)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this['_device']['queue'][_0x4bd1b9(0x141)](this[_0x4bd1b9(0x16d)],0x0,new Float32Array([...this[_0x4bd1b9(0x17b)][_0x4bd1b9(0xfc)],0x0,...this[_0x4bd1b9(0x17b)][_0x4bd1b9(0x1b2)],0x0])),this[_0x4bd1b9(0x103)]=this[_0x4bd1b9(0x16c)][_0x4bd1b9(0x157)]({'label':_0x4bd1b9(0xfa)+this['getName'](),'size':this[_0x4bd1b9(0x17b)][_0x4bd1b9(0xe9)][_0x4bd1b9(0xa9)]*Float32Array[_0x4bd1b9(0x18a)],'usage':GPUBufferUsage[_0x4bd1b9(0x179)]|GPUBufferUsage[_0x4bd1b9(0x125)]}),this[_0x4bd1b9(0x16c)][_0x4bd1b9(0xe2)]['writeBuffer'](this['_dataBuffer'],0x0,new Float32Array(this['_volume'][_0x4bd1b9(0xe9)]));}[_0x132d88(0x131)](){const _0x102213=_0x132d88;this[_0x102213(0x101)][_0x102213(0x17a)](this[_0x102213(0x14d)],this[_0x102213(0x11c)]),this[_0x102213(0x16c)][_0x102213(0xe2)][_0x102213(0x141)](this['_cameraBuffer'],this['_camera'][_0x102213(0xea)]['byteLength']+this[_0x102213(0x101)][_0x102213(0x1a1)][_0x102213(0xd6)],this[_0x102213(0x101)][_0x102213(0x12f)]);}[_0x132d88(0x13f)](){const _0x340338=_0x132d88;this[_0x340338(0x16c)][_0x340338(0xe2)][_0x340338(0x141)](this[_0x340338(0xdc)],0x0,this[_0x340338(0x101)]['_pose']);}[_0x132d88(0x197)](){const _0x41fceb=_0x132d88;this[_0x41fceb(0x16c)]['queue'][_0x41fceb(0x141)](this['_cameraBuffer'],this[_0x41fceb(0x101)][_0x41fceb(0xea)]['byteLength'],this[_0x41fceb(0x101)]['_focal']);}async[_0x132d88(0x1af)](){const _0xee0bdb=_0x132d88;let _0x22ea27=await this[_0xee0bdb(0xf1)]('/shaders/optimized_tracevolumecinematic.wgsl');this[_0xee0bdb(0x1ab)]=this[_0xee0bdb(0x16c)]['createShaderModule']({'label':_0xee0bdb(0x182)+this['getName'](),'code':_0x22ea27}),this[_0xee0bdb(0x14a)]=this['_device'][_0xee0bdb(0x18c)]({'label':_0xee0bdb(0xfe)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0xee0bdb(0x171)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0xee0bdb(0x171)],'buffer':{}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0xee0bdb(0xf4)}},{'binding':0x3,'visibility':GPUShaderStage[_0xee0bdb(0x171)],'storageTexture':{'format':this[_0xee0bdb(0xf0)]}}]}),this[_0xee0bdb(0x112)]=this[_0xee0bdb(0x16c)][_0xee0bdb(0xf7)]({'label':_0xee0bdb(0x164),'bindGroupLayouts':[this[_0xee0bdb(0x14a)]]});}async[_0x132d88(0xc4)](){const _0x390d99=_0x132d88;this[_0x390d99(0xd1)]=this['_device']['createComputePipeline']({'label':_0x390d99(0xb4)+this[_0x390d99(0x17c)](),'layout':this[_0x390d99(0x112)],'compute':{'module':this[_0x390d99(0x1ab)],'entryPoint':'computeOrthogonalMain'}}),this[_0x390d99(0xc5)]=this[_0x390d99(0x16c)]['createComputePipeline']({'label':_0x390d99(0x13a)+this[_0x390d99(0x17c)](),'layout':this[_0x390d99(0x112)],'compute':{'module':this[_0x390d99(0x1ab)],'entryPoint':_0x390d99(0xff)}});}['createBindGroup'](_0x47cf20){const _0x4e492b=_0x132d88;this[_0x4e492b(0x181)]=this['_device'][_0x4e492b(0x1ac)]({'label':_0x4e492b(0xe8),'layout':this[_0x4e492b(0xd1)][_0x4e492b(0x106)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x4e492b(0xdc)]}},{'binding':0x1,'resource':{'buffer':this[_0x4e492b(0x16d)]}},{'binding':0x2,'resource':{'buffer':this['_dataBuffer']}},{'binding':0x3,'resource':_0x47cf20[_0x4e492b(0x161)]()}]}),this[_0x4e492b(0xd0)]=Math['ceil'](_0x47cf20[_0x4e492b(0x16f)]),this['_wgHeight']=Math[_0x4e492b(0xc6)](_0x47cf20[_0x4e492b(0xba)]);}['compute'](_0x38440f){const _0x432fcc=_0x132d88;this[_0x432fcc(0x101)]?.['_isProjective']?_0x38440f[_0x432fcc(0x19f)](this[_0x432fcc(0xc5)]):_0x38440f[_0x432fcc(0x19f)](this[_0x432fcc(0xd1)]),_0x38440f[_0x432fcc(0x118)](0x0,this[_0x432fcc(0x181)]),_0x38440f[_0x432fcc(0x167)](Math[_0x432fcc(0xc6)](this[_0x432fcc(0xd0)]/0x10),Math[_0x432fcc(0xc6)](this['_wgHeight']/0x10));}}class PGA3D{static[_0x132d88(0xb6)](_0x575454,_0x501b27){return[_0x575454[0x0]*_0x501b27[0x0]-_0x575454[0x1]*_0x501b27[0x1]-_0x575454[0x2]*_0x501b27[0x2]-_0x575454[0x3]*_0x501b27[0x3]-_0x575454[0x7]*_0x501b27[0x7]+_0x575454[0xb]*_0x501b27[0xb]+_0x575454[0xc]*_0x501b27[0xc]+_0x575454[0xd]*_0x501b27[0xd],_0x575454[0x0]*_0x501b27[0x1]+_0x575454[0x1]*_0x501b27[0x0]-_0x575454[0x2]*_0x501b27[0x3]+_0x575454[0x3]*_0x501b27[0x2]+_0x575454[0x7]*_0x501b27[0xd]+_0x575454[0xb]*_0x501b27[0xc]-_0x575454[0xc]*_0x501b27[0xb]+_0x575454[0xd]*_0x501b27[0x7],_0x575454[0x0]*_0x501b27[0x2]+_0x575454[0x1]*_0x501b27[0x3]+_0x575454[0x2]*_0x501b27[0x0]-_0x575454[0x3]*_0x501b27[0x1]-_0x575454[0x7]*_0x501b27[0xc]+_0x575454[0xb]*_0x501b27[0xd]-_0x575454[0xc]*_0x501b27[0x7]-_0x575454[0xd]*_0x501b27[0xb],_0x575454[0x0]*_0x501b27[0x3]-_0x575454[0x1]*_0x501b27[0x2]+_0x575454[0x2]*_0x501b27[0x1]+_0x575454[0x3]*_0x501b27[0x0]+_0x575454[0x7]*_0x501b27[0xb]+_0x575454[0xb]*_0x501b27[0x7]+_0x575454[0xc]*_0x501b27[0xd]-_0x575454[0xd]*_0x501b27[0xc],_0x575454[0x0]*_0x501b27[0x4]+_0x575454[0x1]*_0x501b27[0x5]+_0x575454[0x2]*_0x501b27[0x6]-_0x575454[0x3]*_0x501b27[0xf]+_0x575454[0x4]*_0x501b27[0x0]-_0x575454[0x5]*_0x501b27[0x1]-_0x575454[0x6]*_0x501b27[0x2]+_0x575454[0x7]*_0x501b27[0xa]+_0x575454[0x8]*_0x501b27[0xc]+_0x575454[0x9]*_0x501b27[0xd]-_0x575454[0xa]*_0x501b27[0x7]-_0x575454[0xb]*_0x501b27[0xe]+_0x575454[0xc]*_0x501b27[0x8]+_0x575454[0xd]*_0x501b27[0x9]+_0x575454[0xe]*_0x501b27[0xb]-_0x575454[0xf]*_0x501b27[0x3],_0x575454[0x0]*_0x501b27[0x5]-_0x575454[0x1]*_0x501b27[0x4]+_0x575454[0x2]*_0x501b27[0xf]+_0x575454[0x3]*_0x501b27[0x6]+_0x575454[0x4]*_0x501b27[0x1]+_0x575454[0x5]*_0x501b27[0x0]-_0x575454[0x6]*_0x501b27[0x3]-_0x575454[0x7]*_0x501b27[0x9]-_0x575454[0x8]*_0x501b27[0xb]+_0x575454[0x9]*_0x501b27[0x7]+_0x575454[0xa]*_0x501b27[0xc]-_0x575454[0xb]*_0x501b27[0x8]-_0x575454[0xc]*_0x501b27[0xe]+_0x575454[0xd]*_0x501b27[0xa]+_0x575454[0xe]*_0x501b27[0xc]+_0x575454[0xf]*_0x501b27[0x2],_0x575454[0x0]*_0x501b27[0x6]-_0x575454[0x1]*_0x501b27[0xf]-_0x575454[0x2]*_0x501b27[0x4]-_0x575454[0x3]*_0x501b27[0x5]+_0x575454[0x4]*_0x501b27[0x2]+_0x575454[0x5]*_0x501b27[0x3]+_0x575454[0x6]*_0x501b27[0x0]+_0x575454[0x7]*_0x501b27[0x8]-_0x575454[0x8]*_0x501b27[0x7]-_0x575454[0x9]*_0x501b27[0xb]-_0x575454[0xa]*_0x501b27[0xc]-_0x575454[0xb]*_0x501b27[0x9]-_0x575454[0xc]*_0x501b27[0xa]-_0x575454[0xd]*_0x501b27[0xe]+_0x575454[0xe]*_0x501b27[0xd]-_0x575454[0xf]*_0x501b27[0x1],_0x575454[0x0]*_0x501b27[0x7]+_0x575454[0x1]*_0x501b27[0xd]-_0x575454[0x2]*_0x501b27[0xc]+_0x575454[0x3]*_0x501b27[0xb]+_0x575454[0x7]*_0x501b27[0x0]+_0x575454[0xb]*_0x501b27[0x3]-_0x575454[0xc]*_0x501b27[0x2]+_0x575454[0xd]*_0x501b27[0x1],_0x575454[0x0]*_0x501b27[0x8]+_0x575454[0x1]*_0x501b27[0xe]-_0x575454[0x2]*_0x501b27[0xa]+_0x575454[0x3]*_0x501b27[0x9]+_0x575454[0x4]*_0x501b27[0xc]-_0x575454[0x5]*_0x501b27[0xb]+_0x575454[0x6]*_0x501b27[0x7]-_0x575454[0x7]*_0x501b27[0x6]+_0x575454[0x8]*_0x501b27[0x0]-_0x575454[0x9]*_0x501b27[0x3]+_0x575454[0xa]*_0x501b27[0x2]-_0x575454[0xb]*_0x501b27[0x5]+_0x575454[0xc]*_0x501b27[0x4]-_0x575454[0xd]*_0x501b27[0xf]+_0x575454[0xe]*_0x501b27[0x1]+_0x575454[0xf]*_0x501b27[0xd],_0x575454[0x0]*_0x501b27[0x9]+_0x575454[0x1]*_0x501b27[0xa]+_0x575454[0x2]*_0x501b27[0xe]-_0x575454[0x3]*_0x501b27[0x8]+_0x575454[0x4]*_0x501b27[0xd]-_0x575454[0x5]*_0x501b27[0x7]-_0x575454[0x6]*_0x501b27[0xb]+_0x575454[0x7]*_0x501b27[0x5]+_0x575454[0x8]*_0x501b27[0x3]+_0x575454[0x9]*_0x501b27[0x0]-_0x575454[0xa]*_0x501b27[0x1]-_0x575454[0xb]*_0x501b27[0x6]+_0x575454[0xc]*_0x501b27[0xf]+_0x575454[0xd]*_0x501b27[0x4]+_0x575454[0xe]*_0x501b27[0x2]-_0x575454[0xf]*_0x501b27[0xc],_0x575454[0x0]*_0x501b27[0xa]-_0x575454[0x1]*_0x501b27[0x9]+_0x575454[0x2]*_0x501b27[0x8]+_0x575454[0x3]*_0x501b27[0xe]+_0x575454[0x4]*_0x501b27[0x7]+_0x575454[0x5]*_0x501b27[0xd]-_0x575454[0x6]*_0x501b27[0xc]-_0x575454[0x7]*_0x501b27[0x4]-_0x575454[0x8]*_0x501b27[0x2]+_0x575454[0x9]*_0x501b27[0x1]+_0x575454[0xa]*_0x501b27[0x0]-_0x575454[0xb]*_0x501b27[0xf]-_0x575454[0xc]*_0x501b27[0x6]+_0x575454[0xd]*_0x501b27[0x5]+_0x575454[0xe]*_0x501b27[0x3]+_0x575454[0xf]*_0x501b27[0xb],_0x575454[0x0]*_0x501b27[0xb]+_0x575454[0x1]*_0x501b27[0xc]+_0x575454[0x2]*_0x501b27[0xd]-_0x575454[0x3]*_0x501b27[0x7]-_0x575454[0x7]*_0x501b27[0x3]+_0x575454[0xb]*_0x501b27[0x0]-_0x575454[0xc]*_0x501b27[0x1]-_0x575454[0xd]*_0x501b27[0x2],_0x575454[0x0]*_0x501b27[0xc]-_0x575454[0x1]*_0x501b27[0xb]+_0x575454[0x2]*_0x501b27[0x7]+_0x575454[0x3]*_0x501b27[0xd]+_0x575454[0x7]*_0x501b27[0x2]+_0x575454[0xb]*_0x501b27[0x1]+_0x575454[0xc]*_0x501b27[0x0]-_0x575454[0xd]*_0x501b27[0x3],_0x575454[0x0]*_0x501b27[0xd]-_0x575454[0x1]*_0x501b27[0x7]-_0x575454[0x2]*_0x501b27[0xb]-_0x575454[0x3]*_0x501b27[0xc]-_0x575454[0x7]*_0x501b27[0x1]+_0x575454[0xb]*_0x501b27[0x2]+_0x575454[0xc]*_0x501b27[0x3]+_0x575454[0xd]*_0x501b27[0x0],_0x575454[0x0]*_0x501b27[0xe]-_0x575454[0x1]*_0x501b27[0x8]-_0x575454[0x2]*_0x501b27[0x9]-_0x575454[0x3]*_0x501b27[0xa]+_0x575454[0x4]*_0x501b27[0xb]+_0x575454[0x5]*_0x501b27[0xc]+_0x575454[0x6]*_0x501b27[0xd]+_0x575454[0x7]*_0x501b27[0xf]-_0x575454[0x8]*_0x501b27[0x1]-_0x575454[0x9]*_0x501b27[0x2]-_0x575454[0xa]*_0x501b27[0x3]-_0x575454[0xb]*_0x501b27[0x4]-_0x575454[0xc]*_0x501b27[0x5]-_0x575454[0xd]*_0x501b27[0x6]+_0x575454[0xe]*_0x501b27[0x0]-_0x575454[0xf]*_0x501b27[0x7],_0x575454[0x0]*_0x501b27[0xf]+_0x575454[0x1]*_0x501b27[0x6]-_0x575454[0x2]*_0x501b27[0x5]+_0x575454[0x3]*_0x501b27[0x4]+_0x575454[0x4]*_0x501b27[0x3]-_0x575454[0x5]*_0x501b27[0x2]+_0x575454[0x6]*_0x501b27[0x1]-_0x575454[0x7]*_0x501b27[0xe]+_0x575454[0x8]*_0x501b27[0xd]-_0x575454[0x9]*_0x501b27[0xc]+_0x575454[0xa]*_0x501b27[0xb]-_0x575454[0xb]*_0x501b27[0xa]+_0x575454[0xc]*_0x501b27[0x9]-_0x575454[0xd]*_0x501b27[0x8]+_0x575454[0xe]*_0x501b27[0x7]+_0x575454[0xf]*_0x501b27[0x0]];}static[_0x132d88(0x120)](_0x59476d){return[_0x59476d[0x0],-_0x59476d[0x1],-_0x59476d[0x2],-_0x59476d[0x3],-_0x59476d[0x4],-_0x59476d[0x5],-_0x59476d[0x6],-_0x59476d[0x7],-_0x59476d[0x8],-_0x59476d[0x9],-_0x59476d[0xa],_0x59476d[0xb],_0x59476d[0xc],_0x59476d[0xd],_0x59476d[0xe],_0x59476d[0xf]];}static[_0x132d88(0xc3)](_0x794c6d,_0x1f79c3){const _0x34f5f7=_0x132d88;return PGA3D[_0x34f5f7(0xb6)](_0x1f79c3,PGA3D['geometricProduct'](_0x794c6d,PGA3D['reverse'](_0x1f79c3)));}static[_0x132d88(0x163)](_0x2c4af2){const _0x45176b=_0x132d88;return Math[_0x45176b(0x15a)](_0x2c4af2['map'](_0x74750=>_0x74750*_0x74750)[_0x45176b(0x18f)]((_0x597827,_0x35fc2d)=>_0x597827+_0x35fc2d,0x0));}static[_0x132d88(0xbd)](_0xcbc10c,_0x805871,_0x567e88){return[0x1,0x0,0x0,0x0,-_0xcbc10c/0x2,-_0x805871/0x2,-_0x567e88/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x132d88(0x148)](_0xbd571){return[0x1,0x0,0x0,0x0,_0xbd571[0x4],_0xbd571[0x5],_0xbd571[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x132d88(0x1a6)](_0x471831,_0x145857=0x1,_0x5031b9=0x0,_0x4cf9c2=0x0,_0x1f4bd7=0x0,_0x5ea3de=0x0,_0x33e892=0x0){const _0xa5ae6c=_0x132d88;let _0x3d33bd=Math['cos'](_0x471831/0x2),_0x3f7ab7=Math['sin'](_0x471831/0x2),_0x2f2ca5=PGA3D[_0xa5ae6c(0x137)](_0x1f4bd7,_0x5ea3de,_0x33e892,_0x145857,_0x5031b9,_0x4cf9c2);return[_0x3d33bd,_0x3f7ab7*_0x2f2ca5[0x1],_0x3f7ab7*_0x2f2ca5[0x2],_0x3f7ab7*_0x2f2ca5[0x3],_0x3f7ab7*_0x2f2ca5[0x4],_0x3f7ab7*_0x2f2ca5[0x5],_0x3f7ab7*_0x2f2ca5[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x132d88(0x1b5)](_0x470466){return[_0x470466[0x0],_0x470466[0x1],_0x470466[0x2],_0x470466[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createDir'](_0x1b9036,_0x39aad3,_0x14dbbf){return[0x0,_0x14dbbf,-_0x39aad3,_0x1b9036,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createLine'](_0x437fe7,_0x3e91a4,_0x5e920d,_0x174ad4,_0x247901,_0x58bba3){const _0x132038=_0x132d88;let _0xb9e6f7=PGA3D[_0x132038(0xe0)](_0x174ad4,_0x247901,_0x58bba3),_0x5ea333=PGA3D[_0x132038(0xc2)](_0xb9e6f7);return[0x0,_0x5ea333[0x1],_0x5ea333[0x2],_0x5ea333[0x3],-(-_0x5ea333[0x2]*_0x5e920d-_0x5ea333[0x1]*_0x3e91a4),-(_0x5ea333[0x1]*_0x437fe7-_0x5ea333[0x3]*_0x5e920d),-(_0x5ea333[0x3]*_0x3e91a4+_0x5ea333[0x2]*_0x437fe7),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x132d88(0xf2)](_0x24e0db,_0x47ec00,_0x1d1bdf){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x1d1bdf,_0x47ec00,-_0x24e0db,0x0,0x0,0x0,0x0,0x0];}static[_0x132d88(0x130)](_0x18e7f8){return[-_0x18e7f8[0xa]/_0x18e7f8[0x7],_0x18e7f8[0x9]/_0x18e7f8[0x7],-_0x18e7f8[0x8]/_0x18e7f8[0x7]];}static[_0x132d88(0x1ba)](_0x14795d,_0x50294b,_0x37f996,_0x1aab75){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x14795d,_0x50294b,_0x37f996,-_0x1aab75,0x0];}static[_0x132d88(0x113)](_0x3a6ab8,_0x2f890b,_0x19a099){const _0x5a9ab4=_0x132d88;let _0x301283=_0x2f890b[0x1]*_0x19a099[0x2]-_0x19a099[0x1]*_0x2f890b[0x2]-(_0x3a6ab8[0x1]*_0x19a099[0x2]-_0x19a099[0x1]*_0x3a6ab8[0x2])+(_0x3a6ab8[0x1]*_0x2f890b[0x2]-_0x2f890b[0x1]*_0x3a6ab8[0x2]),_0x41e5ab=_0x2f890b[0x0]*_0x19a099[0x2]-_0x19a099[0x0]*_0x2f890b[0x2]-(_0x3a6ab8[0x0]*_0x19a099[0x2]-_0x19a099[0x0]*_0x3a6ab8[0x2])+(_0x3a6ab8[0x0]*_0x2f890b[0x2]-_0x2f890b[0x0]*_0x3a6ab8[0x2]),_0x55adc4=_0x2f890b[0x0]*_0x19a099[0x1]-_0x19a099[0x0]*_0x2f890b[0x1]-(_0x3a6ab8[0x0]*_0x19a099[0x1]-_0x19a099[0x0]*_0x3a6ab8[0x1])+(_0x3a6ab8[0x0]*_0x2f890b[0x1]-_0x2f890b[0x0]*_0x3a6ab8[0x1]),_0x8fe6f0=_0x3a6ab8[0x0]*(_0x2f890b[0x1]*_0x19a099[0x2]-_0x19a099[0x1]*_0x2f890b[0x2])-_0x2f890b[0x0]*(_0x3a6ab8[0x1]*_0x19a099[0x2]-_0x19a099[0x1]*_0x3a6ab8[0x2])+_0x19a099[0x0]*(_0x3a6ab8[0x1]*_0x2f890b[0x2]-_0x2f890b[0x1]*_0x3a6ab8[0x2]);return PGA3D[_0x5a9ab4(0x1ba)](_0x301283,-_0x41e5ab,_0x55adc4,_0x8fe6f0);}static[_0x132d88(0xe7)](_0x535a11,_0x2ff4e9){const _0x285b2f=_0x132d88;let _0x3820c6=PGA3D['geometricProduct'](_0x535a11,_0x2ff4e9),_0x3f682e=Math[_0x285b2f(0x14f)](_0x3820c6[0x7])<=1e-8,_0x313a39=_0x3f682e&&Math[_0x285b2f(0x14f)](_0x3820c6[0x8])<=1e-8&&Math[_0x285b2f(0x14f)](_0x3820c6[0x9])<=1e-8&&Math['abs'](_0x3820c6[0xa])<=1e-8;return[PGA3D[_0x285b2f(0x130)](_0x3820c6),!_0x3f682e,_0x313a39];}static[_0x132d88(0xc2)](_0x291e9c){const _0x26492e=_0x132d88;let _0x272254=PGA3D[_0x26492e(0x163)](_0x291e9c);if(_0x272254==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x291e9c[_0x26492e(0x138)](_0x4978af=>_0x4978af/_0x272254);}static[_0x132d88(0x1b0)](_0x2a68af,_0x2f849f){const _0x448be4=_0x132d88;let _0x341367=PGA3D[_0x448be4(0xc3)](PGA3D['createPoint'](_0x2a68af[0x0],_0x2a68af[0x1],_0x2a68af[0x2]),_0x2f849f);return PGA3D[_0x448be4(0x130)](_0x341367);}static[_0x132d88(0x126)](_0x39c590,_0xbe7eab){const _0x1a25f5=_0x132d88;let _0xf81c14=PGA3D[_0x1a25f5(0x1b5)](_0xbe7eab),_0x5af023=PGA3D[_0x1a25f5(0xc3)](PGA3D[_0x1a25f5(0xf2)](_0x39c590[0x0],_0x39c590[0x1],_0x39c590[0x2]),_0xf81c14);return PGA3D[_0x1a25f5(0x130)](_0x5af023);}static[_0x132d88(0x1aa)](_0x174c50,_0x3db904,_0x280a20,_0x1ea8a9){const _0x48dc88=_0x132d88;let _0x43f0ca=PGA3D[_0x48dc88(0xf2)](_0x174c50[0x0],_0x174c50[0x1],_0x174c50[0x2]),_0x58de71=PGA3D[_0x48dc88(0xf2)](_0x3db904[0x0],_0x3db904[0x1],_0x3db904[0x2]),_0x1ec72c=PGA3D[_0x48dc88(0xf2)](_0x280a20[0x0],_0x280a20[0x1],_0x280a20[0x2]),_0x3b6f0d=PGA3D['createPoint'](_0x1ea8a9[0x0],_0x1ea8a9[0x1],_0x1ea8a9[0x2]),_0xc279a6=PGA3D['createPlaneFromPoints'](_0x174c50,_0x3db904,_0x280a20),_0x12f5d1=PGA3D['createPlaneFromPoints'](_0x1ea8a9,_0x3db904,_0x280a20),_0x82de02=PGA3D[_0x48dc88(0x113)](_0x174c50,_0x1ea8a9,_0x280a20),_0x2ca25c=PGA3D['createPlaneFromPoints'](_0x174c50,_0x3db904,_0x1ea8a9),_0x4da172=_0xc279a6[0xb]*_0xc279a6[0xb]+_0xc279a6[0xc]*_0xc279a6[0xc]+_0xc279a6[0xd]*_0xc279a6[0xd]+_0xc279a6[0xe]*_0xc279a6[0xe],_0xd018f8=_0xc279a6[0xb]*_0x12f5d1[0xb]+_0xc279a6[0xc]*_0x12f5d1[0xc]+_0xc279a6[0xd]*_0x12f5d1[0xd]+_0xc279a6[0xe]*_0x12f5d1[0xe],_0x2c8738=_0xc279a6[0xb]*_0x82de02[0xb]+_0xc279a6[0xc]*_0x82de02[0xc]+_0xc279a6[0xd]*_0x82de02[0xd]+_0xc279a6[0xe]*_0x82de02[0xe],_0x32affb=_0xc279a6[0xb]*_0x2ca25c[0xb]+_0xc279a6[0xc]*_0x2ca25c[0xc]+_0xc279a6[0xd]*_0x2ca25c[0xd]+_0xc279a6[0xe]*_0x2ca25c[0xe],_0x5c84cd=_0xd018f8/_0x4da172,_0x574b28=_0x2c8738/_0x4da172,_0x3f563f=_0x32affb/_0x4da172;return _0x5c84cd>=0x0&&_0x5c84cd<=0x1&&_0x574b28>=0x0&&_0x574b28<=0x1&&_0x3f563f>=0x0&&_0x3f563f<=0x1;}}class Camera{constructor(_0xdb518a,_0x476966){const _0x59b2fd=_0x132d88;this['_pose']=new Float32Array(Array(0x10)['fill'](0x0)),this[_0x59b2fd(0xea)][0x0]=0x1,this[_0x59b2fd(0x1a1)]=new Float32Array(Array(0x2)[_0x59b2fd(0xc0)](0x1)),this[_0x59b2fd(0x12f)]=new Float32Array([_0xdb518a,_0x476966]),this['_isProjective']=![];}[_0x132d88(0xe4)](){const _0x4bd71e=_0x132d88;this['_pose'][0x0]=0x1;for(let _0x596f70=0x1;_0x596f70<0x10;++_0x596f70)this[_0x4bd71e(0xea)][_0x596f70]=0x0;this[_0x4bd71e(0x1a1)][0x0]=0x1,this['_focal'][0x1]=0x1;}['updatePose'](_0x450710){const _0x25c5a4=_0x132d88;for(let _0x512091=0x0;_0x512091<0x10;++_0x512091)this[_0x25c5a4(0xea)][_0x512091]=_0x450710[_0x512091];}[_0x132d88(0x17a)](_0xc4d543,_0x5956c5){const _0x125d62=_0x132d88;this[_0x125d62(0x12f)][0x0]=_0xc4d543,this[_0x125d62(0x12f)][0x1]=_0x5956c5;}[_0x132d88(0x14b)](_0xaa727f){const _0x30e2be=_0x132d88;let _0x2fd126=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x30e2be(0xea)]),_0x5c9fff=PGA3D[_0x30e2be(0xbd)](_0xaa727f*_0x2fd126[0x0],_0xaa727f*_0x2fd126[0x1],_0xaa727f*_0x2fd126[0x2]),_0xadf994=PGA3D[_0x30e2be(0xc2)](PGA3D[_0x30e2be(0xb6)](_0x5c9fff,this['_pose']));this[_0x30e2be(0x13b)](_0xadf994);}[_0x132d88(0xf5)](_0x391567){const _0x1f8629=_0x132d88;let _0x25c532=PGA3D[_0x1f8629(0x126)]([0x0,0x1,0x0],this[_0x1f8629(0xea)]),_0x24d6aa=PGA3D[_0x1f8629(0xbd)](_0x391567*_0x25c532[0x0],_0x391567*_0x25c532[0x1],_0x391567*_0x25c532[0x2]),_0x1a70a4=PGA3D[_0x1f8629(0xc2)](PGA3D['geometricProduct'](_0x24d6aa,this[_0x1f8629(0xea)]));this[_0x1f8629(0x13b)](_0x1a70a4);}[_0x132d88(0x162)](_0x3213a2){const _0x322c95=_0x132d88;let _0x2a0ee5=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x322c95(0xea)]),_0x311f12=PGA3D[_0x322c95(0xbd)](_0x3213a2*_0x2a0ee5[0x0],_0x3213a2*_0x2a0ee5[0x1],_0x3213a2*_0x2a0ee5[0x2]),_0xb8ae34=PGA3D[_0x322c95(0xc2)](PGA3D[_0x322c95(0xb6)](_0x311f12,this[_0x322c95(0xea)]));this['updatePose'](_0xb8ae34);}[_0x132d88(0x168)](_0x2396af){const _0x453de6=_0x132d88;let _0x3e3c82=PGA3D[_0x453de6(0x1b0)]([0x0,0x0,0x0],this[_0x453de6(0xea)]),_0x535d04=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x453de6(0xea)]),_0x4687a4=PGA3D[_0x453de6(0x1a6)](_0x2396af,_0x535d04[0x0],_0x535d04[0x1],_0x535d04[0x2],_0x3e3c82[0x0],_0x3e3c82[0x1],_0x3e3c82[0x2]),_0x39e37b=PGA3D['normalizeMotor'](PGA3D['geometricProduct'](_0x4687a4,this[_0x453de6(0xea)]));this[_0x453de6(0x13b)](_0x39e37b);}[_0x132d88(0xed)](_0x5dec5f){const _0x28f62c=_0x132d88;let _0x525ecb=PGA3D[_0x28f62c(0x1b0)]([0x0,0x0,0x0],this[_0x28f62c(0xea)]),_0x3089e1=PGA3D[_0x28f62c(0x126)]([0x0,0x1,0x0],this['_pose']),_0x1943b4=PGA3D[_0x28f62c(0x1a6)](_0x5dec5f,_0x3089e1[0x0],_0x3089e1[0x1],_0x3089e1[0x2],_0x525ecb[0x0],_0x525ecb[0x1],_0x525ecb[0x2]),_0x3b1add=PGA3D[_0x28f62c(0xc2)](PGA3D[_0x28f62c(0xb6)](_0x1943b4,this[_0x28f62c(0xea)]));this[_0x28f62c(0x13b)](_0x3b1add);}[_0x132d88(0x169)](_0x32e281){const _0x1a0a08=_0x132d88;let _0x1827f4=PGA3D[_0x1a0a08(0x1b0)]([0x0,0x0,0x0],this[_0x1a0a08(0xea)]),_0x2efb0b=PGA3D[_0x1a0a08(0x126)]([0x0,0x0,0x1],this['_pose']),_0xe54ba5=PGA3D[_0x1a0a08(0x1a6)](_0x32e281,_0x2efb0b[0x0],_0x2efb0b[0x1],_0x2efb0b[0x2],_0x1827f4[0x0],_0x1827f4[0x1],_0x1827f4[0x2]),_0x4ca295=PGA3D[_0x1a0a08(0xc2)](PGA3D[_0x1a0a08(0xb6)](_0xe54ba5,this[_0x1a0a08(0xea)]));this['updatePose'](_0x4ca295);}}async function init(){const _0x418cc0=_0x132d88,_0x2de071=document[_0x418cc0(0x1a7)]('canvas');_0x2de071['id']=_0x418cc0(0x114),document['body'][_0x418cc0(0x19b)](_0x2de071);const _0xe3b1f4=new RayTracer(_0x2de071);await _0xe3b1f4['init']();var _0x112165=_0x418cc0(0x1bc),_0x22fcc0=new StandardTextObject(_0x112165);let _0x5f44a5=new Camera();_0x5f44a5[_0x418cc0(0xea)][0x6]=0.7,_0x5f44a5[_0x418cc0(0x185)]=!![];var _0x35bfae=0x5,_0x56a032=[_0x418cc0(0x11d),'MIP',_0x418cc0(0x13e),_0x418cc0(0xce),_0x418cc0(0x144),_0x418cc0(0xfb)],_0x14f7a0=null,_0x555587=async()=>{const _0x45a63b=_0x418cc0;_0x112165=_0x112165[_0x45a63b(0x13c)](_0x45a63b(0x155),_0x56a032[_0x35bfae]);switch(_0x35bfae){case 0x0:_0x14f7a0=new VolumeRenderingSimpleObject(_0xe3b1f4[_0x45a63b(0x16c)],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x56a032[_0x45a63b(0xa9)]-0x1],_0x56a032[_0x35bfae]);break;case 0x1:_0x14f7a0=new VolumeRenderingMIPObject(_0xe3b1f4['_device'],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x35bfae-0x1],_0x56a032[_0x35bfae]);break;case 0x2:_0x14f7a0=new VolumeRenderingLinearObject(_0xe3b1f4[_0x45a63b(0x16c)],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x35bfae-0x1],_0x56a032[_0x35bfae]);break;case 0x3:_0x14f7a0=new VolumeRenderingLinearDepthObject(_0xe3b1f4[_0x45a63b(0x16c)],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x35bfae-0x1],_0x56a032[_0x35bfae]);break;case 0x4:_0x14f7a0=new VolumeRenderingDRRObject(_0xe3b1f4[_0x45a63b(0x16c)],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x35bfae-0x1],_0x56a032[_0x35bfae]);break;case 0x5:_0x14f7a0=new VolumeRenderingCinematicObject(_0xe3b1f4[_0x45a63b(0x16c)],_0xe3b1f4[_0x45a63b(0xf0)],_0x5f44a5),_0x112165=_0x112165[_0x45a63b(0x13c)](_0x56a032[_0x35bfae-0x1],_0x56a032[_0x35bfae]);break;}_0x22fcc0[_0x45a63b(0x150)](_0x112165),await _0xe3b1f4['setTracerObject'](_0x14f7a0);};await _0x555587();let _0x24ceca='??';var _0x10ee72=new StandardTextObject(_0x418cc0(0x13d)+_0x24ceca),_0x37888b=0.05;window[_0x418cc0(0x170)](_0x418cc0(0xd5),async _0x28d557=>{const _0x35c16f=_0x418cc0;switch(_0x28d557[_0x35c16f(0x175)]){case'h':case'H':_0x22fcc0[_0x35c16f(0x1b4)]();break;case'f':case'F':_0x10ee72[_0x35c16f(0x1b4)]();break;case'w':case'W':_0x5f44a5['moveY'](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case's':case'S':_0x5f44a5[_0x35c16f(0xf5)](_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'a':case'A':_0x5f44a5[_0x35c16f(0x14b)](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'd':case'D':_0x5f44a5[_0x35c16f(0x14b)](_0x37888b),_0x14f7a0?.['updateCameraPose']();break;case'q':case'Q':_0x5f44a5[_0x35c16f(0x162)](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'e':case'E':_0x5f44a5['moveZ'](_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'i':case'I':_0x5f44a5[_0x35c16f(0x168)](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'k':case'K':_0x5f44a5[_0x35c16f(0x168)](_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'j':case'J':_0x5f44a5[_0x35c16f(0xed)](_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'l':case'L':_0x5f44a5[_0x35c16f(0xed)](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'u':case'U':_0x5f44a5[_0x35c16f(0x169)](-_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'o':case'O':_0x5f44a5[_0x35c16f(0x169)](_0x37888b),_0x14f7a0?.[_0x35c16f(0x13f)]();break;case'c':case'C':_0x5f44a5[_0x35c16f(0x185)]=!_0x5f44a5[_0x35c16f(0x185)];break;case'r':case'R':_0x5f44a5['resetPose'](),_0x5f44a5[_0x35c16f(0xea)][0x6]=0.7,_0x14f7a0?.['updateCameraPose'](),_0x14f7a0?.[_0x35c16f(0x197)]();break;case'[':_0x5f44a5[_0x35c16f(0x1a1)][0x0]*=1.1,_0x14f7a0?.[_0x35c16f(0x197)]();break;case']':_0x5f44a5['_focal'][0x0]/=1.1,_0x14f7a0?.[_0x35c16f(0x197)]();break;case'{':_0x5f44a5[_0x35c16f(0x1a1)][0x1]*=1.1,_0x14f7a0?.[_0x35c16f(0x197)]();break;case'}':_0x5f44a5['_focal'][0x1]/=1.1,_0x14f7a0?.[_0x35c16f(0x197)]();break;case'm':case'M':_0x35bfae=(_0x35bfae+0x1)%_0x56a032['length'],await _0x555587();break;}}),window[_0x418cc0(0x170)]('keyup',_0x224041=>{});let _0x382b1e=async _0x11d193=>{},_0x5b7d58=async _0xa0f5e6=>{},_0x44872e=_0x433c94=>{};_0x2de071[_0x418cc0(0x170)](_0x418cc0(0x19c),_0x382b1e),_0x2de071[_0x418cc0(0x170)](_0x418cc0(0x102),_0x5b7d58),_0x2de071['addEventListener']('mouseup',_0x44872e),_0x2de071[_0x418cc0(0x170)](_0x418cc0(0x1a8),_0x3b887c=>{}),_0x2de071[_0x418cc0(0x170)](_0x418cc0(0x119),_0x4fa25b=>{}),_0x2de071['addEventListener'](_0x418cc0(0x1a2),_0x382b1e),_0x2de071[_0x418cc0(0x170)](_0x418cc0(0x196),_0x5b7d58),_0x2de071['addEventListener']('touchend',_0x44872e),_0x22fcc0[_0x418cc0(0x16e)][_0x418cc0(0x14e)][_0x418cc0(0xbf)](_0x418cc0(0x199),_0x418cc0(0xdb)),_0x10ee72['_textCanvas']['style']['setProperty']('pointer-events',_0x418cc0(0xdb));var _0x4c0f0d=0x0,_0x4f53dd=0x3c,_0x22e7a0=0x1/_0x4f53dd,_0x1e8d59=_0x22e7a0*0x3e8,_0x49a237;let _0x1d867d=()=>{const _0xd14d0a=_0x418cc0;let _0x52f797=Date[_0xd14d0a(0x11f)]()-_0x49a237;_0x52f797>_0x1e8d59&&(++_0x4c0f0d,_0x49a237=Date[_0xd14d0a(0x11f)]()-_0x52f797%_0x1e8d59,_0xe3b1f4[_0xd14d0a(0xb7)]()),requestAnimationFrame(_0x1d867d);};return _0x49a237=Date['now'](),_0x1d867d(),_0x10ee72[_0x418cc0(0x16e)][_0x418cc0(0x14e)][_0x418cc0(0xbf)](_0x418cc0(0x127),_0x418cc0(0x10b)),_0x10ee72['_textCanvas'][_0x418cc0(0x14e)][_0x418cc0(0x189)]=_0x418cc0(0x19a),setInterval(()=>{const _0x15d0db=_0x418cc0;_0x24ceca=_0x4c0f0d,_0x4c0f0d=0x0,_0x10ee72[_0x15d0db(0x150)]('fps:\x20'+_0x24ceca);},0x3e8),_0xe3b1f4;}init()['then'](_0x3d8829=>{const _0x576c19=_0x132d88;console[_0x576c19(0xca)](_0x3d8829);})['catch'](_0x39493b=>{const _0x2b122e=_0x132d88,_0x454255=document[_0x2b122e(0x1a7)]('p');_0x454255[_0x2b122e(0x159)]=navigator[_0x2b122e(0x1a5)]+'</br>'+_0x39493b['message'],document[_0x2b122e(0x166)]['appendChild'](_0x454255),document[_0x2b122e(0x198)](_0x2b122e(0x114))['remove']();});
