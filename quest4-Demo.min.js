/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x527bdf=_0x1c6e;(function(_0x22dc4c,_0x14ba11){const _0x237bdd=_0x1c6e,_0x1dbf29=_0x22dc4c();while(!![]){try{const _0x5bbfde=parseInt(_0x237bdd(0x14e))/0x1+parseInt(_0x237bdd(0x161))/0x2+-parseInt(_0x237bdd(0x138))/0x3*(parseInt(_0x237bdd(0x108))/0x4)+parseInt(_0x237bdd(0x198))/0x5*(parseInt(_0x237bdd(0xf9))/0x6)+-parseInt(_0x237bdd(0x10d))/0x7*(-parseInt(_0x237bdd(0x12c))/0x8)+-parseInt(_0x237bdd(0x1a1))/0x9*(parseInt(_0x237bdd(0x19c))/0xa)+parseInt(_0x237bdd(0xe7))/0xb;if(_0x5bbfde===_0x14ba11)break;else _0x1dbf29['push'](_0x1dbf29['shift']());}catch(_0x1ea9ce){_0x1dbf29['push'](_0x1dbf29['shift']());}}}(_0xe2a1,0xdaa42));class Renderer{constructor(_0x164809){const _0x5964e9=_0x1c6e;this[_0x5964e9(0xf4)]=_0x164809,this['_objects']=[],this[_0x5964e9(0x13b)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x527bdf(0x17d)](){const _0x4a5945=_0x527bdf;if(!navigator[_0x4a5945(0x1b5)])throw Error(_0x4a5945(0x137));const _0x3ea532=await navigator[_0x4a5945(0x1b5)]['requestAdapter']();if(!_0x3ea532)throw Error(_0x4a5945(0x15b));this[_0x4a5945(0x17f)]=await _0x3ea532[_0x4a5945(0x168)](),this[_0x4a5945(0xe9)]=this[_0x4a5945(0xf4)][_0x4a5945(0x11a)](_0x4a5945(0xff)),this['_canvasFormat']=navigator[_0x4a5945(0x1b5)][_0x4a5945(0x15d)](),this['_context']['configure']({'device':this[_0x4a5945(0x17f)],'format':this[_0x4a5945(0x121)]}),this[_0x4a5945(0xf8)](),window[_0x4a5945(0x196)](_0x4a5945(0x12d),this['resizeCanvas'][_0x4a5945(0xd3)](this));}[_0x527bdf(0xf8)](){const _0x5199e7=_0x527bdf,_0x1bc3b3=window['devicePixelRatio']||0x1,_0x196daa=window[_0x5199e7(0x1bf)]*_0x1bc3b3,_0x4c1c6b=window[_0x5199e7(0x103)]*_0x1bc3b3;this[_0x5199e7(0xf4)]['width']=_0x196daa,this[_0x5199e7(0xf4)][_0x5199e7(0xe8)]=_0x4c1c6b,this['_canvas'][_0x5199e7(0x125)][_0x5199e7(0x181)]=window[_0x5199e7(0x1bf)]+'px',this['_canvas']['style'][_0x5199e7(0xe8)]=window[_0x5199e7(0x103)]+'px',this['_canvas'][_0x5199e7(0x125)][_0x5199e7(0xfd)]=_0x5199e7(0x120),this[_0x5199e7(0x106)]();}async[_0x527bdf(0x127)](_0x264217){const _0x10752b=_0x527bdf;await _0x264217[_0x10752b(0x17d)](),this[_0x10752b(0xcd)][_0x10752b(0x132)](_0x264217);}[_0x527bdf(0x114)](_0x1f3c4c){const _0x3efe81=_0x527bdf;for(const _0x980dca of this[_0x3efe81(0xcd)]){_0x980dca?.[_0x3efe81(0xde)]();}let _0x1c50c0=this[_0x3efe81(0x17f)]['createCommandEncoder']();const _0x4f8ec5=_0x1c50c0['beginRenderPass']({'colorAttachments':[{'view':_0x1f3c4c,'clearValue':this[_0x3efe81(0x13b)],'loadOp':'clear','storeOp':_0x3efe81(0x1ad)}]});for(const _0x3bff46 of this[_0x3efe81(0xcd)]){_0x3bff46?.[_0x3efe81(0x106)](_0x4f8ec5);}_0x4f8ec5[_0x3efe81(0x107)]();const _0x5ae422=_0x1c50c0['beginComputePass']();for(const _0x1c82b1 of this[_0x3efe81(0xcd)]){_0x1c82b1?.['compute'](_0x5ae422);}_0x5ae422[_0x3efe81(0x107)]();const _0x15e2ae=_0x1c50c0[_0x3efe81(0xd2)]();this[_0x3efe81(0x17f)][_0x3efe81(0x129)][_0x3efe81(0x14d)]([_0x15e2ae]);}['render'](){const _0x524933=_0x527bdf;this[_0x524933(0x114)](this[_0x524933(0xe9)][_0x524933(0xfb)]()[_0x524933(0x15f)]());}}class StandardTextObject{constructor(_0x33e956,_0x5acca3=0x5,_0x293d82=_0x527bdf(0x11e)){const _0x151493=_0x527bdf;this['_textFont']=_0x293d82,this[_0x151493(0x104)]=_0x5acca3,this[_0x151493(0x1a4)]=document[_0x151493(0xca)](_0x151493(0x191)),this[_0x151493(0xfe)]=this['_textCanvas'][_0x151493(0x11a)]('2d'),this[_0x151493(0x13d)](_0x33e956),this[_0x151493(0xcc)](_0x33e956),this[_0x151493(0x1a4)]['style'][_0x151493(0x12a)]='absolute',this[_0x151493(0x1a4)][_0x151493(0x125)][_0x151493(0x179)]=_0x151493(0x173),this['_textCanvas'][_0x151493(0x125)][_0x151493(0x1bd)]='10px',this[_0x151493(0x1a4)][_0x151493(0x125)][_0x151493(0x10f)]=_0x151493(0x183),document[_0x151493(0x1b3)]['appendChild'](this['_textCanvas']);}[_0x527bdf(0x139)](){const _0x27cce6=_0x527bdf;this[_0x27cce6(0x1a4)][_0x27cce6(0xdb)]=!this[_0x27cce6(0x1a4)][_0x27cce6(0xdb)];}[_0x527bdf(0x13d)](_0x485050){const _0x1f3263=_0x527bdf;this[_0x1f3263(0xfe)][_0x1f3263(0x190)]=this[_0x1f3263(0x1b2)],this[_0x1f3263(0x119)]=_0x485050[_0x1f3263(0x135)]('\x0a'),this[_0x1f3263(0x154)]=Math[_0x1f3263(0x131)](...this[_0x1f3263(0x119)][_0x1f3263(0x1aa)](_0x35fad1=>this[_0x1f3263(0xfe)][_0x1f3263(0x101)](_0x35fad1)[_0x1f3263(0x181)]));const _0x321f30=this[_0x1f3263(0x1b2)][_0x1f3263(0x162)](/(\d+)px/);_0x321f30?this[_0x1f3263(0xc6)]=parseInt(_0x321f30[0x1],0xa):(this[_0x1f3263(0xc6)]=0x12,this['_textFont']=_0x1f3263(0x11e)),this[_0x1f3263(0xf7)]=this[_0x1f3263(0x119)]['length']*(this[_0x1f3263(0xc6)]+this[_0x1f3263(0x104)]),this[_0x1f3263(0xee)]=0x5,this[_0x1f3263(0xc8)]=0x3,this[_0x1f3263(0xec)]=Math[_0x1f3263(0x169)](this['_width']+this['_paddingx']*0x2),this[_0x1f3263(0x153)]=Math[_0x1f3263(0x169)](this[_0x1f3263(0xf7)]+this[_0x1f3263(0xc8)]),this[_0x1f3263(0x1a4)][_0x1f3263(0x181)]=this[_0x1f3263(0xec)],this[_0x1f3263(0x1a4)][_0x1f3263(0xe8)]=this[_0x1f3263(0x153)],this[_0x1f3263(0xfe)][_0x1f3263(0x190)]=this[_0x1f3263(0x1b2)],this[_0x1f3263(0xfe)][_0x1f3263(0x118)]=_0x1f3263(0x179);}[_0x527bdf(0xcc)](_0x26c34f){const _0x54dc6f=_0x527bdf;this['_lines']=_0x26c34f[_0x54dc6f(0x135)]('\x0a'),this[_0x54dc6f(0xfe)]['fillStyle']='rgba(1,\x201,\x201,\x200.5)',this[_0x54dc6f(0xfe)][_0x54dc6f(0x143)](0x0,0x0,this[_0x54dc6f(0xec)],this[_0x54dc6f(0x153)]),this[_0x54dc6f(0xfe)][_0x54dc6f(0x197)](0x0,0x0,this[_0x54dc6f(0xec)],this[_0x54dc6f(0x153)]),this['_textContext'][_0x54dc6f(0xdd)]='white',this[_0x54dc6f(0x119)]['forEach']((_0x29ea1d,_0x41bac7)=>{const _0x515355=_0x54dc6f,_0x298c2f=this[_0x515355(0xee)],_0x41755f=this[_0x515355(0xc8)]+_0x41bac7*(this['_fontSize']+this['_lineSpacing']);this[_0x515355(0xfe)][_0x515355(0x141)](_0x29ea1d,_0x298c2f,_0x41755f);});}}class SceneObject{static [_0x527bdf(0x194)]=0x0;constructor(_0x43ed7a,_0x33fd03){const _0x40e38c=_0x527bdf;if(this['constructor']==SceneObject)throw new Error(_0x40e38c(0x188));this[_0x40e38c(0x17f)]=_0x43ed7a,this[_0x40e38c(0x121)]=_0x33fd03,SceneObject[_0x40e38c(0x194)]+=0x1;}['getName'](){const _0x4e49bb=_0x527bdf;return this[_0x4e49bb(0x19d)][_0x4e49bb(0x16a)]+'\x20'+SceneObject['_objectCnt'][_0x4e49bb(0x19b)]();}async[_0x527bdf(0x17d)](){const _0x596d62=_0x527bdf;await this['createGeometry'](),await this[_0x596d62(0x171)](),await this[_0x596d62(0x136)](),await this['createComputePipeline']();}async[_0x527bdf(0xfa)](){const _0x3268d9=_0x527bdf;throw new Error(_0x3268d9(0xe6));}['updateGeometry'](){}[_0x527bdf(0x109)](_0x115d37){return new Promise((_0x553360,_0x5687fe)=>{const _0x29e548=_0x1c6e,_0x4ad10a=new XMLHttpRequest();_0x4ad10a[_0x29e548(0x164)](_0x29e548(0xd9),_0x115d37),_0x4ad10a[_0x29e548(0x142)](_0x29e548(0x12e),_0x29e548(0x1ab)),_0x4ad10a[_0x29e548(0xd4)]=function(){const _0x165252=_0x29e548;_0x4ad10a[_0x165252(0x123)]===XMLHttpRequest[_0x165252(0x19e)]&&_0x4ad10a[_0x165252(0x11b)]===0xc8?_0x553360(_0x4ad10a['responseText']):_0x5687fe({'status':_0x4ad10a[_0x165252(0x11b)],'statusText':_0x4ad10a[_0x165252(0x1b0)]});},_0x4ad10a[_0x29e548(0x1a8)]=function(){const _0x51c283=_0x29e548;_0x5687fe({'status':_0x4ad10a[_0x51c283(0x11b)],'statusText':_0x4ad10a[_0x51c283(0x1b0)]});},_0x4ad10a['send']();});}async['createShaders'](){const _0x42e29e=_0x527bdf;throw new Error(_0x42e29e(0xd8));}async['createRenderPipeline'](){const _0x93b2e=_0x527bdf;throw new Error(_0x93b2e(0x14a));}[_0x527bdf(0x106)](_0x529879){const _0x5b7239=_0x527bdf;throw new Error(_0x5b7239(0x182));}async[_0x527bdf(0x117)](){const _0x28fc7e=_0x527bdf;throw new Error(_0x28fc7e(0xd5));}['compute'](_0x17d7de){const _0x56aa4d=_0x527bdf;throw new Error(_0x56aa4d(0xef));}}class ParticleSystemObject extends SceneObject{constructor(_0x19f726,_0x2affdc,_0x127b1f=0x1000){const _0x3db98d=_0x527bdf;super(_0x19f726,_0x2affdc),this[_0x3db98d(0x155)]=_0x127b1f,this[_0x3db98d(0x1ac)]=0x0;}async[_0x527bdf(0xfa)](){const _0x57421a=_0x527bdf;await this[_0x57421a(0x1c2)]();}async['createParticleGeometry'](){const _0x12928c=_0x527bdf;this[_0x12928c(0x176)]=new Float32Array(this[_0x12928c(0x155)]*0xa),this[_0x12928c(0x10e)]=[this['_device'][_0x12928c(0x195)]({'label':_0x12928c(0x10b)+this[_0x12928c(0x16d)](),'size':this[_0x12928c(0x176)][_0x12928c(0x1c0)],'usage':GPUBufferUsage[_0x12928c(0x146)]|GPUBufferUsage[_0x12928c(0x134)]}),this['_device']['createBuffer']({'label':_0x12928c(0x126)+this[_0x12928c(0x16d)](),'size':this['_particles'][_0x12928c(0x1c0)],'usage':GPUBufferUsage[_0x12928c(0x146)]|GPUBufferUsage[_0x12928c(0x134)]})],this[_0x12928c(0x17b)]();}[_0x527bdf(0x17b)](){const _0x51aa67=_0x527bdf;for(let _0x45c464=0x0;_0x45c464<this[_0x51aa67(0x155)];++_0x45c464){this['_particles'][0xa*_0x45c464+0x0]=Math[_0x51aa67(0x13c)]()*0x2-0x1,this[_0x51aa67(0x176)][0xa*_0x45c464+0x1]=Math[_0x51aa67(0x13c)]()*0x2-0x1,this[_0x51aa67(0x176)][0xa*_0x45c464+0x2]=this[_0x51aa67(0x176)][0xa*_0x45c464+0x0],this['_particles'][0xa*_0x45c464+0x3]=this[_0x51aa67(0x176)][0xa*_0x45c464+0x1],this['_particles'][0xa*_0x45c464+0x4]=(Math[_0x51aa67(0x13c)]()*0x2-0x1)*0.002,this['_particles'][0xa*_0x45c464+0x5]=(Math[_0x51aa67(0x13c)]()*0x2-0x1)*0.002,this[_0x51aa67(0x176)][0xa*_0x45c464+0x6]=Math[_0x51aa67(0x13c)]()*0x80+0x7f,this[_0x51aa67(0x176)][0xa*_0x45c464+0x7]=this[_0x51aa67(0x176)][0xa*_0x45c464+0x6],this[_0x51aa67(0x176)][0xa*_0x45c464+0x8]=this[_0x51aa67(0x176)][0xa*_0x45c464+0x4],this['_particles'][0xa*_0x45c464+0x9]=this['_particles'][0xa*_0x45c464+0x5];}this[_0x51aa67(0x1ac)]=0x0,this['_device'][_0x51aa67(0x129)][_0x51aa67(0xf1)](this[_0x51aa67(0x10e)][this[_0x51aa67(0x1ac)]%0x2],0x0,this[_0x51aa67(0x176)]);}['updateGeometry'](){}async[_0x527bdf(0x171)](){const _0x515f2e=_0x527bdf;let _0x570edb=await this['loadShader'](_0x515f2e(0xf6));this[_0x515f2e(0x11f)]=this['_device']['createShaderModule']({'label':_0x515f2e(0x1be)+this[_0x515f2e(0x16d)](),'code':_0x570edb}),this[_0x515f2e(0x1a2)]=this[_0x515f2e(0x17f)]['createBindGroupLayout']({'label':'Particles\x20Bind\x20Group\x20Layout\x20'+this[_0x515f2e(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x515f2e(0x145)]|GPUShaderStage[_0x515f2e(0x149)],'buffer':{'type':_0x515f2e(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x515f2e(0x149)],'buffer':{'type':_0x515f2e(0x174)}}]}),this[_0x515f2e(0xc5)]=this[_0x515f2e(0x17f)][_0x515f2e(0xdf)]({'label':'Particles\x20Pipeline\x20Layout','bindGroupLayouts':[this['_bindGroupLayout']]});}async[_0x527bdf(0x136)](){const _0x1e8868=_0x527bdf;await this[_0x1e8868(0x193)]();}async['createParticlePipeline'](){const _0x459429=_0x527bdf;this[_0x459429(0x18b)]=this[_0x459429(0x17f)][_0x459429(0x136)]({'label':_0x459429(0x12f)+this[_0x459429(0x16d)](),'layout':this[_0x459429(0xc5)],'vertex':{'module':this[_0x459429(0x11f)],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x459429(0x11f)],'entryPoint':_0x459429(0x186),'targets':[{'format':this[_0x459429(0x121)]}]},'primitives':{'typology':_0x459429(0xc3)}}),this['_bindGroups']=[this[_0x459429(0x17f)]['createBindGroup']({'layout':this[_0x459429(0x18b)][_0x459429(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x459429(0x10e)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x459429(0x10e)][0x1]}}]}),this['_device'][_0x459429(0x152)]({'layout':this['_particlePipeline'][_0x459429(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x459429(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x459429(0x10e)][0x0]}}]})];}[_0x527bdf(0x106)](_0x3e19d0){const _0x555a33=_0x527bdf;_0x3e19d0[_0x555a33(0x12b)](this[_0x555a33(0x18b)]),_0x3e19d0['setBindGroup'](0x0,this[_0x555a33(0x1b8)][this[_0x555a33(0x1ac)]%0x2]),_0x3e19d0[_0x555a33(0x105)](0x80,this[_0x555a33(0x155)]);}async[_0x527bdf(0x117)](){const _0x349f39=_0x527bdf;this['_computePipeline']=this[_0x349f39(0x17f)][_0x349f39(0x117)]({'label':_0x349f39(0xc4)+this['getName'](),'layout':this[_0x349f39(0xc5)],'compute':{'module':this[_0x349f39(0x11f)],'entryPoint':'computeMain'}});}[_0x527bdf(0x1b9)](_0x3537f5){const _0x3ad41f=_0x527bdf;_0x3537f5[_0x3ad41f(0x12b)](this[_0x3ad41f(0x14b)]),_0x3537f5[_0x3ad41f(0x124)](0x0,this['_bindGroups'][this[_0x3ad41f(0x1ac)]%0x2]),_0x3537f5[_0x3ad41f(0xda)](Math[_0x3ad41f(0x169)](this['_numParticles']/0x100)),++this[_0x3ad41f(0x1ac)];}}class ParticleSystemRainObject extends ParticleSystemObject{constructor(_0x40795e,_0xbd3c64,_0x1e80f2,_0x55cc3e=0x400){const _0x35002f=_0x527bdf;super(_0x40795e,_0xbd3c64,_0x55cc3e),this[_0x35002f(0x160)]=new Image(),this[_0x35002f(0x160)][_0x35002f(0x1b7)]=_0x1e80f2,this[_0x35002f(0x16e)]=!![];}async['createGeometry'](){const _0x3eecf1=_0x527bdf;super['createGeometry'](),await this['createTextureGeometry'](),await this[_0x3eecf1(0x148)]();}async['createTextureGeometry'](){const _0x5c4dbe=_0x527bdf;await this[_0x5c4dbe(0x160)][_0x5c4dbe(0xd0)](),this[_0x5c4dbe(0xd6)]=await createImageBitmap(this[_0x5c4dbe(0x160)]),this[_0x5c4dbe(0x18f)]=this[_0x5c4dbe(0x17f)]['createTexture']({'label':_0x5c4dbe(0x157)+this['getName'](),'size':[this[_0x5c4dbe(0xd6)][_0x5c4dbe(0x181)],this[_0x5c4dbe(0xd6)][_0x5c4dbe(0xe8)],0x1],'format':_0x5c4dbe(0xc7),'usage':GPUTextureUsage[_0x5c4dbe(0x17c)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage['RENDER_ATTACHMENT']}),this['_device'][_0x5c4dbe(0x129)][_0x5c4dbe(0xe2)]({'source':this['_bitmap']},{'texture':this[_0x5c4dbe(0x18f)]},[this['_bitmap']['width'],this['_bitmap'][_0x5c4dbe(0xe8)]]),this[_0x5c4dbe(0x1af)]=this[_0x5c4dbe(0x17f)]['createSampler']({'magFilter':'linear','minFilter':_0x5c4dbe(0x16f)});}async[_0x527bdf(0x148)](){const _0x747653=_0x527bdf;this['_constants']=new Float32Array([-0.01,0x0,0x0,0x0]),this[_0x747653(0x185)]=this[_0x747653(0x17f)][_0x747653(0x195)]({'label':_0x747653(0x163)+this['getName'](),'size':this[_0x747653(0x175)][_0x747653(0x1c0)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0x747653(0x17f)][_0x747653(0x129)][_0x747653(0xf1)](this[_0x747653(0x185)],0x0,this[_0x747653(0x175)]);}[_0x527bdf(0x184)](){const _0xbf4c73=_0x527bdf;this[_0xbf4c73(0x16e)]=!this[_0xbf4c73(0x16e)];}[_0x527bdf(0xf3)](){const _0x4e3eda=_0x527bdf;this['_constants'][0x1]?this[_0x4e3eda(0x18e)](0x0):this[_0x4e3eda(0x18e)]((Math['random']()*0x2-0x1)*0.01);}[_0x527bdf(0x18e)](_0x18fe16){const _0x3061f5=_0x527bdf;this[_0x3061f5(0x175)][0x1]=_0x18fe16,this[_0x3061f5(0x17f)][_0x3061f5(0x129)]['writeBuffer'](this[_0x3061f5(0x185)],0x0,this['_constants']);}[_0x527bdf(0x100)](){const _0xae5d70=_0x527bdf;this['_constants'][0x0]?this['setGravity'](0x0):this[_0xae5d70(0x165)](-0.01);}[_0x527bdf(0x165)](_0x2581ea){const _0x147293=_0x527bdf;this['_constants'][0x0]=_0x2581ea,this[_0x147293(0x17f)][_0x147293(0x129)]['writeBuffer'](this[_0x147293(0x185)],0x0,this[_0x147293(0x175)]);}[_0x527bdf(0xde)](){}async[_0x527bdf(0x171)](){const _0x4ecc7d=_0x527bdf;let _0x8b77fe=await this[_0x4ecc7d(0x109)](_0x4ecc7d(0x133));this[_0x4ecc7d(0x11f)]=this['_device']['createShaderModule']({'label':'Particles\x20Shader\x20'+this['getName'](),'code':_0x8b77fe}),this['_bindGroupLayout']=this[_0x4ecc7d(0x17f)][_0x4ecc7d(0x122)]({'label':_0x4ecc7d(0x1b4)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x4ecc7d(0x145)]|GPUShaderStage[_0x4ecc7d(0x149)],'buffer':{'type':_0x4ecc7d(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x4ecc7d(0x149)],'buffer':{'type':'storage'}},{'binding':0x2,'visibility':GPUShaderStage[_0x4ecc7d(0x159)],'texture':{'sampleType':_0x4ecc7d(0x130)}},{'binding':0x3,'visibility':GPUShaderStage[_0x4ecc7d(0x159)],'sampler':{}},{'binding':0x4,'visibility':GPUShaderStage[_0x4ecc7d(0x149)],'buffer':{}}]}),this['_pipelineLayout']=this['_device']['createPipelineLayout']({'label':_0x4ecc7d(0xf0),'bindGroupLayouts':[this[_0x4ecc7d(0x1a2)]]});}async[_0x527bdf(0xe5)](){const _0x3e49da=_0x527bdf;this[_0x3e49da(0x18b)]=this[_0x3e49da(0x17f)][_0x3e49da(0x136)]({'label':_0x3e49da(0x12f)+this['getName'](),'layout':this['_pipelineLayout'],'vertex':{'module':this[_0x3e49da(0x11f)],'entryPoint':'vertexParticleMain'},'fragment':{'module':this[_0x3e49da(0x11f)],'entryPoint':_0x3e49da(0xf2),'targets':[{'format':this[_0x3e49da(0x121)]}]},'primitives':{'typology':'line-strip'}});}async[_0x527bdf(0xe0)](){const _0x296945=_0x527bdf;this[_0x296945(0x1a7)]=this[_0x296945(0x17f)][_0x296945(0x136)]({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x296945(0x16d)](),'layout':this[_0x296945(0xc5)],'vertex':{'module':this['_shaderModule'],'entryPoint':_0x296945(0x1ba)},'fragment':{'module':this['_shaderModule'],'entryPoint':_0x296945(0x186),'targets':[{'format':this[_0x296945(0x121)],'blend':{'color':{'srcFactor':_0x296945(0x1bc),'dstFactor':'one-minus-src-alpha','operator':_0x296945(0x167)},'alpha':{'srcFactor':_0x296945(0x1bc),'dstFactor':_0x296945(0x147),'operator':_0x296945(0x167)}}}]}}),this[_0x296945(0x1b8)]=[this[_0x296945(0x17f)][_0x296945(0x152)]({'layout':this[_0x296945(0x1a7)][_0x296945(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_particleBuffers'][0x0]}},{'binding':0x1,'resource':{'buffer':this['_particleBuffers'][0x1]}},{'binding':0x2,'resource':this[_0x296945(0x18f)][_0x296945(0x15f)]()},{'binding':0x3,'resource':this[_0x296945(0x1af)]},{'binding':0x4,'resource':{'buffer':this[_0x296945(0x185)]}}]}),this[_0x296945(0x17f)][_0x296945(0x152)]({'layout':this[_0x296945(0x1a7)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x296945(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x296945(0x10e)][0x0]}},{'binding':0x2,'resource':this[_0x296945(0x18f)]['createView']()},{'binding':0x3,'resource':this['_sampler']},{'binding':0x4,'resource':{'buffer':this[_0x296945(0x185)]}}]})];}async['createRenderPipeline'](){const _0x1a33e8=_0x527bdf;await this[_0x1a33e8(0xe5)](),await this['createTextureRenderPipeline']();}[_0x527bdf(0x106)](_0x31256a){const _0x33cd78=_0x527bdf;this[_0x33cd78(0x16e)]?(_0x31256a['setPipeline'](this['_renderPipeline']),_0x31256a['setBindGroup'](0x0,this[_0x33cd78(0x1b8)][this[_0x33cd78(0x1ac)]%0x2]),_0x31256a[_0x33cd78(0x105)](0x6,this[_0x33cd78(0x155)])):(_0x31256a[_0x33cd78(0x12b)](this[_0x33cd78(0x18b)]),_0x31256a[_0x33cd78(0x124)](0x0,this[_0x33cd78(0x1b8)][this[_0x33cd78(0x1ac)]%0x2]),_0x31256a[_0x33cd78(0x105)](0x80,this[_0x33cd78(0x155)]));}}class ParticleSystemFireObject extends ParticleSystemObject{constructor(_0x2cefa6,_0x558c1b,_0x2e92c7=0x400){super(_0x2cefa6,_0x558c1b,_0x2e92c7);}async[_0x527bdf(0xfa)](){const _0x5ee62e=_0x527bdf;super[_0x5ee62e(0xfa)](),await this[_0x5ee62e(0x1c3)]();}async[_0x527bdf(0x1c2)](){const _0x32bd3e=_0x527bdf;this[_0x32bd3e(0x176)]=new Float32Array(this[_0x32bd3e(0x155)]*0x8),this[_0x32bd3e(0x10e)]=[this[_0x32bd3e(0x17f)][_0x32bd3e(0x195)]({'label':_0x32bd3e(0x10b)+this['getName'](),'size':this[_0x32bd3e(0x176)][_0x32bd3e(0x1c0)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x32bd3e(0x134)]}),this[_0x32bd3e(0x17f)][_0x32bd3e(0x195)]({'label':_0x32bd3e(0x126)+this[_0x32bd3e(0x16d)](),'size':this['_particles']['byteLength'],'usage':GPUBufferUsage[_0x32bd3e(0x146)]|GPUBufferUsage[_0x32bd3e(0x134)]})],this[_0x32bd3e(0x17b)]();}['resetParticles'](){const _0x185aa9=_0x527bdf;for(let _0x2bef9c=0x0;_0x2bef9c<this[_0x185aa9(0x155)];++_0x2bef9c){this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x0]=0.5,this['_particles'][0x8*_0x2bef9c+0x1]=-0.95;let _0xaadcd0=0x2*Math['PI']*Math['random']();this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x2]=Math['cos'](_0xaadcd0)*0.0001,this['_particles'][0x8*_0x2bef9c+0x3]=Math[_0x185aa9(0x17e)](_0xaadcd0)*0.0001,this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x4]=this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x2],this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x5]=this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x3],this[_0x185aa9(0x176)][0x8*_0x2bef9c+0x6]=0x0,this['_particles'][0x8*_0x2bef9c+0x7]=0x0;}this[_0x185aa9(0x1ac)]=0x0,this['_device']['queue']['writeBuffer'](this[_0x185aa9(0x10e)][this[_0x185aa9(0x1ac)]%0x2],0x0,this[_0x185aa9(0x176)]);}async['createConstantsGeometry'](){const _0x10ef5f=_0x527bdf;this[_0x10ef5f(0x175)]=new Float32Array([-0.01,0x0,0.0002,0.1]),this[_0x10ef5f(0x185)]=this[_0x10ef5f(0x17f)][_0x10ef5f(0x195)]({'label':'Particles\x20Constants\x20Buffer\x20'+this[_0x10ef5f(0x16d)](),'size':this[_0x10ef5f(0x175)][_0x10ef5f(0x1c0)],'usage':GPUBufferUsage[_0x10ef5f(0x150)]|GPUBufferUsage['COPY_DST']}),this[_0x10ef5f(0x17f)][_0x10ef5f(0x129)]['writeBuffer'](this[_0x10ef5f(0x185)],0x0,this['_constants']);const _0x12f9b1=window[_0x10ef5f(0x151)]||0x1,_0x5b00ef=window[_0x10ef5f(0x1bf)]*_0x12f9b1,_0x259305=window['innerHeight']*_0x12f9b1;this[_0x10ef5f(0x166)]=new Float32Array([0xf,0x1/_0x5b00ef,0x1/_0x259305,0x0]),this['_sizeInfoBuffer']=this['_device']['createBuffer']({'label':_0x10ef5f(0xe1)+this['getName'](),'size':this[_0x10ef5f(0x166)][_0x10ef5f(0x1c0)],'usage':GPUBufferUsage[_0x10ef5f(0x150)]|GPUBufferUsage[_0x10ef5f(0x134)]}),this[_0x10ef5f(0x17f)][_0x10ef5f(0x129)][_0x10ef5f(0xf1)](this[_0x10ef5f(0x18d)],0x0,this[_0x10ef5f(0x166)]);}[_0x527bdf(0xf3)](){const _0x22a0f2=_0x527bdf;this[_0x22a0f2(0x175)][0x1]?this['setWind'](0x0):this['setWind']((Math[_0x22a0f2(0x13c)]()*0x2-0x1)*0.01);}['setWind'](_0xeab64){const _0x3bd707=_0x527bdf;this[_0x3bd707(0x175)][0x1]=_0xeab64,this['_device'][_0x3bd707(0x129)][_0x3bd707(0xf1)](this[_0x3bd707(0x185)],0x0,this[_0x3bd707(0x175)]);}['toggleGravity'](){const _0x31b6f7=_0x527bdf;this['_constants'][0x0]?this['setGravity'](0x0):this[_0x31b6f7(0x165)](-0.01);}[_0x527bdf(0x165)](_0x4e3487){const _0x192fda=_0x527bdf;this[_0x192fda(0x175)][0x0]=_0x4e3487,this[_0x192fda(0x17f)][_0x192fda(0x129)][_0x192fda(0xf1)](this[_0x192fda(0x185)],0x0,this[_0x192fda(0x175)]);}[_0x527bdf(0xde)](){}async[_0x527bdf(0x171)](){const _0x10b75f=_0x527bdf;let _0x3c1025=await this[_0x10b75f(0x109)](_0x10b75f(0x177));this['_shaderModule']=this[_0x10b75f(0x17f)]['createShaderModule']({'label':_0x10b75f(0x1be)+this['getName'](),'code':_0x3c1025}),this['_bindGroupLayout']=this[_0x10b75f(0x17f)][_0x10b75f(0x122)]({'label':'Particles\x20Bind\x20Group\x20Layout\x20'+this[_0x10b75f(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x10b75f(0x145)]|GPUShaderStage['FRAGMENT']|GPUShaderStage[_0x10b75f(0x149)],'buffer':{'type':_0x10b75f(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x10b75f(0x149)],'buffer':{'type':'storage'}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x3,'visibility':GPUShaderStage[_0x10b75f(0x145)],'buffer':{}}]}),this[_0x10b75f(0xc5)]=this[_0x10b75f(0x17f)][_0x10b75f(0xdf)]({'label':'Particles\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x10b75f(0x1a2)]]});}async[_0x527bdf(0x193)](){const _0x35166b=_0x527bdf;this[_0x35166b(0x18b)]=this['_device'][_0x35166b(0x136)]({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x35166b(0x16d)](),'layout':this[_0x35166b(0xc5)],'vertex':{'module':this[_0x35166b(0x11f)],'entryPoint':_0x35166b(0xfc)},'fragment':{'module':this[_0x35166b(0x11f)],'entryPoint':'fragmentParticleMain','targets':[{'format':this[_0x35166b(0x121)],'blend':{'color':{'srcFactor':_0x35166b(0x1bc),'dstFactor':_0x35166b(0x147),'operator':_0x35166b(0x167)},'alpha':{'srcFactor':'one','dstFactor':'one-minus-src-alpha','operator':_0x35166b(0x167)}}}]},'primitive':{'topology':_0x35166b(0xea)}}),this[_0x35166b(0x1b8)]=[this[_0x35166b(0x17f)]['createBindGroup']({'layout':this[_0x35166b(0x18b)][_0x35166b(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x35166b(0x10e)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x35166b(0x10e)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x35166b(0x185)]}},{'binding':0x3,'resource':{'buffer':this[_0x35166b(0x18d)]}}]}),this[_0x35166b(0x17f)][_0x35166b(0x152)]({'layout':this['_particlePipeline'][_0x35166b(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x35166b(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x35166b(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x35166b(0x185)]}},{'binding':0x3,'resource':{'buffer':this[_0x35166b(0x18d)]}}]})];}[_0x527bdf(0x106)](_0x1f4739){const _0x578259=_0x527bdf;_0x1f4739[_0x578259(0x12b)](this['_particlePipeline']),_0x1f4739[_0x578259(0x124)](0x0,this[_0x578259(0x1b8)][this[_0x578259(0x1ac)]%0x2]),_0x1f4739[_0x578259(0x105)](Math[_0x578259(0xc9)](0x1+0x2*0xf,0x2),this[_0x578259(0x155)]);}}class ParticleSystemFireworkObject extends ParticleSystemObject{constructor(_0x264314,_0x943c42,_0x275cda=0x5,_0x57a11d=0x400){const _0x5f4321=_0x527bdf;super(_0x264314,_0x943c42,_0x57a11d),this[_0x5f4321(0x19f)]=_0x275cda;}async['createGeometry'](){const _0x458d64=_0x527bdf;super[_0x458d64(0xfa)](),await this['createConstantsGeometry']();}async[_0x527bdf(0x1c2)](){const _0x394ab8=_0x527bdf;this['_particles']=new Float32Array(this['_numParticles']*0x8),this[_0x394ab8(0x10e)]=[this[_0x394ab8(0x17f)][_0x394ab8(0x195)]({'label':'Particles\x20Buffer\x201\x20'+this[_0x394ab8(0x16d)](),'size':this['_particles'][_0x394ab8(0x1c0)],'usage':GPUBufferUsage[_0x394ab8(0x146)]|GPUBufferUsage[_0x394ab8(0x134)]}),this[_0x394ab8(0x17f)][_0x394ab8(0x195)]({'label':_0x394ab8(0x126)+this[_0x394ab8(0x16d)](),'size':this[_0x394ab8(0x176)]['byteLength'],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x394ab8(0x134)]})],this[_0x394ab8(0x17b)]();}[_0x527bdf(0x17b)](_0x34bef6,_0x3daf6d){const _0x227c30=_0x527bdf;for(let _0xf1e79c=0x0;_0xf1e79c<this['_numParticles'];++_0xf1e79c){this[_0x227c30(0x176)][0x8*_0xf1e79c+0x0]=_0x34bef6,this[_0x227c30(0x176)][0x8*_0xf1e79c+0x1]=_0x3daf6d;let _0x5987d8=Math[_0x227c30(0x13c)]()*Math['PI']*0x2,_0x101d4e=Math[_0x227c30(0x13c)]()*0.005;this[_0x227c30(0x176)][0x8*_0xf1e79c+0x2]=Math[_0x227c30(0x13a)](_0x5987d8)*_0x101d4e,this[_0x227c30(0x176)][0x8*_0xf1e79c+0x3]=Math['sin'](_0x5987d8)*_0x101d4e,this['_particles'][0x8*_0xf1e79c+0x4]=this[_0x227c30(0x176)][0x8*_0xf1e79c+0x2],this[_0x227c30(0x176)][0x8*_0xf1e79c+0x5]=this[_0x227c30(0x176)][0x8*_0xf1e79c+0x3],this[_0x227c30(0x176)][0x8*_0xf1e79c+0x6]=Math['random']()*0xff;}this[_0x227c30(0x1ac)]=0x0,this[_0x227c30(0x17f)]['queue'][_0x227c30(0xf1)](this[_0x227c30(0x10e)][this[_0x227c30(0x1ac)]%0x2],0x0,this[_0x227c30(0x176)]);}async[_0x527bdf(0x1c3)](){const _0x513521=_0x527bdf;this[_0x513521(0x175)]=new Float32Array([-0.01,0x0,0x0,0x0]),this[_0x513521(0x185)]=this[_0x513521(0x17f)]['createBuffer']({'label':_0x513521(0x163)+this[_0x513521(0x16d)](),'size':this[_0x513521(0x175)][_0x513521(0x1c0)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x513521(0x134)]}),this[_0x513521(0x17f)]['queue'][_0x513521(0xf1)](this[_0x513521(0x185)],0x0,this[_0x513521(0x175)]);const _0x5c6119=window[_0x513521(0x151)]||0x1,_0x6504f9=window['innerWidth']*_0x5c6119,_0x24f768=window['innerHeight']*_0x5c6119;this[_0x513521(0x166)]=new Float32Array([this[_0x513521(0x19f)],0x1/_0x6504f9,0x1/_0x24f768,0x0]),this[_0x513521(0x18d)]=this[_0x513521(0x17f)][_0x513521(0x195)]({'label':'Particles\x20Size\x20Infor\x20Buffer\x20'+this['getName'](),'size':this['_sizeInfo'][_0x513521(0x1c0)],'usage':GPUBufferUsage[_0x513521(0x150)]|GPUBufferUsage[_0x513521(0x134)]}),this[_0x513521(0x17f)][_0x513521(0x129)][_0x513521(0xf1)](this[_0x513521(0x18d)],0x0,this[_0x513521(0x166)]);}['toggleWind'](){const _0xdb190=_0x527bdf;this[_0xdb190(0x175)][0x1]?this['setWind'](0x0):this['setWind']((Math[_0xdb190(0x13c)]()*0x2-0x1)*0.01);}[_0x527bdf(0x18e)](_0x3d5e66){const _0x5b0052=_0x527bdf;this[_0x5b0052(0x175)][0x1]=_0x3d5e66,this[_0x5b0052(0x17f)][_0x5b0052(0x129)][_0x5b0052(0xf1)](this[_0x5b0052(0x185)],0x0,this[_0x5b0052(0x175)]);}[_0x527bdf(0x189)](){const _0x714460=_0x527bdf;this[_0x714460(0x175)][0x0]?this['setGravity'](0x0):this[_0x714460(0x165)](-0.01);}[_0x527bdf(0x165)](_0x2cefbb){const _0x5cdfad=_0x527bdf;this[_0x5cdfad(0x175)][0x0]=_0x2cefbb,this[_0x5cdfad(0x17f)]['queue'][_0x5cdfad(0xf1)](this[_0x5cdfad(0x185)],0x0,this[_0x5cdfad(0x175)]);}['increaseParticleSize'](){const _0x35b1d6=_0x527bdf;this[_0x35b1d6(0x19f)]+=0x1;const _0x16b5af=window[_0x35b1d6(0x151)]||0x1;this[_0x35b1d6(0x166)][0x0]=this[_0x35b1d6(0x19f)],this[_0x35b1d6(0x166)][0x1]=0x1/window[_0x35b1d6(0x1bf)]*_0x16b5af,this[_0x35b1d6(0x166)][0x2]=0x1/window[_0x35b1d6(0x103)]*_0x16b5af,this[_0x35b1d6(0x17f)][_0x35b1d6(0x129)][_0x35b1d6(0xf1)](this[_0x35b1d6(0x18d)],0x0,this['_sizeInfo']);}[_0x527bdf(0x113)](){const _0x43cc59=_0x527bdf;this[_0x43cc59(0x19f)]=Math['max'](this[_0x43cc59(0x19f)]-0x1,0x1);const _0x5b1186=window[_0x43cc59(0x151)]||0x1;this[_0x43cc59(0x166)][0x0]=this['_particleSize'],this['_sizeInfo'][0x1]=0x1/window[_0x43cc59(0x1bf)]*_0x5b1186,this['_sizeInfo'][0x2]=0x1/window[_0x43cc59(0x103)]*_0x5b1186,this[_0x43cc59(0x17f)][_0x43cc59(0x129)]['writeBuffer'](this[_0x43cc59(0x18d)],0x0,this[_0x43cc59(0x166)]);}['updateGeometry'](){}async[_0x527bdf(0x171)](){const _0x1f748c=_0x527bdf;let _0xe9b32e=await this[_0x1f748c(0x109)](_0x1f748c(0x18a));this[_0x1f748c(0x11f)]=this[_0x1f748c(0x17f)][_0x1f748c(0x1a9)]({'label':_0x1f748c(0x1be)+this['getName'](),'code':_0xe9b32e}),this['_bindGroupLayout']=this[_0x1f748c(0x17f)][_0x1f748c(0x122)]({'label':_0x1f748c(0x1b4)+this[_0x1f748c(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x1f748c(0x145)]|GPUShaderStage[_0x1f748c(0x159)]|GPUShaderStage[_0x1f748c(0x149)],'buffer':{'type':_0x1f748c(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x1f748c(0x149)],'buffer':{'type':_0x1f748c(0x174)}},{'binding':0x2,'visibility':GPUShaderStage[_0x1f748c(0x149)],'buffer':{}},{'binding':0x3,'visibility':GPUShaderStage[_0x1f748c(0x145)],'buffer':{}}]}),this[_0x1f748c(0xc5)]=this[_0x1f748c(0x17f)][_0x1f748c(0xdf)]({'label':_0x1f748c(0xf0),'bindGroupLayouts':[this[_0x1f748c(0x1a2)]]});}async['createParticlePipeline'](){const _0x4b29e7=_0x527bdf;this[_0x4b29e7(0x18b)]=this[_0x4b29e7(0x17f)][_0x4b29e7(0x136)]({'label':_0x4b29e7(0x12f)+this['getName'](),'layout':this[_0x4b29e7(0xc5)],'vertex':{'module':this[_0x4b29e7(0x11f)],'entryPoint':_0x4b29e7(0xfc)},'fragment':{'module':this['_shaderModule'],'entryPoint':'fragmentParticleMain','targets':[{'format':this['_canvasFormat'],'blend':{'color':{'srcFactor':'one','dstFactor':_0x4b29e7(0x147),'operator':_0x4b29e7(0x167)},'alpha':{'srcFactor':'one','dstFactor':_0x4b29e7(0x147),'operator':_0x4b29e7(0x167)}}}]},'primitive':{'topology':_0x4b29e7(0xea)}}),this['_bindGroups']=[this[_0x4b29e7(0x17f)][_0x4b29e7(0x152)]({'layout':this['_particlePipeline'][_0x4b29e7(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x4b29e7(0x10e)][0x0]}},{'binding':0x1,'resource':{'buffer':this['_particleBuffers'][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x4b29e7(0x185)]}},{'binding':0x3,'resource':{'buffer':this['_sizeInfoBuffer']}}]}),this[_0x4b29e7(0x17f)][_0x4b29e7(0x152)]({'layout':this['_particlePipeline'][_0x4b29e7(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x4b29e7(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x4b29e7(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this['_constantsBuffer']}},{'binding':0x3,'resource':{'buffer':this[_0x4b29e7(0x18d)]}}]})];}[_0x527bdf(0x106)](_0x3ddd69){const _0x4de3a0=_0x527bdf;_0x3ddd69[_0x4de3a0(0x12b)](this[_0x4de3a0(0x18b)]),_0x3ddd69[_0x4de3a0(0x124)](0x0,this[_0x4de3a0(0x1b8)][this[_0x4de3a0(0x1ac)]%0x2]),_0x3ddd69[_0x4de3a0(0x105)](Math[_0x4de3a0(0xc9)](0x1+0x2*this[_0x4de3a0(0x19f)],0x2),this[_0x4de3a0(0x155)]);}}function _0xe2a1(){const _0x4111ba=['requestDevice','ceil','name','initial','assets/raindrop.png','getName','_useTexutre','linear','fragmentSpringMain','createShaders','/shaders/optimized_particlesfountain.wgsl','10px','storage','_constants','_particles','/shaders/optimized_particlesfire.wgsl','ArrowDown','top','ctrlKey','resetParticles','TEXTURE_BINDING','init','sin','_device','Springs\x20Buffer\x20','width','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','1px\x20solid\x20red','toggleTexture','_constantsBuffer','fragmentMain','ArrowUp','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','toogleGravity','/shaders/optimized_particlesfirework.wgsl','_particlePipeline','appendChild','_sizeInfoBuffer','setWind','_texture','font','canvas','setForce','createParticlePipeline','_objectCnt','createBuffer','addEventListener','fillRect','40ZIveXq','Spring\x20Render\x20Pipeline\x20','getElementById','toString','171430LBHPdi','constructor','DONE','_particleSize','BYTES_PER_ELEMENT','711RUKiWU','_bindGroupLayout','_timeBuffer','_textCanvas','_springBuffer','triangle-list','_renderPipeline','onerror','createShaderModule','map','no-cache,\x20no-store,\x20max-age=0','_step','store','log','_sampler','statusText','touchend','_textFont','body','Particles\x20Bind\x20Group\x20Layout\x20','gpu','ArrowRight','src','_bindGroups','compute','vertexMain','computeMain','one','left','Particles\x20Shader\x20','innerWidth','byteLength','createSpringPipeline','createParticleGeometry','createConstantsGeometry','_numSprings','line-strip','Particles\x20Compute\x20Pipeline\x20','_pipelineLayout','_fontSize','rgba8unorm','_paddingtop','pow','createElement','catch','updateText','_objects','vertexTexturedMain','right','decode','vertexSpringMain','finish','bind','onload','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','_bitmap','splice','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','GET','dispatchWorkgroups','hidden','_selectedIndex','fillStyle','updateGeometry','createPipelineLayout','createTextureRenderPipeline','Particles\x20Size\x20Infor\x20Buffer\x20','copyExternalImageToTexture','ArrowLeft','mousemove','createParticleRenderPipeline','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','21480283xiQcYC','height','_context','point-list','_springs','_canvasWidth','_updatePipeline','_paddingx','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','Particles\x20Pipeline\x20Layout','writeBuffer','fragmentParticleMain','toggleWind','_canvas','read-only-storage','/shaders/optimized_particles.wgsl','_height','resizeCanvas','929298AhGZxf','createGeometry','getCurrentTexture','vertexParticleMain','transformOrigin','_textContext','webgpu','toggleGravity','measureText','remove','innerHeight','_lineSpacing','draw','render','end','4MTqpXJ','loadShader','nextIndex','Particles\x20Buffer\x201\x20','abs','255696zHCsoL','_particleBuffers','border','renderCanvas','touchstart','length','decreaseParticleSize','renderToSelectedView','_springPipeline','t/T:\x20Show/Hide\x20Textures\x0aw/W:\x20Stop/Add\x20Wind\x0ag/G:\x20Stop/Add\x20Gravity\x0an/N:\x20Next\x20Mass-Spring\x20Particle\x20(red)\x0aCtrl\x20+\x20Mouse\x20Left\x20Click:\x20Add\x20Firework\x0aArrow\x20Keys\x20(Hold):\x20Apply\x20Force\x20to\x20the\x20selected\x20particle\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','createComputePipeline','textBaseline','_lines','getContext','status','floor','keyup','18px\x20Arial','_shaderModule','center','_canvasFormat','createBindGroupLayout','readyState','setBindGroup','style','Particles\x20Buffer\x202\x20','appendSceneObject','keydown','queue','position','setPipeline','40bHtwCK','resize','Cache-Control','Particles\x20Render\x20Pipeline\x20','float','max','push','/shaders/optimized_particlesrain.wgsl','COPY_DST','split','createRenderPipeline','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','5352681yhyONX','toggleVisibility','cos','_clearColor','random','updateTextRegion','/shaders/optimized_massspring.wgsl','key','then','fillText','setRequestHeader','clearRect','updateMain','VERTEX','STORAGE','one-minus-src-alpha','createPhysicConstantsGeometry','COMPUTE','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','_computePipeline','getBindGroupLayout','submit','47519FHKtdv','_size','UNIFORM','devicePixelRatio','createBindGroup','_canvasHeight','_width','_numParticles','resetSprings','Texture\x20','innerHTML','FRAGMENT','now','Couldn\x27t\x20request\x20WebGPU\x20adapter.','mouseup','getPreferredCanvasFormat','createSpringGeometry','createView','_img','1224204UEMGfx','match','Particles\x20Constants\x20Buffer\x20','open','setGravity','_sizeInfo','add'];_0xe2a1=function(){return _0x4111ba;};return _0xe2a1();}class ParticleSystemFountainObject extends ParticleSystemObject{constructor(_0x2da104,_0x40e2cb,_0x3293d3=0x400){super(_0x2da104,_0x40e2cb,_0x3293d3);}async[_0x527bdf(0xfa)](){const _0x144410=_0x527bdf;super[_0x144410(0xfa)](),await this[_0x144410(0x1c3)]();}async[_0x527bdf(0x1c2)](){const _0x401834=_0x527bdf;this[_0x401834(0x176)]=new Float32Array(this[_0x401834(0x155)]*0x8),this['_particleBuffers']=[this[_0x401834(0x17f)]['createBuffer']({'label':_0x401834(0x10b)+this[_0x401834(0x16d)](),'size':this['_particles'][_0x401834(0x1c0)],'usage':GPUBufferUsage[_0x401834(0x146)]|GPUBufferUsage[_0x401834(0x134)]}),this[_0x401834(0x17f)][_0x401834(0x195)]({'label':_0x401834(0x126)+this[_0x401834(0x16d)](),'size':this[_0x401834(0x176)][_0x401834(0x1c0)],'usage':GPUBufferUsage[_0x401834(0x146)]|GPUBufferUsage['COPY_DST']})],this[_0x401834(0x17b)]();}[_0x527bdf(0x17b)](){const _0x1d2715=_0x527bdf;for(let _0x3a3164=0x0;_0x3a3164<this['_numParticles'];++_0x3a3164){this[_0x1d2715(0x176)][0x8*_0x3a3164+0x0]=-0.5,this[_0x1d2715(0x176)][0x8*_0x3a3164+0x1]=-0x1,this[_0x1d2715(0x176)][0x8*_0x3a3164+0x2]=(Math[_0x1d2715(0x13c)]()*0x2-0x1)*0.0005,this[_0x1d2715(0x176)][0x8*_0x3a3164+0x3]=0.02,this[_0x1d2715(0x176)][0x8*_0x3a3164+0x4]=this['_particles'][0x8*_0x3a3164+0x2],this[_0x1d2715(0x176)][0x8*_0x3a3164+0x5]=this['_particles'][0x8*_0x3a3164+0x3],this[_0x1d2715(0x176)][0x8*_0x3a3164+0x6]=0x0,this['_particles'][0x8*_0x3a3164+0x7]=Math[_0x1d2715(0x13c)]()*0xa+0x5;}this[_0x1d2715(0x1ac)]=0x0,this[_0x1d2715(0x17f)][_0x1d2715(0x129)][_0x1d2715(0xf1)](this[_0x1d2715(0x10e)][this['_step']%0x2],0x0,this[_0x1d2715(0x176)]);}async[_0x527bdf(0x1c3)](){const _0x4e9103=_0x527bdf;this['_constants']=new Float32Array([-0.01,0x0,0x0,0x0]),this['_constantsBuffer']=this[_0x4e9103(0x17f)][_0x4e9103(0x195)]({'label':_0x4e9103(0x163)+this[_0x4e9103(0x16d)](),'size':this[_0x4e9103(0x175)]['byteLength'],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x4e9103(0x134)]}),this[_0x4e9103(0x17f)][_0x4e9103(0x129)][_0x4e9103(0xf1)](this[_0x4e9103(0x185)],0x0,this[_0x4e9103(0x175)]);const _0x4f7d37=window[_0x4e9103(0x151)]||0x1,_0x2bd28f=window['innerWidth']*_0x4f7d37,_0x48e9d6=window['innerHeight']*_0x4f7d37;this[_0x4e9103(0x166)]=new Float32Array([0xf,0x1/_0x2bd28f,0x1/_0x48e9d6,0x0]),this[_0x4e9103(0x18d)]=this[_0x4e9103(0x17f)][_0x4e9103(0x195)]({'label':_0x4e9103(0xe1)+this[_0x4e9103(0x16d)](),'size':this[_0x4e9103(0x166)][_0x4e9103(0x1c0)],'usage':GPUBufferUsage[_0x4e9103(0x150)]|GPUBufferUsage[_0x4e9103(0x134)]}),this[_0x4e9103(0x17f)][_0x4e9103(0x129)][_0x4e9103(0xf1)](this['_sizeInfoBuffer'],0x0,this[_0x4e9103(0x166)]);}['toggleWind'](){const _0x7fde9d=_0x527bdf;this[_0x7fde9d(0x175)][0x1]?this['setWind'](0x0):this[_0x7fde9d(0x18e)]((Math[_0x7fde9d(0x13c)]()*0x2-0x1)*0.01);}[_0x527bdf(0x18e)](_0x185d43){const _0x1bbbf5=_0x527bdf;this[_0x1bbbf5(0x175)][0x1]=_0x185d43,this[_0x1bbbf5(0x17f)][_0x1bbbf5(0x129)]['writeBuffer'](this[_0x1bbbf5(0x185)],0x0,this[_0x1bbbf5(0x175)]);}[_0x527bdf(0x100)](){const _0x1febfb=_0x527bdf;this[_0x1febfb(0x175)][0x0]?this['setGravity'](0x0):this[_0x1febfb(0x165)](-0.01);}[_0x527bdf(0x165)](_0x5973ed){const _0x47467a=_0x527bdf;this['_constants'][0x0]=_0x5973ed,this['_device']['queue'][_0x47467a(0xf1)](this['_constantsBuffer'],0x0,this[_0x47467a(0x175)]);}['updateGeometry'](){}async['createShaders'](){const _0x137ca5=_0x527bdf;let _0x9e7a58=await this[_0x137ca5(0x109)](_0x137ca5(0x172));this[_0x137ca5(0x11f)]=this['_device'][_0x137ca5(0x1a9)]({'label':_0x137ca5(0x1be)+this['getName'](),'code':_0x9e7a58}),this['_bindGroupLayout']=this['_device'][_0x137ca5(0x122)]({'label':_0x137ca5(0x1b4)+this[_0x137ca5(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x137ca5(0x145)]|GPUShaderStage['FRAGMENT']|GPUShaderStage[_0x137ca5(0x149)],'buffer':{'type':'read-only-storage'}},{'binding':0x1,'visibility':GPUShaderStage[_0x137ca5(0x149)],'buffer':{'type':'storage'}},{'binding':0x2,'visibility':GPUShaderStage[_0x137ca5(0x149)],'buffer':{}},{'binding':0x3,'visibility':GPUShaderStage[_0x137ca5(0x145)],'buffer':{}}]}),this[_0x137ca5(0xc5)]=this['_device'][_0x137ca5(0xdf)]({'label':_0x137ca5(0xf0),'bindGroupLayouts':[this[_0x137ca5(0x1a2)]]});}async[_0x527bdf(0x193)](){const _0x11ddf1=_0x527bdf;this[_0x11ddf1(0x18b)]=this[_0x11ddf1(0x17f)][_0x11ddf1(0x136)]({'label':_0x11ddf1(0x12f)+this['getName'](),'layout':this[_0x11ddf1(0xc5)],'vertex':{'module':this['_shaderModule'],'entryPoint':'vertexParticleMain'},'fragment':{'module':this[_0x11ddf1(0x11f)],'entryPoint':_0x11ddf1(0xf2),'targets':[{'format':this['_canvasFormat'],'blend':{'color':{'srcFactor':_0x11ddf1(0x1bc),'dstFactor':'one-minus-src-alpha','operator':_0x11ddf1(0x167)},'alpha':{'srcFactor':_0x11ddf1(0x1bc),'dstFactor':_0x11ddf1(0x147),'operator':_0x11ddf1(0x167)}}}]},'primitive':{'topology':_0x11ddf1(0xea)}}),this[_0x11ddf1(0x1b8)]=[this[_0x11ddf1(0x17f)][_0x11ddf1(0x152)]({'layout':this[_0x11ddf1(0x18b)][_0x11ddf1(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_particleBuffers'][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x11ddf1(0x10e)][0x1]}},{'binding':0x2,'resource':{'buffer':this['_constantsBuffer']}},{'binding':0x3,'resource':{'buffer':this[_0x11ddf1(0x18d)]}}]}),this[_0x11ddf1(0x17f)][_0x11ddf1(0x152)]({'layout':this[_0x11ddf1(0x18b)][_0x11ddf1(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x11ddf1(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x11ddf1(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x11ddf1(0x185)]}},{'binding':0x3,'resource':{'buffer':this[_0x11ddf1(0x18d)]}}]})];}[_0x527bdf(0x106)](_0x54bfad){const _0x1695fe=_0x527bdf;_0x54bfad[_0x1695fe(0x12b)](this[_0x1695fe(0x18b)]),_0x54bfad['setBindGroup'](0x0,this[_0x1695fe(0x1b8)][this[_0x1695fe(0x1ac)]%0x2]),_0x54bfad['draw'](Math['pow'](0x1+0x2*0xf,0x2),this[_0x1695fe(0x155)]);}}class ParticleSystemWaterfallObject extends ParticleSystemObject{constructor(_0x2e11f8,_0xf962aa,_0x570a0f=0x19000){const _0x55dd12=_0x527bdf;super(_0x2e11f8,_0xf962aa),this['_numParticles']=_0x570a0f,this[_0x55dd12(0x1ac)]=0x0;}async[_0x527bdf(0xfa)](){const _0x1a1b2f=_0x527bdf;await this[_0x1a1b2f(0x1c2)]();}async[_0x527bdf(0x1c2)](){const _0x22deea=_0x527bdf;this['_particles']=new Float32Array(this[_0x22deea(0x155)]*0x6),this[_0x22deea(0x10e)]=[this[_0x22deea(0x17f)][_0x22deea(0x195)]({'label':_0x22deea(0x10b)+this[_0x22deea(0x16d)](),'size':this[_0x22deea(0x176)][_0x22deea(0x1c0)],'usage':GPUBufferUsage[_0x22deea(0x146)]|GPUBufferUsage['COPY_DST']}),this[_0x22deea(0x17f)][_0x22deea(0x195)]({'label':'Particles\x20Buffer\x202\x20'+this[_0x22deea(0x16d)](),'size':this[_0x22deea(0x176)][_0x22deea(0x1c0)],'usage':GPUBufferUsage[_0x22deea(0x146)]|GPUBufferUsage[_0x22deea(0x134)]})],this[_0x22deea(0x17b)](),this[_0x22deea(0x1a3)]=this[_0x22deea(0x17f)][_0x22deea(0x195)]({'size':Float32Array[_0x22deea(0x1a0)],'usage':GPUBufferUsage[_0x22deea(0x150)]|GPUBufferUsage['COPY_DST']});}[_0x527bdf(0x17b)](){const _0xa5a94f=_0x527bdf;for(let _0x45ade6=0x0;_0x45ade6<this[_0xa5a94f(0x155)];++_0x45ade6){this[_0xa5a94f(0x176)][0x6*_0x45ade6+0x0]=Math['random']()-0.5,this[_0xa5a94f(0x176)][0x6*_0x45ade6+0x1]=Math[_0xa5a94f(0x13c)]()*0x2-0x1,this[_0xa5a94f(0x176)][0x6*_0x45ade6+0x2]=0x0,this[_0xa5a94f(0x176)][0x6*_0x45ade6+0x3]=-Math[_0xa5a94f(0x13c)]()*0.02,this[_0xa5a94f(0x176)][0x6*_0x45ade6+0x4]=0x0;}this['_step']=0x0,this[_0xa5a94f(0x17f)][_0xa5a94f(0x129)][_0xa5a94f(0xf1)](this[_0xa5a94f(0x10e)][this[_0xa5a94f(0x1ac)]%0x2],0x0,this[_0xa5a94f(0x176)]);}[_0x527bdf(0xde)](){}async[_0x527bdf(0x171)](){const _0x39b4f0=_0x527bdf;let _0x22e136=await this[_0x39b4f0(0x109)]('/shaders/optimized_particleswaterfall.wgsl');this[_0x39b4f0(0x11f)]=this[_0x39b4f0(0x17f)][_0x39b4f0(0x1a9)]({'label':_0x39b4f0(0x1be)+this[_0x39b4f0(0x16d)](),'code':_0x22e136}),this[_0x39b4f0(0x1a2)]=this[_0x39b4f0(0x17f)][_0x39b4f0(0x122)]({'label':_0x39b4f0(0x1b4)+this[_0x39b4f0(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x39b4f0(0x145)]|GPUShaderStage['COMPUTE'],'buffer':{'type':_0x39b4f0(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x39b4f0(0x149)],'buffer':{'type':'storage'}},{'binding':0x2,'visibility':GPUShaderStage[_0x39b4f0(0x149)],'buffer':{}}]}),this[_0x39b4f0(0xc5)]=this[_0x39b4f0(0x17f)][_0x39b4f0(0xdf)]({'label':_0x39b4f0(0xf0),'bindGroupLayouts':[this['_bindGroupLayout']]});}async[_0x527bdf(0x136)](){const _0x4a7911=_0x527bdf;await this[_0x4a7911(0x193)]();}async['createParticlePipeline'](){const _0x2f6585=_0x527bdf;this['_particlePipeline']=this['_device']['createRenderPipeline']({'label':_0x2f6585(0x12f)+this[_0x2f6585(0x16d)](),'layout':this['_pipelineLayout'],'vertex':{'module':this[_0x2f6585(0x11f)],'entryPoint':_0x2f6585(0x1ba)},'fragment':{'module':this[_0x2f6585(0x11f)],'entryPoint':'fragmentMain','targets':[{'format':this[_0x2f6585(0x121)],'blend':{'color':{'srcFactor':_0x2f6585(0x1bc),'dstFactor':_0x2f6585(0x147),'operator':_0x2f6585(0x167)},'alpha':{'srcFactor':_0x2f6585(0x1bc),'dstFactor':_0x2f6585(0x147),'operator':_0x2f6585(0x167)}}}]},'primitives':{'typology':_0x2f6585(0xc3)}}),this[_0x2f6585(0x1b8)]=[this[_0x2f6585(0x17f)][_0x2f6585(0x152)]({'layout':this[_0x2f6585(0x18b)][_0x2f6585(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x2f6585(0x10e)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x2f6585(0x10e)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x2f6585(0x1a3)]}}]}),this['_device'][_0x2f6585(0x152)]({'layout':this['_particlePipeline'][_0x2f6585(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x2f6585(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x2f6585(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this['_timeBuffer']}}]})];}['render'](_0xc2ca21){const _0xfda699=_0x527bdf;_0xc2ca21['setPipeline'](this[_0xfda699(0x18b)]),_0xc2ca21['setBindGroup'](0x0,this[_0xfda699(0x1b8)][this['_step']%0x2]),_0xc2ca21[_0xfda699(0x105)](0x80,this[_0xfda699(0x155)]);}async[_0x527bdf(0x117)](){const _0x18a8d8=_0x527bdf;this[_0x18a8d8(0x14b)]=this['_device'][_0x18a8d8(0x117)]({'label':_0x18a8d8(0xc4)+this[_0x18a8d8(0x16d)](),'layout':this[_0x18a8d8(0xc5)],'compute':{'module':this[_0x18a8d8(0x11f)],'entryPoint':_0x18a8d8(0x1bb)}});}[_0x527bdf(0x1b9)](_0x14de65){const _0x558e8d=_0x527bdf;this[_0x558e8d(0x17f)][_0x558e8d(0x129)][_0x558e8d(0xf1)](this[_0x558e8d(0x1a3)],0x0,new Float32Array([performance[_0x558e8d(0x15a)]()/0x3e8])),_0x14de65['setPipeline'](this[_0x558e8d(0x14b)]),_0x14de65[_0x558e8d(0x124)](0x0,this['_bindGroups'][this[_0x558e8d(0x1ac)]%0x2]),_0x14de65[_0x558e8d(0xda)](Math[_0x558e8d(0x169)](this['_numParticles']/0x100)),++this[_0x558e8d(0x1ac)];}}class MassSpringSystemObject extends SceneObject{constructor(_0x58d1c7,_0x29a237,_0x567191=0x400){const _0x4688a4=_0x527bdf;super(_0x58d1c7,_0x29a237),this[_0x4688a4(0x155)]=_0x567191,this['_numSprings']=Math[_0x4688a4(0x169)](_0x567191*0x2),this[_0x4688a4(0x1ac)]=0x0;}async[_0x527bdf(0xfa)](){await this['createParticleGeometry'](),await this['createSpringGeometry']();}async[_0x527bdf(0x1c2)](){const _0x1dd47b=_0x527bdf;this[_0x1dd47b(0x176)]=new Float32Array(this[_0x1dd47b(0x155)]*0x8),this['_particleBuffers']=[this[_0x1dd47b(0x17f)][_0x1dd47b(0x195)]({'label':_0x1dd47b(0x10b)+this[_0x1dd47b(0x16d)](),'size':this[_0x1dd47b(0x176)][_0x1dd47b(0x1c0)],'usage':GPUBufferUsage[_0x1dd47b(0x146)]|GPUBufferUsage[_0x1dd47b(0x134)]}),this[_0x1dd47b(0x17f)][_0x1dd47b(0x195)]({'label':'Particles\x20Buffer\x202\x20'+this['getName'](),'size':this[_0x1dd47b(0x176)][_0x1dd47b(0x1c0)],'usage':GPUBufferUsage[_0x1dd47b(0x146)]|GPUBufferUsage[_0x1dd47b(0x134)]})],this[_0x1dd47b(0x17b)]();}async['createSpringGeometry'](){const _0x106288=_0x527bdf;this[_0x106288(0xeb)]=new Float32Array(this['_numSprings']*0x4),this[_0x106288(0x1a5)]=this['_device'][_0x106288(0x195)]({'label':_0x106288(0x180)+this[_0x106288(0x16d)](),'size':this[_0x106288(0xeb)][_0x106288(0x1c0)],'usage':GPUBufferUsage[_0x106288(0x146)]|GPUBufferUsage[_0x106288(0x134)]}),this[_0x106288(0x156)]();}[_0x527bdf(0x17b)](){const _0x226e6b=_0x527bdf;for(let _0x289814=0x0;_0x289814<this[_0x226e6b(0x155)];++_0x289814){this[_0x226e6b(0x176)][0x8*_0x289814+0x0]=(Math[_0x226e6b(0x13c)]()-0.5)*0.5,this[_0x226e6b(0x176)][0x8*_0x289814+0x1]=(Math[_0x226e6b(0x13c)]()-0.5)*0.5+0.4,this[_0x226e6b(0x176)][0x8*_0x289814+0x2]=0x0,this[_0x226e6b(0x176)][0x8*_0x289814+0x3]=0x0,this[_0x226e6b(0x176)][0x8*_0x289814+0x4]=0x0,this['_particles'][0x8*_0x289814+0x5]=0x0,this[_0x226e6b(0x176)][0x8*_0x289814+0x6]=Math['random']()*0.025+0.01,this[_0x226e6b(0x176)][0x8*_0x289814+0x7]=0x0;}this[_0x226e6b(0x1ac)]=0x0,this[_0x226e6b(0x17f)]['queue'][_0x226e6b(0xf1)](this[_0x226e6b(0x10e)][this[_0x226e6b(0x1ac)]%0x2],0x0,this[_0x226e6b(0x176)]);}[_0x527bdf(0x156)](){const _0x1a57a8=_0x527bdf;var _0x3285f3=new Map();for(let _0xf47726=0x0;_0xf47726<this[_0x1a57a8(0x155)];++_0xf47726){_0x3285f3[_0xf47726]=new Set(),_0x3285f3[_0xf47726][_0x1a57a8(0x167)](_0xf47726);}for(let _0x18dde1=0x0;_0x18dde1<this[_0x1a57a8(0x1c4)];++_0x18dde1){this['_springs'][0x4*_0x18dde1+0x0]=Math[_0x1a57a8(0x11c)](Math[_0x1a57a8(0x13c)]()*this[_0x1a57a8(0x155)]);while(_0x3285f3[this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x0]][_0x1a57a8(0x112)]==this[_0x1a57a8(0x155)]){this['_springs'][0x4*_0x18dde1+0x0]=Math['floor'](Math[_0x1a57a8(0x13c)]()*this[_0x1a57a8(0x155)]);}this['_springs'][0x4*_0x18dde1+0x1]=Math[_0x1a57a8(0x11c)](Math[_0x1a57a8(0x13c)]()*this[_0x1a57a8(0x155)]);while(_0x3285f3[this['_springs'][0x4*_0x18dde1+0x0]]['has'](this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x1])){this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x1]=Math['floor'](Math[_0x1a57a8(0x13c)]()*this[_0x1a57a8(0x155)]);}_0x3285f3[this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x0]][_0x1a57a8(0x167)](this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x1]),this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x2]=Math[_0x1a57a8(0x13c)]()*0.05+0.05,this[_0x1a57a8(0xeb)][0x4*_0x18dde1+0x3]=Math['random']()*0.1+0.1;}this[_0x1a57a8(0x1ac)]=0x0,this[_0x1a57a8(0x17f)][_0x1a57a8(0x129)]['writeBuffer'](this[_0x1a57a8(0x1a5)],0x0,this[_0x1a57a8(0xeb)]);}[_0x527bdf(0xde)](){}async[_0x527bdf(0x171)](){const _0x2c66db=_0x527bdf;let _0x242428=await this['loadShader'](_0x2c66db(0x13e));this[_0x2c66db(0x11f)]=this['_device'][_0x2c66db(0x1a9)]({'label':_0x2c66db(0x1be)+this[_0x2c66db(0x16d)](),'code':_0x242428}),this[_0x2c66db(0x1a2)]=this['_device'][_0x2c66db(0x122)]({'label':_0x2c66db(0x1b4)+this[_0x2c66db(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x2c66db(0x145)]|GPUShaderStage[_0x2c66db(0x149)],'buffer':{'type':_0x2c66db(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x2c66db(0x174)}},{'binding':0x2,'visibility':GPUShaderStage[_0x2c66db(0x145)]|GPUShaderStage[_0x2c66db(0x149)],'buffer':{'type':_0x2c66db(0xf5)}}]}),this[_0x2c66db(0xc5)]=this[_0x2c66db(0x17f)][_0x2c66db(0xdf)]({'label':_0x2c66db(0xf0),'bindGroupLayouts':[this[_0x2c66db(0x1a2)]]});}async[_0x527bdf(0x136)](){const _0x2fe14e=_0x527bdf;await this[_0x2fe14e(0x193)](),await this[_0x2fe14e(0x1c1)]();}async['createParticlePipeline'](){const _0x2d82aa=_0x527bdf;this['_particlePipeline']=this[_0x2d82aa(0x17f)]['createRenderPipeline']({'label':_0x2d82aa(0x12f)+this[_0x2d82aa(0x16d)](),'layout':this[_0x2d82aa(0xc5)],'vertex':{'module':this['_shaderModule'],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x2d82aa(0x11f)],'entryPoint':_0x2d82aa(0x186),'targets':[{'format':this[_0x2d82aa(0x121)]}]},'primitives':{'typology':_0x2d82aa(0xc3)}}),this[_0x2d82aa(0x1b8)]=[this[_0x2d82aa(0x17f)][_0x2d82aa(0x152)]({'layout':this['_particlePipeline'][_0x2d82aa(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_particleBuffers'][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x2d82aa(0x10e)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x2d82aa(0x1a5)]}}]}),this['_device'][_0x2d82aa(0x152)]({'layout':this[_0x2d82aa(0x18b)][_0x2d82aa(0x14c)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x2d82aa(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x2d82aa(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x2d82aa(0x1a5)]}}]})];}async['createSpringPipeline'](){const _0x418bca=_0x527bdf;this[_0x418bca(0x115)]=this[_0x418bca(0x17f)][_0x418bca(0x136)]({'label':_0x418bca(0x199)+this[_0x418bca(0x16d)](),'layout':this[_0x418bca(0xc5)],'vertex':{'module':this[_0x418bca(0x11f)],'entryPoint':_0x418bca(0xd1)},'fragment':{'module':this['_shaderModule'],'entryPoint':_0x418bca(0x170),'targets':[{'format':this[_0x418bca(0x121)]}]},'primitives':{'typology':'line-list'}});}[_0x527bdf(0x106)](_0x5dd6ea){const _0x1eed4e=_0x527bdf;_0x5dd6ea[_0x1eed4e(0x12b)](this['_springPipeline']),_0x5dd6ea[_0x1eed4e(0x124)](0x0,this[_0x1eed4e(0x1b8)][this[_0x1eed4e(0x1ac)]%0x2]),_0x5dd6ea[_0x1eed4e(0x105)](0xc,this[_0x1eed4e(0x1c4)]),_0x5dd6ea[_0x1eed4e(0x12b)](this[_0x1eed4e(0x18b)]),_0x5dd6ea[_0x1eed4e(0x124)](0x0,this['_bindGroups'][this['_step']%0x2]),_0x5dd6ea[_0x1eed4e(0x105)](0x80,this[_0x1eed4e(0x155)]);}async[_0x527bdf(0x117)](){const _0x2cbe5f=_0x527bdf;this[_0x2cbe5f(0x14b)]=this[_0x2cbe5f(0x17f)][_0x2cbe5f(0x117)]({'label':_0x2cbe5f(0xc4)+this[_0x2cbe5f(0x16d)](),'layout':this[_0x2cbe5f(0xc5)],'compute':{'module':this[_0x2cbe5f(0x11f)],'entryPoint':_0x2cbe5f(0x1bb)}}),this[_0x2cbe5f(0xed)]=this[_0x2cbe5f(0x17f)][_0x2cbe5f(0x117)]({'label':'Particles\x20Update\x20Pipeline\x20'+this[_0x2cbe5f(0x16d)](),'layout':this[_0x2cbe5f(0xc5)],'compute':{'module':this[_0x2cbe5f(0x11f)],'entryPoint':_0x2cbe5f(0x144)}});}['compute'](_0xa59ec9){const _0x18f734=_0x527bdf;_0xa59ec9[_0x18f734(0x12b)](this[_0x18f734(0x14b)]),_0xa59ec9[_0x18f734(0x124)](0x0,this[_0x18f734(0x1b8)][this[_0x18f734(0x1ac)]%0x2]),_0xa59ec9['dispatchWorkgroups'](this[_0x18f734(0x1c4)]),_0xa59ec9[_0x18f734(0x12b)](this[_0x18f734(0xed)]),_0xa59ec9[_0x18f734(0x124)](0x0,this[_0x18f734(0x1b8)][this[_0x18f734(0x1ac)]%0x2]),_0xa59ec9[_0x18f734(0xda)](Math['ceil'](this[_0x18f734(0x155)]/0x100)),++this[_0x18f734(0x1ac)];}}class MassSpringSystemClothObject extends MassSpringSystemObject{constructor(_0x118b60,_0x1391de,_0x7178c9=0x400){const _0x5226f4=_0x527bdf;super(_0x118b60,_0x1391de,_0x7178c9),this['_size']=_0x7178c9,this[_0x5226f4(0x155)]=_0x7178c9*_0x7178c9,this[_0x5226f4(0x1c4)]=[_0x7178c9*Math[_0x5226f4(0x169)]((_0x7178c9-0x1)/0x2),_0x7178c9*Math[_0x5226f4(0x11c)]((_0x7178c9-0x1)/0x2),_0x7178c9*Math[_0x5226f4(0x169)]((_0x7178c9-0x1)/0x2),_0x7178c9*Math[_0x5226f4(0x11c)]((_0x7178c9-0x1)/0x2)],this['_step']=0x0,this[_0x5226f4(0x16e)]=!![],this[_0x5226f4(0xdc)]=Math['floor'](this[_0x5226f4(0x155)]/0x2-_0x7178c9/0x2);}async['createGeometry'](){const _0x374303=_0x527bdf;await super[_0x374303(0xfa)](),await this[_0x374303(0x1c3)]();}[_0x527bdf(0x17b)](){const _0x2c8314=_0x527bdf;let _0x51feca=0.7,_0x33a696=_0x51feca/this['_size'];for(let _0x1bddad=0x0;_0x1bddad<this['_size'];++_0x1bddad)for(let _0x54950e=0x0;_0x54950e<this[_0x2c8314(0x14f)];++_0x54950e){let _0x3ff003=_0x1bddad*this[_0x2c8314(0x14f)]+_0x54950e;this[_0x2c8314(0x176)][0x8*_0x3ff003+0x0]=-0.25+_0x33a696*_0x54950e,this[_0x2c8314(0x176)][0x8*_0x3ff003+0x1]=0.5-_0x33a696*_0x1bddad,this[_0x2c8314(0x176)][0x8*_0x3ff003+0x2]=0x0,this[_0x2c8314(0x176)][0x8*_0x3ff003+0x3]=0x0,this['_particles'][0x8*_0x3ff003+0x4]=0x0,this['_particles'][0x8*_0x3ff003+0x5]=0x0,this['_particles'][0x8*_0x3ff003+0x6]=0.0001*this[_0x2c8314(0x155)],this['_particles'][0x8*_0x3ff003+0x7]=_0x1bddad==0x0?0x1:0x0;}this[_0x2c8314(0x1ac)]=0x0,this[_0x2c8314(0x17f)]['queue'][_0x2c8314(0xf1)](this[_0x2c8314(0x10e)][this['_step']%0x2],0x0,this[_0x2c8314(0x176)]);}async[_0x527bdf(0x15e)](){const _0x2d9701=_0x527bdf;this[_0x2d9701(0xeb)]=[];for(let _0x5accd0=0x0;_0x5accd0<0x4;++_0x5accd0)this[_0x2d9701(0xeb)][_0x2d9701(0x132)](new Float32Array(this['_numSprings'][_0x5accd0]*0x4));this['_springBuffer']=[];for(let _0xa54dc8=0x0;_0xa54dc8<0x4;++_0xa54dc8){this[_0x2d9701(0x1a5)]['push'](this[_0x2d9701(0x17f)][_0x2d9701(0x195)]({'label':_0x2d9701(0x180)+_0xa54dc8+'\x20'+this[_0x2d9701(0x16d)](),'size':this['_springs'][_0xa54dc8][_0x2d9701(0x1c0)],'usage':GPUBufferUsage[_0x2d9701(0x146)]|GPUBufferUsage[_0x2d9701(0x134)]}));}this[_0x2d9701(0x156)]();}[_0x527bdf(0x156)](){const _0x4b464e=_0x527bdf;let _0x3d3e31=0.7,_0x39e284=_0x3d3e31/this[_0x4b464e(0x14f)],_0x43345=0x4,_0x1f29d4=this['_size']*(this[_0x4b464e(0x14f)]-0x1),_0x1a6997=Math[_0x4b464e(0x169)]((this[_0x4b464e(0x14f)]-0x1)/0x2);for(let _0x2094c8=0x0;_0x2094c8<this[_0x4b464e(0x14f)];++_0x2094c8)for(let _0x202b88=0x0;_0x202b88<_0x1a6997;++_0x202b88){let _0x34bffe=_0x2094c8*_0x1a6997+_0x202b88;this[_0x4b464e(0xeb)][0x0][0x4*_0x34bffe+0x0]=_0x2094c8*this[_0x4b464e(0x14f)]+_0x202b88*0x2,this[_0x4b464e(0xeb)][0x0][0x4*_0x34bffe+0x1]=_0x2094c8*this[_0x4b464e(0x14f)]+_0x202b88*0x2+0x1,this['_springs'][0x0][0x4*_0x34bffe+0x2]=_0x39e284,this[_0x4b464e(0xeb)][0x0][0x4*_0x34bffe+0x3]=_0x43345,this['_springs'][0x2][0x4*_0x34bffe+0x0]=0x2*_0x202b88*this[_0x4b464e(0x14f)]+_0x2094c8,this['_springs'][0x2][0x4*_0x34bffe+0x1]=(0x2*_0x202b88+0x1)*this[_0x4b464e(0x14f)]+_0x2094c8,this[_0x4b464e(0xeb)][0x2][0x4*_0x34bffe+0x2]=_0x39e284,this[_0x4b464e(0xeb)][0x2][0x4*_0x34bffe+0x3]=_0x43345;}_0x1a6997=Math[_0x4b464e(0x11c)]((this[_0x4b464e(0x14f)]-0x1)/0x2);for(let _0x39fc77=0x0;_0x39fc77<this[_0x4b464e(0x14f)];++_0x39fc77)for(let _0x50abaf=0x0;_0x50abaf<_0x1a6997;++_0x50abaf){let _0x294d5a=_0x39fc77*_0x1a6997+_0x50abaf;this[_0x4b464e(0xeb)][0x1][0x4*_0x294d5a+0x0]=_0x39fc77*this[_0x4b464e(0x14f)]+_0x50abaf*0x2+0x1,this['_springs'][0x1][0x4*_0x294d5a+0x1]=_0x39fc77*this[_0x4b464e(0x14f)]+_0x50abaf*0x2+0x2,this[_0x4b464e(0xeb)][0x1][0x4*_0x294d5a+0x2]=_0x39e284,this['_springs'][0x1][0x4*_0x294d5a+0x3]=_0x43345,this[_0x4b464e(0xeb)][0x3][0x4*_0x294d5a+0x0]=(0x2*_0x50abaf+0x1)*this[_0x4b464e(0x14f)]+_0x39fc77,this[_0x4b464e(0xeb)][0x3][0x4*_0x294d5a+0x1]=(0x2*_0x50abaf+0x2)*this['_size']+_0x39fc77,this[_0x4b464e(0xeb)][0x3][0x4*_0x294d5a+0x2]=_0x39e284,this[_0x4b464e(0xeb)][0x3][0x4*_0x294d5a+0x3]=_0x43345;}this[_0x4b464e(0x1ac)]=0x0;for(let _0x31888d=0x0;_0x31888d<0x4;++_0x31888d){this[_0x4b464e(0x17f)][_0x4b464e(0x129)][_0x4b464e(0xf1)](this[_0x4b464e(0x1a5)][_0x31888d],0x0,this['_springs'][_0x31888d]);}}async[_0x527bdf(0x1c3)](){const _0x1e2b1b=_0x527bdf;this[_0x1e2b1b(0x175)]=new Float32Array([-0.01,0x0,this['_selectedIndex'],0x0]),this[_0x1e2b1b(0x185)]=this[_0x1e2b1b(0x17f)]['createBuffer']({'label':_0x1e2b1b(0x163)+this[_0x1e2b1b(0x16d)](),'size':this['_constants'][_0x1e2b1b(0x1c0)],'usage':GPUBufferUsage[_0x1e2b1b(0x150)]|GPUBufferUsage['COPY_DST']}),this[_0x1e2b1b(0x17f)][_0x1e2b1b(0x129)][_0x1e2b1b(0xf1)](this[_0x1e2b1b(0x185)],0x0,this[_0x1e2b1b(0x175)]);}[_0x527bdf(0x184)](){const _0x57a08a=_0x527bdf;this[_0x57a08a(0x16e)]=!this['_useTexutre'];}[_0x527bdf(0xf3)](){const _0x54fd2f=_0x527bdf;this[_0x54fd2f(0x175)][0x1]?this['setWind'](0x0):this[_0x54fd2f(0x18e)]((Math[_0x54fd2f(0x13c)]()*0x2-0x1)*0.01);}[_0x527bdf(0x18e)](_0x10c09b){const _0x257309=_0x527bdf;this['_constants'][0x1]=_0x10c09b,this['_device']['queue'][_0x257309(0xf1)](this[_0x257309(0x185)],0x0,this[_0x257309(0x175)]);}['toggleGravity'](){const _0x11f150=_0x527bdf;this[_0x11f150(0x175)][0x0]?this[_0x11f150(0x165)](0x0):this['setGravity'](-0.01);}[_0x527bdf(0x165)](_0xd18303){const _0x57a57b=_0x527bdf;this[_0x57a57b(0x175)][0x0]=_0xd18303,this[_0x57a57b(0x17f)][_0x57a57b(0x129)][_0x57a57b(0xf1)](this['_constantsBuffer'],0x0,this[_0x57a57b(0x175)]);}['nextIndex'](){const _0x261f64=_0x527bdf;if(this[_0x261f64(0x175)][0x2]<0x0)this[_0x261f64(0x175)][0x2]-=0x1;else this[_0x261f64(0x175)][0x2]+=0x1;if(Math[_0x261f64(0x10c)](this[_0x261f64(0x175)][0x2]==this[_0x261f64(0x155)]+0x1))this[_0x261f64(0x175)][0x2]=0x0;this[_0x261f64(0x17f)][_0x261f64(0x129)]['writeBuffer'](this[_0x261f64(0x185)],0x0,this[_0x261f64(0x175)]);}['setForce'](_0xb10432,_0x27e462){const _0x1cc711=_0x527bdf;if(_0xb10432)this[_0x1cc711(0x175)][0x2]=Math['abs'](this[_0x1cc711(0x175)][0x2]);else this[_0x1cc711(0x175)][0x2]=-Math['abs'](this[_0x1cc711(0x175)][0x2]);this['_constants'][0x3]=_0x27e462,this[_0x1cc711(0x17f)][_0x1cc711(0x129)][_0x1cc711(0xf1)](this[_0x1cc711(0x185)],0x0,this[_0x1cc711(0x175)]);}[_0x527bdf(0xde)](){}async[_0x527bdf(0x171)](){const _0x373f23=_0x527bdf;let _0x48e8f7=await this[_0x373f23(0x109)]('/shaders/optimized_massspringcloth.wgsl');this[_0x373f23(0x11f)]=this[_0x373f23(0x17f)][_0x373f23(0x1a9)]({'label':_0x373f23(0x1be)+this[_0x373f23(0x16d)](),'code':_0x48e8f7}),this[_0x373f23(0x1a2)]=this[_0x373f23(0x17f)]['createBindGroupLayout']({'label':_0x373f23(0x1b4)+this[_0x373f23(0x16d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x373f23(0x145)]|GPUShaderStage['COMPUTE'],'buffer':{'type':_0x373f23(0xf5)}},{'binding':0x1,'visibility':GPUShaderStage[_0x373f23(0x149)],'buffer':{'type':_0x373f23(0x174)}},{'binding':0x2,'visibility':GPUShaderStage[_0x373f23(0x145)]|GPUShaderStage['COMPUTE'],'buffer':{'type':_0x373f23(0xf5)}},{'binding':0x3,'visibility':GPUShaderStage[_0x373f23(0x145)]|GPUShaderStage[_0x373f23(0x149)],'buffer':{}}]}),this[_0x373f23(0xc5)]=this[_0x373f23(0x17f)][_0x373f23(0xdf)]({'label':_0x373f23(0xf0),'bindGroupLayouts':[this[_0x373f23(0x1a2)]]});}async['createRenderPipeline'](){const _0x56bb05=_0x527bdf;await super[_0x56bb05(0x136)](),this['_renderPipeline']=this[_0x56bb05(0x17f)][_0x56bb05(0x136)]({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x56bb05(0x16d)](),'layout':this[_0x56bb05(0xc5)],'vertex':{'module':this[_0x56bb05(0x11f)],'entryPoint':_0x56bb05(0xce)},'fragment':{'module':this[_0x56bb05(0x11f)],'entryPoint':_0x56bb05(0x186),'targets':[{'format':this[_0x56bb05(0x121)]}]},'primitives':{'typology':_0x56bb05(0x1a6)}});}async[_0x527bdf(0x193)](){const _0x3ac1a6=_0x527bdf;this[_0x3ac1a6(0x18b)]=this[_0x3ac1a6(0x17f)]['createRenderPipeline']({'label':_0x3ac1a6(0x12f)+this[_0x3ac1a6(0x16d)](),'layout':this[_0x3ac1a6(0xc5)],'vertex':{'module':this[_0x3ac1a6(0x11f)],'entryPoint':_0x3ac1a6(0x1ba)},'fragment':{'module':this[_0x3ac1a6(0x11f)],'entryPoint':'fragmentMain','targets':[{'format':this[_0x3ac1a6(0x121)]}]},'primitives':{'typology':_0x3ac1a6(0xc3)}}),this[_0x3ac1a6(0x1b8)]=[];for(let _0x4b0f99=0x0;_0x4b0f99<0x4;++_0x4b0f99){this[_0x3ac1a6(0x1b8)][_0x3ac1a6(0x132)]([this[_0x3ac1a6(0x17f)][_0x3ac1a6(0x152)]({'layout':this['_particlePipeline']['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3ac1a6(0x10e)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x3ac1a6(0x10e)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x3ac1a6(0x1a5)][_0x4b0f99]}},{'binding':0x3,'resource':{'buffer':this[_0x3ac1a6(0x185)]}}]}),this[_0x3ac1a6(0x17f)][_0x3ac1a6(0x152)]({'layout':this[_0x3ac1a6(0x18b)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3ac1a6(0x10e)][0x1]}},{'binding':0x1,'resource':{'buffer':this[_0x3ac1a6(0x10e)][0x0]}},{'binding':0x2,'resource':{'buffer':this[_0x3ac1a6(0x1a5)][_0x4b0f99]}},{'binding':0x3,'resource':{'buffer':this['_constantsBuffer']}}]})]);}}[_0x527bdf(0x106)](_0x5bb3b4){const _0x4c7528=_0x527bdf;if(this[_0x4c7528(0x16e)])_0x5bb3b4[_0x4c7528(0x12b)](this[_0x4c7528(0x1a7)]),_0x5bb3b4[_0x4c7528(0x124)](0x0,this[_0x4c7528(0x1b8)][0x0][this['_step']%0x2]),_0x5bb3b4[_0x4c7528(0x105)](0x6,(this[_0x4c7528(0x14f)]-0x1)*(this[_0x4c7528(0x14f)]-0x1));else{_0x5bb3b4[_0x4c7528(0x12b)](this[_0x4c7528(0x115)]);for(let _0x552c7c=0x0;_0x552c7c<0x4;++_0x552c7c)this[_0x4c7528(0x1c4)][_0x552c7c]&&(_0x5bb3b4['setBindGroup'](0x0,this[_0x4c7528(0x1b8)][_0x552c7c][this[_0x4c7528(0x1ac)]%0x2]),_0x5bb3b4[_0x4c7528(0x105)](0xc,this[_0x4c7528(0x1c4)][_0x552c7c]));_0x5bb3b4[_0x4c7528(0x12b)](this[_0x4c7528(0x18b)]),_0x5bb3b4[_0x4c7528(0x124)](0x0,this['_bindGroups'][0x0][this[_0x4c7528(0x1ac)]%0x2]),_0x5bb3b4[_0x4c7528(0x105)](0x80,this[_0x4c7528(0x155)]);}}[_0x527bdf(0x1b9)](_0x5703e2){const _0x364fc4=_0x527bdf;for(let _0x4e3c9a=0x0;_0x4e3c9a<0x4;++_0x4e3c9a)this[_0x364fc4(0x1c4)][_0x4e3c9a]&&(_0x5703e2[_0x364fc4(0x12b)](this['_computePipeline']),_0x5703e2[_0x364fc4(0x124)](0x0,this['_bindGroups'][_0x4e3c9a][this[_0x364fc4(0x1ac)]%0x2]),_0x5703e2[_0x364fc4(0xda)](Math[_0x364fc4(0x169)](this['_numSprings'][_0x4e3c9a]/0x100)));_0x5703e2['setPipeline'](this[_0x364fc4(0xed)]),_0x5703e2[_0x364fc4(0x124)](0x0,this[_0x364fc4(0x1b8)][0x0][this[_0x364fc4(0x1ac)]%0x2]),_0x5703e2[_0x364fc4(0xda)](Math[_0x364fc4(0x169)](this[_0x364fc4(0x155)]/0x100)),++this[_0x364fc4(0x1ac)];}}function _0x1c6e(_0x16ee67,_0x5a4b99){const _0xe2a145=_0xe2a1();return _0x1c6e=function(_0x1c6ee6,_0x3167de){_0x1c6ee6=_0x1c6ee6-0xc3;let _0x25fbfe=_0xe2a145[_0x1c6ee6];return _0x25fbfe;},_0x1c6e(_0x16ee67,_0x5a4b99);}async function init(){const _0x421442=_0x527bdf,_0xc0f0e8=document[_0x421442(0xca)](_0x421442(0x191));_0xc0f0e8['id']=_0x421442(0x110),document[_0x421442(0x1b3)][_0x421442(0x18c)](_0xc0f0e8);const _0x35aa7e=new Renderer(_0xc0f0e8);await _0x35aa7e[_0x421442(0x17d)]();var _0x20ae39=new ParticleSystemRainObject(_0x35aa7e[_0x421442(0x17f)],_0x35aa7e[_0x421442(0x121)],_0x421442(0x16c),0x64);await _0x35aa7e[_0x421442(0x127)](_0x20ae39);const _0x39eded=new ParticleSystemWaterfallObject(_0x35aa7e['_device'],_0x35aa7e['_canvasFormat']);await _0x35aa7e[_0x421442(0x127)](_0x39eded);var _0x18b0b2=new ParticleSystemFireObject(_0x35aa7e['_device'],_0x35aa7e[_0x421442(0x121)],0x800);await _0x35aa7e[_0x421442(0x127)](_0x18b0b2);var _0x538dc9=new ParticleSystemFountainObject(_0x35aa7e[_0x421442(0x17f)],_0x35aa7e['_canvasFormat'],0x100);await _0x35aa7e['appendSceneObject'](_0x538dc9);var _0x548773=new MassSpringSystemClothObject(_0x35aa7e[_0x421442(0x17f)],_0x35aa7e[_0x421442(0x121)],0x10);await _0x35aa7e[_0x421442(0x127)](_0x548773);var _0xc0e2c=new StandardTextObject(_0x421442(0x116));let _0x4cb498='??';var _0x363ecc=new StandardTextObject('fps:\x20'+_0x4cb498),_0x2488b1=new Map();_0x2488b1['ArrowUp']=![],_0x2488b1[_0x421442(0x178)]=![],_0x2488b1[_0x421442(0xe3)]=![],_0x2488b1['ArrowRight']=![],window['addEventListener'](_0x421442(0x128),_0x33a7fe=>{const _0x4a7828=_0x421442;switch(_0x33a7fe[_0x4a7828(0x13f)]){case't':case'T':_0x20ae39['toggleTexture'](),_0x548773[_0x4a7828(0x184)]();break;case'w':case'W':_0x20ae39[_0x4a7828(0xf3)](),_0x538dc9[_0x4a7828(0xf3)](),_0x18b0b2[_0x4a7828(0xf3)](),_0x548773[_0x4a7828(0xf3)]();break;case'g':case'G':_0x20ae39[_0x4a7828(0x100)](),_0x538dc9['toggleGravity'](),_0x18b0b2[_0x4a7828(0x100)](),_0x548773[_0x4a7828(0x100)]();break;case'n':case'N':_0x548773[_0x4a7828(0x10a)]();break;case'h':case'H':_0xc0e2c[_0x4a7828(0x139)]();break;case'f':case'F':_0x363ecc['toggleVisibility']();break;case _0x4a7828(0x187):{!_0x2488b1[_0x4a7828(0x187)]&&(_0x2488b1[_0x4a7828(0x187)]=!![],_0x548773[_0x4a7828(0x192)](![],0.0005));}break;case _0x4a7828(0x178):{!_0x2488b1[_0x4a7828(0x178)]&&(_0x2488b1[_0x4a7828(0x178)]=!![],_0x548773[_0x4a7828(0x192)](![],-0.0005));}break;case'ArrowLeft':{!_0x2488b1['ArrowLeft']&&(_0x2488b1[_0x4a7828(0xe3)]=!![],_0x548773[_0x4a7828(0x192)](!![],-0.0005));}break;case'ArrowRight':{!_0x2488b1[_0x4a7828(0x1b6)]&&(_0x2488b1[_0x4a7828(0x1b6)]=!![],_0x548773[_0x4a7828(0x192)](!![],0.0005));}break;}}),window[_0x421442(0x196)](_0x421442(0x11d),_0x46851c=>{const _0x53b138=_0x421442;switch(_0x46851c[_0x53b138(0x13f)]){case _0x53b138(0x187):_0x2488b1[_0x53b138(0x187)]=![],_0x548773[_0x53b138(0x192)](![],0x0);break;case _0x53b138(0x178):_0x2488b1[_0x53b138(0x178)]=![],_0x548773[_0x53b138(0x192)](![],0x0);break;case _0x53b138(0xe3):_0x2488b1['ArrowLeft']=![],_0x548773[_0x53b138(0x192)](!![],0x0);break;case _0x53b138(0x1b6):_0x2488b1[_0x53b138(0x1b6)]=![],_0x548773[_0x53b138(0x192)](!![],0x0);break;}});let _0x11c5f1=async _0x3dd005=>{const _0x5dc493=_0x421442;if(_0x3dd005[_0x5dc493(0x17a)]){let _0xb67796=new ParticleSystemFireworkObject(_0x35aa7e['_device'],_0x35aa7e[_0x5dc493(0x121)],0xa,0x100);await _0x35aa7e[_0x5dc493(0x127)](_0xb67796),_0xb67796[_0x5dc493(0x17b)](_0x3dd005['clientX']/window['innerWidth']*0x2-0x1,-_0x3dd005['clientY']/window[_0x5dc493(0x103)]*0x2+0x1);}else{}},_0x57bfb1=_0x2b7a35=>{},_0x48853b=_0x24112b=>{};_0xc0f0e8[_0x421442(0x196)]('mousedown',_0x11c5f1),_0xc0f0e8['addEventListener'](_0x421442(0xe4),_0x57bfb1),_0xc0f0e8['addEventListener'](_0x421442(0x15c),_0x48853b),_0xc0f0e8['addEventListener'](_0x421442(0x111),_0x11c5f1),_0xc0f0e8[_0x421442(0x196)]('touchmove',_0x57bfb1),_0xc0f0e8['addEventListener'](_0x421442(0x1b1),_0x48853b);var _0x3b4bdb=0x0,_0x242487=0x3c,_0x4e93c3=0x1/_0x242487,_0x4a6d3f=_0x4e93c3*0x3e8,_0x2168cc;let _0x2d5232=()=>{const _0x2262f3=_0x421442;let _0x231921=Date[_0x2262f3(0x15a)]()-_0x2168cc;if(_0x231921>_0x4a6d3f){++_0x3b4bdb,_0x2168cc=Date[_0x2262f3(0x15a)]()-_0x231921%_0x4a6d3f,_0x35aa7e[_0x2262f3(0x106)]();for(let _0x4bc646=0x0;_0x4bc646<_0x35aa7e[_0x2262f3(0xcd)][_0x2262f3(0x112)];++_0x4bc646){_0x35aa7e[_0x2262f3(0xcd)][_0x4bc646]instanceof ParticleSystemFireworkObject&&_0x35aa7e['_objects'][_0x4bc646]['_step']>0xff&&_0x35aa7e[_0x2262f3(0xcd)][_0x2262f3(0xd7)](_0x4bc646,0x1);}}requestAnimationFrame(_0x2d5232);};return _0x2168cc=Date[_0x421442(0x15a)](),_0x2d5232(),_0x363ecc[_0x421442(0x1a4)][_0x421442(0x125)]['setProperty'](_0x421442(0x1bd),_0x421442(0x16b)),_0x363ecc['_textCanvas']['style'][_0x421442(0xcf)]=_0x421442(0x173),setInterval(()=>{const _0x27f00b=_0x421442;_0x4cb498=_0x3b4bdb,_0x3b4bdb=0x0,_0x363ecc[_0x27f00b(0xcc)]('fps:\x20'+_0x4cb498);},0x3e8),_0x35aa7e;}init()[_0x527bdf(0x140)](_0x43163c=>{const _0x218f77=_0x527bdf;console[_0x218f77(0x1ae)](_0x43163c);})[_0x527bdf(0xcb)](_0x215eab=>{const _0x25bb0b=_0x527bdf,_0x3332e9=document[_0x25bb0b(0xca)]('p');_0x3332e9[_0x25bb0b(0x158)]=navigator['userAgent']+'</br>'+_0x215eab['message'],document[_0x25bb0b(0x1b3)]['appendChild'](_0x3332e9),document[_0x25bb0b(0x19a)](_0x25bb0b(0x110))[_0x25bb0b(0x102)]();});