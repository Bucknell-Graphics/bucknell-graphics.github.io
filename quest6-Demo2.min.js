/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x58051d=_0x4223;(function(_0x3c3af4,_0x86e37f){const _0x56e7d5=_0x4223,_0x4ee17a=_0x3c3af4();while(!![]){try{const _0x5525dc=-parseInt(_0x56e7d5(0x226))/0x1+-parseInt(_0x56e7d5(0x28c))/0x2+-parseInt(_0x56e7d5(0x1ee))/0x3+-parseInt(_0x56e7d5(0x204))/0x4*(parseInt(_0x56e7d5(0x292))/0x5)+parseInt(_0x56e7d5(0x261))/0x6+-parseInt(_0x56e7d5(0x256))/0x7+parseInt(_0x56e7d5(0x1f8))/0x8*(parseInt(_0x56e7d5(0x214))/0x9);if(_0x5525dc===_0x86e37f)break;else _0x4ee17a['push'](_0x4ee17a['shift']());}catch(_0xf79103){_0x4ee17a['push'](_0x4ee17a['shift']());}}}(_0x1a63,0x2ed69));class Renderer{constructor(_0x29c8f1){const _0x577396=_0x4223;this[_0x577396(0x221)]=_0x29c8f1,this['_objects']=[],this['_clearColor']={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x58051d(0x1eb)](){const _0x24955a=_0x58051d;if(!navigator[_0x24955a(0x23b)])throw Error(_0x24955a(0x265));const _0x23ac03=await navigator[_0x24955a(0x23b)]['requestAdapter']();if(!_0x23ac03)throw Error(_0x24955a(0x202));this[_0x24955a(0x236)]=await _0x23ac03[_0x24955a(0x227)](),this[_0x24955a(0x23e)]=this[_0x24955a(0x221)][_0x24955a(0x25f)]('webgpu'),this[_0x24955a(0x299)]=navigator['gpu']['getPreferredCanvasFormat'](),this[_0x24955a(0x23e)][_0x24955a(0x249)]({'device':this['_device'],'format':this[_0x24955a(0x299)]}),this[_0x24955a(0x2b5)](),window[_0x24955a(0x2bb)](_0x24955a(0x1f3),this['resizeCanvas']['bind'](this));}[_0x58051d(0x2b5)](){const _0x58c9a2=_0x58051d,_0x1c21a5=window['devicePixelRatio']||0x1,_0x371056=window['innerWidth']*_0x1c21a5,_0x55cff6=window[_0x58c9a2(0x1ce)]*_0x1c21a5;this[_0x58c9a2(0x221)][_0x58c9a2(0x293)]=_0x371056,this[_0x58c9a2(0x221)][_0x58c9a2(0x28a)]=_0x55cff6,this[_0x58c9a2(0x221)][_0x58c9a2(0x252)]['width']=window['innerWidth']+'px',this[_0x58c9a2(0x221)][_0x58c9a2(0x252)][_0x58c9a2(0x28a)]=window[_0x58c9a2(0x1ce)]+'px',this[_0x58c9a2(0x221)][_0x58c9a2(0x252)][_0x58c9a2(0x272)]=_0x58c9a2(0x20c),this[_0x58c9a2(0x201)]();}async[_0x58051d(0x1fa)](_0x3f8d61){const _0x314bfd=_0x58051d;await _0x3f8d61[_0x314bfd(0x1eb)](),this[_0x314bfd(0x1d9)][_0x314bfd(0x266)](_0x3f8d61);}[_0x58051d(0x1da)](_0x2b2e79){const _0x3ce83e=_0x58051d;for(const _0x36e658 of this[_0x3ce83e(0x1d9)]){_0x36e658?.['updateGeometry']();}let _0x2a081b=this['_device']['createCommandEncoder']();const _0x1fe5e3=_0x2a081b['beginRenderPass']({'colorAttachments':[{'view':_0x2b2e79,'clearValue':this[_0x3ce83e(0x1d8)],'loadOp':_0x3ce83e(0x1e2),'storeOp':_0x3ce83e(0x207)}]});for(const _0x1ba175 of this['_objects']){_0x1ba175?.[_0x3ce83e(0x201)](_0x1fe5e3);}_0x1fe5e3[_0x3ce83e(0x1ec)]();const _0x590999=_0x2a081b[_0x3ce83e(0x1cd)]();for(const _0xa1cdc7 of this['_objects']){_0xa1cdc7?.[_0x3ce83e(0x224)](_0x590999);}_0x590999['end']();const _0x392791=_0x2a081b[_0x3ce83e(0x203)]();this[_0x3ce83e(0x236)][_0x3ce83e(0x23f)][_0x3ce83e(0x27c)]([_0x392791]);}[_0x58051d(0x201)](){const _0x249958=_0x58051d;this[_0x249958(0x1da)](this[_0x249958(0x23e)][_0x249958(0x273)]()[_0x249958(0x264)]());}}class RayTracer extends Renderer{constructor(_0x3a95c1){const _0x15f970=_0x58051d;super(_0x3a95c1),this[_0x15f970(0x223)]=null;}async[_0x58051d(0x1eb)](){const _0x24efc4=_0x58051d;if(!navigator[_0x24efc4(0x23b)])throw Error(_0x24efc4(0x265));const _0x24e714=await navigator[_0x24efc4(0x23b)][_0x24efc4(0x1e7)]();if(!_0x24e714)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x24efc4(0x236)]=await _0x24e714[_0x24efc4(0x227)](),this[_0x24efc4(0x23e)]=this['_canvas'][_0x24efc4(0x25f)]('webgpu'),this['_canvasFormat']=_0x24efc4(0x2a4),this[_0x24efc4(0x23e)][_0x24efc4(0x249)]({'device':this['_device'],'format':this[_0x24efc4(0x299)]}),this[_0x24efc4(0x210)]=this['_device']['createShaderModule']({'label':_0x24efc4(0x1fd),'code':_0x24efc4(0x208)}),this[_0x24efc4(0x2b4)]=this[_0x24efc4(0x236)][_0x24efc4(0x222)]({'label':_0x24efc4(0x230),'size':0x8,'usage':GPUBufferUsage[_0x24efc4(0x297)]|GPUBufferUsage[_0x24efc4(0x1e0)]}),this['_pipeline']=this[_0x24efc4(0x236)][_0x24efc4(0x240)]({'label':_0x24efc4(0x274),'layout':'auto','vertex':{'module':this[_0x24efc4(0x210)],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x24efc4(0x210)],'entryPoint':_0x24efc4(0x228),'targets':[{'format':this[_0x24efc4(0x299)]}]}}),this[_0x24efc4(0x244)]=this[_0x24efc4(0x236)][_0x24efc4(0x24d)]({'label':_0x24efc4(0x20d),'magFilter':_0x24efc4(0x206),'minFilter':_0x24efc4(0x206)}),this[_0x24efc4(0x2b5)](),window[_0x24efc4(0x2bb)](_0x24efc4(0x1f3),this[_0x24efc4(0x2b5)]['bind'](this));}[_0x58051d(0x2b5)](){const _0x5144d1=_0x58051d,_0x1d7fe8=window[_0x5144d1(0x1c9)]||0x1,_0x2cd835=window[_0x5144d1(0x29a)]*_0x1d7fe8,_0x2ffc22=window[_0x5144d1(0x1ce)]*_0x1d7fe8,_0x1f0d21=_0x2cd835/_0x2ffc22,_0x1ff33d=_0x2ffc22;let _0x44c4af={'width':_0x1ff33d*_0x1f0d21,'height':_0x1ff33d};this['_offScreenTexture']=this[_0x5144d1(0x236)]['createTexture']({'size':_0x44c4af,'format':this[_0x5144d1(0x299)],'usage':GPUTextureUsage[_0x5144d1(0x282)]|GPUTextureUsage[_0x5144d1(0x257)]}),this['_tracer']&&(this[_0x5144d1(0x223)][_0x5144d1(0x1bd)]=this[_0x5144d1(0x1fe)]['width'],this[_0x5144d1(0x223)][_0x5144d1(0x239)]=this[_0x5144d1(0x1fe)]['height'],this[_0x5144d1(0x223)][_0x5144d1(0x2b9)](),this[_0x5144d1(0x223)][_0x5144d1(0x1fb)](this[_0x5144d1(0x1fe)])),this[_0x5144d1(0x22c)]=this[_0x5144d1(0x236)][_0x5144d1(0x1fb)]({'label':_0x5144d1(0x234),'layout':this[_0x5144d1(0x1ed)][_0x5144d1(0x23c)](0x0),'entries':[{'binding':0x0,'resource':this['_offScreenTexture']['createView']()},{'binding':0x1,'resource':this[_0x5144d1(0x244)]},{'binding':0x2,'resource':{'buffer':this[_0x5144d1(0x2b4)]}}]}),super[_0x5144d1(0x2b5)](),this[_0x5144d1(0x236)]['queue'][_0x5144d1(0x26e)](this['_outputSizeBuffer'],0x0,new Float32Array([_0x2cd835,_0x2ffc22]));}async[_0x58051d(0x233)](_0x2d007c){const _0x72d5c2=_0x58051d;await _0x2d007c[_0x72d5c2(0x1eb)](),_0x2d007c['_imgWidth']=this[_0x72d5c2(0x1fe)][_0x72d5c2(0x293)],_0x2d007c[_0x72d5c2(0x239)]=this['_offScreenTexture'][_0x72d5c2(0x28a)],_0x2d007c[_0x72d5c2(0x2b9)](),this[_0x72d5c2(0x223)]=_0x2d007c,this[_0x72d5c2(0x223)][_0x72d5c2(0x1fb)](this['_offScreenTexture']);}['render'](){const _0x1ac24d=_0x58051d;if(this[_0x1ac24d(0x223)]){let _0x261c22=this['_device'][_0x1ac24d(0x253)]();const _0x3949f6=_0x261c22['beginComputePass']();this[_0x1ac24d(0x223)][_0x1ac24d(0x224)](_0x3949f6),_0x3949f6['end'](),this['_device'][_0x1ac24d(0x23f)][_0x1ac24d(0x27c)]([_0x261c22['finish']()]);}let _0x23b630=this[_0x1ac24d(0x236)][_0x1ac24d(0x253)]();const _0x4cc94f=_0x23b630[_0x1ac24d(0x263)]({'colorAttachments':[{'view':this[_0x1ac24d(0x23e)][_0x1ac24d(0x273)]()['createView'](),'clearValue':this[_0x1ac24d(0x1d8)],'loadOp':_0x1ac24d(0x1e2),'storeOp':_0x1ac24d(0x207)}]});_0x4cc94f[_0x1ac24d(0x260)](this[_0x1ac24d(0x1ed)]),_0x4cc94f['setBindGroup'](0x0,this[_0x1ac24d(0x22c)]),_0x4cc94f[_0x1ac24d(0x1ca)](0x6),_0x4cc94f[_0x1ac24d(0x1ec)](),this[_0x1ac24d(0x236)][_0x1ac24d(0x23f)][_0x1ac24d(0x27c)]([_0x23b630[_0x1ac24d(0x203)]()]);}}function _0x1a63(){const _0x31a6c3=['auto','_width','</br>','moveY','writeBuffer','_coneBuffer','fill','onload','transformOrigin','getCurrentTexture','Ray\x20Tracer\x20Pipeline','createComputePipeline','Box\x20','constructor','updateTextRegion','_objectCnt','mouseenter','setProperty','submit','_showTexture','canvas','keyup','Ray\x20Tracing\x20Pipeline\x20','forEach','TEXTURE_BINDING','1px\x20solid\x20red','onerror','computeProjectiveMain','createShaderModule','updateCubePose','_right','open','height','match','161910CpeVmw','/shaders/optimized_tracedemobox2.wgsl','_canvasWidth','split','createShaders','rotate','5BjmqhZ','width','_paddingtop','createElement','updateCylinderScales','UNIFORM','_wgWidth','_canvasFormat','innerWidth','_wgHeight','updateCylinderPose','updateBoxScales','loadShader','_sphere','_textCanvas','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','_pose','Cylinder\x20','rgba8unorm','rgba(1,\x201,\x201,\x200.5)','border','absolute','font','remove','status','no-cache,\x20no-store,\x20max-age=0','moveX','ceil','read-only-storage','_computeProjectivePipeline','_textContext','cos','_left','_resolutions','_outputSizeBuffer','resizeCanvas','_cone','position','fps:\x20','updateGeometry','sin','addEventListener','_imgWidth','renderCanvas','top','_down','Ray\x20Trace\x20Box\x20Bind\x20Group','textBaseline','body','rotateY','_cylinderBuffer','\x20Shader\x20','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','moveZ','devicePixelRatio','draw','_height','translate','beginComputePass','innerHeight','byteLength','rotateX','updateText','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','updatePose','_sphereBuffer','dispatchWorkgroups','updateSize','_lines','_clearColor','_objects','renderToSelectedView','toggleVisibility','_bindGroupLayout','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','updateConePose','right','COPY_DST','touchstart','clear','mousedown','length','left','_boxBuffer','requestAdapter','_scales','_cameraBuffer','updateSpherePose','init','end','_pipeline','633639IZYbgB','fillRect','now','Sphere\x20','10px','resize','catch','message','setRequestHeader','Cache-Control','8tSpsQo','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','appendSceneObject','createBindGroup','toString','Ray\x20Tracer\x20Shader','_offScreenTexture','_isProjective','updateCubeScales','render','Couldn\x27t\x20request\x20WebGPU\x20adapter.','finish','119892dfxSVt','keydown','linear','store','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','none','getName','innerHTML','center','Ray\x20Tracer\x20Sampler','rotateZ','_textFont','_shaderModule','_fontSize','Ray\x20Trace\x20Box\x20Projective\x20Pipeline\x20','applyPoseToPoint','5305491YdxrDw','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_back','18px\x20Arial','send','_box','appendChild','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','_lineSpacing','_paddingx','_pipelineLayout','_computePipeline','Camera\x20','_canvas','createBuffer','_tracer','compute','max','373207AZNBEP','requestDevice','fragmentMain','clearRect','_cylinder','_focal','_bindGroup','readyState','Cone\x20','COMPUTE','Ray\x20Tracer\x20output\x20size\x20buffer','getElementById','then','setTracerObject','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','_cube','_device','resetPose','setBindGroup','_imgHeight','createPipelineLayout','gpu','getBindGroupLayout','STORAGE','_context','queue','createRenderPipeline','pointer-events','measureText','updateSphereScales','_sampler','_cubeOffset','createGeometry','statusText','updateCameraFocal','configure','_front','computeOrthogonalMain','mousemove','createSampler','map','_canvasHeight','Ray\x20Trace\x20Box\x20Layout\x20','_camera','style','createCommandEncoder','mouseup','log','545538KXvYUC','STORAGE_BINDING','_top','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','fillStyle','initial','DONE','updateBoxPose','fillText','getContext','setPipeline','2253792eITDoK','updateCameraPose','beginRenderPass','createView','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','push','mouseleave','updateConeScales','applyPoseToDir'];_0x1a63=function(){return _0x31a6c3;};return _0x1a63();}class StandardTextObject{constructor(_0x5bc49c,_0x55824a=0x5,_0x5e7ac9=_0x58051d(0x217)){const _0x961cb7=_0x58051d;this['_textFont']=_0x5e7ac9,this[_0x961cb7(0x21c)]=_0x55824a,this[_0x961cb7(0x2a0)]=document[_0x961cb7(0x295)]('canvas'),this[_0x961cb7(0x2b0)]=this[_0x961cb7(0x2a0)][_0x961cb7(0x25f)]('2d'),this[_0x961cb7(0x278)](_0x5bc49c),this['updateText'](_0x5bc49c),this[_0x961cb7(0x2a0)]['style'][_0x961cb7(0x2b7)]=_0x961cb7(0x2a7),this['_textCanvas'][_0x961cb7(0x252)]['top']=_0x961cb7(0x1f2),this[_0x961cb7(0x2a0)][_0x961cb7(0x252)][_0x961cb7(0x1e5)]=_0x961cb7(0x1f2),this[_0x961cb7(0x2a0)]['style'][_0x961cb7(0x2a6)]=_0x961cb7(0x283),document[_0x961cb7(0x1c3)][_0x961cb7(0x21a)](this['_textCanvas']);}[_0x58051d(0x1db)](){const _0x212c4a=_0x58051d;this['_textCanvas']['hidden']=!this[_0x212c4a(0x2a0)]['hidden'];}[_0x58051d(0x278)](_0x2a6593){const _0x282aa7=_0x58051d;this[_0x282aa7(0x2b0)][_0x282aa7(0x2a8)]=this[_0x282aa7(0x20f)],this[_0x282aa7(0x1d7)]=_0x2a6593[_0x282aa7(0x28f)]('\x0a'),this[_0x282aa7(0x26b)]=Math[_0x282aa7(0x225)](...this['_lines'][_0x282aa7(0x24e)](_0x3d0b9b=>this[_0x282aa7(0x2b0)][_0x282aa7(0x242)](_0x3d0b9b)[_0x282aa7(0x293)]));const _0x4bea7b=this['_textFont'][_0x282aa7(0x28b)](/(\d+)px/);_0x4bea7b?this[_0x282aa7(0x211)]=parseInt(_0x4bea7b[0x1],0xa):(this[_0x282aa7(0x211)]=0x12,this['_textFont']=_0x282aa7(0x217)),this['_height']=this[_0x282aa7(0x1d7)][_0x282aa7(0x1e4)]*(this[_0x282aa7(0x211)]+this['_lineSpacing']),this[_0x282aa7(0x21d)]=0x5,this[_0x282aa7(0x294)]=0x3,this[_0x282aa7(0x28e)]=Math['ceil'](this[_0x282aa7(0x26b)]+this[_0x282aa7(0x21d)]*0x2),this[_0x282aa7(0x24f)]=Math[_0x282aa7(0x2ad)](this[_0x282aa7(0x1cb)]+this[_0x282aa7(0x294)]),this[_0x282aa7(0x2a0)][_0x282aa7(0x293)]=this[_0x282aa7(0x28e)],this[_0x282aa7(0x2a0)]['height']=this[_0x282aa7(0x24f)],this[_0x282aa7(0x2b0)][_0x282aa7(0x2a8)]=this['_textFont'],this[_0x282aa7(0x2b0)][_0x282aa7(0x1c2)]=_0x282aa7(0x1bf);}[_0x58051d(0x1d1)](_0x1e121c){const _0x3694f0=_0x58051d;this[_0x3694f0(0x1d7)]=_0x1e121c['split']('\x0a'),this[_0x3694f0(0x2b0)][_0x3694f0(0x25a)]=_0x3694f0(0x2a5),this[_0x3694f0(0x2b0)][_0x3694f0(0x229)](0x0,0x0,this['_canvasWidth'],this['_canvasHeight']),this['_textContext'][_0x3694f0(0x1ef)](0x0,0x0,this[_0x3694f0(0x28e)],this[_0x3694f0(0x24f)]),this['_textContext'][_0x3694f0(0x25a)]='white',this[_0x3694f0(0x1d7)][_0x3694f0(0x281)]((_0x1d550c,_0x5c21d9)=>{const _0x18bf77=_0x3694f0,_0x4b9c64=this[_0x18bf77(0x21d)],_0x4a7b60=this[_0x18bf77(0x294)]+_0x5c21d9*(this[_0x18bf77(0x211)]+this[_0x18bf77(0x21c)]);this[_0x18bf77(0x2b0)][_0x18bf77(0x25e)](_0x1d550c,_0x4b9c64,_0x4a7b60);});}}class SceneObject{static [_0x58051d(0x279)]=0x0;constructor(_0x20d830,_0x4caa75){const _0x718ffd=_0x58051d;if(this['constructor']==SceneObject)throw new Error(_0x718ffd(0x1f9));this[_0x718ffd(0x236)]=_0x20d830,this[_0x718ffd(0x299)]=_0x4caa75,SceneObject[_0x718ffd(0x279)]+=0x1;}[_0x58051d(0x20a)](){const _0x1a14a9=_0x58051d;return this[_0x1a14a9(0x277)]['name']+'\x20'+SceneObject['_objectCnt'][_0x1a14a9(0x1fc)]();}async[_0x58051d(0x1eb)](){const _0x1fec55=_0x58051d;await this[_0x1fec55(0x246)](),await this[_0x1fec55(0x290)](),await this[_0x1fec55(0x240)](),await this[_0x1fec55(0x275)]();}async[_0x58051d(0x246)](){throw new Error('Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.');}['updateGeometry'](){}[_0x58051d(0x29e)](_0x234f3f){return new Promise((_0x29566d,_0x1a3eea)=>{const _0x1e2ab8=_0x4223,_0x428164=new XMLHttpRequest();_0x428164[_0x1e2ab8(0x289)]('GET',_0x234f3f),_0x428164[_0x1e2ab8(0x1f6)](_0x1e2ab8(0x1f7),_0x1e2ab8(0x2ab)),_0x428164[_0x1e2ab8(0x271)]=function(){const _0x3a5b3d=_0x1e2ab8;_0x428164[_0x3a5b3d(0x22d)]===XMLHttpRequest[_0x3a5b3d(0x25c)]&&_0x428164[_0x3a5b3d(0x2aa)]===0xc8?_0x29566d(_0x428164['responseText']):_0x1a3eea({'status':_0x428164[_0x3a5b3d(0x2aa)],'statusText':_0x428164[_0x3a5b3d(0x247)]});},_0x428164[_0x1e2ab8(0x284)]=function(){const _0x2cbd9a=_0x1e2ab8;_0x1a3eea({'status':_0x428164[_0x2cbd9a(0x2aa)],'statusText':_0x428164[_0x2cbd9a(0x247)]});},_0x428164[_0x1e2ab8(0x218)]();});}async[_0x58051d(0x290)](){const _0x14dc89=_0x58051d;throw new Error(_0x14dc89(0x1c7));}async['createRenderPipeline'](){const _0x2f07a1=_0x58051d;throw new Error(_0x2f07a1(0x21b));}[_0x58051d(0x201)](_0x4360d9){const _0x409c59=_0x58051d;throw new Error(_0x409c59(0x215));}async[_0x58051d(0x275)](){const _0x838b63=_0x58051d;throw new Error(_0x838b63(0x1d2));}[_0x58051d(0x224)](_0x287b12){const _0x12fc84=_0x58051d;throw new Error(_0x12fc84(0x2a1));}}class RayTracingObject extends SceneObject{async[_0x58051d(0x246)](){}async[_0x58051d(0x290)](){const _0x5a3cda=_0x58051d;let _0x35bb1d=await this[_0x5a3cda(0x29e)]('/shaders/optimized_tracenothing.wgsl');this[_0x5a3cda(0x210)]=this[_0x5a3cda(0x236)][_0x5a3cda(0x286)]({'label':_0x5a3cda(0x1c6)+this[_0x5a3cda(0x20a)](),'code':_0x35bb1d});}[_0x58051d(0x2b9)](){}async['createRenderPipeline'](){}[_0x58051d(0x201)](_0x2550fd){}async['createComputePipeline'](){const _0xe48a52=_0x58051d;this[_0xe48a52(0x21f)]=this[_0xe48a52(0x236)][_0xe48a52(0x275)]({'label':_0xe48a52(0x280)+this[_0xe48a52(0x20a)](),'layout':_0xe48a52(0x26a),'compute':{'module':this[_0xe48a52(0x210)],'entryPoint':'computeMain'}});}[_0x58051d(0x1fb)](_0x1f3e55){const _0x388c8f=_0x58051d;this[_0x388c8f(0x22c)]=this[_0x388c8f(0x236)][_0x388c8f(0x1fb)]({'label':'Ray\x20Tracing\x20Bind\x20Group','layout':this['_computePipeline'][_0x388c8f(0x23c)](0x0),'entries':[{'binding':0x0,'resource':_0x1f3e55['createView']()}]}),this[_0x388c8f(0x298)]=Math['ceil'](_0x1f3e55['width']),this[_0x388c8f(0x29b)]=Math['ceil'](_0x1f3e55['height']);}[_0x58051d(0x224)](_0x109542){const _0xf6acf5=_0x58051d;_0x109542[_0xf6acf5(0x260)](this[_0xf6acf5(0x21f)]),_0x109542[_0xf6acf5(0x238)](0x0,this[_0xf6acf5(0x22c)]),_0x109542[_0xf6acf5(0x1d5)](Math[_0xf6acf5(0x2ad)](this[_0xf6acf5(0x298)]/0x10),Math[_0xf6acf5(0x2ad)](this[_0xf6acf5(0x29b)]/0x10));}}class UnitCube{constructor(){const _0x26990c=_0x58051d;this[_0x26990c(0x2a2)]=new Float32Array(Array(0x8)[_0x26990c(0x270)](0x0)),this[_0x26990c(0x1e8)]=new Float32Array(Array(0x4)[_0x26990c(0x270)](0x1)),this[_0x26990c(0x24a)]=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x26990c(0x216)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_left']=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x26990c(0x288)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this['_top']=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_down']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x58051d(0x1d3)](_0x49c1b6){const _0x1bac02=_0x58051d;for(let _0x1d2c58=0x0;_0x1d2c58<0x8;++_0x1d2c58)this[_0x1bac02(0x2a2)][_0x1d2c58]=_0x49c1b6[_0x1d2c58];}}class UnitSphere{constructor(){const _0xe5ea17=_0x58051d;this[_0xe5ea17(0x2a2)]=new Float32Array(Array(0x8)['fill'](0x0)),this[_0xe5ea17(0x1e8)]=new Float32Array(Array(0x4)[_0xe5ea17(0x270)](0x1));}}class UnitCylinder{constructor(){const _0x250af9=_0x58051d;this[_0x250af9(0x2a2)]=new Float32Array(Array(0x8)[_0x250af9(0x270)](0x0)),this[_0x250af9(0x1e8)]=new Float32Array(Array(0x4)[_0x250af9(0x270)](0x1));}}class UnitCone{constructor(){const _0x3efc86=_0x58051d;this[_0x3efc86(0x2a2)]=new Float32Array(Array(0x8)[_0x3efc86(0x270)](0x0)),this[_0x3efc86(0x1e8)]=new Float32Array(Array(0x4)[_0x3efc86(0x270)](0x1));}}class RayTracingDemoSceneObject extends RayTracingObject{constructor(_0x4bb046,_0x5cdd57,_0x31282c,_0x1acee4=!![]){const _0x380e95=_0x58051d;super(_0x4bb046,_0x5cdd57),this[_0x380e95(0x219)]=new UnitCube(),this[_0x380e95(0x235)]=new UnitCube(),this[_0x380e95(0x29f)]=new UnitSphere(),this['_cylinder']=new UnitCylinder(),this['_cone']=new UnitCone(),this[_0x380e95(0x251)]=_0x31282c,this[_0x380e95(0x27d)]=_0x1acee4;}async[_0x58051d(0x246)](){const _0xd35253=_0x58051d;this[_0xd35253(0x1e9)]=this['_device'][_0xd35253(0x222)]({'label':_0xd35253(0x220)+this[_0xd35253(0x20a)](),'size':this[_0xd35253(0x251)][_0xd35253(0x2a2)][_0xd35253(0x1cf)]+this[_0xd35253(0x251)][_0xd35253(0x22b)]['byteLength']+this['_camera'][_0xd35253(0x2b3)][_0xd35253(0x1cf)],'usage':GPUBufferUsage[_0xd35253(0x297)]|GPUBufferUsage[_0xd35253(0x1e0)]}),this[_0xd35253(0x236)]['queue']['writeBuffer'](this[_0xd35253(0x1e9)],0x0,this[_0xd35253(0x251)][_0xd35253(0x2a2)]),this[_0xd35253(0x236)]['queue'][_0xd35253(0x26e)](this[_0xd35253(0x1e9)],this[_0xd35253(0x251)][_0xd35253(0x2a2)]['byteLength'],this['_camera'][_0xd35253(0x22b)]),this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e9)],this[_0xd35253(0x251)][_0xd35253(0x2a2)]['byteLength']+this[_0xd35253(0x251)][_0xd35253(0x22b)]['byteLength'],this[_0xd35253(0x251)][_0xd35253(0x2b3)]),this[_0xd35253(0x1e6)]=this[_0xd35253(0x236)][_0xd35253(0x222)]({'label':_0xd35253(0x276)+this[_0xd35253(0x20a)](),'size':(this[_0xd35253(0x219)][_0xd35253(0x2a2)][_0xd35253(0x1cf)]+this[_0xd35253(0x219)][_0xd35253(0x1e8)][_0xd35253(0x1cf)]+this[_0xd35253(0x219)][_0xd35253(0x258)][_0xd35253(0x1cf)]*0x6)*0x2,'usage':GPUBufferUsage[_0xd35253(0x23d)]|GPUBufferUsage[_0xd35253(0x1e0)]});let _0x15a385=0x0;this['_device']['queue'][_0xd35253(0x26e)](this['_boxBuffer'],_0x15a385,this[_0xd35253(0x219)][_0xd35253(0x2a2)]),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x2a2)][_0xd35253(0x1cf)],this['_device'][_0xd35253(0x23f)]['writeBuffer'](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x219)]['_scales']),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x1e8)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this['_boxBuffer'],_0x15a385,this[_0xd35253(0x219)][_0xd35253(0x24a)]),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x24a)][_0xd35253(0x1cf)],this[_0xd35253(0x236)]['queue']['writeBuffer'](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x219)][_0xd35253(0x216)]),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x216)][_0xd35253(0x1cf)],this[_0xd35253(0x236)]['queue'][_0xd35253(0x26e)](this['_boxBuffer'],_0x15a385,this['_box']['_left']),_0x15a385+=this['_box'][_0xd35253(0x2b2)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this['_box'][_0xd35253(0x288)]),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x288)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this['_box'][_0xd35253(0x258)]),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x258)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this['_boxBuffer'],_0x15a385,this['_box']['_down']),_0x15a385+=this[_0xd35253(0x219)][_0xd35253(0x1c0)][_0xd35253(0x1cf)],this[_0xd35253(0x245)]=_0x15a385,this[_0xd35253(0x236)][_0xd35253(0x23f)]['writeBuffer'](this['_boxBuffer'],_0x15a385,this[_0xd35253(0x235)][_0xd35253(0x2a2)]),_0x15a385+=this[_0xd35253(0x235)]['_pose']['byteLength'],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x235)]['_scales']),_0x15a385+=this[_0xd35253(0x235)]['_scales'][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x235)][_0xd35253(0x24a)]),_0x15a385+=this[_0xd35253(0x235)][_0xd35253(0x24a)][_0xd35253(0x1cf)],this['_device'][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this['_cube'][_0xd35253(0x216)]),_0x15a385+=this[_0xd35253(0x235)][_0xd35253(0x216)]['byteLength'],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x235)]['_left']),_0x15a385+=this[_0xd35253(0x235)][_0xd35253(0x2b2)]['byteLength'],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this['_cube']['_right']),_0x15a385+=this[_0xd35253(0x235)][_0xd35253(0x288)][_0xd35253(0x1cf)],this[_0xd35253(0x236)]['queue']['writeBuffer'](this[_0xd35253(0x1e6)],_0x15a385,this[_0xd35253(0x235)][_0xd35253(0x258)]),_0x15a385+=this['_cube']['_top'][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1e6)],_0x15a385,this['_cube'][_0xd35253(0x1c0)]),this[_0xd35253(0x1d4)]=this[_0xd35253(0x236)]['createBuffer']({'label':_0xd35253(0x1f1)+this[_0xd35253(0x20a)](),'size':this[_0xd35253(0x29f)][_0xd35253(0x2a2)][_0xd35253(0x1cf)]+this[_0xd35253(0x29f)][_0xd35253(0x1e8)][_0xd35253(0x1cf)],'usage':GPUBufferUsage[_0xd35253(0x23d)]|GPUBufferUsage[_0xd35253(0x1e0)]}),_0x15a385=0x0,this['_device'][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1d4)],_0x15a385,this[_0xd35253(0x29f)][_0xd35253(0x2a2)]),_0x15a385+=this[_0xd35253(0x29f)]['_pose'][_0xd35253(0x1cf)],this['_device'][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1d4)],_0x15a385,this['_sphere'][_0xd35253(0x1e8)]),this[_0xd35253(0x26f)]=this['_device'][_0xd35253(0x222)]({'label':_0xd35253(0x22e)+this['getName'](),'size':this['_cone']['_pose'][_0xd35253(0x1cf)]+this['_cone']['_scales'][_0xd35253(0x1cf)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0xd35253(0x1e0)]}),_0x15a385=0x0,this[_0xd35253(0x236)]['queue'][_0xd35253(0x26e)](this[_0xd35253(0x26f)],_0x15a385,this[_0xd35253(0x2b6)]['_pose']),_0x15a385+=this['_cone'][_0xd35253(0x2a2)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)]['writeBuffer'](this[_0xd35253(0x26f)],_0x15a385,this[_0xd35253(0x2b6)]['_scales']),this[_0xd35253(0x1c5)]=this[_0xd35253(0x236)][_0xd35253(0x222)]({'label':_0xd35253(0x2a3)+this[_0xd35253(0x20a)](),'size':this['_cylinder'][_0xd35253(0x2a2)][_0xd35253(0x1cf)]+this[_0xd35253(0x22a)][_0xd35253(0x1e8)][_0xd35253(0x1cf)],'usage':GPUBufferUsage[_0xd35253(0x23d)]|GPUBufferUsage[_0xd35253(0x1e0)]}),_0x15a385=0x0,this[_0xd35253(0x236)]['queue']['writeBuffer'](this[_0xd35253(0x1c5)],_0x15a385,this[_0xd35253(0x22a)][_0xd35253(0x2a2)]),_0x15a385+=this[_0xd35253(0x22a)][_0xd35253(0x2a2)][_0xd35253(0x1cf)],this[_0xd35253(0x236)][_0xd35253(0x23f)][_0xd35253(0x26e)](this[_0xd35253(0x1c5)],_0x15a385,this[_0xd35253(0x22a)][_0xd35253(0x1e8)]);}[_0x58051d(0x2b9)](){const _0x359767=_0x58051d;this['_camera'][_0x359767(0x1d6)](this[_0x359767(0x1bd)],this[_0x359767(0x239)]),this[_0x359767(0x236)]['queue'][_0x359767(0x26e)](this[_0x359767(0x1e9)],this['_camera'][_0x359767(0x2a2)][_0x359767(0x1cf)]+this[_0x359767(0x251)]['_focal']['byteLength'],this['_camera'][_0x359767(0x2b3)]);}[_0x58051d(0x25d)](){const _0x30fc72=_0x58051d;this[_0x30fc72(0x236)][_0x30fc72(0x23f)][_0x30fc72(0x26e)](this['_boxBuffer'],0x0,this[_0x30fc72(0x219)][_0x30fc72(0x2a2)]);}['updateBoxScales'](){const _0x5ce269=_0x58051d;this[_0x5ce269(0x236)][_0x5ce269(0x23f)][_0x5ce269(0x26e)](this[_0x5ce269(0x1e6)],this['_box'][_0x5ce269(0x2a2)][_0x5ce269(0x1cf)],this[_0x5ce269(0x219)][_0x5ce269(0x1e8)]);}[_0x58051d(0x287)](){const _0x4b3bed=_0x58051d;this[_0x4b3bed(0x236)][_0x4b3bed(0x23f)][_0x4b3bed(0x26e)](this[_0x4b3bed(0x1e6)],this[_0x4b3bed(0x245)],this['_cube'][_0x4b3bed(0x2a2)]);}[_0x58051d(0x200)](){const _0x2da4b5=_0x58051d;this['_device'][_0x2da4b5(0x23f)][_0x2da4b5(0x26e)](this[_0x2da4b5(0x1e6)],this['_cubeOffset']+this[_0x2da4b5(0x235)][_0x2da4b5(0x2a2)]['byteLength'],this[_0x2da4b5(0x235)]['_scales']);}[_0x58051d(0x1ea)](){const _0x234094=_0x58051d;this[_0x234094(0x236)][_0x234094(0x23f)][_0x234094(0x26e)](this['_sphereBuffer'],0x0,this[_0x234094(0x29f)][_0x234094(0x2a2)]);}[_0x58051d(0x243)](){const _0x92e7c1=_0x58051d;this[_0x92e7c1(0x236)][_0x92e7c1(0x23f)][_0x92e7c1(0x26e)](this[_0x92e7c1(0x1d4)],this['_sphere'][_0x92e7c1(0x2a2)][_0x92e7c1(0x1cf)],this[_0x92e7c1(0x29f)]['_scales']);}[_0x58051d(0x1de)](){const _0x36c176=_0x58051d;this['_device'][_0x36c176(0x23f)]['writeBuffer'](this[_0x36c176(0x26f)],0x0,this[_0x36c176(0x2b6)][_0x36c176(0x2a2)]);}['updateConeScales'](){const _0x58da89=_0x58051d;this[_0x58da89(0x236)][_0x58da89(0x23f)][_0x58da89(0x26e)](this[_0x58da89(0x26f)],this['_cone'][_0x58da89(0x2a2)][_0x58da89(0x1cf)],this['_cone'][_0x58da89(0x1e8)]);}['updateCylinderPose'](){const _0x4e8a18=_0x58051d;this[_0x4e8a18(0x236)][_0x4e8a18(0x23f)][_0x4e8a18(0x26e)](this[_0x4e8a18(0x1c5)],0x0,this[_0x4e8a18(0x22a)][_0x4e8a18(0x2a2)]);}[_0x58051d(0x296)](){const _0x2c86ff=_0x58051d;this[_0x2c86ff(0x236)][_0x2c86ff(0x23f)][_0x2c86ff(0x26e)](this['_cylinderBuffer'],this[_0x2c86ff(0x22a)][_0x2c86ff(0x2a2)]['byteLength'],this[_0x2c86ff(0x22a)]['_scales']);}[_0x58051d(0x262)](){const _0xdc206=_0x58051d;this[_0xdc206(0x236)][_0xdc206(0x23f)]['writeBuffer'](this[_0xdc206(0x1e9)],0x0,this['_camera'][_0xdc206(0x2a2)]);}[_0x58051d(0x248)](){const _0x3d7736=_0x58051d;this[_0x3d7736(0x236)][_0x3d7736(0x23f)]['writeBuffer'](this[_0x3d7736(0x1e9)],this[_0x3d7736(0x251)]['_pose'][_0x3d7736(0x1cf)],this[_0x3d7736(0x251)][_0x3d7736(0x22b)]);}async['createShaders'](){const _0x1d6fc1=_0x58051d;let _0x5d0eb4=await this[_0x1d6fc1(0x29e)](_0x1d6fc1(0x28d));this[_0x1d6fc1(0x210)]=this['_device'][_0x1d6fc1(0x286)]({'label':'\x20Shader\x20'+this[_0x1d6fc1(0x20a)](),'code':_0x5d0eb4}),this[_0x1d6fc1(0x1dc)]=this[_0x1d6fc1(0x236)]['createBindGroupLayout']({'label':_0x1d6fc1(0x250)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x1d6fc1(0x22f)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x1d6fc1(0x22f)],'buffer':{'type':_0x1d6fc1(0x2ae)}},{'binding':0x2,'visibility':GPUShaderStage[_0x1d6fc1(0x22f)],'storageTexture':{'format':this[_0x1d6fc1(0x299)]}},{'binding':0x3,'visibility':GPUShaderStage[_0x1d6fc1(0x22f)],'buffer':{'type':'read-only-storage'}},{'binding':0x4,'visibility':GPUShaderStage[_0x1d6fc1(0x22f)],'buffer':{'type':_0x1d6fc1(0x2ae)}},{'binding':0x5,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':'read-only-storage'}}]}),this[_0x1d6fc1(0x21e)]=this[_0x1d6fc1(0x236)][_0x1d6fc1(0x23a)]({'label':_0x1d6fc1(0x259),'bindGroupLayouts':[this[_0x1d6fc1(0x1dc)]]});}async[_0x58051d(0x275)](){const _0x520d0d=_0x58051d;this[_0x520d0d(0x21f)]=this[_0x520d0d(0x236)]['createComputePipeline']({'label':'Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20'+this[_0x520d0d(0x20a)](),'layout':this[_0x520d0d(0x21e)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x520d0d(0x24b)}}),this[_0x520d0d(0x2af)]=this[_0x520d0d(0x236)][_0x520d0d(0x275)]({'label':_0x520d0d(0x212)+this[_0x520d0d(0x20a)](),'layout':this[_0x520d0d(0x21e)],'compute':{'module':this[_0x520d0d(0x210)],'entryPoint':_0x520d0d(0x285)}});}['createBindGroup'](_0x407d30){const _0x3e9fee=_0x58051d;this[_0x3e9fee(0x22c)]=this['_device']['createBindGroup']({'label':_0x3e9fee(0x1c1),'layout':this[_0x3e9fee(0x21f)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3e9fee(0x1e9)]}},{'binding':0x1,'resource':{'buffer':this['_boxBuffer']}},{'binding':0x2,'resource':_0x407d30[_0x3e9fee(0x264)]()},{'binding':0x3,'resource':{'buffer':this[_0x3e9fee(0x1d4)]}},{'binding':0x4,'resource':{'buffer':this[_0x3e9fee(0x26f)]}},{'binding':0x5,'resource':{'buffer':this[_0x3e9fee(0x1c5)]}}]}),this['_wgWidth']=Math[_0x3e9fee(0x2ad)](_0x407d30[_0x3e9fee(0x293)]),this[_0x3e9fee(0x29b)]=Math[_0x3e9fee(0x2ad)](_0x407d30['height']),console[_0x3e9fee(0x255)](_0x407d30['width'],_0x407d30[_0x3e9fee(0x28a)]);}[_0x58051d(0x224)](_0x39a04b){const _0x273b95=_0x58051d;this[_0x273b95(0x251)]?.[_0x273b95(0x1ff)]?_0x39a04b[_0x273b95(0x260)](this['_computeProjectivePipeline']):_0x39a04b[_0x273b95(0x260)](this[_0x273b95(0x21f)]),_0x39a04b['setBindGroup'](0x0,this[_0x273b95(0x22c)]),_0x39a04b[_0x273b95(0x1d5)](Math[_0x273b95(0x2ad)](this[_0x273b95(0x298)]/0x10),Math[_0x273b95(0x2ad)](this[_0x273b95(0x29b)]/0x10));}}class Math3D{static[_0x58051d(0x1cc)](_0x44145a,_0x20d47d=0x0,_0x1075b8=0x0,_0x549551=0x0){return[_0x44145a[0x0]+_0x20d47d,_0x44145a[0x1]+_0x1075b8,_0x44145a[0x2]+_0x549551];}static[_0x58051d(0x291)](_0x2615c6,_0x4b02ce,_0x482c34){const _0x1a4a86=_0x58051d;let _0x51c084=Math[_0x1a4a86(0x2b1)](_0x482c34),_0x4ab373=Math[_0x1a4a86(0x2ba)](_0x482c34);switch(_0x4b02ce){case 0x0:return[_0x2615c6[0x0],_0x2615c6[0x1]*_0x51c084-_0x2615c6[0x2]*_0x4ab373,_0x2615c6[0x1]*_0x4ab373+_0x2615c6[0x2]*_0x51c084];case 0x1:return[_0x2615c6[0x0]*_0x51c084+_0x2615c6[0x2]*_0x4ab373,_0x2615c6[0x1],-_0x2615c6[0x0]*_0x4ab373+_0x2615c6[0x2]*_0x51c084];case 0x2:return[_0x2615c6[0x0]*_0x51c084-_0x2615c6[0x1]*_0x4ab373,_0x2615c6[0x0]*_0x4ab373+_0x2615c6[0x1]*_0x51c084,_0x2615c6[0x2]];default:return _0x2615c6;}}static[_0x58051d(0x213)](_0x1d708d,_0x465b3b){const _0x525be4=_0x58051d;return _0x1d708d=Math3D[_0x525be4(0x291)](_0x1d708d,0x0,_0x465b3b[0x4]),_0x1d708d=Math3D['rotate'](_0x1d708d,0x1,_0x465b3b[0x5]),_0x1d708d=Math3D[_0x525be4(0x291)](_0x1d708d,0x2,_0x465b3b[0x6]),_0x1d708d=Math3D[_0x525be4(0x1cc)](_0x1d708d,_0x465b3b[0x0],_0x465b3b[0x1],_0x465b3b[0x2]),_0x1d708d;}static[_0x58051d(0x269)](_0x5d5b96,_0x1ed657){const _0x2589ca=_0x58051d;return _0x5d5b96=Math3D[_0x2589ca(0x291)](_0x5d5b96,0x0,_0x1ed657[0x4]),_0x5d5b96=Math3D[_0x2589ca(0x291)](_0x5d5b96,0x1,_0x1ed657[0x5]),_0x5d5b96=Math3D[_0x2589ca(0x291)](_0x5d5b96,0x2,_0x1ed657[0x6]),_0x5d5b96;}static[_0x58051d(0x213)](_0x2a2d71,_0x1b56ed){const _0x2109af=_0x58051d;return _0x2a2d71=Math3D[_0x2109af(0x1cc)](_0x2a2d71,-_0x1b56ed[0x0],-_0x1b56ed[0x1],-_0x1b56ed[0x2]),_0x2a2d71=Math3D[_0x2109af(0x291)](_0x2a2d71,0x2,-_0x1b56ed[0x6]),_0x2a2d71=Math3D['rotate'](_0x2a2d71,0x1,-_0x1b56ed[0x5]),_0x2a2d71=Math3D[_0x2109af(0x291)](_0x2a2d71,0x0,-_0x1b56ed[0x4]),_0x2a2d71;}static[_0x58051d(0x269)](_0x217ffd,_0x4efb59){const _0x214dd5=_0x58051d;return _0x217ffd=Math3D[_0x214dd5(0x291)](_0x217ffd,0x2,-_0x4efb59[0x6]),_0x217ffd=Math3D['rotate'](_0x217ffd,0x1,-_0x4efb59[0x5]),_0x217ffd=Math3D[_0x214dd5(0x291)](_0x217ffd,0x0,-_0x4efb59[0x4]),_0x217ffd;}}class Camera{constructor(_0x3d4c3a,_0x55cf17){const _0x57912a=_0x58051d;this[_0x57912a(0x2a2)]=new Float32Array(Array(0x8)[_0x57912a(0x270)](0x0)),this[_0x57912a(0x22b)]=new Float32Array(Array(0x2)[_0x57912a(0x270)](0x1)),this[_0x57912a(0x2b3)]=new Float32Array([_0x3d4c3a,_0x55cf17]),this['_isProjective']=![];}['resetPose'](){const _0x152f06=_0x58051d;for(let _0x116557=0x0;_0x116557<0x8;++_0x116557)this[_0x152f06(0x2a2)][_0x116557]=0x0;this[_0x152f06(0x22b)][0x0]=0x1,this[_0x152f06(0x22b)][0x1]=0x1;}[_0x58051d(0x1d3)](_0x16d63c){const _0x391ac0=_0x58051d;for(let _0x58ef80=0x0;_0x58ef80<0x8;++_0x58ef80)this[_0x391ac0(0x2a2)][_0x58ef80]=_0x16d63c[_0x58ef80];}[_0x58051d(0x1d6)](_0x146676,_0xb09f5f){const _0x351ec0=_0x58051d;this[_0x351ec0(0x2b3)][0x0]=_0x146676,this[_0x351ec0(0x2b3)][0x1]=_0xb09f5f;}[_0x58051d(0x2ac)](_0xc371d0){const _0x4860f7=_0x58051d;let _0xcf55f8=Math3D[_0x4860f7(0x269)]([0x1,0x0,0x0],this['_pose']);console[_0x4860f7(0x255)](_0xcf55f8),this['_pose'][0x0]+=_0xc371d0*_0xcf55f8[0x0],this[_0x4860f7(0x2a2)][0x1]-=_0xc371d0*_0xcf55f8[0x1],this[_0x4860f7(0x2a2)][0x2]+=_0xc371d0*_0xcf55f8[0x2];}[_0x58051d(0x26d)](_0x1bd8a3){const _0x1b9b22=_0x58051d;let _0x3517aa=Math3D[_0x1b9b22(0x269)]([0x0,0x1,0x0],this[_0x1b9b22(0x2a2)]);this['_pose'][0x0]+=_0x1bd8a3*_0x3517aa[0x0],this[_0x1b9b22(0x2a2)][0x1]-=_0x1bd8a3*_0x3517aa[0x1],this['_pose'][0x2]+=_0x1bd8a3*_0x3517aa[0x2];}['moveZ'](_0x9aac89){const _0x5bfd73=_0x58051d;let _0x5cf45f=Math3D['applyPoseToDir']([0x0,0x0,0x1],this[_0x5bfd73(0x2a2)]);this[_0x5bfd73(0x2a2)][0x0]+=_0x9aac89*_0x5cf45f[0x0],this['_pose'][0x1]-=_0x9aac89*_0x5cf45f[0x1],this[_0x5bfd73(0x2a2)][0x2]+=_0x9aac89*_0x5cf45f[0x2];}[_0x58051d(0x1d0)](_0x115d79){const _0xb32f2c=_0x58051d;this[_0xb32f2c(0x2a2)][0x4]+=_0x115d79;}['rotateY'](_0x491b58){this['_pose'][0x5]+=_0x491b58;}[_0x58051d(0x20e)](_0x15d5c3){this['_pose'][0x6]+=_0x15d5c3;}}async function init(){const _0x784149=_0x58051d,_0x3be5f3=document['createElement'](_0x784149(0x27e));_0x3be5f3['id']=_0x784149(0x1be),document[_0x784149(0x1c3)][_0x784149(0x21a)](_0x3be5f3);const _0xbe5f93=new RayTracer(_0x3be5f3);await _0xbe5f93[_0x784149(0x1eb)]();var _0xb2408d=new Camera(),_0x4943b7=new RayTracingDemoSceneObject(_0xbe5f93['_device'],_0xbe5f93[_0x784149(0x299)],_0xb2408d);await _0xbe5f93['setTracerObject'](_0x4943b7),_0x4943b7[_0x784149(0x219)][_0x784149(0x2a2)][0x2]=0.4*0x2,_0x4943b7[_0x784149(0x25d)](),_0x4943b7[_0x784149(0x219)][_0x784149(0x1e8)][0x0]=0x2,_0x4943b7['_box'][_0x784149(0x1e8)][0x1]=1.25,_0x4943b7[_0x784149(0x219)][_0x784149(0x1e8)][0x2]=0x2,_0x4943b7[_0x784149(0x29d)](),_0x4943b7[_0x784149(0x235)][_0x784149(0x1e8)][0x0]=0.3,_0x4943b7[_0x784149(0x235)][_0x784149(0x1e8)][0x1]=0.5,_0x4943b7[_0x784149(0x235)][_0x784149(0x1e8)][0x2]=0.3,_0x4943b7[_0x784149(0x200)](),_0x4943b7[_0x784149(0x235)][_0x784149(0x2a2)][0x0]=-0.25*0x2,_0x4943b7[_0x784149(0x235)][_0x784149(0x2a2)][0x1]=0.5*_0x4943b7[_0x784149(0x219)][_0x784149(0x1e8)][0x1]-0.5*_0x4943b7[_0x784149(0x235)][_0x784149(0x1e8)][0x1],_0x4943b7['_cube'][_0x784149(0x2a2)][0x2]=0.5*0x2,_0x4943b7['updateCubePose'](),_0x4943b7[_0x784149(0x29f)][_0x784149(0x1e8)][0x0]=0.25,_0x4943b7[_0x784149(0x29f)][_0x784149(0x1e8)][0x1]=0.25,_0x4943b7[_0x784149(0x29f)][_0x784149(0x1e8)][0x2]=0.25,_0x4943b7['updateSphereScales'](),_0x4943b7['_sphere'][_0x784149(0x2a2)][0x0]=0.225*0x2,_0x4943b7['_sphere']['_pose'][0x1]=0.5*_0x4943b7['_box'][_0x784149(0x1e8)][0x1]-_0x4943b7[_0x784149(0x29f)]['_scales'][0x1],_0x4943b7[_0x784149(0x29f)][_0x784149(0x2a2)][0x2]=0.6*0x2,_0x4943b7[_0x784149(0x1ea)](),_0x4943b7[_0x784149(0x22a)][_0x784149(0x1e8)][0x0]=0.2,_0x4943b7[_0x784149(0x22a)]['_scales'][0x1]=1.25,_0x4943b7[_0x784149(0x22a)][_0x784149(0x1e8)][0x2]=0.2,_0x4943b7['updateCylinderScales'](),_0x4943b7[_0x784149(0x22a)]['_pose'][0x1]=0.5*_0x4943b7[_0x784149(0x219)][_0x784149(0x1e8)][0x1]-_0x4943b7[_0x784149(0x22a)][_0x784149(0x1e8)][0x1],_0x4943b7[_0x784149(0x22a)]['_pose'][0x2]=0.75*0x2,_0x4943b7[_0x784149(0x29c)](),_0x4943b7[_0x784149(0x2b6)][_0x784149(0x1e8)][0x0]=0.2,_0x4943b7[_0x784149(0x2b6)][_0x784149(0x1e8)][0x1]=-0.6,_0x4943b7[_0x784149(0x2b6)][_0x784149(0x1e8)][0x2]=0.2,_0x4943b7[_0x784149(0x268)](),_0x4943b7[_0x784149(0x2b6)][_0x784149(0x2a2)][0x0]=0.05*0x2,_0x4943b7['_cone'][_0x784149(0x2a2)][0x1]=0.5*_0x4943b7[_0x784149(0x219)][_0x784149(0x1e8)][0x1],_0x4943b7[_0x784149(0x2b6)]['_pose'][0x2]=0.4*0x2,_0x4943b7[_0x784149(0x1de)]();var _0x3892f2=_0x784149(0x1dd);_0xb2408d['_isProjective']=!![];var _0x4f97a2=new StandardTextObject(_0x3892f2);let _0x6c8f1e='??';var _0x2f589e=new StandardTextObject(_0x784149(0x2b8)+_0x6c8f1e),_0x5a0afa=0.05;window[_0x784149(0x2bb)](_0x784149(0x205),async _0x428209=>{const _0x6c8e8a=_0x784149;switch(_0x428209['key']){case'h':case'H':_0x4f97a2['toggleVisibility']();break;case'f':case'F':_0x2f589e['toggleVisibility']();break;case'w':case'W':_0xb2408d[_0x6c8e8a(0x26d)](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case's':case'S':_0xb2408d[_0x6c8e8a(0x26d)](_0x5a0afa),_0x4943b7['updateCameraPose']();break;case'a':case'A':_0xb2408d[_0x6c8e8a(0x2ac)](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'd':case'D':_0xb2408d[_0x6c8e8a(0x2ac)](_0x5a0afa),_0x4943b7['updateCameraPose']();break;case'q':case'Q':_0xb2408d[_0x6c8e8a(0x1c8)](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'e':case'E':_0xb2408d[_0x6c8e8a(0x1c8)](_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'i':case'I':_0xb2408d[_0x6c8e8a(0x1d0)](_0x5a0afa),_0x4943b7['updateCameraPose']();break;case'k':case'K':_0xb2408d['rotateX'](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'j':case'J':_0xb2408d['rotateY'](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'l':case'L':_0xb2408d[_0x6c8e8a(0x1c4)](_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'u':case'U':_0xb2408d['rotateZ'](_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'o':case'O':_0xb2408d['rotateZ'](-_0x5a0afa),_0x4943b7[_0x6c8e8a(0x262)]();break;case'c':case'C':_0xb2408d['_isProjective']=!_0xb2408d['_isProjective'];break;case'r':case'R':_0xb2408d[_0x6c8e8a(0x237)](),_0x4943b7[_0x6c8e8a(0x262)](),_0x4943b7[_0x6c8e8a(0x248)]();break;case'[':_0xb2408d['_focal'][0x0]*=1.1,_0x4943b7[_0x6c8e8a(0x248)]();break;case']':_0xb2408d[_0x6c8e8a(0x22b)][0x0]/=1.1,_0x4943b7['updateCameraFocal']();break;case'{':_0xb2408d[_0x6c8e8a(0x22b)][0x1]*=1.1,_0x4943b7[_0x6c8e8a(0x248)]();break;case'}':_0xb2408d[_0x6c8e8a(0x22b)][0x1]/=1.1,_0x4943b7['updateCameraFocal']();break;}}),window[_0x784149(0x2bb)](_0x784149(0x27f),_0xd48fe5=>{});let _0x1d1363=async _0x1d8643=>{},_0x24f2b2=async _0x4738af=>{},_0x5d7a5a=_0x47ef06=>{};_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x1e3),_0x1d1363),_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x24c),_0x24f2b2),_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x254),_0x5d7a5a),_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x27a),_0x4c091a=>{}),_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x267),_0x53575f=>{}),_0x3be5f3[_0x784149(0x2bb)](_0x784149(0x1e1),_0x1d1363),_0x3be5f3[_0x784149(0x2bb)]('touchmove',_0x24f2b2),_0x3be5f3['addEventListener']('touchend',_0x5d7a5a),_0x4f97a2['_textCanvas'][_0x784149(0x252)]['setProperty']('pointer-events',_0x784149(0x209)),_0x2f589e[_0x784149(0x2a0)]['style'][_0x784149(0x27b)](_0x784149(0x241),_0x784149(0x209));var _0x1b5788=0x0,_0x19c0b0=0x3c,_0x52359b=0x1/_0x19c0b0,_0x5eb099=_0x52359b*0x3e8,_0x2a52e2;let _0x3e3551=()=>{const _0x567d32=_0x784149;let _0x5ba260=Date[_0x567d32(0x1f0)]()-_0x2a52e2;_0x5ba260>_0x5eb099&&(++_0x1b5788,_0x2a52e2=Date[_0x567d32(0x1f0)]()-_0x5ba260%_0x5eb099,_0xbe5f93[_0x567d32(0x201)]()),requestAnimationFrame(_0x3e3551);};return _0x2a52e2=Date[_0x784149(0x1f0)](),_0x3e3551(),_0x2f589e['_textCanvas']['style']['setProperty'](_0x784149(0x1e5),_0x784149(0x25b)),_0x2f589e[_0x784149(0x2a0)][_0x784149(0x252)][_0x784149(0x1df)]=_0x784149(0x1f2),setInterval(()=>{const _0x14e8dd=_0x784149;_0x6c8f1e=_0x1b5788,_0x1b5788=0x0,_0x2f589e['updateText'](_0x14e8dd(0x2b8)+_0x6c8f1e);},0x3e8),_0xbe5f93;}function _0x4223(_0x1cee9f,_0x545591){const _0x1a63ed=_0x1a63();return _0x4223=function(_0x422351,_0x2a913c){_0x422351=_0x422351-0x1bd;let _0x223c50=_0x1a63ed[_0x422351];return _0x223c50;},_0x4223(_0x1cee9f,_0x545591);}init()[_0x58051d(0x232)](_0x2eed29=>{const _0x2849ba=_0x58051d;console[_0x2849ba(0x255)](_0x2eed29);})[_0x58051d(0x1f4)](_0x433757=>{const _0x137f06=_0x58051d,_0xe4eda5=document[_0x137f06(0x295)]('p');_0xe4eda5[_0x137f06(0x20b)]=navigator['userAgent']+_0x137f06(0x26c)+_0x433757[_0x137f06(0x1f5)],document[_0x137f06(0x1c3)]['appendChild'](_0xe4eda5),document[_0x137f06(0x231)]('renderCanvas')[_0x137f06(0x2a9)]();});
