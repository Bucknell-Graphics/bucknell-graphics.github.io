/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x2d6c94=_0x597b;(function(_0x14c5bf,_0x1ae3ce){const _0x2e8cb6=_0x597b,_0x36a7b3=_0x14c5bf();while(!![]){try{const _0x2f314a=parseInt(_0x2e8cb6(0xf9))/0x1+-parseInt(_0x2e8cb6(0x9a))/0x2*(-parseInt(_0x2e8cb6(0x9b))/0x3)+-parseInt(_0x2e8cb6(0xe2))/0x4+-parseInt(_0x2e8cb6(0x111))/0x5*(parseInt(_0x2e8cb6(0x78))/0x6)+-parseInt(_0x2e8cb6(0x124))/0x7+parseInt(_0x2e8cb6(0xf0))/0x8+parseInt(_0x2e8cb6(0xff))/0x9*(parseInt(_0x2e8cb6(0xef))/0xa);if(_0x2f314a===_0x1ae3ce)break;else _0x36a7b3['push'](_0x36a7b3['shift']());}catch(_0x56ff05){_0x36a7b3['push'](_0x36a7b3['shift']());}}}(_0x5682,0x2ef6b));class Renderer{constructor(_0x3a8e2d){const _0x578a08=_0x597b;this[_0x578a08(0x153)]=_0x3a8e2d,this[_0x578a08(0xdc)]=[],this[_0x578a08(0x8e)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x2d6c94(0xb7)](){const _0x23a477=_0x2d6c94;if(!navigator[_0x23a477(0x13c)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x2b09b1=await navigator[_0x23a477(0x13c)][_0x23a477(0x154)]();if(!_0x2b09b1)throw Error(_0x23a477(0x122));this[_0x23a477(0x148)]=await _0x2b09b1[_0x23a477(0x98)](),this[_0x23a477(0xf4)]=this[_0x23a477(0x153)]['getContext'](_0x23a477(0x184)),this[_0x23a477(0xb6)]=navigator[_0x23a477(0x13c)][_0x23a477(0x11f)](),this[_0x23a477(0xf4)][_0x23a477(0x150)]({'device':this[_0x23a477(0x148)],'format':this['_canvasFormat']}),this[_0x23a477(0x102)](),window['addEventListener'](_0x23a477(0x147),this['resizeCanvas']['bind'](this));}[_0x2d6c94(0x102)](){const _0xa7a56d=_0x2d6c94,_0x32420e=window['devicePixelRatio']||0x1,_0x3b9d1d=window[_0xa7a56d(0x17e)]*_0x32420e,_0x162d1b=window['innerHeight']*_0x32420e;this[_0xa7a56d(0x153)][_0xa7a56d(0x8a)]=_0x3b9d1d,this['_canvas'][_0xa7a56d(0xe8)]=_0x162d1b,this[_0xa7a56d(0x153)][_0xa7a56d(0x166)][_0xa7a56d(0x8a)]=window[_0xa7a56d(0x17e)]+'px',this[_0xa7a56d(0x153)][_0xa7a56d(0x166)]['height']=window['innerHeight']+'px',this[_0xa7a56d(0x153)][_0xa7a56d(0x166)]['transformOrigin']='center',this['render']();}async[_0x2d6c94(0x161)](_0x4fa81a){const _0x20d3c7=_0x2d6c94;await _0x4fa81a['init'](),this[_0x20d3c7(0xdc)][_0x20d3c7(0x174)](_0x4fa81a);}['renderToSelectedView'](_0x512aab){const _0x4240bb=_0x2d6c94;for(const _0x4e4f07 of this[_0x4240bb(0xdc)]){_0x4e4f07?.['updateGeometry']();}let _0x56e263=this[_0x4240bb(0x148)][_0x4240bb(0xec)]();const _0x266380=_0x56e263[_0x4240bb(0x88)]({'colorAttachments':[{'view':_0x512aab,'clearValue':this['_clearColor'],'loadOp':_0x4240bb(0x15f),'storeOp':_0x4240bb(0xf6)}]});for(const _0xfdad35 of this[_0x4240bb(0xdc)]){_0xfdad35?.['render'](_0x266380);}_0x266380[_0x4240bb(0xd0)]();const _0x4c3c55=_0x56e263['beginComputePass']();for(const _0x55117e of this['_objects']){_0x55117e?.[_0x4240bb(0x145)](_0x4c3c55);}_0x4c3c55['end']();const _0x29934f=_0x56e263[_0x4240bb(0xb5)]();this[_0x4240bb(0x148)][_0x4240bb(0x116)]['submit']([_0x29934f]);}['render'](){const _0x356258=_0x2d6c94;this[_0x356258(0xfa)](this[_0x356258(0xf4)][_0x356258(0x87)]()[_0x356258(0xce)]());}}class RayTracer extends Renderer{constructor(_0x14ef78){const _0x4d114d=_0x2d6c94;super(_0x14ef78),this[_0x4d114d(0x176)]=null,this['_heightFactor']=0x1;}async[_0x2d6c94(0xb7)](){const _0x159cb7=_0x2d6c94;if(!navigator[_0x159cb7(0x13c)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x302ce4=await navigator[_0x159cb7(0x13c)]['requestAdapter']();if(!_0x302ce4)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x159cb7(0x148)]=await _0x302ce4['requestDevice'](),this[_0x159cb7(0xf4)]=this['_canvas'][_0x159cb7(0xa7)](_0x159cb7(0x184)),this[_0x159cb7(0xb6)]='rgba8unorm',this[_0x159cb7(0xf4)][_0x159cb7(0x150)]({'device':this[_0x159cb7(0x148)],'format':this[_0x159cb7(0xb6)]}),this[_0x159cb7(0x8b)]=this['_device']['createShaderModule']({'label':_0x159cb7(0x158),'code':_0x159cb7(0xab)}),this[_0x159cb7(0x94)]=this[_0x159cb7(0x148)][_0x159cb7(0xe1)]({'label':_0x159cb7(0x95),'size':0x8,'usage':GPUBufferUsage[_0x159cb7(0x180)]|GPUBufferUsage[_0x159cb7(0x17f)]}),this[_0x159cb7(0xe9)]=this[_0x159cb7(0x148)][_0x159cb7(0xf8)]({'label':_0x159cb7(0xd5),'layout':'auto','vertex':{'module':this[_0x159cb7(0x8b)],'entryPoint':_0x159cb7(0xbd)},'fragment':{'module':this[_0x159cb7(0x8b)],'entryPoint':_0x159cb7(0xc6),'targets':[{'format':this[_0x159cb7(0xb6)]}]}}),this[_0x159cb7(0x106)]=this[_0x159cb7(0x148)]['createSampler']({'label':_0x159cb7(0x11b),'magFilter':'linear','minFilter':'linear'}),this[_0x159cb7(0x102)](),window['addEventListener'](_0x159cb7(0x147),this[_0x159cb7(0x102)][_0x159cb7(0x123)](this));}['resizeCanvas'](){const _0x45f3c2=_0x2d6c94,_0x364f17=window['devicePixelRatio']||0x1,_0x3dadaf=window[_0x45f3c2(0x17e)]*_0x364f17,_0x29d652=window[_0x45f3c2(0x167)]*_0x364f17,_0x446a94=_0x3dadaf/_0x29d652;this[_0x45f3c2(0x89)]=_0x29d652*this['_heightFactor'];let _0x3dbe43={'width':this[_0x45f3c2(0x89)]*_0x446a94,'height':this[_0x45f3c2(0x89)]};this[_0x45f3c2(0x14d)]=this[_0x45f3c2(0x148)][_0x45f3c2(0x157)]({'size':_0x3dbe43,'format':this[_0x45f3c2(0xb6)],'usage':GPUTextureUsage[_0x45f3c2(0x109)]|GPUTextureUsage['STORAGE_BINDING']}),this[_0x45f3c2(0x176)]&&(this[_0x45f3c2(0x176)][_0x45f3c2(0x162)]=this[_0x45f3c2(0x14d)]['width'],this[_0x45f3c2(0x176)][_0x45f3c2(0xac)]=this['_offScreenTexture'][_0x45f3c2(0xe8)],this[_0x45f3c2(0x176)][_0x45f3c2(0x137)](),this[_0x45f3c2(0x176)][_0x45f3c2(0x7a)](this[_0x45f3c2(0x14d)])),this[_0x45f3c2(0xa8)]=this[_0x45f3c2(0x148)]['createBindGroup']({'label':'Ray\x20Tracer\x20Renderer\x20Bind\x20Group','layout':this[_0x45f3c2(0xe9)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':this[_0x45f3c2(0x14d)][_0x45f3c2(0xce)]()},{'binding':0x1,'resource':this[_0x45f3c2(0x106)]},{'binding':0x2,'resource':{'buffer':this['_outputSizeBuffer']}}]}),super[_0x45f3c2(0x102)](),this[_0x45f3c2(0x148)][_0x45f3c2(0x116)][_0x45f3c2(0xe5)](this[_0x45f3c2(0x94)],0x0,new Float32Array([_0x3dadaf,_0x29d652]));}async[_0x2d6c94(0x15b)](_0x4fb180){const _0x276d4d=_0x2d6c94;await _0x4fb180[_0x276d4d(0xb7)](),_0x4fb180[_0x276d4d(0x162)]=this['_offScreenTexture'][_0x276d4d(0x8a)],_0x4fb180[_0x276d4d(0xac)]=this[_0x276d4d(0x14d)][_0x276d4d(0xe8)],_0x4fb180[_0x276d4d(0x137)](),this[_0x276d4d(0x176)]=_0x4fb180,this[_0x276d4d(0x176)]['createBindGroup'](this[_0x276d4d(0x14d)]);}[_0x2d6c94(0xfb)](){const _0x3b80dc=_0x2d6c94;if(this['_tracer']){let _0x277429=this[_0x3b80dc(0x148)][_0x3b80dc(0xec)]();const _0x32b89e=_0x277429[_0x3b80dc(0xc0)]();this['_tracer']['compute'](_0x32b89e),_0x32b89e[_0x3b80dc(0xd0)](),this[_0x3b80dc(0x148)]['queue'][_0x3b80dc(0x12e)]([_0x277429[_0x3b80dc(0xb5)]()]);}let _0x38da6e=this['_device'][_0x3b80dc(0xec)]();const _0x365a65=_0x38da6e['beginRenderPass']({'colorAttachments':[{'view':this[_0x3b80dc(0xf4)][_0x3b80dc(0x87)]()['createView'](),'clearValue':this['_clearColor'],'loadOp':_0x3b80dc(0x15f),'storeOp':_0x3b80dc(0xf6)}]});_0x365a65[_0x3b80dc(0x152)](this[_0x3b80dc(0xe9)]),_0x365a65[_0x3b80dc(0x170)](0x0,this[_0x3b80dc(0xa8)]),_0x365a65['draw'](0x6),_0x365a65['end'](),this[_0x3b80dc(0x148)][_0x3b80dc(0x116)][_0x3b80dc(0x12e)]([_0x38da6e[_0x3b80dc(0xb5)]()]);}}class StandardTextObject{constructor(_0x377b0e,_0x25fb5b=0x5,_0x57b308=_0x2d6c94(0x165)){const _0x50a53a=_0x2d6c94;this[_0x50a53a(0x12f)]=_0x57b308,this[_0x50a53a(0x169)]=_0x25fb5b,this[_0x50a53a(0x142)]=document[_0x50a53a(0x8d)]('canvas'),this[_0x50a53a(0xdd)]=this[_0x50a53a(0x142)][_0x50a53a(0xa7)]('2d'),this['updateTextRegion'](_0x377b0e),this[_0x50a53a(0x146)](_0x377b0e),this['_textCanvas'][_0x50a53a(0x166)][_0x50a53a(0x114)]='absolute',this[_0x50a53a(0x142)][_0x50a53a(0x166)][_0x50a53a(0x182)]=_0x50a53a(0xaa),this['_textCanvas'][_0x50a53a(0x166)][_0x50a53a(0x151)]='10px',this[_0x50a53a(0x142)][_0x50a53a(0x166)][_0x50a53a(0x117)]=_0x50a53a(0x104),document[_0x50a53a(0xd4)][_0x50a53a(0x16f)](this[_0x50a53a(0x142)]);}[_0x2d6c94(0x134)](){const _0x5b05ca=_0x2d6c94;this[_0x5b05ca(0x142)][_0x5b05ca(0x136)]=!this['_textCanvas'][_0x5b05ca(0x136)];}['updateTextRegion'](_0x594f91){const _0x67c317=_0x2d6c94;this['_textContext'][_0x67c317(0x8f)]=this[_0x67c317(0x12f)],this[_0x67c317(0x103)]=_0x594f91[_0x67c317(0x14a)]('\x0a'),this[_0x67c317(0xf3)]=Math['max'](...this[_0x67c317(0x103)][_0x67c317(0xca)](_0x16c436=>this['_textContext'][_0x67c317(0x128)](_0x16c436)[_0x67c317(0x8a)]));const _0x56fec3=this[_0x67c317(0x12f)][_0x67c317(0xa9)](/(\d+)px/);_0x56fec3?this['_fontSize']=parseInt(_0x56fec3[0x1],0xa):(this[_0x67c317(0x141)]=0x12,this['_textFont']=_0x67c317(0x165)),this[_0x67c317(0x17b)]=this[_0x67c317(0x103)][_0x67c317(0x10c)]*(this[_0x67c317(0x141)]+this[_0x67c317(0x169)]),this['_paddingx']=0x5,this[_0x67c317(0x10b)]=0x3,this['_canvasWidth']=Math[_0x67c317(0xb4)](this[_0x67c317(0xf3)]+this['_paddingx']*0x2),this[_0x67c317(0x97)]=Math[_0x67c317(0xb4)](this[_0x67c317(0x17b)]+this[_0x67c317(0x10b)]),this[_0x67c317(0x142)][_0x67c317(0x8a)]=this[_0x67c317(0x7c)],this[_0x67c317(0x142)]['height']=this[_0x67c317(0x97)],this[_0x67c317(0xdd)][_0x67c317(0x8f)]=this[_0x67c317(0x12f)],this[_0x67c317(0xdd)]['textBaseline']='top';}['updateText'](_0xa1a9ec){const _0x55367b=_0x2d6c94;this[_0x55367b(0x103)]=_0xa1a9ec[_0x55367b(0x14a)]('\x0a'),this[_0x55367b(0xdd)]['fillStyle']=_0x55367b(0xa4),this['_textContext'][_0x55367b(0x12d)](0x0,0x0,this['_canvasWidth'],this[_0x55367b(0x97)]),this[_0x55367b(0xdd)]['fillRect'](0x0,0x0,this[_0x55367b(0x7c)],this['_canvasHeight']),this[_0x55367b(0xdd)][_0x55367b(0x113)]=_0x55367b(0xea),this[_0x55367b(0x103)]['forEach']((_0x17467b,_0x465a80)=>{const _0x3cf0d6=_0x55367b,_0x48d142=this[_0x3cf0d6(0xe3)],_0x413607=this['_paddingtop']+_0x465a80*(this['_fontSize']+this[_0x3cf0d6(0x169)]);this[_0x3cf0d6(0xdd)]['fillText'](_0x17467b,_0x48d142,_0x413607);});}}class SceneObject{static [_0x2d6c94(0x93)]=0x0;constructor(_0x4b74d5,_0x57d38f){const _0xfdde53=_0x2d6c94;if(this[_0xfdde53(0xd9)]==SceneObject)throw new Error(_0xfdde53(0xee));this['_device']=_0x4b74d5,this[_0xfdde53(0xb6)]=_0x57d38f,SceneObject[_0xfdde53(0x93)]+=0x1;}[_0x2d6c94(0x168)](){const _0x8fff06=_0x2d6c94;return this['constructor'][_0x8fff06(0x155)]+'\x20'+SceneObject[_0x8fff06(0x93)][_0x8fff06(0x183)]();}async[_0x2d6c94(0xb7)](){const _0x33b4f4=_0x2d6c94;await this[_0x33b4f4(0xba)](),await this['createShaders'](),await this[_0x33b4f4(0xf8)](),await this[_0x33b4f4(0xc1)]();}async[_0x2d6c94(0xba)](){const _0x2ad2dd=_0x2d6c94;throw new Error(_0x2ad2dd(0x179));}['updateGeometry'](){}[_0x2d6c94(0x125)](_0x5d31e2){return new Promise((_0x19823b,_0x14c245)=>{const _0x836bb1=_0x597b,_0x2816e3=new XMLHttpRequest();_0x2816e3[_0x836bb1(0xcb)](_0x836bb1(0x178),_0x5d31e2),_0x2816e3['setRequestHeader'](_0x836bb1(0x15c),_0x836bb1(0x140)),_0x2816e3[_0x836bb1(0xfc)]=function(){const _0x8076f=_0x836bb1;_0x2816e3[_0x8076f(0x108)]===XMLHttpRequest[_0x8076f(0x135)]&&_0x2816e3[_0x8076f(0x16b)]===0xc8?_0x19823b(_0x2816e3[_0x8076f(0x133)]):_0x14c245({'status':_0x2816e3[_0x8076f(0x16b)],'statusText':_0x2816e3[_0x8076f(0x9e)]});},_0x2816e3[_0x836bb1(0x12c)]=function(){const _0x4acd72=_0x836bb1;_0x14c245({'status':_0x2816e3[_0x4acd72(0x16b)],'statusText':_0x2816e3[_0x4acd72(0x9e)]});},_0x2816e3[_0x836bb1(0xc5)]();});}async[_0x2d6c94(0x14c)](){const _0x53f693=_0x2d6c94;throw new Error(_0x53f693(0x159));}async[_0x2d6c94(0xf8)](){const _0x2da3cb=_0x2d6c94;throw new Error(_0x2da3cb(0xb3));}['render'](_0x384d4c){const _0x4b6d3b=_0x2d6c94;throw new Error(_0x4b6d3b(0x79));}async[_0x2d6c94(0xc1)](){const _0x173e47=_0x2d6c94;throw new Error(_0x173e47(0xbb));}[_0x2d6c94(0x145)](_0x16d820){throw new Error('Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.');}}class RayTracingObject extends SceneObject{async[_0x2d6c94(0xba)](){}async['createShaders'](){const _0x210ca7=_0x2d6c94;let _0xc4023a=await this[_0x210ca7(0x125)]('/shaders/optimized_tracenothing.wgsl');this[_0x210ca7(0x8b)]=this[_0x210ca7(0x148)][_0x210ca7(0xd6)]({'label':_0x210ca7(0xb0)+this['getName'](),'code':_0xc4023a});}[_0x2d6c94(0x137)](){}async[_0x2d6c94(0xf8)](){}[_0x2d6c94(0xfb)](_0x2fd015){}async[_0x2d6c94(0xc1)](){const _0x39a0ff=_0x2d6c94;this['_computePipeline']=this[_0x39a0ff(0x148)][_0x39a0ff(0xc1)]({'label':_0x39a0ff(0x10d)+this[_0x39a0ff(0x168)](),'layout':_0x39a0ff(0x10a),'compute':{'module':this['_shaderModule'],'entryPoint':_0x39a0ff(0x119)}});}['createBindGroup'](_0x11c24d){const _0x4d4689=_0x2d6c94;this[_0x4d4689(0xa8)]=this[_0x4d4689(0x148)]['createBindGroup']({'label':'Ray\x20Tracing\x20Bind\x20Group','layout':this[_0x4d4689(0x115)][_0x4d4689(0xae)](0x0),'entries':[{'binding':0x0,'resource':_0x11c24d[_0x4d4689(0xce)]()}]}),this[_0x4d4689(0x92)]=Math[_0x4d4689(0xb4)](_0x11c24d[_0x4d4689(0x8a)]),this[_0x4d4689(0xc8)]=Math[_0x4d4689(0xb4)](_0x11c24d['height']);}[_0x2d6c94(0x145)](_0x444928){const _0x255670=_0x2d6c94;_0x444928[_0x255670(0x152)](this[_0x255670(0x115)]),_0x444928[_0x255670(0x170)](0x0,this[_0x255670(0xa8)]),_0x444928[_0x255670(0xf1)](Math['ceil'](this[_0x255670(0x92)]/0x10),Math['ceil'](this['_wgHeight']/0x10));}}class UnitCube{constructor(){const _0x57d3ad=_0x2d6c94;this[_0x57d3ad(0x13e)]=new Float32Array(Array(0x8)[_0x57d3ad(0x112)](0x0)),this[_0x57d3ad(0xaf)]=new Float32Array(Array(0x4)['fill'](0x1)),this['_front']=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x57d3ad(0x7d)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x57d3ad(0x10e)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_right']=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x57d3ad(0x82)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_down']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x2d6c94(0x120)](_0x2d364c){for(let _0x4d91a1=0x0;_0x4d91a1<0x8;++_0x4d91a1)this['_pose'][_0x4d91a1]=_0x2d364c[_0x4d91a1];}}class UnitSphere{constructor(){const _0xbc682c=_0x2d6c94;this[_0xbc682c(0x13e)]=new Float32Array(Array(0x8)[_0xbc682c(0x112)](0x0)),this[_0xbc682c(0xaf)]=new Float32Array(Array(0x4)[_0xbc682c(0x112)](0x1));}}class UnitCylinder{constructor(){const _0x37ac12=_0x2d6c94;this[_0x37ac12(0x13e)]=new Float32Array(Array(0x8)['fill'](0x0)),this[_0x37ac12(0xaf)]=new Float32Array(Array(0x4)[_0x37ac12(0x112)](0x1));}}class UnitCone{constructor(){const _0xece8bb=_0x2d6c94;this[_0xece8bb(0x13e)]=new Float32Array(Array(0x8)[_0xece8bb(0x112)](0x0)),this[_0xece8bb(0xaf)]=new Float32Array(Array(0x4)[_0xece8bb(0x112)](0x1));}}class RayTracingShadowDemoSceneObject extends RayTracingObject{constructor(_0x540ce6,_0x4ab835,_0x2a1c40,_0x1ea155=!![]){const _0xca4b31=_0x2d6c94;super(_0x540ce6,_0x4ab835),this[_0xca4b31(0xc4)]=new UnitCube(),this[_0xca4b31(0xc3)]=new UnitCube(),this[_0xca4b31(0x15a)]=new UnitSphere(),this['_cylinder']=new UnitCylinder(),this[_0xca4b31(0x11a)]=new UnitCone(),this[_0xca4b31(0xdf)]=_0x2a1c40,this[_0xca4b31(0x13d)]=_0x1ea155,this[_0xca4b31(0x11c)]=new Int32Array([0x1,0x0,0x0,0x0]);}async[_0x2d6c94(0xba)](){const _0x59ad3f=_0x2d6c94;this[_0x59ad3f(0xe0)]=this[_0x59ad3f(0x148)][_0x59ad3f(0xe1)]({'label':_0x59ad3f(0xa2)+this[_0x59ad3f(0x168)](),'size':this[_0x59ad3f(0xdf)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)]+this[_0x59ad3f(0xdf)][_0x59ad3f(0x138)][_0x59ad3f(0x118)]+this[_0x59ad3f(0xdf)][_0x59ad3f(0xeb)][_0x59ad3f(0x118)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this['_device']['queue'][_0x59ad3f(0xe5)](this['_cameraBuffer'],0x0,this['_camera'][_0x59ad3f(0x13e)]),this['_device'][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0xe0)],this[_0x59ad3f(0xdf)]['_pose'][_0x59ad3f(0x118)],this[_0x59ad3f(0xdf)][_0x59ad3f(0x138)]),this['_device'][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0xe0)],this[_0x59ad3f(0xdf)]['_pose'][_0x59ad3f(0x118)]+this['_camera'][_0x59ad3f(0x138)]['byteLength'],this['_camera'][_0x59ad3f(0xeb)]),this[_0x59ad3f(0x85)]=this[_0x59ad3f(0x148)]['createBuffer']({'label':_0x59ad3f(0x11e)+this['getName'](),'size':(this[_0x59ad3f(0xc4)][_0x59ad3f(0x13e)]['byteLength']+this[_0x59ad3f(0xc4)][_0x59ad3f(0xaf)][_0x59ad3f(0x118)]+this[_0x59ad3f(0xc4)][_0x59ad3f(0x82)][_0x59ad3f(0x118)]*0x6)*0x2,'usage':GPUBufferUsage[_0x59ad3f(0xa0)]|GPUBufferUsage[_0x59ad3f(0x17f)]});let _0x3199b0=0x0;this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this['_boxBuffer'],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0x13e)]),_0x3199b0+=this['_box'][_0x59ad3f(0x13e)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0xaf)]),_0x3199b0+=this['_box']['_scales'][_0x59ad3f(0x118)],this['_device'][_0x59ad3f(0x116)]['writeBuffer'](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)]['_front']),_0x3199b0+=this[_0x59ad3f(0xc4)]['_front'][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this['_boxBuffer'],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0x7d)]),_0x3199b0+=this['_box'][_0x59ad3f(0x7d)]['byteLength'],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0x10e)]),_0x3199b0+=this[_0x59ad3f(0xc4)][_0x59ad3f(0x10e)]['byteLength'],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0xad)]),_0x3199b0+=this['_box'][_0x59ad3f(0xad)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)]['writeBuffer'](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0x82)]),_0x3199b0+=this[_0x59ad3f(0xc4)][_0x59ad3f(0x82)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc4)][_0x59ad3f(0x8c)]),_0x3199b0+=this[_0x59ad3f(0xc4)][_0x59ad3f(0x8c)][_0x59ad3f(0x118)],this['_cubeOffset']=_0x3199b0,this[_0x59ad3f(0x148)]['queue'][_0x59ad3f(0xe5)](this['_boxBuffer'],_0x3199b0,this[_0x59ad3f(0xc3)]['_pose']),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)],this['_device'][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this['_cube']['_scales']),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0xaf)]['byteLength'],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc3)][_0x59ad3f(0xf5)]),_0x3199b0+=this['_cube']['_front']['byteLength'],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this['_boxBuffer'],_0x3199b0,this['_cube'][_0x59ad3f(0x7d)]),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0x7d)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc3)]['_left']),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0x10e)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this['_boxBuffer'],_0x3199b0,this['_cube'][_0x59ad3f(0xad)]),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0xad)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)]['writeBuffer'](this['_boxBuffer'],_0x3199b0,this['_cube'][_0x59ad3f(0x82)]),_0x3199b0+=this[_0x59ad3f(0xc3)][_0x59ad3f(0x82)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x85)],_0x3199b0,this[_0x59ad3f(0xc3)][_0x59ad3f(0x8c)]),this[_0x59ad3f(0x164)]=this[_0x59ad3f(0x148)][_0x59ad3f(0xe1)]({'label':_0x59ad3f(0x173)+this['getName'](),'size':this[_0x59ad3f(0x15a)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)]+this[_0x59ad3f(0x15a)][_0x59ad3f(0xaf)][_0x59ad3f(0x118)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage['COPY_DST']}),_0x3199b0=0x0,this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x164)],_0x3199b0,this['_sphere'][_0x59ad3f(0x13e)]),_0x3199b0+=this[_0x59ad3f(0x15a)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)],this['_device'][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x164)],_0x3199b0,this[_0x59ad3f(0x15a)]['_scales']),this['_coneBuffer']=this['_device'][_0x59ad3f(0xe1)]({'label':_0x59ad3f(0x15d)+this[_0x59ad3f(0x168)](),'size':this[_0x59ad3f(0x11a)]['_pose']['byteLength']+this['_cone']['_scales'][_0x59ad3f(0x118)],'usage':GPUBufferUsage[_0x59ad3f(0xa0)]|GPUBufferUsage[_0x59ad3f(0x17f)]}),_0x3199b0=0x0,this[_0x59ad3f(0x148)]['queue'][_0x59ad3f(0xe5)](this[_0x59ad3f(0xbf)],_0x3199b0,this[_0x59ad3f(0x11a)][_0x59ad3f(0x13e)]),_0x3199b0+=this[_0x59ad3f(0x11a)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0xbf)],_0x3199b0,this[_0x59ad3f(0x11a)][_0x59ad3f(0xaf)]),this[_0x59ad3f(0x12b)]=this[_0x59ad3f(0x148)]['createBuffer']({'label':'Cylinder\x20'+this[_0x59ad3f(0x168)](),'size':this['_cylinder'][_0x59ad3f(0x13e)]['byteLength']+this['_cylinder'][_0x59ad3f(0xaf)][_0x59ad3f(0x118)],'usage':GPUBufferUsage[_0x59ad3f(0xa0)]|GPUBufferUsage[_0x59ad3f(0x17f)]}),_0x3199b0=0x0,this[_0x59ad3f(0x148)][_0x59ad3f(0x116)]['writeBuffer'](this['_cylinderBuffer'],_0x3199b0,this[_0x59ad3f(0xfe)][_0x59ad3f(0x13e)]),_0x3199b0+=this[_0x59ad3f(0xfe)][_0x59ad3f(0x13e)][_0x59ad3f(0x118)],this[_0x59ad3f(0x148)][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x12b)],_0x3199b0,this[_0x59ad3f(0xfe)]['_scales']),this[_0x59ad3f(0x16d)]=this[_0x59ad3f(0x148)][_0x59ad3f(0xe1)]({'label':_0x59ad3f(0x139)+this[_0x59ad3f(0x168)](),'size':this['_params'][_0x59ad3f(0x118)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x59ad3f(0x17f)]}),this['_device'][_0x59ad3f(0x116)][_0x59ad3f(0xe5)](this[_0x59ad3f(0x16d)],0x0,this[_0x59ad3f(0x11c)]),this['_lightBuffer']=this[_0x59ad3f(0x148)][_0x59ad3f(0xe1)]({'label':_0x59ad3f(0xf7)+this[_0x59ad3f(0x168)](),'size':0x14*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage[_0x59ad3f(0x180)]|GPUBufferUsage['COPY_DST']});}[_0x2d6c94(0x137)](){const _0x3efb2b=_0x2d6c94;this['_camera']['updateSize'](this['_imgWidth'],this[_0x3efb2b(0xac)]),this['_device']['queue'][_0x3efb2b(0xe5)](this[_0x3efb2b(0xe0)],this[_0x3efb2b(0xdf)][_0x3efb2b(0x13e)][_0x3efb2b(0x118)]+this[_0x3efb2b(0xdf)][_0x3efb2b(0x138)][_0x3efb2b(0x118)],this[_0x3efb2b(0xdf)][_0x3efb2b(0xeb)]);}[_0x2d6c94(0xcc)](){const _0x51ec72=_0x2d6c94;this[_0x51ec72(0x148)]['queue'][_0x51ec72(0xe5)](this['_boxBuffer'],0x0,this[_0x51ec72(0xc4)][_0x51ec72(0x13e)]);}[_0x2d6c94(0x10f)](){const _0x46cb7b=_0x2d6c94;this[_0x46cb7b(0x148)][_0x46cb7b(0x116)]['writeBuffer'](this[_0x46cb7b(0x85)],this[_0x46cb7b(0xc4)]['_pose'][_0x46cb7b(0x118)],this[_0x46cb7b(0xc4)][_0x46cb7b(0xaf)]);}['updateCubePose'](){const _0xcc84db=_0x2d6c94;this[_0xcc84db(0x148)]['queue'][_0xcc84db(0xe5)](this[_0xcc84db(0x85)],this['_cubeOffset'],this[_0xcc84db(0xc3)][_0xcc84db(0x13e)]);}['updateCubeScales'](){const _0x98be22=_0x2d6c94;this['_device'][_0x98be22(0x116)][_0x98be22(0xe5)](this[_0x98be22(0x85)],this['_cubeOffset']+this[_0x98be22(0xc3)]['_pose'][_0x98be22(0x118)],this[_0x98be22(0xc3)][_0x98be22(0xaf)]);}[_0x2d6c94(0x86)](){const _0x243604=_0x2d6c94;this[_0x243604(0x148)][_0x243604(0x116)][_0x243604(0xe5)](this[_0x243604(0x164)],0x0,this['_sphere']['_pose']);}[_0x2d6c94(0x132)](){const _0x5d2e06=_0x2d6c94;this['_device'][_0x5d2e06(0x116)]['writeBuffer'](this[_0x5d2e06(0x164)],this[_0x5d2e06(0x15a)][_0x5d2e06(0x13e)][_0x5d2e06(0x118)],this[_0x5d2e06(0x15a)][_0x5d2e06(0xaf)]);}['updateConePose'](){const _0x5390f4=_0x2d6c94;this[_0x5390f4(0x148)][_0x5390f4(0x116)][_0x5390f4(0xe5)](this[_0x5390f4(0xbf)],0x0,this[_0x5390f4(0x11a)][_0x5390f4(0x13e)]);}[_0x2d6c94(0x110)](){const _0x1aab1c=_0x2d6c94;this[_0x1aab1c(0x148)][_0x1aab1c(0x116)]['writeBuffer'](this['_coneBuffer'],this[_0x1aab1c(0x11a)][_0x1aab1c(0x13e)][_0x1aab1c(0x118)],this[_0x1aab1c(0x11a)][_0x1aab1c(0xaf)]);}[_0x2d6c94(0xd7)](){const _0x5019ea=_0x2d6c94;this['_device'][_0x5019ea(0x116)]['writeBuffer'](this[_0x5019ea(0x12b)],0x0,this[_0x5019ea(0xfe)][_0x5019ea(0x13e)]);}[_0x2d6c94(0x175)](){const _0x460bf6=_0x2d6c94;this['_device'][_0x460bf6(0x116)][_0x460bf6(0xe5)](this[_0x460bf6(0x12b)],this['_cylinder']['_pose'][_0x460bf6(0x118)],this['_cylinder'][_0x460bf6(0xaf)]);}[_0x2d6c94(0x127)](){const _0x568c8d=_0x2d6c94;this['_device'][_0x568c8d(0x116)][_0x568c8d(0xe5)](this[_0x568c8d(0xe0)],0x0,this[_0x568c8d(0xdf)][_0x568c8d(0x13e)]);}[_0x2d6c94(0x121)](){const _0x245ce2=_0x2d6c94;this[_0x245ce2(0x148)][_0x245ce2(0x116)][_0x245ce2(0xe5)](this[_0x245ce2(0xe0)],this[_0x245ce2(0xdf)][_0x245ce2(0x13e)][_0x245ce2(0x118)],this[_0x245ce2(0xdf)][_0x245ce2(0x138)]);}[_0x2d6c94(0x181)](){const _0x2544be=_0x2d6c94;this[_0x2544be(0x148)]['queue'][_0x2544be(0xe5)](this[_0x2544be(0x16d)],0x0,this['_params']);}[_0x2d6c94(0xe4)](_0x5ad88e){const _0x4fff74=_0x2d6c94;let _0x5c8262=0x0;this[_0x4fff74(0x148)][_0x4fff74(0x116)]['writeBuffer'](this['_lightBuffer'],_0x5c8262,_0x5ad88e['_intensity']),_0x5c8262+=_0x5ad88e[_0x4fff74(0x160)][_0x4fff74(0x118)],this[_0x4fff74(0x148)][_0x4fff74(0x116)][_0x4fff74(0xe5)](this[_0x4fff74(0x143)],_0x5c8262,_0x5ad88e[_0x4fff74(0x177)]),_0x5c8262+=_0x5ad88e[_0x4fff74(0x177)][_0x4fff74(0x118)],this[_0x4fff74(0x148)][_0x4fff74(0x116)][_0x4fff74(0xe5)](this[_0x4fff74(0x143)],_0x5c8262,_0x5ad88e[_0x4fff74(0x12a)]),_0x5c8262+=_0x5ad88e['_direction'][_0x4fff74(0x118)],this[_0x4fff74(0x148)]['queue'][_0x4fff74(0xe5)](this[_0x4fff74(0x143)],_0x5c8262,_0x5ad88e[_0x4fff74(0xcf)]),_0x5c8262+=_0x5ad88e['_attenuation'][_0x4fff74(0x118)],this[_0x4fff74(0x148)][_0x4fff74(0x116)][_0x4fff74(0xe5)](this[_0x4fff74(0x143)],_0x5c8262,_0x5ad88e[_0x4fff74(0x11c)]);}async[_0x2d6c94(0x14c)](){const _0x31231f=_0x2d6c94;let _0x5d14c3=await this[_0x31231f(0x125)]('/shaders/optimized_tracedemoshadowbox2.wgsl');this[_0x31231f(0x8b)]=this[_0x31231f(0x148)][_0x31231f(0xd6)]({'label':_0x31231f(0xb0)+this[_0x31231f(0x168)](),'code':_0x5d14c3}),this['_bindGroupLayout']=this[_0x31231f(0x148)][_0x31231f(0x9d)]({'label':_0x31231f(0x99)+this[_0x31231f(0x168)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x31231f(0xa3)],'buffer':{'type':'read-only-storage'}},{'binding':0x2,'visibility':GPUShaderStage[_0x31231f(0xa3)],'storageTexture':{'format':this['_canvasFormat']}},{'binding':0x3,'visibility':GPUShaderStage[_0x31231f(0xa3)],'buffer':{'type':_0x31231f(0xcd)}},{'binding':0x4,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':'read-only-storage'}},{'binding':0x5,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x31231f(0xcd)}},{'binding':0x6,'visibility':GPUShaderStage[_0x31231f(0xa3)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage[_0x31231f(0xa3)],'buffer':{}}]}),this[_0x31231f(0x84)]=this[_0x31231f(0x148)][_0x31231f(0x90)]({'label':'Ray\x20Trace\x20Box\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x31231f(0xda)]]});}async[_0x2d6c94(0xc1)](){const _0x124453=_0x2d6c94;this[_0x124453(0x115)]=this['_device'][_0x124453(0xc1)]({'label':_0x124453(0xa5)+this[_0x124453(0x168)](),'layout':this[_0x124453(0x84)],'compute':{'module':this[_0x124453(0x8b)],'entryPoint':'computeMain'}});}[_0x2d6c94(0x7a)](_0x266c90){const _0x20881d=_0x2d6c94;this[_0x20881d(0xa8)]=this[_0x20881d(0x148)][_0x20881d(0x7a)]({'label':_0x20881d(0x14e),'layout':this[_0x20881d(0x115)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x20881d(0xe0)]}},{'binding':0x1,'resource':{'buffer':this[_0x20881d(0x85)]}},{'binding':0x2,'resource':_0x266c90[_0x20881d(0xce)]()},{'binding':0x3,'resource':{'buffer':this[_0x20881d(0x164)]}},{'binding':0x4,'resource':{'buffer':this[_0x20881d(0xbf)]}},{'binding':0x5,'resource':{'buffer':this[_0x20881d(0x12b)]}},{'binding':0x6,'resource':{'buffer':this['_paramBuffer']}},{'binding':0x7,'resource':{'buffer':this['_lightBuffer']}}]}),this[_0x20881d(0x92)]=Math[_0x20881d(0xb4)](_0x266c90[_0x20881d(0x8a)]),this[_0x20881d(0xc8)]=Math[_0x20881d(0xb4)](_0x266c90[_0x20881d(0xe8)]),console['log'](_0x266c90[_0x20881d(0x8a)],_0x266c90['height']);}[_0x2d6c94(0x145)](_0x25a997){const _0x4d755c=_0x2d6c94;_0x25a997['setPipeline'](this[_0x4d755c(0x115)]),_0x25a997['setBindGroup'](0x0,this[_0x4d755c(0xa8)]),_0x25a997[_0x4d755c(0xf1)](Math[_0x4d755c(0xb4)](this['_wgWidth']/0x10),Math[_0x4d755c(0xb4)](this[_0x4d755c(0xc8)]/0x10));}}function _0x597b(_0x37dfc7,_0x5c4722){const _0x5682de=_0x5682();return _0x597b=function(_0x597ba1,_0x2ce682){_0x597ba1=_0x597ba1-0x77;let _0x3d0f52=_0x5682de[_0x597ba1];return _0x3d0f52;},_0x597b(_0x37dfc7,_0x5c4722);}class Math3D{static['translate'](_0x218a64,_0x172e22=0x0,_0x42d000=0x0,_0x58e7aa=0x0){return[_0x218a64[0x0]+_0x172e22,_0x218a64[0x1]+_0x42d000,_0x218a64[0x2]+_0x58e7aa];}static[_0x2d6c94(0x13f)](_0x3ca617,_0x209102,_0x13d87b){const _0x45e60f=_0x2d6c94;let _0x3a64fd=Math[_0x45e60f(0xdb)](_0x13d87b),_0x50ecc7=Math[_0x45e60f(0x83)](_0x13d87b);switch(_0x209102){case 0x0:return[_0x3ca617[0x0],_0x3ca617[0x1]*_0x3a64fd-_0x3ca617[0x2]*_0x50ecc7,_0x3ca617[0x1]*_0x50ecc7+_0x3ca617[0x2]*_0x3a64fd];case 0x1:return[_0x3ca617[0x0]*_0x3a64fd+_0x3ca617[0x2]*_0x50ecc7,_0x3ca617[0x1],-_0x3ca617[0x0]*_0x50ecc7+_0x3ca617[0x2]*_0x3a64fd];case 0x2:return[_0x3ca617[0x0]*_0x3a64fd-_0x3ca617[0x1]*_0x50ecc7,_0x3ca617[0x0]*_0x50ecc7+_0x3ca617[0x1]*_0x3a64fd,_0x3ca617[0x2]];default:return _0x3ca617;}}static[_0x2d6c94(0x129)](_0x2f4d50,_0x5b89c9){const _0x2b1972=_0x2d6c94;return _0x2f4d50=Math3D[_0x2b1972(0x13f)](_0x2f4d50,0x0,_0x5b89c9[0x4]),_0x2f4d50=Math3D['rotate'](_0x2f4d50,0x1,_0x5b89c9[0x5]),_0x2f4d50=Math3D[_0x2b1972(0x13f)](_0x2f4d50,0x2,_0x5b89c9[0x6]),_0x2f4d50=Math3D[_0x2b1972(0xbe)](_0x2f4d50,_0x5b89c9[0x0],_0x5b89c9[0x1],_0x5b89c9[0x2]),_0x2f4d50;}static[_0x2d6c94(0x7f)](_0x3407db,_0xbb8dba){const _0x36b889=_0x2d6c94;return _0x3407db=Math3D[_0x36b889(0x13f)](_0x3407db,0x0,_0xbb8dba[0x4]),_0x3407db=Math3D[_0x36b889(0x13f)](_0x3407db,0x1,_0xbb8dba[0x5]),_0x3407db=Math3D['rotate'](_0x3407db,0x2,_0xbb8dba[0x6]),_0x3407db;}static['applyPoseToPoint'](_0x5ac55a,_0xc6940a){const _0x2b940c=_0x2d6c94;return _0x5ac55a=Math3D[_0x2b940c(0xbe)](_0x5ac55a,-_0xc6940a[0x0],-_0xc6940a[0x1],-_0xc6940a[0x2]),_0x5ac55a=Math3D[_0x2b940c(0x13f)](_0x5ac55a,0x2,-_0xc6940a[0x6]),_0x5ac55a=Math3D[_0x2b940c(0x13f)](_0x5ac55a,0x1,-_0xc6940a[0x5]),_0x5ac55a=Math3D[_0x2b940c(0x13f)](_0x5ac55a,0x0,-_0xc6940a[0x4]),_0x5ac55a;}static[_0x2d6c94(0x7f)](_0x9afa1b,_0x246195){const _0x4bc119=_0x2d6c94;return _0x9afa1b=Math3D[_0x4bc119(0x13f)](_0x9afa1b,0x2,-_0x246195[0x6]),_0x9afa1b=Math3D[_0x4bc119(0x13f)](_0x9afa1b,0x1,-_0x246195[0x5]),_0x9afa1b=Math3D[_0x4bc119(0x13f)](_0x9afa1b,0x0,-_0x246195[0x4]),_0x9afa1b;}}class Camera{constructor(_0x2ea5fa,_0x16ba48){const _0x2f1656=_0x2d6c94;this[_0x2f1656(0x13e)]=new Float32Array(Array(0x8)[_0x2f1656(0x112)](0x0)),this[_0x2f1656(0x138)]=new Float32Array(Array(0x2)['fill'](0x1)),this[_0x2f1656(0xeb)]=new Float32Array([_0x2ea5fa,_0x16ba48]),this[_0x2f1656(0xc9)]=![];}['resetPose'](){const _0x20307b=_0x2d6c94;for(let _0x935247=0x0;_0x935247<0x8;++_0x935247)this[_0x20307b(0x13e)][_0x935247]=0x0;this[_0x20307b(0x138)][0x0]=0x1,this[_0x20307b(0x138)][0x1]=0x1;}[_0x2d6c94(0x120)](_0x5651f3){const _0xe25efb=_0x2d6c94;for(let _0x50bf7f=0x0;_0x50bf7f<0x8;++_0x50bf7f)this[_0xe25efb(0x13e)][_0x50bf7f]=_0x5651f3[_0x50bf7f];}[_0x2d6c94(0xb1)](_0xb0877d,_0x4e4764){this['_resolutions'][0x0]=_0xb0877d,this['_resolutions'][0x1]=_0x4e4764;}['moveX'](_0x5264fb){const _0x3927ff=_0x2d6c94;let _0x33af09=Math3D[_0x3927ff(0x7f)]([0x1,0x0,0x0],this['_pose']);this[_0x3927ff(0x13e)][0x0]+=_0x5264fb*_0x33af09[0x0],this['_pose'][0x1]-=_0x5264fb*_0x33af09[0x1],this[_0x3927ff(0x13e)][0x2]-=_0x5264fb*_0x33af09[0x2];}['moveY'](_0x18a0f8){const _0x5731ad=_0x2d6c94;let _0x2f461f=Math3D[_0x5731ad(0x7f)]([0x0,0x1,0x0],this[_0x5731ad(0x13e)]);this[_0x5731ad(0x13e)][0x0]+=_0x18a0f8*_0x2f461f[0x0],this[_0x5731ad(0x13e)][0x1]+=_0x18a0f8*_0x2f461f[0x1],this[_0x5731ad(0x13e)][0x2]+=_0x18a0f8*_0x2f461f[0x2];}[_0x2d6c94(0x126)](_0x4cb48c){const _0x20e312=_0x2d6c94;let _0x5db10f=Math3D[_0x20e312(0x7f)]([0x0,0x0,0x1],this[_0x20e312(0x13e)]);this[_0x20e312(0x13e)][0x0]+=_0x4cb48c*_0x5db10f[0x0],this[_0x20e312(0x13e)][0x1]-=_0x4cb48c*_0x5db10f[0x1],this[_0x20e312(0x13e)][0x2]+=_0x4cb48c*_0x5db10f[0x2];}['rotateX'](_0x29cb9a){const _0x3f8ac0=_0x2d6c94;this[_0x3f8ac0(0x13e)][0x4]+=_0x29cb9a;}['rotateY'](_0x3e3431){const _0x182f9b=_0x2d6c94;this[_0x182f9b(0x13e)][0x5]+=_0x3e3431;}[_0x2d6c94(0x131)](_0x5d724e){const _0x29c442=_0x2d6c94;this[_0x29c442(0x13e)][0x6]+=_0x5d724e;}}class Light{constructor(){const _0x3f53b8=_0x2d6c94;this[_0x3f53b8(0x160)]=new Float32Array(Array(0x4)[_0x3f53b8(0x112)](0x0)),this['_position']=new Float32Array(Array(0x4)[_0x3f53b8(0x112)](0x0)),this[_0x3f53b8(0x12a)]=new Float32Array(Array(0x4)['fill'](0x0)),this['_attenuation']=new Float32Array(Array(0x4)[_0x3f53b8(0x112)](0x0)),this[_0x3f53b8(0xcf)][0x0]=0x1,this['_params']=new Float32Array(Array(0x4)[_0x3f53b8(0x112)](0x0));}}function _0x5682(){const _0x52f98d=['setProperty','appendChild','setBindGroup','moveX','_heightFactor','Sphere\x20','push','updateCylinderScales','_tracer','_position','GET','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','???????????','_height','Toon','??????????','innerWidth','COPY_DST','UNIFORM','updateParam','top','toString','webgpu','mouseup','12HqAhcn','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','createBindGroup','fps:\x20','_canvasWidth','_back','Hard','applyPoseToDir','</br>','touchend','_top','sin','_pipelineLayout','_boxBuffer','updateSpherePose','getCurrentTexture','beginRenderPass','_tgtHeight','width','_shaderModule','_down','createElement','_clearColor','font','createPipelineLayout','moveY','_wgWidth','_objectCnt','_outputSizeBuffer','Ray\x20Tracer\x20output\x20size\x20buffer','toFixed','_canvasHeight','requestDevice','Ray\x20Trace\x20Box\x20Layout\x20','194CEbNGo','4698DbboIf','log','createBindGroupLayout','statusText','keyup','STORAGE','????','Camera\x20','COMPUTE','rgba(1,\x201,\x201,\x200.5)','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','Soft','getContext','_bindGroup','match','10px','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','_imgHeight','_right','getBindGroupLayout','_scales','\x20Shader\x20','updateSize','message','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','ceil','finish','_canvasFormat','init','updateCubePose','XXX','createGeometry','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','getElementById','vertexMain','translate','_coneBuffer','beginComputePass','createComputePipeline','replace','_cube','_box','send','fragmentMain','now','_wgHeight','_isProjective','map','open','updateBoxPose','read-only-storage','createView','_attenuation','end','updateConePose','sqrt','right','body','Ray\x20Tracer\x20Pipeline','createShaderModule','updateCylinderPose','Spotlight','constructor','_bindGroupLayout','cos','_objects','_textContext','key','_camera','_cameraBuffer','createBuffer','1215816WvcUIe','_paddingx','updateLight','writeBuffer','addEventListener','mouseenter','height','_pipeline','white','_resolutions','createCommandEncoder','Point','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','18030WlvDoy','1813440oMTpxS','dispatchWorkgroups','touchstart','_width','_context','_front','store','Light\x20','createRenderPipeline','29329LsjzaX','renderToSelectedView','render','onload','renderCanvas','_cylinder','2754yNPuEw','touchmove','pointer-events','resizeCanvas','_lines','1px\x20solid\x20red','catch','_sampler','canvas','readyState','TEXTURE_BINDING','auto','_paddingtop','length','Ray\x20Tracing\x20Pipeline\x20','_left','updateBoxScales','updateConeScales','540445OSQywh','fill','fillStyle','position','_computePipeline','queue','border','byteLength','computeMain','_cone','Ray\x20Tracer\x20Sampler','_params','mousemove','Box\x20','getPreferredCanvasFormat','updatePose','updateCameraFocal','Couldn\x27t\x20request\x20WebGPU\x20adapter.','bind','1729938ljYrJT','loadShader','moveZ','updateCameraPose','measureText','applyPoseToPoint','_direction','_cylinderBuffer','onerror','clearRect','submit','_textFont','rotateY','rotateZ','updateSphereScales','responseText','toggleVisibility','DONE','hidden','updateGeometry','_focal','Parameters\x20','initial','Phong','gpu','_showTexture','_pose','rotate','no-cache,\x20no-store,\x20max-age=0','_fontSize','_textCanvas','_lightBuffer','updateCubeScales','compute','updateText','resize','_device','Lambertian','split','userAgent','createShaders','_offScreenTexture','Ray\x20Trace\x20Box\x20Bind\x20Group','keydown','configure','left','setPipeline','_canvas','requestAdapter','name','Directional','createTexture','Ray\x20Tracer\x20Shader','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','_sphere','setTracerObject','Cache-Control','Cone\x20','mouseleave','clear','_intensity','appendSceneObject','_imgWidth','Emit\x20only','_sphereBuffer','18px\x20Arial','style','innerHeight','getName','_lineSpacing','none','status','mousedown','_paramBuffer'];_0x5682=function(){return _0x52f98d;};return _0x5682();}class PointLight extends Light{constructor(_0x5a13d7=[0x1,0x1,0x1],_0x246ffc=[0x0,0x0,0x0],_0x8eace1=[0x1,0.1,0.01]){const _0x4345ce=_0x2d6c94;super();for(let _0x56fd0e=0x0;_0x56fd0e<0x3;++_0x56fd0e){this[_0x4345ce(0x160)][_0x56fd0e]=_0x5a13d7[_0x56fd0e],this['_position'][_0x56fd0e]=_0x246ffc[_0x56fd0e],this[_0x4345ce(0xcf)][_0x56fd0e]=_0x8eace1[_0x56fd0e];}}}class RectangularLight extends Light{constructor(_0x3b7f0d=[0x1,0x1,0x1],_0xb49691=[0x0,0x0,0x0],_0x220ce2=[0x1,0.5,0.5],_0x1ce050=0.1,_0x2bcf93=0.1){const _0x32c539=_0x2d6c94;super();for(let _0xd71eb7=0x0;_0xd71eb7<0x3;++_0xd71eb7){this[_0x32c539(0x160)][_0xd71eb7]=_0x3b7f0d[_0xd71eb7],this['_position'][_0xd71eb7]=_0xb49691[_0xd71eb7],this[_0x32c539(0xcf)][_0xd71eb7]=_0x220ce2[_0xd71eb7];}this[_0x32c539(0x11c)][0x0]=_0x1ce050,this[_0x32c539(0x11c)][0x1]=_0x2bcf93;}}class SphericalLight extends Light{constructor(_0x1bbed2=[0x1,0x1,0x1],_0x3daebf=[0x0,0x0,0x0],_0x31892d=[0x1,0.5,0.5],_0x414a25=0.1){const _0x48e9e2=_0x2d6c94;super();for(let _0x29ed65=0x0;_0x29ed65<0x3;++_0x29ed65){this[_0x48e9e2(0x160)][_0x29ed65]=_0x1bbed2[_0x29ed65],this[_0x48e9e2(0x177)][_0x29ed65]=_0x3daebf[_0x29ed65],this[_0x48e9e2(0xcf)][_0x29ed65]=_0x31892d[_0x29ed65];}this['_params'][0x0]=_0x414a25;}}class DirectionalLight extends Light{constructor(_0x4861a6=[0x1,0x1,0x1],_0x150433=[Math['sqrt'](0x3),Math[_0x2d6c94(0xd2)](0x3),Math[_0x2d6c94(0xd2)](0x3)]){const _0x1c10b0=_0x2d6c94;super();for(let _0x42ed0f=0x0;_0x42ed0f<0x3;++_0x42ed0f){this[_0x1c10b0(0x160)][_0x42ed0f]=_0x4861a6[_0x42ed0f],this['_direction'][_0x42ed0f]=_0x150433[_0x42ed0f];}}}class SpotLight extends Light{constructor(_0x388378=[0x1,0x1,0x1],_0x2c262f=[0x0,0x0,0x0],_0x1712d6=[0x0,0x1,0x0],_0x2487f8=[0x1,0.1,0.01],_0x1b7e55=0.785,_0x4f2b87=0x5){const _0x48ac35=_0x2d6c94;super();for(let _0xa769ce=0x0;_0xa769ce<0x3;++_0xa769ce){this[_0x48ac35(0x160)][_0xa769ce]=_0x388378[_0xa769ce],this[_0x48ac35(0x177)][_0xa769ce]=_0x2c262f[_0xa769ce],this['_direction'][_0xa769ce]=_0x1712d6[_0xa769ce],this[_0x48ac35(0xcf)][_0xa769ce]=_0x2487f8[_0xa769ce];}this[_0x48ac35(0x11c)][0x0]=_0x1b7e55,this['_params'][0x1]=_0x4f2b87;}}async function init(){const _0xcc04b2=_0x2d6c94,_0x558e37=document[_0xcc04b2(0x8d)](_0xcc04b2(0x107));_0x558e37['id']='renderCanvas',document[_0xcc04b2(0xd4)][_0xcc04b2(0x16f)](_0x558e37);const _0x1b337f=new RayTracer(_0x558e37);await _0x1b337f['init']();var _0x459466=new Camera(),_0x59ce62=new RayTracingShadowDemoSceneObject(_0x1b337f[_0xcc04b2(0x148)],_0x1b337f['_canvasFormat'],_0x459466);await _0x1b337f[_0xcc04b2(0x15b)](_0x59ce62),_0x59ce62[_0xcc04b2(0xc4)][_0xcc04b2(0x13e)][0x2]=0.4*0x2,_0x59ce62[_0xcc04b2(0xcc)](),_0x59ce62['_box'][_0xcc04b2(0xaf)][0x0]=0x2,_0x59ce62[_0xcc04b2(0xc4)][_0xcc04b2(0xaf)][0x1]=1.25,_0x59ce62[_0xcc04b2(0xc4)][_0xcc04b2(0xaf)][0x2]=0x2,_0x59ce62['updateBoxScales'](),_0x59ce62[_0xcc04b2(0xc3)][_0xcc04b2(0xaf)][0x0]=0.3,_0x59ce62[_0xcc04b2(0xc3)]['_scales'][0x1]=0.5,_0x59ce62[_0xcc04b2(0xc3)][_0xcc04b2(0xaf)][0x2]=0.3,_0x59ce62[_0xcc04b2(0x144)](),_0x59ce62[_0xcc04b2(0xc3)][_0xcc04b2(0x13e)][0x0]=-0.25*0x2,_0x59ce62[_0xcc04b2(0xc3)]['_pose'][0x1]=0.5*_0x59ce62[_0xcc04b2(0xc4)][_0xcc04b2(0xaf)][0x1]-0.5*_0x59ce62[_0xcc04b2(0xc3)]['_scales'][0x1],_0x59ce62['_cube'][_0xcc04b2(0x13e)][0x2]=0.5*0x2,_0x59ce62[_0xcc04b2(0xb8)](),_0x59ce62[_0xcc04b2(0x15a)]['_scales'][0x0]=0.25,_0x59ce62['_sphere']['_scales'][0x1]=0.25,_0x59ce62[_0xcc04b2(0x15a)][_0xcc04b2(0xaf)][0x2]=0.25,_0x59ce62['updateSphereScales'](),_0x59ce62[_0xcc04b2(0x15a)][_0xcc04b2(0x13e)][0x0]=0.225*0x2,_0x59ce62[_0xcc04b2(0x15a)][_0xcc04b2(0x13e)][0x1]=0.5*_0x59ce62[_0xcc04b2(0xc4)]['_scales'][0x1]-_0x59ce62[_0xcc04b2(0x15a)][_0xcc04b2(0xaf)][0x1],_0x59ce62[_0xcc04b2(0x15a)][_0xcc04b2(0x13e)][0x2]=0.6*0x2,_0x59ce62[_0xcc04b2(0x86)](),_0x59ce62[_0xcc04b2(0xfe)]['_scales'][0x0]=0.2,_0x59ce62[_0xcc04b2(0xfe)][_0xcc04b2(0xaf)][0x1]=1.25,_0x59ce62[_0xcc04b2(0xfe)][_0xcc04b2(0xaf)][0x2]=0.2,_0x59ce62[_0xcc04b2(0x175)](),_0x59ce62[_0xcc04b2(0xfe)]['_pose'][0x1]=0.5*_0x59ce62[_0xcc04b2(0xc4)][_0xcc04b2(0xaf)][0x1]-_0x59ce62[_0xcc04b2(0xfe)]['_scales'][0x1],_0x59ce62['_cylinder']['_pose'][0x2]=0.75*0x2,_0x59ce62[_0xcc04b2(0xd7)](),_0x59ce62['_cone']['_scales'][0x0]=0.2,_0x59ce62['_cone']['_scales'][0x1]=-0.6,_0x59ce62[_0xcc04b2(0x11a)][_0xcc04b2(0xaf)][0x2]=0.2,_0x59ce62['updateConeScales'](),_0x59ce62[_0xcc04b2(0x11a)][_0xcc04b2(0x13e)][0x0]=0.05*0x2,_0x59ce62[_0xcc04b2(0x11a)][_0xcc04b2(0x13e)][0x1]=0.5*_0x59ce62['_box'][_0xcc04b2(0xaf)][0x1],_0x59ce62[_0xcc04b2(0x11a)][_0xcc04b2(0x13e)][0x2]=0.4*0x2,_0x59ce62[_0xcc04b2(0xd1)]();var _0x1669b6='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Shadow\x20Mode\x20(????)\x0az/Z:\x20Change\x20Trace\x20Height\x20(XXX)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper',_0x43c07b=new StandardTextObject(_0x1669b6);let _0x41f99c='??';var _0x310e95=new StandardTextObject('fps:\x20'+_0x41f99c),_0x31c00=0.05;_0x59ce62[_0xcc04b2(0x11c)][0x1]=0x0;var _0x2d082e=[_0xcc04b2(0xed),_0xcc04b2(0x156),_0xcc04b2(0xd8)];_0x59ce62[_0xcc04b2(0x11c)][0x2]=0x2;var _0xe92ee8=[_0xcc04b2(0x163),_0xcc04b2(0x149),_0xcc04b2(0x13b),_0xcc04b2(0x17c)];_0x59ce62[_0xcc04b2(0x11c)][0x3]=0x1,_0x59ce62[_0xcc04b2(0x181)]();var _0x2309b8=['No',_0xcc04b2(0x7e),_0xcc04b2(0xa6)];_0x1669b6=_0x1669b6[_0xcc04b2(0xc2)](_0xcc04b2(0x17a),_0x2d082e[_0x59ce62[_0xcc04b2(0x11c)][0x1]]),_0x1669b6=_0x1669b6[_0xcc04b2(0xc2)](_0xcc04b2(0x17d),_0xe92ee8[_0x59ce62['_params'][0x2]]),_0x1669b6=_0x1669b6['replace'](_0xcc04b2(0xa1),_0x2309b8[_0x59ce62[_0xcc04b2(0x11c)][0x3]]),_0x1669b6=_0x1669b6[_0xcc04b2(0xc2)](_0xcc04b2(0xb9),_0x1b337f[_0xcc04b2(0x89)][_0xcc04b2(0x96)](0x2)),_0x43c07b[_0xcc04b2(0x146)](_0x1669b6);var _0x5808d5=null;let _0x3bae55=async()=>{const _0x25b2ee=_0xcc04b2;switch(_0x59ce62[_0x25b2ee(0x11c)][0x1]){case 0x0:_0x5808d5=new PointLight();break;case 0x1:_0x5808d5=new DirectionalLight();break;case 0x2:_0x5808d5=new SpotLight();break;case 0x3:_0x5808d5=new RectangularLight();break;case 0x4:_0x5808d5=new SphericalLight();break;}_0x5808d5[_0x25b2ee(0x177)][0x1]=-0.5*_0x59ce62[_0x25b2ee(0xc4)][_0x25b2ee(0xaf)][0x1]+0.001,_0x5808d5[_0x25b2ee(0x177)][0x2]=0.75;};await _0x3bae55(),_0x59ce62['updateLight'](_0x5808d5),window[_0xcc04b2(0xe6)](_0xcc04b2(0x14f),async _0x1bc5ec=>{const _0x45ad11=_0xcc04b2;switch(_0x1bc5ec[_0x45ad11(0xde)]){case'h':case'H':_0x43c07b['toggleVisibility']();break;case'f':case'F':_0x310e95[_0x45ad11(0x134)]();break;case'w':case'W':_0x459466[_0x45ad11(0x91)](-_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case's':case'S':_0x459466['moveY'](_0x31c00),_0x59ce62['updateCameraPose']();break;case'a':case'A':_0x459466[_0x45ad11(0x171)](-_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'd':case'D':_0x459466[_0x45ad11(0x171)](_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'q':case'Q':_0x459466['moveZ'](-_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'e':case'E':_0x459466[_0x45ad11(0x126)](_0x31c00),_0x59ce62['updateCameraPose']();break;case'i':case'I':_0x459466['rotateX'](_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'k':case'K':_0x459466['rotateX'](-_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'j':case'J':_0x459466[_0x45ad11(0x130)](-_0x31c00),_0x59ce62['updateCameraPose']();break;case'l':case'L':_0x459466[_0x45ad11(0x130)](_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'u':case'U':_0x459466[_0x45ad11(0x131)](_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'o':case'O':_0x459466[_0x45ad11(0x131)](-_0x31c00),_0x59ce62[_0x45ad11(0x127)]();break;case'c':case'C':_0x59ce62[_0x45ad11(0x11c)][0x0]=!_0x59ce62[_0x45ad11(0x11c)][0x0],_0x59ce62['updateParam']();break;case'r':case'R':_0x459466['resetPose'](),_0x59ce62[_0x45ad11(0x127)](),_0x59ce62['updateCameraFocal']();break;case'[':_0x459466[_0x45ad11(0x138)][0x0]*=1.1,_0x59ce62['updateCameraFocal']();break;case']':_0x459466[_0x45ad11(0x138)][0x0]/=1.1,_0x59ce62['updateCameraFocal']();break;case'{':_0x459466[_0x45ad11(0x138)][0x1]*=1.1,_0x59ce62['updateCameraFocal']();break;case'}':_0x459466[_0x45ad11(0x138)][0x1]/=1.1,_0x59ce62[_0x45ad11(0x121)]();break;case'n':case'N':let _0x10e4e2=(_0x59ce62[_0x45ad11(0x11c)][0x1]+0x1)%_0x2d082e[_0x45ad11(0x10c)];_0x1669b6=_0x1669b6['replace'](_0x2d082e[_0x59ce62[_0x45ad11(0x11c)][0x1]],_0x2d082e[_0x10e4e2]),_0x43c07b[_0x45ad11(0x146)](_0x1669b6),_0x59ce62[_0x45ad11(0x11c)][0x1]=_0x10e4e2,await _0x3bae55(),_0x59ce62[_0x45ad11(0x181)](),_0x59ce62['updateLight'](_0x5808d5);break;case'm':case'M':let _0x2e502e=(_0x59ce62[_0x45ad11(0x11c)][0x2]+0x1)%_0xe92ee8[_0x45ad11(0x10c)];if(_0x2e502e==0x0)_0x2e502e=0x2;_0x1669b6=_0x1669b6[_0x45ad11(0xc2)](_0xe92ee8[_0x59ce62[_0x45ad11(0x11c)][0x2]],_0xe92ee8[_0x2e502e]),_0x43c07b[_0x45ad11(0x146)](_0x1669b6),_0x59ce62[_0x45ad11(0x11c)][0x2]=_0x2e502e,_0x59ce62[_0x45ad11(0x181)]();break;case'v':case'V':let _0x1c1da6=(_0x59ce62[_0x45ad11(0x11c)][0x3]+0x1)%_0x2309b8[_0x45ad11(0x10c)];_0x1669b6=_0x1669b6[_0x45ad11(0xc2)](_0x2309b8[_0x59ce62[_0x45ad11(0x11c)][0x3]],_0x2309b8[_0x1c1da6]),_0x43c07b[_0x45ad11(0x146)](_0x1669b6),_0x59ce62[_0x45ad11(0x11c)][0x3]=_0x1c1da6,_0x59ce62['updateParam']();break;case'z':_0x1b337f[_0x45ad11(0x172)]*=1.1;let _0x47e93f='('+_0x1b337f[_0x45ad11(0x89)][_0x45ad11(0x96)](0x2)+')';_0x1b337f[_0x45ad11(0x102)]();let _0x160e8d='('+_0x1b337f[_0x45ad11(0x89)][_0x45ad11(0x96)](0x2)+')';_0x1669b6=_0x1669b6[_0x45ad11(0xc2)](_0x47e93f,_0x160e8d),_0x43c07b[_0x45ad11(0x146)](_0x1669b6);break;case'Z':_0x1b337f[_0x45ad11(0x172)]/=1.1;let _0x2df9ed='('+_0x1b337f[_0x45ad11(0x89)][_0x45ad11(0x96)](0x2)+')';_0x1b337f[_0x45ad11(0x102)]();let _0x301165='('+_0x1b337f['_tgtHeight'][_0x45ad11(0x96)](0x2)+')';_0x1669b6=_0x1669b6[_0x45ad11(0xc2)](_0x2df9ed,_0x301165),_0x43c07b[_0x45ad11(0x146)](_0x1669b6);break;}}),window[_0xcc04b2(0xe6)](_0xcc04b2(0x9f),_0x28eb18=>{});let _0xbf94dc=async _0x1c08bb=>{},_0x439d94=async _0x12104b=>{},_0x381f01=_0x1efe27=>{};_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0x16c),_0xbf94dc),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0x11d),_0x439d94),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0x77),_0x381f01),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0xe7),_0x21c7fd=>{}),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0x15e),_0x2656cf=>{}),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0xf2),_0xbf94dc),_0x558e37['addEventListener'](_0xcc04b2(0x100),_0x439d94),_0x558e37[_0xcc04b2(0xe6)](_0xcc04b2(0x81),_0x381f01),_0x43c07b[_0xcc04b2(0x142)][_0xcc04b2(0x166)][_0xcc04b2(0x16e)](_0xcc04b2(0x101),_0xcc04b2(0x16a)),_0x310e95[_0xcc04b2(0x142)][_0xcc04b2(0x166)][_0xcc04b2(0x16e)](_0xcc04b2(0x101),_0xcc04b2(0x16a));var _0x3e245e=0x0,_0x45670f=0x3c,_0x208a88=0x1/_0x45670f,_0x2763e6=_0x208a88*0x3e8,_0x5ddd05;let _0x173ee8=()=>{const _0x1a5386=_0xcc04b2;let _0x10b7b1=Date[_0x1a5386(0xc7)]()-_0x5ddd05;_0x10b7b1>_0x2763e6&&(++_0x3e245e,_0x5ddd05=Date[_0x1a5386(0xc7)]()-_0x10b7b1%_0x2763e6,_0x1b337f[_0x1a5386(0xfb)]()),requestAnimationFrame(_0x173ee8);};return _0x5ddd05=Date[_0xcc04b2(0xc7)](),_0x173ee8(),_0x310e95[_0xcc04b2(0x142)][_0xcc04b2(0x166)]['setProperty'](_0xcc04b2(0x151),_0xcc04b2(0x13a)),_0x310e95[_0xcc04b2(0x142)][_0xcc04b2(0x166)][_0xcc04b2(0xd3)]=_0xcc04b2(0xaa),setInterval(()=>{const _0x1c7446=_0xcc04b2;_0x41f99c=_0x3e245e,_0x3e245e=0x0,_0x310e95[_0x1c7446(0x146)](_0x1c7446(0x7b)+_0x41f99c);},0x3e8),_0x1b337f;}init()['then'](_0xc740c=>{const _0x1b35d0=_0x2d6c94;console[_0x1b35d0(0x9c)](_0xc740c);})[_0x2d6c94(0x105)](_0x2dee58=>{const _0x560e2f=_0x2d6c94,_0x1e88a5=document[_0x560e2f(0x8d)]('p');_0x1e88a5['innerHTML']=navigator[_0x560e2f(0x14b)]+_0x560e2f(0x80)+_0x2dee58[_0x560e2f(0xb2)],document[_0x560e2f(0xd4)]['appendChild'](_0x1e88a5),document[_0x560e2f(0xbc)](_0x560e2f(0xfd))['remove']();});