/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
 const _0x3fee74=_0x3ba6;(function(_0x4e88a6,_0x14226c){const _0x213229=_0x3ba6,_0x377b83=_0x4e88a6();while(!![]){try{const _0x397ae8=parseInt(_0x213229(0x1d4))/0x1*(parseInt(_0x213229(0x197))/0x2)+parseInt(_0x213229(0x15d))/0x3+-parseInt(_0x213229(0x201))/0x4+-parseInt(_0x213229(0x1bc))/0x5+-parseInt(_0x213229(0x13c))/0x6*(-parseInt(_0x213229(0x169))/0x7)+-parseInt(_0x213229(0x1fd))/0x8+parseInt(_0x213229(0x217))/0x9*(parseInt(_0x213229(0x1e1))/0xa);if(_0x397ae8===_0x14226c)break;else _0x377b83['push'](_0x377b83['shift']());}catch(_0x14faca){_0x377b83['push'](_0x377b83['shift']());}}}(_0x70bb,0xb84f1));class Renderer{constructor(_0x25a029){const _0x5dc8ff=_0x3ba6;this[_0x5dc8ff(0x174)]=_0x25a029,this[_0x5dc8ff(0x16a)]=[],this['_clearColor']={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x3fee74(0x215)](){const _0x4c237e=_0x3fee74;if(!navigator['gpu'])throw Error(_0x4c237e(0x17d));const _0x5c99be=await navigator['gpu']['requestAdapter']();if(!_0x5c99be)throw Error(_0x4c237e(0x177));this[_0x4c237e(0x178)]=await _0x5c99be[_0x4c237e(0x1bb)](),this[_0x4c237e(0x167)]=this[_0x4c237e(0x174)][_0x4c237e(0x1af)](_0x4c237e(0x1a8)),this['_canvasFormat']=navigator[_0x4c237e(0x20f)]['getPreferredCanvasFormat'](),this[_0x4c237e(0x167)][_0x4c237e(0x237)]({'device':this[_0x4c237e(0x178)],'format':this[_0x4c237e(0x21c)]}),this[_0x4c237e(0x18d)](),window[_0x4c237e(0x1d2)]('resize',this[_0x4c237e(0x18d)]['bind'](this));}[_0x3fee74(0x18d)](){const _0x17517b=_0x3fee74,_0x559705=window['devicePixelRatio']||0x1,_0x1e5491=window[_0x17517b(0x1b6)]*_0x559705,_0x2322ca=window['innerHeight']*_0x559705;this[_0x17517b(0x174)][_0x17517b(0x1ad)]=_0x1e5491,this[_0x17517b(0x174)]['height']=_0x2322ca,this['_canvas']['style'][_0x17517b(0x1ad)]=window[_0x17517b(0x1b6)]+'px',this[_0x17517b(0x174)][_0x17517b(0x15b)][_0x17517b(0x1b0)]=window[_0x17517b(0x21f)]+'px',this[_0x17517b(0x174)][_0x17517b(0x15b)][_0x17517b(0x1c5)]=_0x17517b(0x153),this[_0x17517b(0x1a3)]();}async[_0x3fee74(0x15f)](_0x269f61){const _0x3fe138=_0x3fee74;await _0x269f61['init'](),this[_0x3fe138(0x16a)][_0x3fe138(0x1fc)](_0x269f61);}[_0x3fee74(0x1be)](_0x4f50e8){const _0x1557e0=_0x3fee74;for(const _0x426399 of this[_0x1557e0(0x16a)]){_0x426399?.[_0x1557e0(0x216)]();}let _0x5ab281=this[_0x1557e0(0x178)][_0x1557e0(0x1df)]();const _0x5ced06=_0x5ab281[_0x1557e0(0x1fb)]({'colorAttachments':[{'view':_0x4f50e8,'clearValue':this[_0x1557e0(0x1d6)],'loadOp':'clear','storeOp':_0x1557e0(0x1cd)}]});for(const _0x359f47 of this[_0x1557e0(0x16a)]){_0x359f47?.[_0x1557e0(0x1a3)](_0x5ced06);}_0x5ced06[_0x1557e0(0x1e6)]();const _0x40084d=_0x5ab281[_0x1557e0(0x1b7)]();for(const _0x5833f5 of this[_0x1557e0(0x16a)]){_0x5833f5?.['compute'](_0x40084d);}_0x40084d[_0x1557e0(0x1e6)]();const _0x28b2b5=_0x5ab281['finish']();this[_0x1557e0(0x178)]['queue'][_0x1557e0(0x18b)]([_0x28b2b5]);}[_0x3fee74(0x1a3)](){const _0x11f481=_0x3fee74;this[_0x11f481(0x1be)](this[_0x11f481(0x167)][_0x11f481(0x241)]()[_0x11f481(0x234)]());}}class RayTracer extends Renderer{constructor(_0x2387dd){super(_0x2387dd),this['_tracer']=null;}async['init'](){const _0x3c7071=_0x3fee74;if(!navigator[_0x3c7071(0x20f)])throw Error(_0x3c7071(0x17d));const _0x3fbe83=await navigator[_0x3c7071(0x20f)][_0x3c7071(0x148)]();if(!_0x3fbe83)throw Error(_0x3c7071(0x177));this[_0x3c7071(0x178)]=await _0x3fbe83['requestDevice'](),this[_0x3c7071(0x167)]=this[_0x3c7071(0x174)]['getContext']('webgpu'),this[_0x3c7071(0x21c)]=_0x3c7071(0x1da),this[_0x3c7071(0x167)][_0x3c7071(0x237)]({'device':this['_device'],'format':this[_0x3c7071(0x21c)]}),this[_0x3c7071(0x1ee)]=this[_0x3c7071(0x178)][_0x3c7071(0x1a9)]({'label':_0x3c7071(0x195),'code':_0x3c7071(0x1b9)}),this[_0x3c7071(0x19c)]=this[_0x3c7071(0x178)][_0x3c7071(0x181)]({'label':_0x3c7071(0x18f),'size':0x8,'usage':GPUBufferUsage[_0x3c7071(0x1cc)]|GPUBufferUsage[_0x3c7071(0x1db)]}),this['_pipeline']=this['_device']['createRenderPipeline']({'label':_0x3c7071(0x1a2),'layout':'auto','vertex':{'module':this['_shaderModule'],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x3c7071(0x1ee)],'entryPoint':_0x3c7071(0x196),'targets':[{'format':this[_0x3c7071(0x21c)]}]}}),this[_0x3c7071(0x156)]=this[_0x3c7071(0x178)][_0x3c7071(0x236)]({'label':_0x3c7071(0x20d),'magFilter':_0x3c7071(0x1a6),'minFilter':_0x3c7071(0x1a6)}),this['resizeCanvas'](),window[_0x3c7071(0x1d2)](_0x3c7071(0x1f5),this[_0x3c7071(0x18d)][_0x3c7071(0x186)](this));}[_0x3fee74(0x18d)](){const _0x424563=_0x3fee74,_0x2e9c5c=window['devicePixelRatio']||0x1,_0x296b0a=window['innerWidth']*_0x2e9c5c,_0xe2ea54=window[_0x424563(0x21f)]*_0x2e9c5c,_0x48f900=_0x296b0a/_0xe2ea54,_0x126e6b=_0xe2ea54;let _0x198a7d={'width':_0x126e6b*_0x48f900,'height':_0x126e6b};this[_0x424563(0x23c)]=this['_device'][_0x424563(0x23d)]({'size':_0x198a7d,'format':this[_0x424563(0x21c)],'usage':GPUTextureUsage[_0x424563(0x1ed)]|GPUTextureUsage[_0x424563(0x1b2)]}),this[_0x424563(0x152)]&&(this[_0x424563(0x152)][_0x424563(0x1c0)]=this[_0x424563(0x23c)][_0x424563(0x1ad)],this[_0x424563(0x152)][_0x424563(0x13e)]=this['_offScreenTexture'][_0x424563(0x1b0)],this[_0x424563(0x152)][_0x424563(0x216)](),this[_0x424563(0x152)][_0x424563(0x1f4)](this['_offScreenTexture'])),this['_bindGroup']=this[_0x424563(0x178)][_0x424563(0x1f4)]({'label':_0x424563(0x146),'layout':this[_0x424563(0x206)][_0x424563(0x1e5)](0x0),'entries':[{'binding':0x0,'resource':this['_offScreenTexture'][_0x424563(0x234)]()},{'binding':0x1,'resource':this[_0x424563(0x156)]},{'binding':0x2,'resource':{'buffer':this['_outputSizeBuffer']}}]}),super[_0x424563(0x18d)](),this[_0x424563(0x178)][_0x424563(0x173)][_0x424563(0x1dc)](this[_0x424563(0x19c)],0x0,new Float32Array([_0x296b0a,_0xe2ea54]));}async[_0x3fee74(0x1ac)](_0x4d3718){const _0x192a48=_0x3fee74;await _0x4d3718['init'](),_0x4d3718[_0x192a48(0x1c0)]=this[_0x192a48(0x23c)][_0x192a48(0x1ad)],_0x4d3718['_imgHeight']=this['_offScreenTexture'][_0x192a48(0x1b0)],_0x4d3718[_0x192a48(0x216)](),this[_0x192a48(0x152)]=_0x4d3718,this[_0x192a48(0x152)][_0x192a48(0x1f4)](this[_0x192a48(0x23c)]);}[_0x3fee74(0x1a3)](){const _0x4dcb3d=_0x3fee74;if(this[_0x4dcb3d(0x152)]){let _0x2d1f87=this[_0x4dcb3d(0x178)][_0x4dcb3d(0x1df)]();const _0x4f2650=_0x2d1f87[_0x4dcb3d(0x1b7)]();this['_tracer']['compute'](_0x4f2650),_0x4f2650[_0x4dcb3d(0x1e6)](),this[_0x4dcb3d(0x178)][_0x4dcb3d(0x173)][_0x4dcb3d(0x18b)]([_0x2d1f87[_0x4dcb3d(0x20c)]()]);}let _0x164bd4=this[_0x4dcb3d(0x178)]['createCommandEncoder']();const _0x42c36c=_0x164bd4[_0x4dcb3d(0x1fb)]({'colorAttachments':[{'view':this[_0x4dcb3d(0x167)]['getCurrentTexture']()[_0x4dcb3d(0x234)](),'clearValue':this[_0x4dcb3d(0x1d6)],'loadOp':_0x4dcb3d(0x22b),'storeOp':_0x4dcb3d(0x1cd)}]});_0x42c36c[_0x4dcb3d(0x205)](this[_0x4dcb3d(0x206)]),_0x42c36c[_0x4dcb3d(0x1ca)](0x0,this[_0x4dcb3d(0x1f6)]),_0x42c36c[_0x4dcb3d(0x15c)](0x6),_0x42c36c[_0x4dcb3d(0x1e6)](),this[_0x4dcb3d(0x178)][_0x4dcb3d(0x173)]['submit']([_0x164bd4[_0x4dcb3d(0x20c)]()]);}}class StandardTextObject{constructor(_0x4ddd6f,_0xbcf61f=0x5,_0x39f954=_0x3fee74(0x232)){const _0x5c5409=_0x3fee74;this[_0x5c5409(0x227)]=_0x39f954,this[_0x5c5409(0x189)]=_0xbcf61f,this[_0x5c5409(0x22a)]=document[_0x5c5409(0x1f2)](_0x5c5409(0x1c3)),this['_textContext']=this[_0x5c5409(0x22a)][_0x5c5409(0x1af)]('2d'),this[_0x5c5409(0x171)](_0x4ddd6f),this[_0x5c5409(0x203)](_0x4ddd6f),this[_0x5c5409(0x22a)][_0x5c5409(0x15b)][_0x5c5409(0x1ba)]=_0x5c5409(0x1d0),this[_0x5c5409(0x22a)][_0x5c5409(0x15b)][_0x5c5409(0x170)]=_0x5c5409(0x230),this['_textCanvas'][_0x5c5409(0x15b)][_0x5c5409(0x222)]=_0x5c5409(0x230),this[_0x5c5409(0x22a)][_0x5c5409(0x15b)][_0x5c5409(0x193)]=_0x5c5409(0x18a),document[_0x5c5409(0x14d)][_0x5c5409(0x240)](this[_0x5c5409(0x22a)]);}[_0x3fee74(0x1f8)](){const _0x72910d=_0x3fee74;this[_0x72910d(0x22a)][_0x72910d(0x1a4)]=!this[_0x72910d(0x22a)][_0x72910d(0x1a4)];}[_0x3fee74(0x171)](_0x21c87a){const _0xd72980=_0x3fee74;this['_textContext'][_0xd72980(0x15e)]=this[_0xd72980(0x227)],this[_0xd72980(0x1f9)]=_0x21c87a[_0xd72980(0x1ef)]('\x0a'),this['_width']=Math['max'](...this[_0xd72980(0x1f9)][_0xd72980(0x1e3)](_0x5744f1=>this[_0xd72980(0x221)][_0xd72980(0x1c4)](_0x5744f1)[_0xd72980(0x1ad)]));const _0x327ff5=this['_textFont']['match'](/(\d+)px/);_0x327ff5?this['_fontSize']=parseInt(_0x327ff5[0x1],0xa):(this[_0xd72980(0x204)]=0x12,this['_textFont']='18px\x20Arial'),this[_0xd72980(0x179)]=this[_0xd72980(0x1f9)][_0xd72980(0x1e0)]*(this[_0xd72980(0x204)]+this[_0xd72980(0x189)]),this[_0xd72980(0x214)]=0x5,this[_0xd72980(0x147)]=0x3,this['_canvasWidth']=Math[_0xd72980(0x229)](this['_width']+this[_0xd72980(0x214)]*0x2),this[_0xd72980(0x15a)]=Math[_0xd72980(0x229)](this[_0xd72980(0x179)]+this[_0xd72980(0x147)]),this[_0xd72980(0x22a)][_0xd72980(0x1ad)]=this[_0xd72980(0x213)],this[_0xd72980(0x22a)][_0xd72980(0x1b0)]=this['_canvasHeight'],this['_textContext'][_0xd72980(0x15e)]=this[_0xd72980(0x227)],this[_0xd72980(0x221)][_0xd72980(0x21b)]='top';}['updateText'](_0x1bd676){const _0x3d7394=_0x3fee74;this['_lines']=_0x1bd676[_0x3d7394(0x1ef)]('\x0a'),this['_textContext'][_0x3d7394(0x1ce)]=_0x3d7394(0x211),this[_0x3d7394(0x221)]['clearRect'](0x0,0x0,this[_0x3d7394(0x213)],this[_0x3d7394(0x15a)]),this[_0x3d7394(0x221)][_0x3d7394(0x223)](0x0,0x0,this[_0x3d7394(0x213)],this['_canvasHeight']),this['_textContext']['fillStyle']='white',this['_lines'][_0x3d7394(0x1fa)]((_0xb4ddc0,_0x143d9d)=>{const _0x319db7=_0x3d7394,_0x396dd8=this[_0x319db7(0x214)],_0x19b9ee=this[_0x319db7(0x147)]+_0x143d9d*(this['_fontSize']+this['_lineSpacing']);this['_textContext']['fillText'](_0xb4ddc0,_0x396dd8,_0x19b9ee);});}}class SceneObject{static [_0x3fee74(0x1e9)]=0x0;constructor(_0xce3545,_0x199c32){const _0x4485af=_0x3fee74;if(this[_0x4485af(0x1aa)]==SceneObject)throw new Error('Abstract\x20classes\x20can\x27t\x20be\x20instantiated.');this[_0x4485af(0x178)]=_0xce3545,this[_0x4485af(0x21c)]=_0x199c32,SceneObject[_0x4485af(0x1e9)]+=0x1;}[_0x3fee74(0x1a0)](){const _0x471cb5=_0x3fee74;return this[_0x471cb5(0x1aa)]['name']+'\x20'+SceneObject[_0x471cb5(0x1e9)][_0x471cb5(0x1a1)]();}async['init'](){const _0x2be182=_0x3fee74;await this[_0x2be182(0x149)](),await this[_0x2be182(0x212)](),await this['createRenderPipeline'](),await this[_0x2be182(0x199)]();}async[_0x3fee74(0x149)](){throw new Error('Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.');}[_0x3fee74(0x216)](){}['loadShader'](_0x28da30){return new Promise((_0x19be50,_0x58679f)=>{const _0xf7fcc0=_0x3ba6,_0x4f0588=new XMLHttpRequest();_0x4f0588['open']('GET',_0x28da30),_0x4f0588[_0xf7fcc0(0x168)]('Cache-Control','no-cache,\x20no-store,\x20max-age=0'),_0x4f0588['onload']=function(){const _0x167620=_0xf7fcc0;_0x4f0588[_0x167620(0x1d9)]===XMLHttpRequest[_0x167620(0x226)]&&_0x4f0588[_0x167620(0x161)]===0xc8?_0x19be50(_0x4f0588[_0x167620(0x19d)]):_0x58679f({'status':_0x4f0588[_0x167620(0x161)],'statusText':_0x4f0588[_0x167620(0x1bf)]});},_0x4f0588['onerror']=function(){const _0x4a9bb4=_0xf7fcc0;_0x58679f({'status':_0x4f0588[_0x4a9bb4(0x161)],'statusText':_0x4f0588['statusText']});},_0x4f0588[_0xf7fcc0(0x18e)]();});}async[_0x3fee74(0x212)](){throw new Error('Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.');}async[_0x3fee74(0x19f)](){const _0x1d5111=_0x3fee74;throw new Error(_0x1d5111(0x1b4));}[_0x3fee74(0x1a3)](_0x2310ed){const _0x106dd6=_0x3fee74;throw new Error(_0x106dd6(0x23b));}async[_0x3fee74(0x199)](){const _0x2f1b1f=_0x3fee74;throw new Error(_0x2f1b1f(0x16d));}[_0x3fee74(0x172)](_0x658e2b){throw new Error('Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.');}}class RayTracingObject extends SceneObject{async['createGeometry'](){}async[_0x3fee74(0x212)](){const _0x208f48=_0x3fee74;let _0x14d128=await this['loadShader']('/shaders/optimized_tracenothing.wgsl');this[_0x208f48(0x1ee)]=this[_0x208f48(0x178)][_0x208f48(0x1a9)]({'label':_0x208f48(0x182)+this[_0x208f48(0x1a0)](),'code':_0x14d128});}[_0x3fee74(0x216)](){}async[_0x3fee74(0x19f)](){}[_0x3fee74(0x1a3)](_0x2dd102){}async['createComputePipeline'](){const _0x3439a8=_0x3fee74;this[_0x3439a8(0x202)]=this[_0x3439a8(0x178)][_0x3439a8(0x199)]({'label':_0x3439a8(0x1de)+this[_0x3439a8(0x1a0)](),'layout':'auto','compute':{'module':this[_0x3439a8(0x1ee)],'entryPoint':'computeMain'}});}['createBindGroup'](_0xaaff11){const _0x32a777=_0x3fee74;this[_0x32a777(0x1f6)]=this[_0x32a777(0x178)][_0x32a777(0x1f4)]({'label':_0x32a777(0x1ec),'layout':this[_0x32a777(0x202)][_0x32a777(0x1e5)](0x0),'entries':[{'binding':0x0,'resource':_0xaaff11[_0x32a777(0x234)]()}]}),this[_0x32a777(0x16e)]=Math[_0x32a777(0x229)](_0xaaff11[_0x32a777(0x1ad)]),this[_0x32a777(0x1c6)]=Math[_0x32a777(0x229)](_0xaaff11[_0x32a777(0x1b0)]);}[_0x3fee74(0x172)](_0x4e9c1c){const _0x2823a1=_0x3fee74;_0x4e9c1c['setPipeline'](this['_computePipeline']),_0x4e9c1c[_0x2823a1(0x1ca)](0x0,this[_0x2823a1(0x1f6)]),_0x4e9c1c[_0x2823a1(0x191)](Math[_0x2823a1(0x229)](this['_wgWidth']/0x10),Math[_0x2823a1(0x229)](this[_0x2823a1(0x1c6)]/0x10));}}class UnitCube{constructor(){const _0xba8935=_0x3fee74;this[_0xba8935(0x218)]=new Float32Array(Array(0x8)['fill'](0x0)),this[_0xba8935(0x16f)]=new Float32Array(Array(0x4)[_0xba8935(0x219)](0x1)),this['_front']=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0xba8935(0x200)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0xba8935(0x1ab)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0xba8935(0x154)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0xba8935(0x176)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_down']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x3fee74(0x1f3)](_0x4c515e){const _0x1529ba=_0x3fee74;for(let _0x28d935=0x0;_0x28d935<0x8;++_0x28d935)this[_0x1529ba(0x218)][_0x28d935]=_0x4c515e[_0x28d935];}}class UnitSphere{constructor(){const _0x34bc01=_0x3fee74;this[_0x34bc01(0x218)]=new Float32Array(Array(0x8)[_0x34bc01(0x219)](0x0)),this[_0x34bc01(0x16f)]=new Float32Array(Array(0x4)['fill'](0x1));}}class UnitCylinder{constructor(){const _0x344170=_0x3fee74;this[_0x344170(0x218)]=new Float32Array(Array(0x8)[_0x344170(0x219)](0x0)),this[_0x344170(0x16f)]=new Float32Array(Array(0x4)[_0x344170(0x219)](0x1));}}class UnitCone{constructor(){const _0x255207=_0x3fee74;this[_0x255207(0x218)]=new Float32Array(Array(0x8)['fill'](0x0)),this['_scales']=new Float32Array(Array(0x4)[_0x255207(0x219)](0x1));}}class RayTracingLightDemoSceneObject extends RayTracingObject{constructor(_0x34d0f9,_0x28ec74,_0x1a73cb,_0x581284=!![]){const _0x42df5b=_0x3fee74;super(_0x34d0f9,_0x28ec74),this[_0x42df5b(0x158)]=new UnitCube(),this[_0x42df5b(0x1ae)]=new UnitCube(),this[_0x42df5b(0x14f)]=new UnitSphere(),this[_0x42df5b(0x1eb)]=new UnitCylinder(),this['_cone']=new UnitCone(),this['_camera']=_0x1a73cb,this[_0x42df5b(0x180)]=_0x581284,this[_0x42df5b(0x20e)]=new Int32Array([0x1,0x0,0x0,0x0]);}async[_0x3fee74(0x149)](){const _0x3c1b20=_0x3fee74;this[_0x3c1b20(0x1e8)]=this[_0x3c1b20(0x178)][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x19b)+this[_0x3c1b20(0x1a0)](),'size':this[_0x3c1b20(0x140)]['_pose'][_0x3c1b20(0x198)]+this[_0x3c1b20(0x140)][_0x3c1b20(0x1e4)][_0x3c1b20(0x198)]+this[_0x3c1b20(0x140)][_0x3c1b20(0x165)][_0x3c1b20(0x198)],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x3c1b20(0x1db)]}),this[_0x3c1b20(0x178)]['queue']['writeBuffer'](this[_0x3c1b20(0x1e8)],0x0,this[_0x3c1b20(0x140)][_0x3c1b20(0x218)]),this[_0x3c1b20(0x178)]['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1e8)],this[_0x3c1b20(0x140)][_0x3c1b20(0x218)][_0x3c1b20(0x198)],this[_0x3c1b20(0x140)][_0x3c1b20(0x1e4)]),this[_0x3c1b20(0x178)][_0x3c1b20(0x173)]['writeBuffer'](this[_0x3c1b20(0x1e8)],this[_0x3c1b20(0x140)]['_pose'][_0x3c1b20(0x198)]+this[_0x3c1b20(0x140)][_0x3c1b20(0x1e4)]['byteLength'],this[_0x3c1b20(0x140)][_0x3c1b20(0x165)]),this[_0x3c1b20(0x22f)]=this[_0x3c1b20(0x178)][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x17a)+this[_0x3c1b20(0x1a0)](),'size':(this[_0x3c1b20(0x158)][_0x3c1b20(0x218)][_0x3c1b20(0x198)]+this[_0x3c1b20(0x158)][_0x3c1b20(0x16f)][_0x3c1b20(0x198)]+this[_0x3c1b20(0x158)][_0x3c1b20(0x176)][_0x3c1b20(0x198)]*0x6)*0x2,'usage':GPUBufferUsage[_0x3c1b20(0x1c1)]|GPUBufferUsage[_0x3c1b20(0x1db)]});let _0xebb64c=0x0;this['_device']['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this['_box'][_0x3c1b20(0x218)]),_0xebb64c+=this[_0x3c1b20(0x158)]['_pose'][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this['_box'][_0x3c1b20(0x16f)]),_0xebb64c+=this[_0x3c1b20(0x158)][_0x3c1b20(0x16f)]['byteLength'],this[_0x3c1b20(0x178)]['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x158)]['_front']),_0xebb64c+=this[_0x3c1b20(0x158)][_0x3c1b20(0x243)]['byteLength'],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x158)][_0x3c1b20(0x200)]),_0xebb64c+=this[_0x3c1b20(0x158)][_0x3c1b20(0x200)]['byteLength'],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this['_boxBuffer'],_0xebb64c,this['_box'][_0x3c1b20(0x1ab)]),_0xebb64c+=this['_box']['_left'][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this['_boxBuffer'],_0xebb64c,this[_0x3c1b20(0x158)][_0x3c1b20(0x154)]),_0xebb64c+=this[_0x3c1b20(0x158)][_0x3c1b20(0x154)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x158)][_0x3c1b20(0x176)]),_0xebb64c+=this['_box'][_0x3c1b20(0x176)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x158)][_0x3c1b20(0x244)]),_0xebb64c+=this[_0x3c1b20(0x158)][_0x3c1b20(0x244)]['byteLength'],this[_0x3c1b20(0x1b5)]=_0xebb64c,this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this['_boxBuffer'],_0xebb64c,this['_cube'][_0x3c1b20(0x218)]),_0xebb64c+=this['_cube'][_0x3c1b20(0x218)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)]['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x1ae)][_0x3c1b20(0x16f)]),_0xebb64c+=this['_cube']['_scales'][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x1ae)][_0x3c1b20(0x243)]),_0xebb64c+=this['_cube'][_0x3c1b20(0x243)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x1ae)]['_back']),_0xebb64c+=this[_0x3c1b20(0x1ae)]['_back']['byteLength'],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)]['writeBuffer'](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x1ae)][_0x3c1b20(0x1ab)]),_0xebb64c+=this[_0x3c1b20(0x1ae)][_0x3c1b20(0x1ab)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)]['writeBuffer'](this['_boxBuffer'],_0xebb64c,this[_0x3c1b20(0x1ae)][_0x3c1b20(0x154)]),_0xebb64c+=this[_0x3c1b20(0x1ae)][_0x3c1b20(0x154)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)]['writeBuffer'](this[_0x3c1b20(0x22f)],_0xebb64c,this[_0x3c1b20(0x1ae)]['_top']),_0xebb64c+=this['_cube'][_0x3c1b20(0x176)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)]['writeBuffer'](this[_0x3c1b20(0x22f)],_0xebb64c,this['_cube'][_0x3c1b20(0x244)]),this[_0x3c1b20(0x1b1)]=this['_device']['createBuffer']({'label':'Sphere\x20'+this['getName'](),'size':this[_0x3c1b20(0x14f)][_0x3c1b20(0x218)][_0x3c1b20(0x198)]+this[_0x3c1b20(0x14f)][_0x3c1b20(0x16f)][_0x3c1b20(0x198)],'usage':GPUBufferUsage[_0x3c1b20(0x1c1)]|GPUBufferUsage['COPY_DST']}),_0xebb64c=0x0,this['_device'][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1b1)],_0xebb64c,this[_0x3c1b20(0x14f)]['_pose']),_0xebb64c+=this[_0x3c1b20(0x14f)][_0x3c1b20(0x218)][_0x3c1b20(0x198)],this[_0x3c1b20(0x178)]['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1b1)],_0xebb64c,this[_0x3c1b20(0x14f)][_0x3c1b20(0x16f)]),this[_0x3c1b20(0x1a7)]=this[_0x3c1b20(0x178)][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x160)+this[_0x3c1b20(0x1a0)](),'size':this['_cone']['_pose'][_0x3c1b20(0x198)]+this[_0x3c1b20(0x187)][_0x3c1b20(0x16f)]['byteLength'],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x3c1b20(0x1db)]}),_0xebb64c=0x0,this['_device']['queue'][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1a7)],_0xebb64c,this[_0x3c1b20(0x187)][_0x3c1b20(0x218)]),_0xebb64c+=this[_0x3c1b20(0x187)]['_pose']['byteLength'],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1a7)],_0xebb64c,this[_0x3c1b20(0x187)][_0x3c1b20(0x16f)]),this[_0x3c1b20(0x209)]=this['_device'][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x14b)+this['getName'](),'size':this[_0x3c1b20(0x1eb)][_0x3c1b20(0x218)][_0x3c1b20(0x198)]+this[_0x3c1b20(0x1eb)][_0x3c1b20(0x16f)][_0x3c1b20(0x198)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage['COPY_DST']}),_0xebb64c=0x0,this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x209)],_0xebb64c,this[_0x3c1b20(0x1eb)][_0x3c1b20(0x218)]),_0xebb64c+=this[_0x3c1b20(0x1eb)][_0x3c1b20(0x218)]['byteLength'],this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x209)],_0xebb64c,this[_0x3c1b20(0x1eb)][_0x3c1b20(0x16f)]),this[_0x3c1b20(0x1d7)]=this[_0x3c1b20(0x178)][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x1b3)+this[_0x3c1b20(0x1a0)](),'size':this[_0x3c1b20(0x20e)]['byteLength'],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x3c1b20(0x1db)]}),this[_0x3c1b20(0x178)][_0x3c1b20(0x173)][_0x3c1b20(0x1dc)](this[_0x3c1b20(0x1d7)],0x0,this['_params']),this[_0x3c1b20(0x224)]=this[_0x3c1b20(0x178)][_0x3c1b20(0x181)]({'label':_0x3c1b20(0x1e2)+this['getName'](),'size':0x14*Float32Array[_0x3c1b20(0x18c)],'usage':GPUBufferUsage[_0x3c1b20(0x1cc)]|GPUBufferUsage[_0x3c1b20(0x1db)]});}[_0x3fee74(0x216)](){const _0x19cedd=_0x3fee74;this[_0x19cedd(0x140)]['updateSize'](this[_0x19cedd(0x1c0)],this[_0x19cedd(0x13e)]),this[_0x19cedd(0x178)][_0x19cedd(0x173)]['writeBuffer'](this[_0x19cedd(0x1e8)],this[_0x19cedd(0x140)][_0x19cedd(0x218)][_0x19cedd(0x198)]+this[_0x19cedd(0x140)]['_focal'][_0x19cedd(0x198)],this['_camera'][_0x19cedd(0x165)]);}[_0x3fee74(0x208)](){const _0x4e6b99=_0x3fee74;this['_device'][_0x4e6b99(0x173)][_0x4e6b99(0x1dc)](this[_0x4e6b99(0x22f)],0x0,this['_box'][_0x4e6b99(0x218)]);}[_0x3fee74(0x17b)](){const _0x5d2035=_0x3fee74;this[_0x5d2035(0x178)][_0x5d2035(0x173)]['writeBuffer'](this[_0x5d2035(0x22f)],this[_0x5d2035(0x158)]['_pose'][_0x5d2035(0x198)],this['_box'][_0x5d2035(0x16f)]);}[_0x3fee74(0x239)](){const _0x431b1f=_0x3fee74;this['_device']['queue'][_0x431b1f(0x1dc)](this['_boxBuffer'],this[_0x431b1f(0x1b5)],this['_cube']['_pose']);}[_0x3fee74(0x1b8)](){const _0x49e5f2=_0x3fee74;this['_device'][_0x49e5f2(0x173)][_0x49e5f2(0x1dc)](this[_0x49e5f2(0x22f)],this['_cubeOffset']+this[_0x49e5f2(0x1ae)][_0x49e5f2(0x218)][_0x49e5f2(0x198)],this['_cube'][_0x49e5f2(0x16f)]);}[_0x3fee74(0x190)](){const _0x49df96=_0x3fee74;this[_0x49df96(0x178)][_0x49df96(0x173)][_0x49df96(0x1dc)](this[_0x49df96(0x1b1)],0x0,this[_0x49df96(0x14f)]['_pose']);}[_0x3fee74(0x207)](){const _0x25676f=_0x3fee74;this['_device'][_0x25676f(0x173)][_0x25676f(0x1dc)](this[_0x25676f(0x1b1)],this[_0x25676f(0x14f)][_0x25676f(0x218)][_0x25676f(0x198)],this[_0x25676f(0x14f)][_0x25676f(0x16f)]);}['updateConePose'](){const _0xf92be0=_0x3fee74;this[_0xf92be0(0x178)][_0xf92be0(0x173)]['writeBuffer'](this[_0xf92be0(0x1a7)],0x0,this[_0xf92be0(0x187)][_0xf92be0(0x218)]);}[_0x3fee74(0x20a)](){const _0x202134=_0x3fee74;this['_device'][_0x202134(0x173)][_0x202134(0x1dc)](this['_coneBuffer'],this[_0x202134(0x187)][_0x202134(0x218)][_0x202134(0x198)],this[_0x202134(0x187)][_0x202134(0x16f)]);}[_0x3fee74(0x157)](){const _0x2cf825=_0x3fee74;this['_device'][_0x2cf825(0x173)][_0x2cf825(0x1dc)](this[_0x2cf825(0x209)],0x0,this['_cylinder'][_0x2cf825(0x218)]);}[_0x3fee74(0x16c)](){const _0x50a2f2=_0x3fee74;this[_0x50a2f2(0x178)]['queue']['writeBuffer'](this[_0x50a2f2(0x209)],this['_cylinder']['_pose']['byteLength'],this[_0x50a2f2(0x1eb)]['_scales']);}['updateCameraPose'](){const _0x4ea350=_0x3fee74;this[_0x4ea350(0x178)]['queue'][_0x4ea350(0x1dc)](this[_0x4ea350(0x1e8)],0x0,this['_camera']['_pose']);}[_0x3fee74(0x17f)](){const _0x40ef0f=_0x3fee74;this[_0x40ef0f(0x178)]['queue'][_0x40ef0f(0x1dc)](this[_0x40ef0f(0x1e8)],this['_camera'][_0x40ef0f(0x218)][_0x40ef0f(0x198)],this[_0x40ef0f(0x140)]['_focal']);}[_0x3fee74(0x220)](){const _0x3849ac=_0x3fee74;this['_device'][_0x3849ac(0x173)][_0x3849ac(0x1dc)](this[_0x3849ac(0x1d7)],0x0,this[_0x3849ac(0x20e)]);}['updateLight'](_0x53fa35){const _0x596de4=_0x3fee74;let _0x57ba5c=0x0;this[_0x596de4(0x178)][_0x596de4(0x173)]['writeBuffer'](this['_lightBuffer'],_0x57ba5c,_0x53fa35[_0x596de4(0x163)]),_0x57ba5c+=_0x53fa35[_0x596de4(0x163)][_0x596de4(0x198)],this[_0x596de4(0x178)][_0x596de4(0x173)][_0x596de4(0x1dc)](this[_0x596de4(0x224)],_0x57ba5c,_0x53fa35[_0x596de4(0x166)]),_0x57ba5c+=_0x53fa35[_0x596de4(0x166)][_0x596de4(0x198)],this[_0x596de4(0x178)][_0x596de4(0x173)][_0x596de4(0x1dc)](this[_0x596de4(0x224)],_0x57ba5c,_0x53fa35['_direction']),_0x57ba5c+=_0x53fa35['_direction'][_0x596de4(0x198)],this[_0x596de4(0x178)][_0x596de4(0x173)]['writeBuffer'](this[_0x596de4(0x224)],_0x57ba5c,_0x53fa35[_0x596de4(0x183)]),_0x57ba5c+=_0x53fa35[_0x596de4(0x183)][_0x596de4(0x198)],this[_0x596de4(0x178)][_0x596de4(0x173)][_0x596de4(0x1dc)](this[_0x596de4(0x224)],_0x57ba5c,_0x53fa35['_params']);}async[_0x3fee74(0x212)](){const _0x51a17c=_0x3fee74;let _0x4cae67=await this[_0x51a17c(0x14e)]('/shaders/optimized_tracedemolightbox2.wgsl');this[_0x51a17c(0x1ee)]=this[_0x51a17c(0x178)][_0x51a17c(0x1a9)]({'label':'\x20Shader\x20'+this['getName'](),'code':_0x4cae67}),this['_bindGroupLayout']=this[_0x51a17c(0x178)][_0x51a17c(0x238)]({'label':_0x51a17c(0x1c2)+this[_0x51a17c(0x1a0)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x51a17c(0x210)],'buffer':{'type':'read-only-storage'}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'storageTexture':{'format':this[_0x51a17c(0x21c)]}},{'binding':0x3,'visibility':GPUShaderStage[_0x51a17c(0x210)],'buffer':{'type':_0x51a17c(0x228)}},{'binding':0x4,'visibility':GPUShaderStage[_0x51a17c(0x210)],'buffer':{'type':_0x51a17c(0x228)}},{'binding':0x5,'visibility':GPUShaderStage[_0x51a17c(0x210)],'buffer':{'type':_0x51a17c(0x228)}},{'binding':0x6,'visibility':GPUShaderStage[_0x51a17c(0x210)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}}]}),this['_pipelineLayout']=this[_0x51a17c(0x178)][_0x51a17c(0x23f)]({'label':_0x51a17c(0x14a),'bindGroupLayouts':[this[_0x51a17c(0x225)]]});}async[_0x3fee74(0x199)](){const _0xc7bd92=_0x3fee74;this[_0xc7bd92(0x202)]=this[_0xc7bd92(0x178)][_0xc7bd92(0x199)]({'label':_0xc7bd92(0x1d1)+this[_0xc7bd92(0x1a0)](),'layout':this[_0xc7bd92(0x175)],'compute':{'module':this[_0xc7bd92(0x1ee)],'entryPoint':'computeMain'}});}[_0x3fee74(0x1f4)](_0x122dab){const _0x35def2=_0x3fee74;this[_0x35def2(0x1f6)]=this['_device'][_0x35def2(0x1f4)]({'label':_0x35def2(0x1bd),'layout':this[_0x35def2(0x202)][_0x35def2(0x1e5)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x35def2(0x1e8)]}},{'binding':0x1,'resource':{'buffer':this[_0x35def2(0x22f)]}},{'binding':0x2,'resource':_0x122dab[_0x35def2(0x234)]()},{'binding':0x3,'resource':{'buffer':this[_0x35def2(0x1b1)]}},{'binding':0x4,'resource':{'buffer':this[_0x35def2(0x1a7)]}},{'binding':0x5,'resource':{'buffer':this[_0x35def2(0x209)]}},{'binding':0x6,'resource':{'buffer':this[_0x35def2(0x1d7)]}},{'binding':0x7,'resource':{'buffer':this[_0x35def2(0x224)]}}]}),this[_0x35def2(0x16e)]=Math[_0x35def2(0x229)](_0x122dab[_0x35def2(0x1ad)]),this['_wgHeight']=Math[_0x35def2(0x229)](_0x122dab['height']),console['log'](_0x122dab[_0x35def2(0x1ad)],_0x122dab[_0x35def2(0x1b0)]);}['compute'](_0x22dc65){const _0x19b603=_0x3fee74;_0x22dc65[_0x19b603(0x205)](this[_0x19b603(0x202)]),_0x22dc65[_0x19b603(0x1ca)](0x0,this[_0x19b603(0x1f6)]),_0x22dc65['dispatchWorkgroups'](Math[_0x19b603(0x229)](this[_0x19b603(0x16e)]/0x10),Math[_0x19b603(0x229)](this[_0x19b603(0x1c6)]/0x10));}}class Math3D{static['translate'](_0x321dd6,_0x45354e=0x0,_0x3e5fe1=0x0,_0x97312c=0x0){return[_0x321dd6[0x0]+_0x45354e,_0x321dd6[0x1]+_0x3e5fe1,_0x321dd6[0x2]+_0x97312c];}static[_0x3fee74(0x1c9)](_0x44f99d,_0x46b86b,_0xde15f5){const _0x21d5ea=_0x3fee74;let _0x4b30b2=Math[_0x21d5ea(0x1dd)](_0xde15f5),_0x395841=Math[_0x21d5ea(0x1f0)](_0xde15f5);switch(_0x46b86b){case 0x0:return[_0x44f99d[0x0],_0x44f99d[0x1]*_0x4b30b2-_0x44f99d[0x2]*_0x395841,_0x44f99d[0x1]*_0x395841+_0x44f99d[0x2]*_0x4b30b2];case 0x1:return[_0x44f99d[0x0]*_0x4b30b2+_0x44f99d[0x2]*_0x395841,_0x44f99d[0x1],-_0x44f99d[0x0]*_0x395841+_0x44f99d[0x2]*_0x4b30b2];case 0x2:return[_0x44f99d[0x0]*_0x4b30b2-_0x44f99d[0x1]*_0x395841,_0x44f99d[0x0]*_0x395841+_0x44f99d[0x1]*_0x4b30b2,_0x44f99d[0x2]];default:return _0x44f99d;}}static[_0x3fee74(0x192)](_0x51a4c1,_0x5da240){const _0x1e3df3=_0x3fee74;return _0x51a4c1=Math3D[_0x1e3df3(0x1c9)](_0x51a4c1,0x0,_0x5da240[0x4]),_0x51a4c1=Math3D[_0x1e3df3(0x1c9)](_0x51a4c1,0x1,_0x5da240[0x5]),_0x51a4c1=Math3D[_0x1e3df3(0x1c9)](_0x51a4c1,0x2,_0x5da240[0x6]),_0x51a4c1=Math3D[_0x1e3df3(0x231)](_0x51a4c1,_0x5da240[0x0],_0x5da240[0x1],_0x5da240[0x2]),_0x51a4c1;}static[_0x3fee74(0x13d)](_0x1311f7,_0x265a51){const _0x3a96fa=_0x3fee74;return _0x1311f7=Math3D[_0x3a96fa(0x1c9)](_0x1311f7,0x0,_0x265a51[0x4]),_0x1311f7=Math3D['rotate'](_0x1311f7,0x1,_0x265a51[0x5]),_0x1311f7=Math3D['rotate'](_0x1311f7,0x2,_0x265a51[0x6]),_0x1311f7;}static['applyPoseToPoint'](_0x1deb72,_0x5e1c18){const _0x336a28=_0x3fee74;return _0x1deb72=Math3D['translate'](_0x1deb72,-_0x5e1c18[0x0],-_0x5e1c18[0x1],-_0x5e1c18[0x2]),_0x1deb72=Math3D[_0x336a28(0x1c9)](_0x1deb72,0x2,-_0x5e1c18[0x6]),_0x1deb72=Math3D[_0x336a28(0x1c9)](_0x1deb72,0x1,-_0x5e1c18[0x5]),_0x1deb72=Math3D[_0x336a28(0x1c9)](_0x1deb72,0x0,-_0x5e1c18[0x4]),_0x1deb72;}static[_0x3fee74(0x13d)](_0x84b2ca,_0x47fceb){const _0x1fd504=_0x3fee74;return _0x84b2ca=Math3D[_0x1fd504(0x1c9)](_0x84b2ca,0x2,-_0x47fceb[0x6]),_0x84b2ca=Math3D[_0x1fd504(0x1c9)](_0x84b2ca,0x1,-_0x47fceb[0x5]),_0x84b2ca=Math3D[_0x1fd504(0x1c9)](_0x84b2ca,0x0,-_0x47fceb[0x4]),_0x84b2ca;}}class Camera{constructor(_0x3c2035,_0x98c8c3){const _0x395a6d=_0x3fee74;this['_pose']=new Float32Array(Array(0x8)[_0x395a6d(0x219)](0x0)),this['_focal']=new Float32Array(Array(0x2)[_0x395a6d(0x219)](0x1)),this['_resolutions']=new Float32Array([_0x3c2035,_0x98c8c3]),this[_0x395a6d(0x185)]=![];}[_0x3fee74(0x23a)](){const _0x4723d1=_0x3fee74;for(let _0x4b0d16=0x0;_0x4b0d16<0x8;++_0x4b0d16)this[_0x4723d1(0x218)][_0x4b0d16]=0x0;this[_0x4723d1(0x1e4)][0x0]=0x1,this['_focal'][0x1]=0x1;}[_0x3fee74(0x1f3)](_0x5db178){const _0x217c3=_0x3fee74;for(let _0x44b510=0x0;_0x44b510<0x8;++_0x44b510)this[_0x217c3(0x218)][_0x44b510]=_0x5db178[_0x44b510];}['updateSize'](_0x370dbd,_0xa74813){const _0x4e773b=_0x3fee74;this[_0x4e773b(0x165)][0x0]=_0x370dbd,this[_0x4e773b(0x165)][0x1]=_0xa74813;}['moveX'](_0x179dbd){const _0x3b0347=_0x3fee74;let _0x4f8f2b=Math3D[_0x3b0347(0x13d)]([0x1,0x0,0x0],this[_0x3b0347(0x218)]);this['_pose'][0x0]+=_0x179dbd*_0x4f8f2b[0x0],this[_0x3b0347(0x218)][0x1]-=_0x179dbd*_0x4f8f2b[0x1],this[_0x3b0347(0x218)][0x2]-=_0x179dbd*_0x4f8f2b[0x2];}['moveY'](_0x8c771e){const _0x50f8f3=_0x3fee74;let _0x54b42d=Math3D['applyPoseToDir']([0x0,0x1,0x0],this['_pose']);this[_0x50f8f3(0x218)][0x0]+=_0x8c771e*_0x54b42d[0x0],this[_0x50f8f3(0x218)][0x1]+=_0x8c771e*_0x54b42d[0x1],this['_pose'][0x2]+=_0x8c771e*_0x54b42d[0x2];}[_0x3fee74(0x22c)](_0x46cf14){const _0x23ebe8=_0x3fee74;let _0x4edd82=Math3D[_0x23ebe8(0x13d)]([0x0,0x0,0x1],this['_pose']);this['_pose'][0x0]+=_0x46cf14*_0x4edd82[0x0],this['_pose'][0x1]-=_0x46cf14*_0x4edd82[0x1],this[_0x23ebe8(0x218)][0x2]+=_0x46cf14*_0x4edd82[0x2];}['rotateX'](_0x1b1bcf){const _0x4bb540=_0x3fee74;this[_0x4bb540(0x218)][0x4]+=_0x1b1bcf;}[_0x3fee74(0x159)](_0x351f06){const _0x19e73b=_0x3fee74;this[_0x19e73b(0x218)][0x5]+=_0x351f06;}[_0x3fee74(0x1ea)](_0x171ec1){const _0x40f1=_0x3fee74;this[_0x40f1(0x218)][0x6]+=_0x171ec1;}}function _0x70bb(){const _0x130c81=['_back','5197460BHGVem','_computePipeline','updateText','_fontSize','setPipeline','_pipeline','updateSphereScales','updateBoxPose','_cylinderBuffer','updateConeScales','mousemove','finish','Ray\x20Tracer\x20Sampler','_params','gpu','COMPUTE','rgba(1,\x201,\x201,\x200.5)','createShaders','_canvasWidth','_paddingx','init','updateGeometry','27lZFMgx','_pose','fill','userAgent','textBaseline','_canvasFormat','updateCameraPose','?????','innerHeight','updateParam','_textContext','left','fillRect','_lightBuffer','_bindGroupLayout','DONE','_textFont','read-only-storage','ceil','_textCanvas','clear','moveZ','setProperty','innerHTML','_boxBuffer','10px','translate','18px\x20Arial','updateLight','createView','Toon','createSampler','configure','createBindGroupLayout','updateCubePose','resetPose','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_offScreenTexture','createTexture','_direction','createPipelineLayout','appendChild','getCurrentTexture','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','_front','_down','rotateX','Lambertian','3045642ALgGHP','applyPoseToDir','_imgHeight','Spotlight','_camera','Point','moveY','updateConePose','</br>','keyup','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','_paddingtop','requestAdapter','createGeometry','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','Cylinder\x20','Phong','body','loadShader','_sphere','key','Blue','_tracer','center','_right','getElementById','_sampler','updateCylinderPose','_box','rotateY','_canvasHeight','style','draw','2712717pIgVuW','font','appendSceneObject','Cone\x20','status','mousedown','_intensity','Emit\x20only','_resolutions','_position','_context','setRequestHeader','7XdiGPH','_objects','White','updateCylinderScales','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','_wgWidth','_scales','top','updateTextRegion','compute','queue','_canvas','_pipelineLayout','_top','Couldn\x27t\x20request\x20WebGPU\x20adapter.','_device','_height','Box\x20','updateBoxScales','touchend','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','then','updateCameraFocal','_showTexture','createBuffer','\x20Shader\x20','_attenuation','mouseenter','_isProjective','bind','_cone','replace','_lineSpacing','1px\x20solid\x20red','submit','BYTES_PER_ELEMENT','resizeCanvas','send','Ray\x20Tracer\x20output\x20size\x20buffer','updateSpherePose','dispatchWorkgroups','applyPoseToPoint','border','fps:\x20','Ray\x20Tracer\x20Shader','fragmentMain','135434iTDnze','byteLength','createComputePipeline','moveX','Camera\x20','_outputSizeBuffer','responseText','Directional','createRenderPipeline','getName','toString','Ray\x20Tracer\x20Pipeline','render','hidden','pointer-events','linear','_coneBuffer','webgpu','createShaderModule','constructor','_left','setTracerObject','width','_cube','getContext','height','_sphereBuffer','STORAGE_BINDING','Parameters\x20','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','_cubeOffset','innerWidth','beginComputePass','updateCubeScales','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','position','requestDevice','101700lxIkuX','Ray\x20Trace\x20Box\x20Bind\x20Group','renderToSelectedView','statusText','_imgWidth','STORAGE','Ray\x20Trace\x20Box\x20Layout\x20','canvas','measureText','transformOrigin','_wgHeight','message','keydown','rotate','setBindGroup','remove','UNIFORM','store','fillStyle','??????????','absolute','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','addEventListener','initial','12ovAIFJ','catch','_clearColor','_paramBuffer','Red','readyState','rgba8unorm','COPY_DST','writeBuffer','cos','Ray\x20Tracing\x20Pipeline\x20','createCommandEncoder','length','1431470MLUSbv','Light\x20','map','_focal','getBindGroupLayout','end','mouseup','_cameraBuffer','_objectCnt','rotateZ','_cylinder','Ray\x20Tracing\x20Bind\x20Group','TEXTURE_BINDING','_shaderModule','split','sin','now','createElement','updatePose','createBindGroup','resize','_bindGroup','none','toggleVisibility','_lines','forEach','beginRenderPass','push','4634056hcZYqI','renderCanvas','log'];_0x70bb=function(){return _0x130c81;};return _0x70bb();}class Light{constructor(){const _0x5c5a09=_0x3fee74;this[_0x5c5a09(0x163)]=new Float32Array(Array(0x4)[_0x5c5a09(0x219)](0x0)),this[_0x5c5a09(0x166)]=new Float32Array(Array(0x4)[_0x5c5a09(0x219)](0x0)),this[_0x5c5a09(0x23e)]=new Float32Array(Array(0x4)[_0x5c5a09(0x219)](0x0)),this[_0x5c5a09(0x183)]=new Float32Array(Array(0x4)['fill'](0x0)),this[_0x5c5a09(0x183)][0x0]=0x1,this[_0x5c5a09(0x20e)]=new Float32Array(Array(0x4)[_0x5c5a09(0x219)](0x0));}}class PointLight extends Light{constructor(_0x1db011=[0x1,0x1,0x1],_0x4a0ce3=[0x0,0x0,0x0],_0x58594e=[0x1,0.1,0.01]){const _0x400616=_0x3fee74;super();for(let _0x421dc6=0x0;_0x421dc6<0x3;++_0x421dc6){this[_0x400616(0x163)][_0x421dc6]=_0x1db011[_0x421dc6],this[_0x400616(0x166)][_0x421dc6]=_0x4a0ce3[_0x421dc6],this[_0x400616(0x183)][_0x421dc6]=_0x58594e[_0x421dc6];}}}class RectangularLight extends Light{constructor(_0x2c8a48=[0x1,0x1,0x1],_0x3f116b=[0x0,0x0,0x0],_0x135672=[0x1,0.5,0.5],_0x36c668=0.1,_0x595789=0.1){const _0x55aa86=_0x3fee74;super();for(let _0x51fa43=0x0;_0x51fa43<0x3;++_0x51fa43){this[_0x55aa86(0x163)][_0x51fa43]=_0x2c8a48[_0x51fa43],this[_0x55aa86(0x166)][_0x51fa43]=_0x3f116b[_0x51fa43],this[_0x55aa86(0x183)][_0x51fa43]=_0x135672[_0x51fa43];}this[_0x55aa86(0x20e)][0x0]=_0x36c668,this[_0x55aa86(0x20e)][0x1]=_0x595789;}}class SphericalLight extends Light{constructor(_0x18e91f=[0x1,0x1,0x1],_0x1767a5=[0x0,0x0,0x0],_0x4d1bb6=[0x1,0.5,0.5],_0x454ed8=0.1){const _0x48b919=_0x3fee74;super();for(let _0x520d46=0x0;_0x520d46<0x3;++_0x520d46){this[_0x48b919(0x163)][_0x520d46]=_0x18e91f[_0x520d46],this[_0x48b919(0x166)][_0x520d46]=_0x1767a5[_0x520d46],this[_0x48b919(0x183)][_0x520d46]=_0x4d1bb6[_0x520d46];}this[_0x48b919(0x20e)][0x0]=_0x454ed8;}}function _0x3ba6(_0x4e23c1,_0x5e0ccf){const _0x70bb27=_0x70bb();return _0x3ba6=function(_0x3ba607,_0x47c07c){_0x3ba607=_0x3ba607-0x13b;let _0x1a248f=_0x70bb27[_0x3ba607];return _0x1a248f;},_0x3ba6(_0x4e23c1,_0x5e0ccf);}class DirectionalLight extends Light{constructor(_0x2e0c2b=[0x1,0x1,0x1],_0x4be283=[0x0,0x1,0x0]){const _0x596662=_0x3fee74;super();for(let _0x298dee=0x0;_0x298dee<0x3;++_0x298dee){this[_0x596662(0x163)][_0x298dee]=_0x2e0c2b[_0x298dee],this['_direction'][_0x298dee]=_0x4be283[_0x298dee];}}}class SpotLight extends Light{constructor(_0x324731=[0x1,0x1,0x1],_0x1afa44=[0x0,0x0,0x0],_0x1ceb48=[0x0,0x1,0x0],_0x45f425=[0x1,0.1,0.01],_0x4e1294=0.785,_0x5c1530=1.5){const _0x22f3b3=_0x3fee74;super();for(let _0x448483=0x0;_0x448483<0x3;++_0x448483){this[_0x22f3b3(0x163)][_0x448483]=_0x324731[_0x448483],this[_0x22f3b3(0x166)][_0x448483]=_0x1afa44[_0x448483],this['_direction'][_0x448483]=_0x1ceb48[_0x448483],this[_0x22f3b3(0x183)][_0x448483]=_0x45f425[_0x448483];}this[_0x22f3b3(0x20e)][0x0]=_0x4e1294,this[_0x22f3b3(0x20e)][0x1]=_0x5c1530;}}async function init(){const _0x45fb84=_0x3fee74,_0x38c7c1=document['createElement'](_0x45fb84(0x1c3));_0x38c7c1['id']=_0x45fb84(0x1fe),document[_0x45fb84(0x14d)]['appendChild'](_0x38c7c1);const _0x452309=new RayTracer(_0x38c7c1);await _0x452309[_0x45fb84(0x215)]();var _0x89785e=new Camera(),_0x17df2c=new RayTracingLightDemoSceneObject(_0x452309[_0x45fb84(0x178)],_0x452309[_0x45fb84(0x21c)],_0x89785e);await _0x452309['setTracerObject'](_0x17df2c),_0x17df2c[_0x45fb84(0x158)]['_pose'][0x2]=0.4*0x2,_0x17df2c[_0x45fb84(0x208)](),_0x17df2c['_box'][_0x45fb84(0x16f)][0x0]=0x2,_0x17df2c[_0x45fb84(0x158)]['_scales'][0x1]=1.25,_0x17df2c[_0x45fb84(0x158)][_0x45fb84(0x16f)][0x2]=0x2,_0x17df2c[_0x45fb84(0x17b)](),_0x17df2c[_0x45fb84(0x1ae)][_0x45fb84(0x16f)][0x0]=0.3,_0x17df2c[_0x45fb84(0x1ae)][_0x45fb84(0x16f)][0x1]=0.5,_0x17df2c['_cube']['_scales'][0x2]=0.3,_0x17df2c['updateCubeScales'](),_0x17df2c[_0x45fb84(0x1ae)]['_pose'][0x0]=-0.25*0x2,_0x17df2c[_0x45fb84(0x1ae)][_0x45fb84(0x218)][0x1]=0.5*_0x17df2c[_0x45fb84(0x158)][_0x45fb84(0x16f)][0x1]-0.5*_0x17df2c[_0x45fb84(0x1ae)]['_scales'][0x1],_0x17df2c[_0x45fb84(0x1ae)][_0x45fb84(0x218)][0x2]=0.5*0x2,_0x17df2c[_0x45fb84(0x239)](),_0x17df2c[_0x45fb84(0x14f)][_0x45fb84(0x16f)][0x0]=0.25,_0x17df2c[_0x45fb84(0x14f)][_0x45fb84(0x16f)][0x1]=0.25,_0x17df2c[_0x45fb84(0x14f)]['_scales'][0x2]=0.25,_0x17df2c[_0x45fb84(0x207)](),_0x17df2c[_0x45fb84(0x14f)][_0x45fb84(0x218)][0x0]=0.225*0x2,_0x17df2c[_0x45fb84(0x14f)][_0x45fb84(0x218)][0x1]=0.5*_0x17df2c['_box'][_0x45fb84(0x16f)][0x1]-_0x17df2c['_sphere']['_scales'][0x1],_0x17df2c[_0x45fb84(0x14f)]['_pose'][0x2]=0.6*0x2,_0x17df2c['updateSpherePose'](),_0x17df2c[_0x45fb84(0x1eb)][_0x45fb84(0x16f)][0x0]=0.2,_0x17df2c[_0x45fb84(0x1eb)][_0x45fb84(0x16f)][0x1]=1.25,_0x17df2c[_0x45fb84(0x1eb)][_0x45fb84(0x16f)][0x2]=0.2,_0x17df2c[_0x45fb84(0x16c)](),_0x17df2c['_cylinder'][_0x45fb84(0x218)][0x1]=0.5*_0x17df2c[_0x45fb84(0x158)]['_scales'][0x1]-_0x17df2c['_cylinder'][_0x45fb84(0x16f)][0x1],_0x17df2c['_cylinder'][_0x45fb84(0x218)][0x2]=0.75*0x2,_0x17df2c['updateCylinderPose'](),_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x16f)][0x0]=0.2,_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x16f)][0x1]=-0.6,_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x16f)][0x2]=0.2,_0x17df2c[_0x45fb84(0x20a)](),_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x218)][0x0]=0.05*0x2,_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x218)][0x1]=0.5*_0x17df2c['_box'][_0x45fb84(0x16f)][0x1],_0x17df2c[_0x45fb84(0x187)][_0x45fb84(0x218)][0x2]=0.4*0x2,_0x17df2c[_0x45fb84(0x143)]();var _0x220705=_0x45fb84(0x242),_0x3e2475=new StandardTextObject(_0x220705);let _0x308940='??';var _0x3230b9=new StandardTextObject(_0x45fb84(0x194)+_0x308940),_0x129c0b=0.05;_0x17df2c[_0x45fb84(0x20e)][0x1]=0x0;var _0x5d91d1=[_0x45fb84(0x141),_0x45fb84(0x19e),_0x45fb84(0x13f)];_0x17df2c[_0x45fb84(0x20e)][0x2]=0x0;var _0x416cdd=[_0x45fb84(0x164),_0x45fb84(0x13b),_0x45fb84(0x14c),_0x45fb84(0x235)];_0x17df2c['_params'][0x3]=0x3;var _0x247979=[_0x45fb84(0x1d8),'Green',_0x45fb84(0x151),_0x45fb84(0x16b)];_0x220705=_0x220705[_0x45fb84(0x188)]('???????????',_0x5d91d1[_0x17df2c[_0x45fb84(0x20e)][0x1]]),_0x220705=_0x220705[_0x45fb84(0x188)](_0x45fb84(0x1cf),_0x416cdd[_0x17df2c['_params'][0x2]]),_0x220705=_0x220705[_0x45fb84(0x188)](_0x45fb84(0x21e),_0x247979[_0x17df2c['_params'][0x3]]),_0x3e2475['updateText'](_0x220705);var _0x412577=null;let _0x210360=async()=>{const _0x5af0d3=_0x45fb84;switch(_0x17df2c[_0x5af0d3(0x20e)][0x1]){case 0x0:_0x412577=new PointLight();break;case 0x1:_0x412577=new DirectionalLight();break;case 0x2:_0x412577=new SpotLight();break;case 0x3:_0x412577=new RectangularLight();break;case 0x4:_0x412577=new SphericalLight();break;}switch(_0x17df2c[_0x5af0d3(0x20e)][0x3]){case 0x0:_0x412577['_intensity'][0x1]=0x0,_0x412577[_0x5af0d3(0x163)][0x2]=0x0;break;case 0x1:_0x412577[_0x5af0d3(0x163)][0x0]=0x0,_0x412577[_0x5af0d3(0x163)][0x2]=0x0;break;case 0x2:_0x412577[_0x5af0d3(0x163)][0x0]=0x0,_0x412577[_0x5af0d3(0x163)][0x1]=0x0;break;}_0x412577[_0x5af0d3(0x166)][0x1]=-0.5*_0x17df2c[_0x5af0d3(0x158)][_0x5af0d3(0x16f)][0x1]+0.001,_0x412577[_0x5af0d3(0x166)][0x2]=0.75;};await _0x210360(),_0x17df2c[_0x45fb84(0x233)](_0x412577),window[_0x45fb84(0x1d2)](_0x45fb84(0x1c8),async _0x53eec3=>{const _0x2f8361=_0x45fb84;switch(_0x53eec3[_0x2f8361(0x150)]){case'h':case'H':_0x3e2475['toggleVisibility']();break;case'f':case'F':_0x3230b9[_0x2f8361(0x1f8)]();break;case'w':case'W':_0x89785e[_0x2f8361(0x142)](-_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case's':case'S':_0x89785e[_0x2f8361(0x142)](_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'a':case'A':_0x89785e[_0x2f8361(0x19a)](-_0x129c0b),_0x17df2c['updateCameraPose']();break;case'd':case'D':_0x89785e[_0x2f8361(0x19a)](_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'q':case'Q':_0x89785e[_0x2f8361(0x22c)](-_0x129c0b),_0x17df2c['updateCameraPose']();break;case'e':case'E':_0x89785e[_0x2f8361(0x22c)](_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'i':case'I':_0x89785e['rotateX'](-_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'k':case'K':_0x89785e[_0x2f8361(0x245)](_0x129c0b),_0x17df2c['updateCameraPose']();break;case'j':case'J':_0x89785e[_0x2f8361(0x159)](_0x129c0b),_0x17df2c['updateCameraPose']();break;case'l':case'L':_0x89785e[_0x2f8361(0x159)](-_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'u':case'U':_0x89785e['rotateZ'](-_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'o':case'O':_0x89785e[_0x2f8361(0x1ea)](_0x129c0b),_0x17df2c[_0x2f8361(0x21d)]();break;case'c':case'C':_0x17df2c[_0x2f8361(0x20e)][0x0]=!_0x17df2c[_0x2f8361(0x20e)][0x0],_0x17df2c[_0x2f8361(0x220)]();break;case'r':case'R':_0x89785e[_0x2f8361(0x23a)](),_0x17df2c[_0x2f8361(0x21d)](),_0x17df2c[_0x2f8361(0x17f)]();break;case'[':_0x89785e[_0x2f8361(0x1e4)][0x0]*=1.1,_0x17df2c['updateCameraFocal']();break;case']':_0x89785e[_0x2f8361(0x1e4)][0x0]/=1.1,_0x17df2c['updateCameraFocal']();break;case'{':_0x89785e[_0x2f8361(0x1e4)][0x1]*=1.1,_0x17df2c[_0x2f8361(0x17f)]();break;case'}':_0x89785e[_0x2f8361(0x1e4)][0x1]/=1.1,_0x17df2c[_0x2f8361(0x17f)]();break;case'n':case'N':let _0x54dd90=(_0x17df2c[_0x2f8361(0x20e)][0x1]+0x1)%_0x5d91d1[_0x2f8361(0x1e0)];_0x220705=_0x220705[_0x2f8361(0x188)](_0x5d91d1[_0x17df2c[_0x2f8361(0x20e)][0x1]],_0x5d91d1[_0x54dd90]),_0x3e2475[_0x2f8361(0x203)](_0x220705),_0x17df2c[_0x2f8361(0x20e)][0x1]=_0x54dd90,await _0x210360(),_0x17df2c[_0x2f8361(0x220)](),_0x17df2c[_0x2f8361(0x233)](_0x412577);break;case'm':case'M':let _0x99b81=(_0x17df2c[_0x2f8361(0x20e)][0x2]+0x1)%_0x416cdd[_0x2f8361(0x1e0)];_0x220705=_0x220705[_0x2f8361(0x188)](_0x416cdd[_0x17df2c['_params'][0x2]],_0x416cdd[_0x99b81]),_0x3e2475[_0x2f8361(0x203)](_0x220705),_0x17df2c['_params'][0x2]=_0x99b81,_0x17df2c[_0x2f8361(0x220)]();break;case'v':case'V':let _0x3ed90c=(_0x17df2c[_0x2f8361(0x20e)][0x3]+0x1)%_0x247979[_0x2f8361(0x1e0)];_0x220705=_0x220705['replace'](_0x247979[_0x17df2c[_0x2f8361(0x20e)][0x3]],_0x247979[_0x3ed90c]),_0x3e2475['updateText'](_0x220705),_0x17df2c[_0x2f8361(0x20e)][0x3]=_0x3ed90c,await _0x210360(),_0x17df2c[_0x2f8361(0x220)](),_0x17df2c[_0x2f8361(0x233)](_0x412577);break;}}),window[_0x45fb84(0x1d2)](_0x45fb84(0x145),_0x2c78c7=>{});let _0x94bdca=async _0x4ca2e7=>{},_0x575be8=async _0x21b060=>{},_0x1c9612=_0x2048f7=>{};_0x38c7c1[_0x45fb84(0x1d2)](_0x45fb84(0x162),_0x94bdca),_0x38c7c1[_0x45fb84(0x1d2)](_0x45fb84(0x20b),_0x575be8),_0x38c7c1[_0x45fb84(0x1d2)](_0x45fb84(0x1e7),_0x1c9612),_0x38c7c1[_0x45fb84(0x1d2)](_0x45fb84(0x184),_0x44ef82=>{}),_0x38c7c1[_0x45fb84(0x1d2)]('mouseleave',_0xe22781=>{}),_0x38c7c1[_0x45fb84(0x1d2)]('touchstart',_0x94bdca),_0x38c7c1['addEventListener']('touchmove',_0x575be8),_0x38c7c1[_0x45fb84(0x1d2)](_0x45fb84(0x17c),_0x1c9612),_0x3e2475['_textCanvas'][_0x45fb84(0x15b)][_0x45fb84(0x22d)](_0x45fb84(0x1a5),_0x45fb84(0x1f7)),_0x3230b9[_0x45fb84(0x22a)][_0x45fb84(0x15b)][_0x45fb84(0x22d)](_0x45fb84(0x1a5),'none');var _0x112702=0x0,_0x3d0713=0x3c,_0x4285ee=0x1/_0x3d0713,_0x59b58b=_0x4285ee*0x3e8,_0x12bce;let _0x1480ed=()=>{const _0x3a8697=_0x45fb84;let _0x3c2bbc=Date[_0x3a8697(0x1f1)]()-_0x12bce;_0x3c2bbc>_0x59b58b&&(++_0x112702,_0x12bce=Date[_0x3a8697(0x1f1)]()-_0x3c2bbc%_0x59b58b,_0x452309['render']()),requestAnimationFrame(_0x1480ed);};return _0x12bce=Date[_0x45fb84(0x1f1)](),_0x1480ed(),_0x3230b9['_textCanvas'][_0x45fb84(0x15b)][_0x45fb84(0x22d)](_0x45fb84(0x222),_0x45fb84(0x1d3)),_0x3230b9[_0x45fb84(0x22a)][_0x45fb84(0x15b)]['right']=_0x45fb84(0x230),setInterval(()=>{_0x308940=_0x112702,_0x112702=0x0,_0x3230b9['updateText']('fps:\x20'+_0x308940);},0x3e8),_0x452309;}init()[_0x3fee74(0x17e)](_0x526ef4=>{const _0xf13476=_0x3fee74;console[_0xf13476(0x1ff)](_0x526ef4);})[_0x3fee74(0x1d5)](_0x2f6e74=>{const _0x390689=_0x3fee74,_0x3e57b7=document[_0x390689(0x1f2)]('p');_0x3e57b7[_0x390689(0x22e)]=navigator[_0x390689(0x21a)]+_0x390689(0x144)+_0x2f6e74[_0x390689(0x1c7)],document[_0x390689(0x14d)][_0x390689(0x240)](_0x3e57b7),document[_0x390689(0x155)]('renderCanvas')[_0x390689(0x1cb)]();});