/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
 const _0x4ec263=_0x519c;(function(_0x2776a1,_0x7735ff){const _0x5cd14e=_0x519c,_0x4e9943=_0x2776a1();while(!![]){try{const _0x15a6d9=-parseInt(_0x5cd14e(0x13a))/0x1+parseInt(_0x5cd14e(0x163))/0x2+-parseInt(_0x5cd14e(0xcc))/0x3*(-parseInt(_0x5cd14e(0x150))/0x4)+parseInt(_0x5cd14e(0x156))/0x5*(-parseInt(_0x5cd14e(0xcd))/0x6)+-parseInt(_0x5cd14e(0x1af))/0x7*(-parseInt(_0x5cd14e(0x19c))/0x8)+-parseInt(_0x5cd14e(0x109))/0x9+parseInt(_0x5cd14e(0xd1))/0xa;if(_0x15a6d9===_0x7735ff)break;else _0x4e9943['push'](_0x4e9943['shift']());}catch(_0x4269b9){_0x4e9943['push'](_0x4e9943['shift']());}}}(_0x29f6,0xf14f5));class Renderer{constructor(_0x143a41){const _0x4d7115=_0x519c;this[_0x4d7115(0x153)]=_0x143a41,this[_0x4d7115(0x15c)]=[],this[_0x4d7115(0x178)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x4ec263(0x168)](){const _0x16fc35=_0x4ec263;if(!navigator[_0x16fc35(0x1ae)])throw Error(_0x16fc35(0x129));const _0xb70350=await navigator[_0x16fc35(0x1ae)][_0x16fc35(0x1a3)]();if(!_0xb70350)throw Error(_0x16fc35(0x189));this[_0x16fc35(0x187)]=await _0xb70350[_0x16fc35(0xf3)](),this[_0x16fc35(0xfd)]=this['_canvas'][_0x16fc35(0x119)](_0x16fc35(0xe3)),this['_canvasFormat']=navigator['gpu'][_0x16fc35(0x11b)](),this[_0x16fc35(0xfd)][_0x16fc35(0x101)]({'device':this['_device'],'format':this[_0x16fc35(0xeb)]}),this['resizeCanvas'](),window[_0x16fc35(0x1b3)](_0x16fc35(0x1ba),this[_0x16fc35(0x14d)]['bind'](this));}[_0x4ec263(0x14d)](){const _0x27378c=_0x4ec263,_0x3a9bc2=window[_0x27378c(0x159)]||0x1,_0xb8682f=window[_0x27378c(0x15d)]*_0x3a9bc2,_0x2def27=window[_0x27378c(0x132)]*_0x3a9bc2;this[_0x27378c(0x153)][_0x27378c(0x18f)]=_0xb8682f,this[_0x27378c(0x153)]['height']=_0x2def27,this['_canvas']['style'][_0x27378c(0x18f)]=window['innerWidth']+'px',this['_canvas']['style'][_0x27378c(0x112)]=window['innerHeight']+'px',this[_0x27378c(0x153)][_0x27378c(0x138)][_0x27378c(0x13b)]=_0x27378c(0xda),this[_0x27378c(0x192)]();}async[_0x4ec263(0xfe)](_0x240b9e){const _0x3c6137=_0x4ec263;await _0x240b9e[_0x3c6137(0x168)](),this[_0x3c6137(0x15c)][_0x3c6137(0x198)](_0x240b9e);}[_0x4ec263(0x196)](_0x2b6e54){const _0x1d4f54=_0x4ec263;for(const _0xeaf584 of this[_0x1d4f54(0x15c)]){_0xeaf584?.[_0x1d4f54(0x105)]();}let _0x1f8e41=this[_0x1d4f54(0x187)]['createCommandEncoder']();const _0x55d576=_0x1f8e41[_0x1d4f54(0x1a4)]({'colorAttachments':[{'view':_0x2b6e54,'clearValue':this[_0x1d4f54(0x178)],'loadOp':_0x1d4f54(0x184),'storeOp':_0x1d4f54(0x173)}]});for(const _0xe9cef2 of this[_0x1d4f54(0x15c)]){_0xe9cef2?.[_0x1d4f54(0x192)](_0x55d576);}_0x55d576['end']();const _0x59f722=_0x1f8e41['beginComputePass']();for(const _0x293a71 of this['_objects']){_0x293a71?.[_0x1d4f54(0x128)](_0x59f722);}_0x59f722['end']();const _0x3f40f7=_0x1f8e41[_0x1d4f54(0x162)]();this[_0x1d4f54(0x187)][_0x1d4f54(0x1cc)][_0x1d4f54(0x17c)]([_0x3f40f7]);}[_0x4ec263(0x192)](){const _0x915e72=_0x4ec263;this['renderToSelectedView'](this['_context'][_0x915e72(0x1b1)]()[_0x915e72(0x137)]());}}class RayTracer extends Renderer{constructor(_0x1bac38){const _0x585a59=_0x4ec263;super(_0x1bac38),this[_0x585a59(0x111)]=null;}async['init'](){const _0x267f7d=_0x4ec263;if(!navigator[_0x267f7d(0x1ae)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x5e9bb1=await navigator[_0x267f7d(0x1ae)]['requestAdapter']();if(!_0x5e9bb1)throw Error(_0x267f7d(0x189));this[_0x267f7d(0x187)]=await _0x5e9bb1[_0x267f7d(0xf3)](),this[_0x267f7d(0xfd)]=this[_0x267f7d(0x153)][_0x267f7d(0x119)](_0x267f7d(0xe3)),this['_canvasFormat']=_0x267f7d(0x116),this[_0x267f7d(0xfd)][_0x267f7d(0x101)]({'device':this['_device'],'format':this['_canvasFormat']}),this[_0x267f7d(0x134)]=this[_0x267f7d(0x187)][_0x267f7d(0x1b5)]({'label':_0x267f7d(0x121),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this['_outputSizeBuffer']=this['_device'][_0x267f7d(0x171)]({'label':_0x267f7d(0x149),'size':0x8,'usage':GPUBufferUsage[_0x267f7d(0xe8)]|GPUBufferUsage[_0x267f7d(0x1b7)]}),this[_0x267f7d(0x141)]=this[_0x267f7d(0x187)][_0x267f7d(0x130)]({'label':_0x267f7d(0x1bb),'layout':_0x267f7d(0xd6),'vertex':{'module':this[_0x267f7d(0x134)],'entryPoint':_0x267f7d(0xc9)},'fragment':{'module':this[_0x267f7d(0x134)],'entryPoint':'fragmentMain','targets':[{'format':this[_0x267f7d(0xeb)]}]}}),this[_0x267f7d(0x190)]=this[_0x267f7d(0x187)][_0x267f7d(0x18d)]({'label':_0x267f7d(0x1ca),'magFilter':_0x267f7d(0xd2),'minFilter':_0x267f7d(0xd2)}),this['resizeCanvas'](),window[_0x267f7d(0x1b3)](_0x267f7d(0x1ba),this['resizeCanvas'][_0x267f7d(0x100)](this));}[_0x4ec263(0x14d)](){const _0x425359=_0x4ec263,_0x4e6575=window[_0x425359(0x159)]||0x1,_0x561c7d=window[_0x425359(0x15d)]*_0x4e6575,_0x398120=window[_0x425359(0x132)]*_0x4e6575,_0x45b41c=_0x561c7d/_0x398120,_0x19819a=_0x398120;let _0x24e66e={'width':_0x19819a*_0x45b41c,'height':_0x19819a};this[_0x425359(0x10e)]=this[_0x425359(0x187)][_0x425359(0x1c1)]({'size':_0x24e66e,'format':this[_0x425359(0xeb)],'usage':GPUTextureUsage[_0x425359(0x158)]|GPUTextureUsage[_0x425359(0x1a6)]}),this[_0x425359(0x111)]&&(this[_0x425359(0x111)][_0x425359(0x16b)]=this[_0x425359(0x10e)]['width'],this[_0x425359(0x111)][_0x425359(0x154)]=this[_0x425359(0x10e)][_0x425359(0x112)],this[_0x425359(0x111)][_0x425359(0x105)](),this[_0x425359(0x111)]['createBindGroup'](this[_0x425359(0x10e)])),this[_0x425359(0x19a)]=this[_0x425359(0x187)]['createBindGroup']({'label':_0x425359(0x103),'layout':this['_pipeline'][_0x425359(0xca)](0x0),'entries':[{'binding':0x0,'resource':this[_0x425359(0x10e)]['createView']()},{'binding':0x1,'resource':this['_sampler']},{'binding':0x2,'resource':{'buffer':this[_0x425359(0xd5)]}}]}),super[_0x425359(0x14d)](),this[_0x425359(0x187)][_0x425359(0x1cc)][_0x425359(0x1c2)](this[_0x425359(0xd5)],0x0,new Float32Array([_0x561c7d,_0x398120]));}async['setTracerObject'](_0x4f2248){const _0x5af854=_0x4ec263;await _0x4f2248[_0x5af854(0x168)](),_0x4f2248['_imgWidth']=this[_0x5af854(0x10e)][_0x5af854(0x18f)],_0x4f2248[_0x5af854(0x154)]=this['_offScreenTexture'][_0x5af854(0x112)],_0x4f2248[_0x5af854(0x105)](),this[_0x5af854(0x111)]=_0x4f2248,this[_0x5af854(0x111)][_0x5af854(0xd9)](this[_0x5af854(0x10e)]);}[_0x4ec263(0x192)](){const _0x1da57e=_0x4ec263;if(this[_0x1da57e(0x111)]){let _0x12bc62=this['_device'][_0x1da57e(0x1c8)]();const _0x3ee66d=_0x12bc62[_0x1da57e(0x17d)]();this[_0x1da57e(0x111)][_0x1da57e(0x128)](_0x3ee66d),_0x3ee66d[_0x1da57e(0xe1)](),this['_device']['queue'][_0x1da57e(0x17c)]([_0x12bc62[_0x1da57e(0x162)]()]);}let _0x566e6e=this[_0x1da57e(0x187)]['createCommandEncoder']();const _0x27762f=_0x566e6e[_0x1da57e(0x1a4)]({'colorAttachments':[{'view':this[_0x1da57e(0xfd)][_0x1da57e(0x1b1)]()[_0x1da57e(0x137)](),'clearValue':this[_0x1da57e(0x178)],'loadOp':_0x1da57e(0x184),'storeOp':'store'}]});_0x27762f['setPipeline'](this[_0x1da57e(0x141)]),_0x27762f[_0x1da57e(0x140)](0x0,this[_0x1da57e(0x19a)]),_0x27762f['draw'](0x6),_0x27762f[_0x1da57e(0xe1)](),this[_0x1da57e(0x187)][_0x1da57e(0x1cc)][_0x1da57e(0x17c)]([_0x566e6e['finish']()]);}}class StandardTextObject{constructor(_0x3175ac,_0x528cbc=0x5,_0x32c15f=_0x4ec263(0x164)){const _0x1680d8=_0x4ec263;this[_0x1680d8(0x14a)]=_0x32c15f,this[_0x1680d8(0x18a)]=_0x528cbc,this[_0x1680d8(0x1b0)]=document['createElement']('canvas'),this[_0x1680d8(0x19f)]=this[_0x1680d8(0x1b0)][_0x1680d8(0x119)]('2d'),this['updateTextRegion'](_0x3175ac),this[_0x1680d8(0x14f)](_0x3175ac),this[_0x1680d8(0x1b0)][_0x1680d8(0x138)][_0x1680d8(0x114)]='absolute',this['_textCanvas'][_0x1680d8(0x138)][_0x1680d8(0x1c6)]=_0x1680d8(0x1be),this[_0x1680d8(0x1b0)][_0x1680d8(0x138)]['left']=_0x1680d8(0x1be),this[_0x1680d8(0x1b0)]['style']['border']='1px\x20solid\x20red',document[_0x1680d8(0x1a7)][_0x1680d8(0xf0)](this['_textCanvas']);}[_0x4ec263(0xf6)](){const _0x4766e9=_0x4ec263;this['_textCanvas'][_0x4766e9(0x1a1)]=!this[_0x4766e9(0x1b0)][_0x4766e9(0x1a1)];}[_0x4ec263(0x10f)](_0x3ea19b){const _0x43bcfd=_0x4ec263;this[_0x43bcfd(0x19f)][_0x43bcfd(0x157)]=this[_0x43bcfd(0x14a)],this[_0x43bcfd(0x170)]=_0x3ea19b[_0x43bcfd(0x142)]('\x0a'),this[_0x43bcfd(0x107)]=Math[_0x43bcfd(0x17e)](...this[_0x43bcfd(0x170)][_0x43bcfd(0x1ce)](_0xe6751d=>this[_0x43bcfd(0x19f)][_0x43bcfd(0x161)](_0xe6751d)[_0x43bcfd(0x18f)]));const _0xd6a42c=this['_textFont'][_0x43bcfd(0xfc)](/(\d+)px/);_0xd6a42c?this['_fontSize']=parseInt(_0xd6a42c[0x1],0xa):(this[_0x43bcfd(0xdc)]=0x12,this['_textFont']=_0x43bcfd(0x164)),this[_0x43bcfd(0x18b)]=this[_0x43bcfd(0x170)][_0x43bcfd(0xc3)]*(this['_fontSize']+this[_0x43bcfd(0x18a)]),this[_0x43bcfd(0x180)]=0x5,this[_0x43bcfd(0x15e)]=0x3,this[_0x43bcfd(0x122)]=Math[_0x43bcfd(0xf7)](this[_0x43bcfd(0x107)]+this[_0x43bcfd(0x180)]*0x2),this[_0x43bcfd(0x195)]=Math['ceil'](this[_0x43bcfd(0x18b)]+this[_0x43bcfd(0x15e)]),this['_textCanvas']['width']=this[_0x43bcfd(0x122)],this['_textCanvas']['height']=this[_0x43bcfd(0x195)],this[_0x43bcfd(0x19f)]['font']=this[_0x43bcfd(0x14a)],this[_0x43bcfd(0x19f)][_0x43bcfd(0x16e)]=_0x43bcfd(0x1c6);}[_0x4ec263(0x14f)](_0x432a66){const _0x13328d=_0x4ec263;this[_0x13328d(0x170)]=_0x432a66['split']('\x0a'),this[_0x13328d(0x19f)][_0x13328d(0xe5)]=_0x13328d(0x12e),this[_0x13328d(0x19f)]['clearRect'](0x0,0x0,this[_0x13328d(0x122)],this[_0x13328d(0x195)]),this['_textContext']['fillRect'](0x0,0x0,this[_0x13328d(0x122)],this[_0x13328d(0x195)]),this[_0x13328d(0x19f)][_0x13328d(0xe5)]=_0x13328d(0x1b6),this[_0x13328d(0x170)][_0x13328d(0x1c9)]((_0x33a8fb,_0x5d226c)=>{const _0x118fa9=_0x13328d,_0xdf3440=this['_paddingx'],_0x29ce7d=this['_paddingtop']+_0x5d226c*(this[_0x118fa9(0xdc)]+this[_0x118fa9(0x18a)]);this['_textContext'][_0x118fa9(0xcf)](_0x33a8fb,_0xdf3440,_0x29ce7d);});}}class SceneObject{static ['_objectCnt']=0x0;constructor(_0x559207,_0x56988b){const _0x4730a1=_0x4ec263;if(this[_0x4730a1(0x11c)]==SceneObject)throw new Error(_0x4730a1(0x127));this[_0x4730a1(0x187)]=_0x559207,this[_0x4730a1(0xeb)]=_0x56988b,SceneObject[_0x4730a1(0x13e)]+=0x1;}[_0x4ec263(0x12d)](){const _0x485323=_0x4ec263;return this['constructor'][_0x485323(0xf5)]+'\x20'+SceneObject[_0x485323(0x13e)][_0x485323(0x147)]();}async[_0x4ec263(0x168)](){const _0x1fa81e=_0x4ec263;await this['createGeometry'](),await this[_0x1fa81e(0x1b4)](),await this[_0x1fa81e(0x130)](),await this['createComputePipeline']();}async[_0x4ec263(0xdd)](){const _0x2d6d38=_0x4ec263;throw new Error(_0x2d6d38(0x1bd));}[_0x4ec263(0x105)](){}[_0x4ec263(0xd4)](_0x2481fa){return new Promise((_0x26cd71,_0x367fae)=>{const _0x10b8b2=_0x519c,_0x23da00=new XMLHttpRequest();_0x23da00['open'](_0x10b8b2(0x11d),_0x2481fa),_0x23da00[_0x10b8b2(0x11f)](_0x10b8b2(0x12f),'no-cache,\x20no-store,\x20max-age=0'),_0x23da00[_0x10b8b2(0x1c5)]=function(){const _0x4ca97d=_0x10b8b2;_0x23da00[_0x4ca97d(0x15a)]===XMLHttpRequest['DONE']&&_0x23da00[_0x4ca97d(0x188)]===0xc8?_0x26cd71(_0x23da00[_0x4ca97d(0xf1)]):_0x367fae({'status':_0x23da00['status'],'statusText':_0x23da00['statusText']});},_0x23da00['onerror']=function(){const _0x127264=_0x10b8b2;_0x367fae({'status':_0x23da00['status'],'statusText':_0x23da00[_0x127264(0x136)]});},_0x23da00['send']();});}async[_0x4ec263(0x1b4)](){const _0x539f4b=_0x4ec263;throw new Error(_0x539f4b(0x143));}async[_0x4ec263(0x130)](){const _0x291af4=_0x4ec263;throw new Error(_0x291af4(0x118));}[_0x4ec263(0x192)](_0x5ee63a){const _0x118e05=_0x4ec263;throw new Error(_0x118e05(0x11a));}async[_0x4ec263(0x1a9)](){const _0x40630e=_0x4ec263;throw new Error(_0x40630e(0x179));}[_0x4ec263(0x128)](_0x19a2a7){const _0x459c61=_0x4ec263;throw new Error(_0x459c61(0xde));}}class RayTracingObject extends SceneObject{async['createGeometry'](){}async[_0x4ec263(0x1b4)](){const _0x5c37a8=_0x4ec263;let _0x66c14a=await this['loadShader']('/shaders/optimized_tracenothing.wgsl');this['_shaderModule']=this['_device'][_0x5c37a8(0x1b5)]({'label':'\x20Shader\x20'+this[_0x5c37a8(0x12d)](),'code':_0x66c14a});}['updateGeometry'](){}async[_0x4ec263(0x130)](){}[_0x4ec263(0x192)](_0x5cb021){}async[_0x4ec263(0x1a9)](){const _0x5b8d19=_0x4ec263;this[_0x5b8d19(0x1ad)]=this['_device'][_0x5b8d19(0x1a9)]({'label':_0x5b8d19(0x185)+this[_0x5b8d19(0x12d)](),'layout':_0x5b8d19(0xd6),'compute':{'module':this['_shaderModule'],'entryPoint':_0x5b8d19(0xea)}});}[_0x4ec263(0xd9)](_0x3c98ce){const _0x5d677b=_0x4ec263;this[_0x5d677b(0x19a)]=this[_0x5d677b(0x187)][_0x5d677b(0xd9)]({'label':_0x5d677b(0x155),'layout':this[_0x5d677b(0x1ad)][_0x5d677b(0xca)](0x0),'entries':[{'binding':0x0,'resource':_0x3c98ce[_0x5d677b(0x137)]()}]}),this['_wgWidth']=Math[_0x5d677b(0xf7)](_0x3c98ce['width']),this[_0x5d677b(0x104)]=Math['ceil'](_0x3c98ce[_0x5d677b(0x112)]);}[_0x4ec263(0x128)](_0x52a4d8){const _0x58c63=_0x4ec263;_0x52a4d8['setPipeline'](this[_0x58c63(0x1ad)]),_0x52a4d8[_0x58c63(0x140)](0x0,this['_bindGroup']),_0x52a4d8['dispatchWorkgroups'](Math[_0x58c63(0xf7)](this[_0x58c63(0x1c4)]/0x10),Math[_0x58c63(0xf7)](this[_0x58c63(0x104)]/0x10));}}class UnitCube{constructor(){const _0x8bd74f=_0x4ec263;this[_0x8bd74f(0x10b)]=new Float32Array(Array(0x8)[_0x8bd74f(0xc7)](0x0)),this[_0x8bd74f(0xfa)]=new Float32Array(Array(0x4)[_0x8bd74f(0xc7)](0x1)),this[_0x8bd74f(0x14c)]=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x8bd74f(0x125)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x8bd74f(0xd7)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x8bd74f(0x13d)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x8bd74f(0x115)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x8bd74f(0x1b8)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x4ec263(0x199)](_0x58c1de){const _0x1a5700=_0x4ec263;for(let _0x2b1e25=0x0;_0x2b1e25<0x8;++_0x2b1e25)this[_0x1a5700(0x10b)][_0x2b1e25]=_0x58c1de[_0x2b1e25];}}class UnitSphere{constructor(){const _0x186b12=_0x4ec263;this[_0x186b12(0x10b)]=new Float32Array(Array(0x8)['fill'](0x0)),this[_0x186b12(0xfa)]=new Float32Array(Array(0x4)[_0x186b12(0xc7)](0x1));}}class UnitCylinder{constructor(){const _0x3856b8=_0x4ec263;this[_0x3856b8(0x10b)]=new Float32Array(Array(0x8)[_0x3856b8(0xc7)](0x0)),this['_scales']=new Float32Array(Array(0x4)[_0x3856b8(0xc7)](0x1));}}class UnitCone{constructor(){const _0x41cd21=_0x4ec263;this['_pose']=new Float32Array(Array(0x8)[_0x41cd21(0xc7)](0x0)),this['_scales']=new Float32Array(Array(0x4)[_0x41cd21(0xc7)](0x1));}}function _0x519c(_0x28db37,_0xbb24b8){const _0x29f672=_0x29f6();return _0x519c=function(_0x519ce4,_0x5df510){_0x519ce4=_0x519ce4-0xc3;let _0x5d3ca5=_0x29f672[_0x519ce4];return _0x5d3ca5;},_0x519c(_0x28db37,_0xbb24b8);}class RayTracingLightDemoSceneObject extends RayTracingObject{constructor(_0x497f6c,_0x2913cf,_0x1f226a,_0x4b3c99=!![]){const _0x56ff5f=_0x4ec263;super(_0x497f6c,_0x2913cf),this[_0x56ff5f(0xef)]=new UnitCube(),this[_0x56ff5f(0x11e)]=new UnitCube(),this[_0x56ff5f(0x10c)]=new UnitSphere(),this[_0x56ff5f(0xce)]=new UnitCylinder(),this[_0x56ff5f(0xf9)]=new UnitCone(),this[_0x56ff5f(0x182)]=_0x1f226a,this['_showTexture']=_0x4b3c99,this[_0x56ff5f(0x1b9)]=new Int32Array([0x1,0x0,0x0,0x0]);}async[_0x4ec263(0xdd)](){const _0x2d8aae=_0x4ec263;this[_0x2d8aae(0x131)]=this['_device'][_0x2d8aae(0x171)]({'label':_0x2d8aae(0x17a)+this['getName'](),'size':this[_0x2d8aae(0x182)][_0x2d8aae(0x10b)]['byteLength']+this['_camera'][_0x2d8aae(0xff)][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0x182)][_0x2d8aae(0x181)][_0x2d8aae(0x1ab)],'usage':GPUBufferUsage[_0x2d8aae(0xe8)]|GPUBufferUsage[_0x2d8aae(0x1b7)]}),this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_cameraBuffer'],0x0,this[_0x2d8aae(0x182)][_0x2d8aae(0x10b)]),this['_device'][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_cameraBuffer'],this[_0x2d8aae(0x182)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)],this['_camera']['_focal']),this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x131)],this[_0x2d8aae(0x182)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0x182)][_0x2d8aae(0xff)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x182)][_0x2d8aae(0x181)]),this[_0x2d8aae(0x1a8)]=this[_0x2d8aae(0x187)]['createBuffer']({'label':_0x2d8aae(0xdb)+this[_0x2d8aae(0x12d)](),'size':(this[_0x2d8aae(0xef)]['_pose'][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0xef)][_0x2d8aae(0xfa)]['byteLength']+this['_box'][_0x2d8aae(0x115)][_0x2d8aae(0x1ab)]*0x6)*0x2,'usage':GPUBufferUsage[_0x2d8aae(0x167)]|GPUBufferUsage['COPY_DST']});let _0x19d884=0x0;this[_0x2d8aae(0x187)]['queue'][_0x2d8aae(0x1c2)](this['_boxBuffer'],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0x10b)]),_0x19d884+=this[_0x2d8aae(0xef)]['_pose'][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0xfa)]),_0x19d884+=this['_box'][_0x2d8aae(0xfa)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0x14c)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0x14c)]['byteLength'],this[_0x2d8aae(0x187)]['queue'][_0x2d8aae(0x1c2)](this['_boxBuffer'],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0x125)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0x125)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_boxBuffer'],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0xd7)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0xd7)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_boxBuffer'],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0x13d)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0x13d)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0xef)][_0x2d8aae(0x115)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0x115)][_0x2d8aae(0x1ab)],this['_device']['queue']['writeBuffer'](this[_0x2d8aae(0x1a8)],_0x19d884,this['_box'][_0x2d8aae(0x1b8)]),_0x19d884+=this[_0x2d8aae(0xef)][_0x2d8aae(0x1b8)]['byteLength'],this['_cubeOffset']=_0x19d884,this['_device'][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0x10b)]),_0x19d884+=this[_0x2d8aae(0x11e)][_0x2d8aae(0x10b)]['byteLength'],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0xfa)]),_0x19d884+=this['_cube'][_0x2d8aae(0xfa)]['byteLength'],this['_device']['queue'][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0x14c)]),_0x19d884+=this[_0x2d8aae(0x11e)]['_front'][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0x125)]),_0x19d884+=this[_0x2d8aae(0x11e)]['_back'][_0x2d8aae(0x1ab)],this['_device'][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0xd7)]),_0x19d884+=this[_0x2d8aae(0x11e)][_0x2d8aae(0xd7)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_boxBuffer'],_0x19d884,this['_cube'][_0x2d8aae(0x13d)]),_0x19d884+=this[_0x2d8aae(0x11e)]['_right'][_0x2d8aae(0x1ab)],this['_device']['queue'][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0x115)]),_0x19d884+=this[_0x2d8aae(0x11e)][_0x2d8aae(0x115)][_0x2d8aae(0x1ab)],this['_device'][_0x2d8aae(0x1cc)]['writeBuffer'](this[_0x2d8aae(0x1a8)],_0x19d884,this[_0x2d8aae(0x11e)][_0x2d8aae(0x1b8)]),this[_0x2d8aae(0x1bf)]=this[_0x2d8aae(0x187)][_0x2d8aae(0x171)]({'label':'Sphere\x20'+this[_0x2d8aae(0x12d)](),'size':this[_0x2d8aae(0x10c)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0x10c)]['_scales'][_0x2d8aae(0x1ab)],'usage':GPUBufferUsage[_0x2d8aae(0x167)]|GPUBufferUsage['COPY_DST']}),_0x19d884=0x0,this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)]['writeBuffer'](this['_sphereBuffer'],_0x19d884,this[_0x2d8aae(0x10c)][_0x2d8aae(0x10b)]),_0x19d884+=this[_0x2d8aae(0x10c)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_sphereBuffer'],_0x19d884,this[_0x2d8aae(0x10c)][_0x2d8aae(0xfa)]),this['_coneBuffer']=this[_0x2d8aae(0x187)]['createBuffer']({'label':_0x2d8aae(0xee)+this[_0x2d8aae(0x12d)](),'size':this[_0x2d8aae(0xf9)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0xf9)][_0x2d8aae(0xfa)][_0x2d8aae(0x1ab)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x2d8aae(0x1b7)]}),_0x19d884=0x0,this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x14b)],_0x19d884,this['_cone'][_0x2d8aae(0x10b)]),_0x19d884+=this[_0x2d8aae(0xf9)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)]['queue']['writeBuffer'](this[_0x2d8aae(0x14b)],_0x19d884,this[_0x2d8aae(0xf9)]['_scales']),this[_0x2d8aae(0x1aa)]=this[_0x2d8aae(0x187)][_0x2d8aae(0x171)]({'label':_0x2d8aae(0x191)+this['getName'](),'size':this['_cylinder'][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)]+this[_0x2d8aae(0xce)][_0x2d8aae(0xfa)]['byteLength'],'usage':GPUBufferUsage[_0x2d8aae(0x167)]|GPUBufferUsage[_0x2d8aae(0x1b7)]}),_0x19d884=0x0,this['_device'][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1aa)],_0x19d884,this[_0x2d8aae(0xce)]['_pose']),_0x19d884+=this[_0x2d8aae(0xce)][_0x2d8aae(0x10b)][_0x2d8aae(0x1ab)],this[_0x2d8aae(0x187)][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this[_0x2d8aae(0x1aa)],_0x19d884,this[_0x2d8aae(0xce)]['_scales']),this[_0x2d8aae(0x12a)]=this['_device'][_0x2d8aae(0x171)]({'label':_0x2d8aae(0x193)+this[_0x2d8aae(0x12d)](),'size':this[_0x2d8aae(0x1b9)][_0x2d8aae(0x1ab)],'usage':GPUBufferUsage[_0x2d8aae(0xe8)]|GPUBufferUsage[_0x2d8aae(0x1b7)]}),this['_device'][_0x2d8aae(0x1cc)][_0x2d8aae(0x1c2)](this['_paramBuffer'],0x0,this['_params']),this[_0x2d8aae(0xe9)]=this[_0x2d8aae(0x187)][_0x2d8aae(0x171)]({'label':_0x2d8aae(0xe4)+this[_0x2d8aae(0x12d)](),'size':0x14*Float32Array[_0x2d8aae(0xe7)],'usage':GPUBufferUsage[_0x2d8aae(0xe8)]|GPUBufferUsage['COPY_DST']});}[_0x4ec263(0x105)](){const _0x589e4a=_0x4ec263;this['_camera'][_0x589e4a(0x10a)](this[_0x589e4a(0x16b)],this[_0x589e4a(0x154)]),this[_0x589e4a(0x187)][_0x589e4a(0x1cc)][_0x589e4a(0x1c2)](this[_0x589e4a(0x131)],this[_0x589e4a(0x182)][_0x589e4a(0x10b)][_0x589e4a(0x1ab)]+this[_0x589e4a(0x182)][_0x589e4a(0xff)]['byteLength'],this[_0x589e4a(0x182)][_0x589e4a(0x181)]);}[_0x4ec263(0x17f)](){const _0x588561=_0x4ec263;this[_0x588561(0x187)]['queue'][_0x588561(0x1c2)](this['_boxBuffer'],0x0,this['_box'][_0x588561(0x10b)]);}[_0x4ec263(0x151)](){const _0x1b2237=_0x4ec263;this[_0x1b2237(0x187)][_0x1b2237(0x1cc)][_0x1b2237(0x1c2)](this[_0x1b2237(0x1a8)],this['_box'][_0x1b2237(0x10b)][_0x1b2237(0x1ab)],this[_0x1b2237(0xef)][_0x1b2237(0xfa)]);}['updateCubePose'](){const _0x427973=_0x4ec263;this[_0x427973(0x187)]['queue'][_0x427973(0x1c2)](this[_0x427973(0x1a8)],this[_0x427973(0xf2)],this[_0x427973(0x11e)][_0x427973(0x10b)]);}['updateCubeScales'](){const _0x2621c5=_0x4ec263;this[_0x2621c5(0x187)][_0x2621c5(0x1cc)][_0x2621c5(0x1c2)](this['_boxBuffer'],this[_0x2621c5(0xf2)]+this[_0x2621c5(0x11e)][_0x2621c5(0x10b)][_0x2621c5(0x1ab)],this[_0x2621c5(0x11e)][_0x2621c5(0xfa)]);}[_0x4ec263(0x1a5)](){const _0x516ffb=_0x4ec263;this[_0x516ffb(0x187)][_0x516ffb(0x1cc)][_0x516ffb(0x1c2)](this[_0x516ffb(0x1bf)],0x0,this[_0x516ffb(0x10c)][_0x516ffb(0x10b)]);}[_0x4ec263(0x186)](){const _0x2950ff=_0x4ec263;this[_0x2950ff(0x187)][_0x2950ff(0x1cc)][_0x2950ff(0x1c2)](this[_0x2950ff(0x1bf)],this[_0x2950ff(0x10c)][_0x2950ff(0x10b)][_0x2950ff(0x1ab)],this[_0x2950ff(0x10c)][_0x2950ff(0xfa)]);}[_0x4ec263(0xed)](){const _0x224d1d=_0x4ec263;this[_0x224d1d(0x187)]['queue']['writeBuffer'](this[_0x224d1d(0x14b)],0x0,this[_0x224d1d(0xf9)][_0x224d1d(0x10b)]);}[_0x4ec263(0x148)](){const _0xda13a2=_0x4ec263;this['_device']['queue'][_0xda13a2(0x1c2)](this[_0xda13a2(0x14b)],this[_0xda13a2(0xf9)]['_pose']['byteLength'],this[_0xda13a2(0xf9)]['_scales']);}['updateCylinderPose'](){const _0x2173ae=_0x4ec263;this[_0x2173ae(0x187)]['queue'][_0x2173ae(0x1c2)](this[_0x2173ae(0x1aa)],0x0,this['_cylinder'][_0x2173ae(0x10b)]);}[_0x4ec263(0xe2)](){const _0xd84079=_0x4ec263;this[_0xd84079(0x187)]['queue'][_0xd84079(0x1c2)](this[_0xd84079(0x1aa)],this[_0xd84079(0xce)]['_pose'][_0xd84079(0x1ab)],this[_0xd84079(0xce)][_0xd84079(0xfa)]);}['updateCameraPose'](){const _0x4158d1=_0x4ec263;this[_0x4158d1(0x187)][_0x4158d1(0x1cc)]['writeBuffer'](this[_0x4158d1(0x131)],0x0,this[_0x4158d1(0x182)][_0x4158d1(0x10b)]);}[_0x4ec263(0x197)](){const _0x3b0943=_0x4ec263;this[_0x3b0943(0x187)][_0x3b0943(0x1cc)]['writeBuffer'](this[_0x3b0943(0x131)],this['_camera'][_0x3b0943(0x10b)][_0x3b0943(0x1ab)],this[_0x3b0943(0x182)]['_focal']);}[_0x4ec263(0xc6)](){const _0x4ce754=_0x4ec263;this['_device'][_0x4ce754(0x1cc)]['writeBuffer'](this[_0x4ce754(0x12a)],0x0,this[_0x4ce754(0x1b9)]);}[_0x4ec263(0x175)](_0x2b8675){const _0x3a292c=_0x4ec263;let _0x2884fa=0x0;this['_device'][_0x3a292c(0x1cc)][_0x3a292c(0x1c2)](this['_lightBuffer'],_0x2884fa,_0x2b8675['_intensity']),_0x2884fa+=_0x2b8675['_intensity'][_0x3a292c(0x1ab)],this[_0x3a292c(0x187)][_0x3a292c(0x1cc)][_0x3a292c(0x1c2)](this[_0x3a292c(0xe9)],_0x2884fa,_0x2b8675[_0x3a292c(0x18c)]),_0x2884fa+=_0x2b8675['_position'][_0x3a292c(0x1ab)],this['_device']['queue'][_0x3a292c(0x1c2)](this[_0x3a292c(0xe9)],_0x2884fa,_0x2b8675[_0x3a292c(0x1c0)]),_0x2884fa+=_0x2b8675['_direction'][_0x3a292c(0x1ab)],this[_0x3a292c(0x187)]['queue'][_0x3a292c(0x1c2)](this['_lightBuffer'],_0x2884fa,_0x2b8675['_attenuation']),_0x2884fa+=_0x2b8675[_0x3a292c(0xc8)][_0x3a292c(0x1ab)],this['_device'][_0x3a292c(0x1cc)][_0x3a292c(0x1c2)](this['_lightBuffer'],_0x2884fa,_0x2b8675[_0x3a292c(0x1b9)]);}async['createShaders'](){const _0x1d4dc1=_0x4ec263;let _0x2410ad=await this[_0x1d4dc1(0xd4)](_0x1d4dc1(0x146));this[_0x1d4dc1(0x134)]=this[_0x1d4dc1(0x187)][_0x1d4dc1(0x1b5)]({'label':'\x20Shader\x20'+this[_0x1d4dc1(0x12d)](),'code':_0x2410ad}),this[_0x1d4dc1(0xc4)]=this['_device'][_0x1d4dc1(0xf8)]({'label':_0x1d4dc1(0xd0)+this[_0x1d4dc1(0x12d)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'buffer':{'type':_0x1d4dc1(0xec)}},{'binding':0x2,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'storageTexture':{'format':this[_0x1d4dc1(0xeb)]}},{'binding':0x3,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':'read-only-storage'}},{'binding':0x4,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'buffer':{'type':'read-only-storage'}},{'binding':0x5,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'buffer':{'type':'read-only-storage'}},{'binding':0x6,'visibility':GPUShaderStage[_0x1d4dc1(0xd8)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}}]}),this[_0x1d4dc1(0x1cb)]=this['_device']['createPipelineLayout']({'label':_0x1d4dc1(0x113),'bindGroupLayouts':[this[_0x1d4dc1(0xc4)]]});}async[_0x4ec263(0x1a9)](){const _0x649108=_0x4ec263;this['_computePipeline']=this['_device'][_0x649108(0x1a9)]({'label':'Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20'+this[_0x649108(0x12d)](),'layout':this['_pipelineLayout'],'compute':{'module':this['_shaderModule'],'entryPoint':_0x649108(0xea)}});}[_0x4ec263(0xd9)](_0x496963){const _0x25f884=_0x4ec263;this[_0x25f884(0x19a)]=this[_0x25f884(0x187)]['createBindGroup']({'label':_0x25f884(0x145),'layout':this[_0x25f884(0x1ad)][_0x25f884(0xca)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x25f884(0x131)]}},{'binding':0x1,'resource':{'buffer':this[_0x25f884(0x1a8)]}},{'binding':0x2,'resource':_0x496963[_0x25f884(0x137)]()},{'binding':0x3,'resource':{'buffer':this[_0x25f884(0x1bf)]}},{'binding':0x4,'resource':{'buffer':this[_0x25f884(0x14b)]}},{'binding':0x5,'resource':{'buffer':this[_0x25f884(0x1aa)]}},{'binding':0x6,'resource':{'buffer':this[_0x25f884(0x12a)]}},{'binding':0x7,'resource':{'buffer':this['_lightBuffer']}}]}),this[_0x25f884(0x1c4)]=Math[_0x25f884(0xf7)](_0x496963[_0x25f884(0x18f)]),this[_0x25f884(0x104)]=Math[_0x25f884(0xf7)](_0x496963[_0x25f884(0x112)]),console[_0x25f884(0x1a0)](_0x496963[_0x25f884(0x18f)],_0x496963[_0x25f884(0x112)]);}[_0x4ec263(0x128)](_0x3e5a14){const _0x27fbf2=_0x4ec263;_0x3e5a14[_0x27fbf2(0xc5)](this[_0x27fbf2(0x1ad)]),_0x3e5a14[_0x27fbf2(0x140)](0x0,this[_0x27fbf2(0x19a)]),_0x3e5a14[_0x27fbf2(0x10d)](Math[_0x27fbf2(0xf7)](this[_0x27fbf2(0x1c4)]/0x10),Math[_0x27fbf2(0xf7)](this[_0x27fbf2(0x104)]/0x10));}}class Math3D{static[_0x4ec263(0x123)](_0x17defd,_0x1ade23=0x0,_0x1528f0=0x0,_0x22f132=0x0){return[_0x17defd[0x0]+_0x1ade23,_0x17defd[0x1]+_0x1528f0,_0x17defd[0x2]+_0x22f132];}static[_0x4ec263(0x174)](_0xd8d0a8,_0x18345c,_0x58072e){const _0x3903ae=_0x4ec263;let _0x232e4c=Math[_0x3903ae(0x144)](_0x58072e),_0x55f503=Math['sin'](_0x58072e);switch(_0x18345c){case 0x0:return[_0xd8d0a8[0x0],_0xd8d0a8[0x1]*_0x232e4c-_0xd8d0a8[0x2]*_0x55f503,_0xd8d0a8[0x1]*_0x55f503+_0xd8d0a8[0x2]*_0x232e4c];case 0x1:return[_0xd8d0a8[0x0]*_0x232e4c+_0xd8d0a8[0x2]*_0x55f503,_0xd8d0a8[0x1],-_0xd8d0a8[0x0]*_0x55f503+_0xd8d0a8[0x2]*_0x232e4c];case 0x2:return[_0xd8d0a8[0x0]*_0x232e4c-_0xd8d0a8[0x1]*_0x55f503,_0xd8d0a8[0x0]*_0x55f503+_0xd8d0a8[0x1]*_0x232e4c,_0xd8d0a8[0x2]];default:return _0xd8d0a8;}}static[_0x4ec263(0x110)](_0x2f7512,_0x4773fc){const _0x64a62e=_0x4ec263;return _0x2f7512=Math3D[_0x64a62e(0x174)](_0x2f7512,0x0,_0x4773fc[0x4]),_0x2f7512=Math3D['rotate'](_0x2f7512,0x1,_0x4773fc[0x5]),_0x2f7512=Math3D[_0x64a62e(0x174)](_0x2f7512,0x2,_0x4773fc[0x6]),_0x2f7512=Math3D[_0x64a62e(0x123)](_0x2f7512,_0x4773fc[0x0],_0x4773fc[0x1],_0x4773fc[0x2]),_0x2f7512;}static[_0x4ec263(0x17b)](_0x181b1d,_0x4405f7){const _0x3a8ee6=_0x4ec263;return _0x181b1d=Math3D[_0x3a8ee6(0x174)](_0x181b1d,0x0,_0x4405f7[0x4]),_0x181b1d=Math3D[_0x3a8ee6(0x174)](_0x181b1d,0x1,_0x4405f7[0x5]),_0x181b1d=Math3D[_0x3a8ee6(0x174)](_0x181b1d,0x2,_0x4405f7[0x6]),_0x181b1d;}static[_0x4ec263(0x110)](_0x38ab6e,_0x251ef8){const _0x36f3b2=_0x4ec263;return _0x38ab6e=Math3D[_0x36f3b2(0x123)](_0x38ab6e,-_0x251ef8[0x0],-_0x251ef8[0x1],-_0x251ef8[0x2]),_0x38ab6e=Math3D[_0x36f3b2(0x174)](_0x38ab6e,0x2,-_0x251ef8[0x6]),_0x38ab6e=Math3D['rotate'](_0x38ab6e,0x1,-_0x251ef8[0x5]),_0x38ab6e=Math3D[_0x36f3b2(0x174)](_0x38ab6e,0x0,-_0x251ef8[0x4]),_0x38ab6e;}static[_0x4ec263(0x17b)](_0x1f90af,_0x6c98a3){const _0x5c0e4d=_0x4ec263;return _0x1f90af=Math3D[_0x5c0e4d(0x174)](_0x1f90af,0x2,-_0x6c98a3[0x6]),_0x1f90af=Math3D[_0x5c0e4d(0x174)](_0x1f90af,0x1,-_0x6c98a3[0x5]),_0x1f90af=Math3D[_0x5c0e4d(0x174)](_0x1f90af,0x0,-_0x6c98a3[0x4]),_0x1f90af;}}class Camera{constructor(_0x50ec2a,_0x24363b){const _0x1c5f2f=_0x4ec263;this[_0x1c5f2f(0x10b)]=new Float32Array(Array(0x8)[_0x1c5f2f(0xc7)](0x0)),this[_0x1c5f2f(0xff)]=new Float32Array(Array(0x2)['fill'](0x1)),this[_0x1c5f2f(0x181)]=new Float32Array([_0x50ec2a,_0x24363b]),this['_isProjective']=![];}[_0x4ec263(0x102)](){const _0x2d2813=_0x4ec263;for(let _0x223434=0x0;_0x223434<0x8;++_0x223434)this['_pose'][_0x223434]=0x0;this[_0x2d2813(0xff)][0x0]=0x1,this[_0x2d2813(0xff)][0x1]=0x1;}[_0x4ec263(0x199)](_0x45dfe5){for(let _0x3b1dcf=0x0;_0x3b1dcf<0x8;++_0x3b1dcf)this['_pose'][_0x3b1dcf]=_0x45dfe5[_0x3b1dcf];}[_0x4ec263(0x10a)](_0xa916a2,_0x5a6cb0){const _0x388b42=_0x4ec263;this['_resolutions'][0x0]=_0xa916a2,this[_0x388b42(0x181)][0x1]=_0x5a6cb0;}[_0x4ec263(0x13f)](_0x4052bf){const _0x49c8c8=_0x4ec263;let _0x32ad70=Math3D['applyPoseToDir']([0x1,0x0,0x0],this[_0x49c8c8(0x10b)]);this['_pose'][0x0]+=_0x4052bf*_0x32ad70[0x0],this[_0x49c8c8(0x10b)][0x1]-=_0x4052bf*_0x32ad70[0x1],this['_pose'][0x2]-=_0x4052bf*_0x32ad70[0x2];}[_0x4ec263(0x1b2)](_0x248f51){const _0x25de22=_0x4ec263;let _0x4d1abc=Math3D[_0x25de22(0x17b)]([0x0,0x1,0x0],this[_0x25de22(0x10b)]);this[_0x25de22(0x10b)][0x0]+=_0x248f51*_0x4d1abc[0x0],this[_0x25de22(0x10b)][0x1]+=_0x248f51*_0x4d1abc[0x1],this[_0x25de22(0x10b)][0x2]+=_0x248f51*_0x4d1abc[0x2];}[_0x4ec263(0xe6)](_0x35ae17){const _0x8dec91=_0x4ec263;let _0x4147ef=Math3D[_0x8dec91(0x17b)]([0x0,0x0,0x1],this[_0x8dec91(0x10b)]);this['_pose'][0x0]+=_0x35ae17*_0x4147ef[0x0],this['_pose'][0x1]-=_0x35ae17*_0x4147ef[0x1],this[_0x8dec91(0x10b)][0x2]+=_0x35ae17*_0x4147ef[0x2];}[_0x4ec263(0x15f)](_0x2a4a08){const _0x4a4b5c=_0x4ec263;this[_0x4a4b5c(0x10b)][0x4]+=_0x2a4a08;}[_0x4ec263(0xfb)](_0x1d1975){this['_pose'][0x5]+=_0x1d1975;}['rotateZ'](_0x2a7538){const _0x44cf8e=_0x4ec263;this[_0x44cf8e(0x10b)][0x6]+=_0x2a7538;}}class Light{constructor(){const _0x45886f=_0x4ec263;this[_0x45886f(0xcb)]=new Float32Array(Array(0x4)[_0x45886f(0xc7)](0x0)),this[_0x45886f(0x18c)]=new Float32Array(Array(0x4)[_0x45886f(0xc7)](0x0)),this['_direction']=new Float32Array(Array(0x4)[_0x45886f(0xc7)](0x0)),this['_attenuation']=new Float32Array(Array(0x4)[_0x45886f(0xc7)](0x0)),this[_0x45886f(0xc8)][0x0]=0x1,this[_0x45886f(0x1b9)]=new Float32Array(Array(0x4)[_0x45886f(0xc7)](0x0));}}class PointLight extends Light{constructor(_0xd50259=[0x1,0x1,0x1],_0x3a5f11=[0x0,0x0,0x0],_0x3a48e3=[0x1,0.1,0.01]){const _0xe87ce1=_0x4ec263;super();for(let _0x3c86f2=0x0;_0x3c86f2<0x3;++_0x3c86f2){this[_0xe87ce1(0xcb)][_0x3c86f2]=_0xd50259[_0x3c86f2],this['_position'][_0x3c86f2]=_0x3a5f11[_0x3c86f2],this[_0xe87ce1(0xc8)][_0x3c86f2]=_0x3a48e3[_0x3c86f2];}}}class RectangularLight extends Light{constructor(_0x1dd200=[0x1,0x1,0x1],_0x4e25a5=[0x0,0x0,0x0],_0x46dd6e=[0x1,0.5,0.5],_0x3f3e6b=0.1,_0x170bc0=0.1){const _0x4be6ca=_0x4ec263;super();for(let _0x1864d3=0x0;_0x1864d3<0x3;++_0x1864d3){this[_0x4be6ca(0xcb)][_0x1864d3]=_0x1dd200[_0x1864d3],this[_0x4be6ca(0x18c)][_0x1864d3]=_0x4e25a5[_0x1864d3],this['_attenuation'][_0x1864d3]=_0x46dd6e[_0x1864d3];}this['_params'][0x0]=_0x3f3e6b,this['_params'][0x1]=_0x170bc0;}}class SphericalLight extends Light{constructor(_0x21e4c0=[0x1,0x1,0x1],_0x21eefb=[0x0,0x0,0x0],_0x3078f5=[0x1,0.5,0.5],_0x30349e=0.1){const _0x18c3b7=_0x4ec263;super();for(let _0x58bcf1=0x0;_0x58bcf1<0x3;++_0x58bcf1){this[_0x18c3b7(0xcb)][_0x58bcf1]=_0x21e4c0[_0x58bcf1],this[_0x18c3b7(0x18c)][_0x58bcf1]=_0x21eefb[_0x58bcf1],this['_attenuation'][_0x58bcf1]=_0x3078f5[_0x58bcf1];}this[_0x18c3b7(0x1b9)][0x0]=_0x30349e;}}class DirectionalLight extends Light{constructor(_0x36142b=[0x1,0x1,0x1],_0x1ce7ff=[0x0,0x1,0x0]){const _0x983f7d=_0x4ec263;super();for(let _0x21d8bd=0x0;_0x21d8bd<0x3;++_0x21d8bd){this[_0x983f7d(0xcb)][_0x21d8bd]=_0x36142b[_0x21d8bd],this['_direction'][_0x21d8bd]=_0x1ce7ff[_0x21d8bd];}}}class SpotLight extends Light{constructor(_0x5d7972=[0x1,0x1,0x1],_0x200e6c=[0x0,0x0,0x0],_0x46b00b=[0x0,0x1,0x0],_0x34b5a0=[0x1,0.1,0.01],_0x1aaa7f=0.785,_0x4aef6e=1.5){const _0x1d9c82=_0x4ec263;super();for(let _0x3656af=0x0;_0x3656af<0x3;++_0x3656af){this[_0x1d9c82(0xcb)][_0x3656af]=_0x5d7972[_0x3656af],this[_0x1d9c82(0x18c)][_0x3656af]=_0x200e6c[_0x3656af],this['_direction'][_0x3656af]=_0x46b00b[_0x3656af],this[_0x1d9c82(0xc8)][_0x3656af]=_0x34b5a0[_0x3656af];}this[_0x1d9c82(0x1b9)][0x0]=_0x1aaa7f,this['_params'][0x1]=_0x4aef6e;}}async function init(){const _0x3d0593=_0x4ec263,_0x5d1160=document['createElement'](_0x3d0593(0x1a2));_0x5d1160['id']='renderCanvas',document['body'][_0x3d0593(0xf0)](_0x5d1160);const _0x577f65=new RayTracer(_0x5d1160);await _0x577f65['init']();var _0x418735=new Camera(),_0x14358c=new RayTracingLightDemoSceneObject(_0x577f65[_0x3d0593(0x187)],_0x577f65[_0x3d0593(0xeb)],_0x418735);await _0x577f65[_0x3d0593(0x1bc)](_0x14358c),_0x14358c['_box'][_0x3d0593(0x10b)][0x2]=0.4*0x2,_0x14358c[_0x3d0593(0x17f)](),_0x14358c[_0x3d0593(0xef)][_0x3d0593(0xfa)][0x0]=0x2,_0x14358c[_0x3d0593(0xef)][_0x3d0593(0xfa)][0x1]=1.25,_0x14358c['_box'][_0x3d0593(0xfa)][0x2]=0x2,_0x14358c[_0x3d0593(0x151)](),_0x14358c['_cube']['_scales'][0x0]=0.3,_0x14358c[_0x3d0593(0x11e)]['_scales'][0x1]=0.5,_0x14358c[_0x3d0593(0x11e)][_0x3d0593(0xfa)][0x2]=0.3,_0x14358c[_0x3d0593(0x166)](),_0x14358c['_cube'][_0x3d0593(0x10b)][0x0]=-0.25*0x2,_0x14358c[_0x3d0593(0x11e)][_0x3d0593(0x10b)][0x1]=0.5*_0x14358c[_0x3d0593(0xef)]['_scales'][0x1]-0.5*_0x14358c['_cube']['_scales'][0x1],_0x14358c[_0x3d0593(0x11e)]['_pose'][0x2]=0.5*0x2,_0x14358c[_0x3d0593(0x16c)](),_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0xfa)][0x0]=0.25,_0x14358c['_sphere'][_0x3d0593(0xfa)][0x1]=0.25,_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0xfa)][0x2]=0.25,_0x14358c[_0x3d0593(0x186)](),_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0x10b)][0x0]=0.225*0x2,_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0x10b)][0x1]=0.5*_0x14358c[_0x3d0593(0xef)][_0x3d0593(0xfa)][0x1]-_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0xfa)][0x1],_0x14358c[_0x3d0593(0x10c)][_0x3d0593(0x10b)][0x2]=0.6*0x2,_0x14358c[_0x3d0593(0x1a5)](),_0x14358c[_0x3d0593(0xce)][_0x3d0593(0xfa)][0x0]=0.2,_0x14358c[_0x3d0593(0xce)][_0x3d0593(0xfa)][0x1]=1.25,_0x14358c['_cylinder'][_0x3d0593(0xfa)][0x2]=0.2,_0x14358c[_0x3d0593(0xe2)](),_0x14358c[_0x3d0593(0xce)]['_pose'][0x1]=0.5*_0x14358c[_0x3d0593(0xef)][_0x3d0593(0xfa)][0x1]-_0x14358c[_0x3d0593(0xce)][_0x3d0593(0xfa)][0x1],_0x14358c[_0x3d0593(0xce)][_0x3d0593(0x10b)][0x2]=0.75*0x2,_0x14358c[_0x3d0593(0x194)](),_0x14358c[_0x3d0593(0xf9)][_0x3d0593(0xfa)][0x0]=0.2,_0x14358c[_0x3d0593(0xf9)]['_scales'][0x1]=-0.6,_0x14358c[_0x3d0593(0xf9)][_0x3d0593(0xfa)][0x2]=0.2,_0x14358c[_0x3d0593(0x148)](),_0x14358c[_0x3d0593(0xf9)][_0x3d0593(0x10b)][0x0]=0.05*0x2,_0x14358c[_0x3d0593(0xf9)][_0x3d0593(0x10b)][0x1]=0.5*_0x14358c[_0x3d0593(0xef)][_0x3d0593(0xfa)][0x1],_0x14358c[_0x3d0593(0xf9)][_0x3d0593(0x10b)][0x2]=0.4*0x2,_0x14358c[_0x3d0593(0xed)]();var _0x86f53c='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper',_0x428409=new StandardTextObject(_0x86f53c);let _0x2e8dc8='??';var _0x419d9e=new StandardTextObject(_0x3d0593(0x15b)+_0x2e8dc8),_0x191c53=0.05;_0x14358c[_0x3d0593(0x1b9)][0x1]=0x0;var _0x5ff9cd=[_0x3d0593(0x19b),_0x3d0593(0x16a),_0x3d0593(0x176)];_0x14358c[_0x3d0593(0x1b9)][0x2]=0x0;var _0x4d9cd6=['Emit\x20only',_0x3d0593(0xf4),'Phong',_0x3d0593(0x18e)];_0x14358c[_0x3d0593(0x1b9)][0x3]=0x0;var _0x2baf0e=[_0x3d0593(0x14e),'Green',_0x3d0593(0x117),_0x3d0593(0x165)];_0x86f53c=_0x86f53c[_0x3d0593(0x12b)](_0x3d0593(0x160),_0x5ff9cd[_0x14358c[_0x3d0593(0x1b9)][0x1]]),_0x86f53c=_0x86f53c[_0x3d0593(0x12b)]('??????????',_0x4d9cd6[_0x14358c['_params'][0x2]]),_0x86f53c=_0x86f53c[_0x3d0593(0x12b)](_0x3d0593(0x152),_0x2baf0e[_0x14358c[_0x3d0593(0x1b9)][0x3]]),_0x428409['updateText'](_0x86f53c);var _0x86eda3=null;let _0x5e9a71=async()=>{const _0x42bbb4=_0x3d0593;switch(_0x14358c[_0x42bbb4(0x1b9)][0x1]){case 0x0:_0x86eda3=new PointLight();break;case 0x1:_0x86eda3=new DirectionalLight();break;case 0x2:_0x86eda3=new SpotLight();break;case 0x3:_0x86eda3=new RectangularLight();break;case 0x4:_0x86eda3=new SphericalLight();break;}switch(_0x14358c[_0x42bbb4(0x1b9)][0x3]){case 0x0:_0x86eda3[_0x42bbb4(0xcb)][0x1]=0x0,_0x86eda3['_intensity'][0x2]=0x0;break;case 0x1:_0x86eda3[_0x42bbb4(0xcb)][0x0]=0x0,_0x86eda3[_0x42bbb4(0xcb)][0x2]=0x0;break;case 0x2:_0x86eda3['_intensity'][0x0]=0x0,_0x86eda3[_0x42bbb4(0xcb)][0x1]=0x0;break;}_0x86eda3[_0x42bbb4(0x18c)][0x1]=-0.5*_0x14358c[_0x42bbb4(0xef)][_0x42bbb4(0xfa)][0x1]+0.001,_0x86eda3[_0x42bbb4(0x18c)][0x2]=0.75;};await _0x5e9a71(),_0x14358c['updateLight'](_0x86eda3),window[_0x3d0593(0x1b3)](_0x3d0593(0xe0),async _0x57d027=>{const _0xcd851=_0x3d0593;switch(_0x57d027['key']){case'h':case'H':_0x428409[_0xcd851(0xf6)]();break;case'f':case'F':_0x419d9e['toggleVisibility']();break;case'w':case'W':_0x418735['moveY'](-_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case's':case'S':_0x418735[_0xcd851(0x1b2)](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'a':case'A':_0x418735['moveX'](-_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'd':case'D':_0x418735[_0xcd851(0x13f)](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'q':case'Q':_0x418735[_0xcd851(0xe6)](-_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'e':case'E':_0x418735['moveZ'](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'i':case'I':_0x418735['rotateX'](-_0x191c53),_0x14358c['updateCameraPose']();break;case'k':case'K':_0x418735[_0xcd851(0x15f)](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'j':case'J':_0x418735[_0xcd851(0xfb)](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'l':case'L':_0x418735['rotateY'](-_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'u':case'U':_0x418735[_0xcd851(0x1ac)](-_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'o':case'O':_0x418735[_0xcd851(0x1ac)](_0x191c53),_0x14358c[_0xcd851(0x108)]();break;case'c':case'C':_0x14358c[_0xcd851(0x1b9)][0x0]=!_0x14358c[_0xcd851(0x1b9)][0x0],_0x14358c[_0xcd851(0xc6)]();break;case'r':case'R':_0x418735[_0xcd851(0x102)](),_0x14358c['updateCameraPose'](),_0x14358c[_0xcd851(0x197)]();break;case'[':_0x418735[_0xcd851(0xff)][0x0]*=1.1,_0x14358c[_0xcd851(0x197)]();break;case']':_0x418735['_focal'][0x0]/=1.1,_0x14358c['updateCameraFocal']();break;case'{':_0x418735[_0xcd851(0xff)][0x1]*=1.1,_0x14358c['updateCameraFocal']();break;case'}':_0x418735[_0xcd851(0xff)][0x1]/=1.1,_0x14358c[_0xcd851(0x197)]();break;case'n':case'N':let _0x462e58=(_0x14358c['_params'][0x1]+0x1)%_0x5ff9cd['length'];_0x86f53c=_0x86f53c['replace'](_0x5ff9cd[_0x14358c[_0xcd851(0x1b9)][0x1]],_0x5ff9cd[_0x462e58]),_0x428409[_0xcd851(0x14f)](_0x86f53c),_0x14358c[_0xcd851(0x1b9)][0x1]=_0x462e58,await _0x5e9a71(),_0x14358c[_0xcd851(0xc6)](),_0x14358c['updateLight'](_0x86eda3);break;case'm':case'M':let _0xc169b4=(_0x14358c[_0xcd851(0x1b9)][0x2]+0x1)%_0x4d9cd6[_0xcd851(0xc3)];_0x86f53c=_0x86f53c['replace'](_0x4d9cd6[_0x14358c[_0xcd851(0x1b9)][0x2]],_0x4d9cd6[_0xc169b4]),_0x428409[_0xcd851(0x14f)](_0x86f53c),_0x14358c[_0xcd851(0x1b9)][0x2]=_0xc169b4,_0x14358c[_0xcd851(0xc6)]();break;case'v':case'V':let _0x19042c=(_0x14358c['_params'][0x3]+0x1)%_0x2baf0e[_0xcd851(0xc3)];_0x86f53c=_0x86f53c[_0xcd851(0x12b)](_0x2baf0e[_0x14358c[_0xcd851(0x1b9)][0x3]],_0x2baf0e[_0x19042c]),_0x428409['updateText'](_0x86f53c),_0x14358c[_0xcd851(0x1b9)][0x3]=_0x19042c,await _0x5e9a71(),_0x14358c['updateParam'](),_0x14358c['updateLight'](_0x86eda3);break;}}),window[_0x3d0593(0x1b3)](_0x3d0593(0x19d),_0x4f3e0a=>{});let _0x552358=async _0x577f22=>{},_0x4b0933=async _0xe95867=>{},_0x1d8a73=_0x50aae8=>{};_0x5d1160['addEventListener'](_0x3d0593(0x135),_0x552358),_0x5d1160[_0x3d0593(0x1b3)]('mousemove',_0x4b0933),_0x5d1160['addEventListener'](_0x3d0593(0x1cd),_0x1d8a73),_0x5d1160['addEventListener']('mouseenter',_0x66971f=>{}),_0x5d1160[_0x3d0593(0x1b3)](_0x3d0593(0x183),_0x2bc81e=>{}),_0x5d1160[_0x3d0593(0x1b3)](_0x3d0593(0x120),_0x552358),_0x5d1160[_0x3d0593(0x1b3)](_0x3d0593(0xdf),_0x4b0933),_0x5d1160[_0x3d0593(0x1b3)](_0x3d0593(0x106),_0x1d8a73),_0x428409[_0x3d0593(0x1b0)]['style']['setProperty']('pointer-events','none'),_0x419d9e['_textCanvas'][_0x3d0593(0x138)]['setProperty'](_0x3d0593(0x169),_0x3d0593(0x1c3));var _0x3b3350=0x0,_0x22a701=0x3c,_0x534eac=0x1/_0x22a701,_0x2aa5f1=_0x534eac*0x3e8,_0x5832b4;let _0xf170b=()=>{const _0x5f42c6=_0x3d0593;let _0x1c2767=Date[_0x5f42c6(0x124)]()-_0x5832b4;_0x1c2767>_0x2aa5f1&&(++_0x3b3350,_0x5832b4=Date[_0x5f42c6(0x124)]()-_0x1c2767%_0x2aa5f1,_0x577f65[_0x5f42c6(0x192)]()),requestAnimationFrame(_0xf170b);};return _0x5832b4=Date['now'](),_0xf170b(),_0x419d9e[_0x3d0593(0x1b0)][_0x3d0593(0x138)]['setProperty']('left',_0x3d0593(0x139)),_0x419d9e[_0x3d0593(0x1b0)][_0x3d0593(0x138)][_0x3d0593(0x13c)]=_0x3d0593(0x1be),setInterval(()=>{_0x2e8dc8=_0x3b3350,_0x3b3350=0x0,_0x419d9e['updateText']('fps:\x20'+_0x2e8dc8);},0x3e8),_0x577f65;}init()[_0x4ec263(0x126)](_0x3807a7=>{const _0x5a71d8=_0x4ec263;console[_0x5a71d8(0x1a0)](_0x3807a7);})[_0x4ec263(0x177)](_0x47a302=>{const _0x481377=_0x4ec263,_0x3e64dc=document[_0x481377(0x133)]('p');_0x3e64dc[_0x481377(0xd3)]=navigator[_0x481377(0x172)]+_0x481377(0x16d)+_0x47a302[_0x481377(0x16f)],document['body'][_0x481377(0xf0)](_0x3e64dc),document[_0x481377(0x1c7)](_0x481377(0x19e))[_0x481377(0x12c)]();});function _0x29f6(){const _0x89edff=['STORAGE','init','pointer-events','Directional','_imgWidth','updateCubePose','</br>','textBaseline','message','_lines','createBuffer','userAgent','store','rotate','updateLight','Spotlight','catch','_clearColor','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','Camera\x20','applyPoseToDir','submit','beginComputePass','max','updateBoxPose','_paddingx','_resolutions','_camera','mouseleave','clear','Ray\x20Tracing\x20Pipeline\x20','updateSphereScales','_device','status','Couldn\x27t\x20request\x20WebGPU\x20adapter.','_lineSpacing','_height','_position','createSampler','Toon','width','_sampler','Cylinder\x20','render','Parameters\x20','updateCylinderPose','_canvasHeight','renderToSelectedView','updateCameraFocal','push','updatePose','_bindGroup','Point','380816UHEWFV','keyup','renderCanvas','_textContext','log','hidden','canvas','requestAdapter','beginRenderPass','updateSpherePose','STORAGE_BINDING','body','_boxBuffer','createComputePipeline','_cylinderBuffer','byteLength','rotateZ','_computePipeline','gpu','21HuNCNh','_textCanvas','getCurrentTexture','moveY','addEventListener','createShaders','createShaderModule','white','COPY_DST','_down','_params','resize','Ray\x20Tracer\x20Pipeline','setTracerObject','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','10px','_sphereBuffer','_direction','createTexture','writeBuffer','none','_wgWidth','onload','top','getElementById','createCommandEncoder','forEach','Ray\x20Tracer\x20Sampler','_pipelineLayout','queue','mouseup','map','length','_bindGroupLayout','setPipeline','updateParam','fill','_attenuation','vertexMain','getBindGroupLayout','_intensity','1981983pvajEp','6EPzpcL','_cylinder','fillText','Ray\x20Trace\x20Box\x20Layout\x20','29491480QpURXt','linear','innerHTML','loadShader','_outputSizeBuffer','auto','_left','COMPUTE','createBindGroup','center','Box\x20','_fontSize','createGeometry','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','touchmove','keydown','end','updateCylinderScales','webgpu','Light\x20','fillStyle','moveZ','BYTES_PER_ELEMENT','UNIFORM','_lightBuffer','computeMain','_canvasFormat','read-only-storage','updateConePose','Cone\x20','_box','appendChild','responseText','_cubeOffset','requestDevice','Lambertian','name','toggleVisibility','ceil','createBindGroupLayout','_cone','_scales','rotateY','match','_context','appendSceneObject','_focal','bind','configure','resetPose','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','_wgHeight','updateGeometry','touchend','_width','updateCameraPose','14133042SGnHAH','updateSize','_pose','_sphere','dispatchWorkgroups','_offScreenTexture','updateTextRegion','applyPoseToPoint','_tracer','height','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','position','_top','rgba8unorm','Blue','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','getContext','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','getPreferredCanvasFormat','constructor','GET','_cube','setRequestHeader','touchstart','Ray\x20Tracer\x20Shader','_canvasWidth','translate','now','_back','then','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','compute','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','_paramBuffer','replace','remove','getName','rgba(1,\x201,\x201,\x200.5)','Cache-Control','createRenderPipeline','_cameraBuffer','innerHeight','createElement','_shaderModule','mousedown','statusText','createView','style','initial','817255DKHiqQ','transformOrigin','right','_right','_objectCnt','moveX','setBindGroup','_pipeline','split','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','cos','Ray\x20Trace\x20Box\x20Bind\x20Group','/shaders/optimized_tracedemolightbox2.wgsl','toString','updateConeScales','Ray\x20Tracer\x20output\x20size\x20buffer','_textFont','_coneBuffer','_front','resizeCanvas','Red','updateText','4VbfhMO','updateBoxScales','?????','_canvas','_imgHeight','Ray\x20Tracing\x20Bind\x20Group','1927015xZMJkY','font','TEXTURE_BINDING','devicePixelRatio','readyState','fps:\x20','_objects','innerWidth','_paddingtop','rotateX','???????????','measureText','finish','17572nRZHUl','18px\x20Arial','White','updateCubeScales'];_0x29f6=function(){return _0x89edff;};return _0x29f6();}