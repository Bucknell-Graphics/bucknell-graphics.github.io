/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x1f323d=_0x319a;function _0x3046(){const _0x399ad2=['_shaderModule','geometricProduct','_metalTexture','15570UfkYKU','requestDevice','createView','_cubeOffset','Ray\x20Tracer\x20Sampler','split','_outputSizeBuffer','byteLength','linePlaneIntersection','_width','TEXTURE_BINDING','_envnxBitmap','_metal','_textureParamBuffer','RENDER_ATTACHMENT','_camera','_bindGroup','createBindGroupLayout','applyMotorToDir','_scales','updatePose','/assets/normal.jpg','Ray\x20Tracing\x20Pipeline\x20','\x20Shader\x20','style','Directional','createPlaneFromPoints','decode','_textFont','_bindGroupLayout2','/assets/envposz.jpg','18px\x20Arial','_lines','configure','updateGeometry','measureText','DONE','createShaderModule','676065zTteLU','_pipeline','createLine','updateTextureParam','_envnzBitmap','createPoint','queue','_isProjective','_paddingx','toFixed','_fontSize','gpu','forEach','updateText','/assets/metal.jpg','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','abs','_cylinderBuffer','updateBoxScales','getBindGroupLayout','fillRect','_objects','statusText','writeBuffer','height','rotateZ','createSampler','_focal','updateLight','submit','_bindGroup1','</br>','updateSphereScales','Red','Cone\x20','render','fragmentMain','STORAGE_BINDING','_back','_envpzTexture','createComputePipeline','/assets/envnegz.jpg','_lightBuffer','_cameraBuffer','Ray\x20Tracer\x20Shader','beginRenderPass','_envpx','_textCanvas','/shaders/optimized_tracedemolightbouncebox.wgsl','_wgHeight','_right','10px','Sphere\x20','_envnx','_tgtHeight','_cylinder','_pose','getPreferredCanvasFormat','no-cache,\x20no-store,\x20max-age=0','_envpxTexture','_down','_envnzTexture','extractRotor','_textContext','_clearColor','_canvasFormat','2410cXJbfK','read-only-storage','updateCameraFocal','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','1px\x20solid\x20red','dispatchWorkgroups','XXX','createCommandEncoder','innerHeight','1141FvvCag','_envpyTexture','createGeometry','constructor','Green','_envpy','reverse','setPipeline','updateCubePose','_wgWidth','669795VTgPAR','innerHTML','userAgent','now','_bindGroup2','380070CrfhJl','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','sqrt','createRotor','_light','createDir','applyMotor','Emit\x20only','_metalBitmap','5047922NhDZwj','COMPUTE','white','UNIFORM','normalizeMotor','13080aNpBJC','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','hidden','_imgWidth','createBindGroup','fillStyle','createRenderPipeline','createShaders','motorNorm','_imgHeight','_offScreenTexture','updateSize','createPlane','/assets/envposy.jpg','_envnyBitmap','getName','createPipelineLayout','right','setProperty','8PTPNba','innerWidth','readyState','223RmtKyg','bind','fps:\x20','createBuffer','mouseup','src','_envny','_boxBuffer','replace','createElement','_envpxBitmap','_paramBuffer','GET','left','resizeCanvas','key','updateParam','_lightBitmap','renderCanvas','_gold','_canvasWidth','Ray\x20Tracer\x20Pipeline','Cylinder\x20','updateCylinderScales','none','touchmove','_params','width','createTranslator','mousemove','updateSpherePose','Phong','setBindGroup','keydown','updateCylinderPose','_goldBitmap','end','moveY','_canvasHeight','devicePixelRatio','/assets/envnegx.jpg','fillText','addEventListener','webgpu','COPY_DST','_computePipeline','map','mouseleave','top','open','_front','_canvas','_pipelineLayout','_cube','canvas','updateCameraPose','_box','extractTranslator','rotateX','beginComputePass','_left','moveX','extractPoint','updateBoxPose','_top','rgba8unorm','_envpyBitmap','_height','rgba(1,\x201,\x201,\x200.5)','getCurrentTexture','catch','rotateY','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','Cache-Control','cos','isInside','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','push','copyExternalImageToTexture','float','updateConePose','name','max','linear','???????????','_sphereBuffer','STORAGE','position','length','_cone','Point','_paddingtop','resetPose','border','sin','_device','Ray\x20Tracer\x20output\x20size\x20buffer','Blue','Texture\x20','Ray\x20Trace\x20Box\x20Layout\x20','_resolutions','moveZ','appendSceneObject','_envnz','_envpz','clear','body','_sampler','_attenuation','_lightTexture','_goldTexture','_position','toggleVisibility','/assets/gold.png','onerror','responseText','_sphere','_heightFactor','loadShader','updateTextRegion','createTexture','_coneBuffer','_tracer','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','mousedown','initial','Ray\x20Trace\x20Box\x20Bind\x20Group\x202','_envnxTexture','_envnyTexture','compute','match','textBaseline','appendChild','font','_lineSpacing','ceil','1656bnBjfl','updateConeScales','Ray\x20Trace\x20Volume\x20Layout\x202\x20','_objectCnt','White','status','_direction','auto','onload','finish','init','_textureParams','getContext','pointer-events','updateCubeScales','store','fill','requestAdapter','_envpzBitmap','?????','applyMotorToPoint','computeMain','Lambertian','_intensity','Spotlight','setRequestHeader','_context'];_0x3046=function(){return _0x399ad2;};return _0x3046();}(function(_0x1fec7f,_0x5fb466){const _0x4b9e39=_0x319a,_0x923e79=_0x1fec7f();while(!![]){try{const _0x2f9447=-parseInt(_0x4b9e39(0x15e))/0x1*(-parseInt(_0x4b9e39(0x122))/0x2)+-parseInt(_0x4b9e39(0x135))/0x3+-parseInt(_0x4b9e39(0x15b))/0x4*(parseInt(_0x4b9e39(0x22a))/0x5)+-parseInt(_0x4b9e39(0x13a))/0x6+parseInt(_0x4b9e39(0x12b))/0x7*(parseInt(_0x4b9e39(0x148))/0x8)+-parseInt(_0x4b9e39(0x1e6))/0x9*(parseInt(_0x4b9e39(0x204))/0xa)+parseInt(_0x4b9e39(0x143))/0xb;if(_0x2f9447===_0x5fb466)break;else _0x923e79['push'](_0x923e79['shift']());}catch(_0x39b227){_0x923e79['push'](_0x923e79['shift']());}}}(_0x3046,0x24c46));function _0x319a(_0x1da93b,_0x5ddace){const _0x304632=_0x3046();return _0x319a=function(_0x319aa0,_0x4f051d){_0x319aa0=_0x319aa0-0x11b;let _0x2e0f58=_0x304632[_0x319aa0];return _0x2e0f58;},_0x319a(_0x1da93b,_0x5ddace);}class Renderer{constructor(_0xef4a12){const _0x178126=_0x319a;this['_canvas']=_0xef4a12,this[_0x178126(0x23f)]=[],this[_0x178126(0x120)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x1f323d(0x1f0)](){const _0x4129e1=_0x1f323d;if(!navigator[_0x4129e1(0x235)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x50e855=await navigator['gpu'][_0x4129e1(0x1f7)]();if(!_0x50e855)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x4129e1(0x1bd)]=await _0x50e855[_0x4129e1(0x205)](),this[_0x4129e1(0x200)]=this[_0x4129e1(0x191)][_0x4129e1(0x1f2)](_0x4129e1(0x189)),this[_0x4129e1(0x121)]=navigator[_0x4129e1(0x235)][_0x4129e1(0x263)](),this[_0x4129e1(0x200)][_0x4129e1(0x225)]({'device':this[_0x4129e1(0x1bd)],'format':this[_0x4129e1(0x121)]}),this[_0x4129e1(0x16c)](),window[_0x4129e1(0x188)]('resize',this['resizeCanvas'][_0x4129e1(0x15f)](this));}[_0x1f323d(0x16c)](){const _0x5cafdd=_0x1f323d,_0x264245=window[_0x5cafdd(0x185)]||0x1,_0x36a3bd=window[_0x5cafdd(0x15c)]*_0x264245,_0xf80126=window[_0x5cafdd(0x12a)]*_0x264245;this[_0x5cafdd(0x191)][_0x5cafdd(0x179)]=_0x36a3bd,this[_0x5cafdd(0x191)][_0x5cafdd(0x242)]=_0xf80126,this[_0x5cafdd(0x191)][_0x5cafdd(0x21c)][_0x5cafdd(0x179)]=window[_0x5cafdd(0x15c)]+'px',this['_canvas']['style'][_0x5cafdd(0x242)]=window[_0x5cafdd(0x12a)]+'px',this[_0x5cafdd(0x191)][_0x5cafdd(0x21c)]['transformOrigin']='center',this[_0x5cafdd(0x24d)]();}async[_0x1f323d(0x1c4)](_0x5cebf1){const _0x19d52b=_0x1f323d;await _0x5cebf1['init'](),this['_objects'][_0x19d52b(0x1ab)](_0x5cebf1);}['renderToSelectedView'](_0x34529d){const _0x2f52dd=_0x1f323d;for(const _0x428ac4 of this['_objects']){_0x428ac4?.[_0x2f52dd(0x226)]();}let _0x59b9fd=this[_0x2f52dd(0x1bd)][_0x2f52dd(0x129)]();const _0xb982cd=_0x59b9fd['beginRenderPass']({'colorAttachments':[{'view':_0x34529d,'clearValue':this[_0x2f52dd(0x120)],'loadOp':_0x2f52dd(0x1c7),'storeOp':_0x2f52dd(0x1f5)}]});for(const _0x11ae8b of this[_0x2f52dd(0x23f)]){_0x11ae8b?.['render'](_0xb982cd);}_0xb982cd['end']();const _0x2a0201=_0x59b9fd['beginComputePass']();for(const _0x2bd22a of this[_0x2f52dd(0x23f)]){_0x2bd22a?.[_0x2f52dd(0x1df)](_0x2a0201);}_0x2a0201['end']();const _0x5d6999=_0x59b9fd[_0x2f52dd(0x1ef)]();this['_device']['queue'][_0x2f52dd(0x247)]([_0x5d6999]);}[_0x1f323d(0x24d)](){const _0x5651e1=_0x1f323d;this['renderToSelectedView'](this['_context'][_0x5651e1(0x1a3)]()[_0x5651e1(0x206)]());}}class RayTracer extends Renderer{constructor(_0x3e6b3c){const _0x315961=_0x1f323d;super(_0x3e6b3c),this[_0x315961(0x1d8)]=null,this[_0x315961(0x1d3)]=0x1;}async['init'](){const _0x240a59=_0x1f323d;if(!navigator[_0x240a59(0x235)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x533673=await navigator['gpu'][_0x240a59(0x1f7)]();if(!_0x533673)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0x240a59(0x1bd)]=await _0x533673['requestDevice'](),this['_context']=this['_canvas']['getContext'](_0x240a59(0x189)),this[_0x240a59(0x121)]='rgba8unorm',this[_0x240a59(0x200)][_0x240a59(0x225)]({'device':this[_0x240a59(0x1bd)],'format':this[_0x240a59(0x121)]}),this[_0x240a59(0x201)]=this[_0x240a59(0x1bd)][_0x240a59(0x229)]({'label':_0x240a59(0x256),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this[_0x240a59(0x20a)]=this[_0x240a59(0x1bd)]['createBuffer']({'label':_0x240a59(0x1be),'size':0x8,'usage':GPUBufferUsage[_0x240a59(0x146)]|GPUBufferUsage[_0x240a59(0x18a)]}),this['_pipeline']=this[_0x240a59(0x1bd)][_0x240a59(0x14e)]({'label':_0x240a59(0x173),'layout':'auto','vertex':{'module':this[_0x240a59(0x201)],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x240a59(0x201)],'entryPoint':_0x240a59(0x24e),'targets':[{'format':this[_0x240a59(0x121)]}]}}),this['_sampler']=this['_device'][_0x240a59(0x244)]({'label':_0x240a59(0x208),'magFilter':'linear','minFilter':'linear'}),this[_0x240a59(0x16c)](),window[_0x240a59(0x188)]('resize',this[_0x240a59(0x16c)][_0x240a59(0x15f)](this));}['resizeCanvas'](){const _0x16daa7=_0x1f323d,_0x76b6d=window[_0x16daa7(0x185)]||0x1,_0x1bc651=window[_0x16daa7(0x15c)]*_0x76b6d,_0x101113=window[_0x16daa7(0x12a)]*_0x76b6d,_0xa54107=_0x1bc651/_0x101113;this[_0x16daa7(0x260)]=_0x101113*this[_0x16daa7(0x1d3)];let _0x4ac798={'width':this[_0x16daa7(0x260)]*_0xa54107,'height':this[_0x16daa7(0x260)]};this[_0x16daa7(0x152)]=this[_0x16daa7(0x1bd)]['createTexture']({'size':_0x4ac798,'format':this[_0x16daa7(0x121)],'usage':GPUTextureUsage[_0x16daa7(0x20e)]|GPUTextureUsage[_0x16daa7(0x24f)]}),this['_tracer']&&(this['_tracer'][_0x16daa7(0x14b)]=this[_0x16daa7(0x152)][_0x16daa7(0x179)],this[_0x16daa7(0x1d8)]['_imgHeight']=this[_0x16daa7(0x152)][_0x16daa7(0x242)],this[_0x16daa7(0x1d8)][_0x16daa7(0x226)](),this[_0x16daa7(0x1d8)]['createBindGroup'](this[_0x16daa7(0x152)])),this[_0x16daa7(0x214)]=this[_0x16daa7(0x1bd)]['createBindGroup']({'label':'Ray\x20Tracer\x20Renderer\x20Bind\x20Group','layout':this['_pipeline'][_0x16daa7(0x23d)](0x0),'entries':[{'binding':0x0,'resource':this[_0x16daa7(0x152)][_0x16daa7(0x206)]()},{'binding':0x1,'resource':this[_0x16daa7(0x1c9)]},{'binding':0x2,'resource':{'buffer':this[_0x16daa7(0x20a)]}}]}),super[_0x16daa7(0x16c)](),this['_device'][_0x16daa7(0x230)][_0x16daa7(0x241)](this[_0x16daa7(0x20a)],0x0,new Float32Array([_0x1bc651,_0x101113]));}async['setTracerObject'](_0x2bdbdb){const _0x22e3b6=_0x1f323d;await _0x2bdbdb[_0x22e3b6(0x1f0)](),_0x2bdbdb[_0x22e3b6(0x14b)]=this[_0x22e3b6(0x152)][_0x22e3b6(0x179)],_0x2bdbdb['_imgHeight']=this[_0x22e3b6(0x152)][_0x22e3b6(0x242)],_0x2bdbdb['updateGeometry'](),this[_0x22e3b6(0x1d8)]=_0x2bdbdb,this[_0x22e3b6(0x1d8)][_0x22e3b6(0x14c)](this[_0x22e3b6(0x152)]);}['render'](){const _0x20bddd=_0x1f323d;if(this[_0x20bddd(0x1d8)]){let _0x2c028e=this[_0x20bddd(0x1bd)][_0x20bddd(0x129)]();const _0x38d697=_0x2c028e[_0x20bddd(0x199)]();this[_0x20bddd(0x1d8)][_0x20bddd(0x1df)](_0x38d697),_0x38d697[_0x20bddd(0x182)](),this['_device'][_0x20bddd(0x230)][_0x20bddd(0x247)]([_0x2c028e[_0x20bddd(0x1ef)]()]);}let _0x8a637d=this[_0x20bddd(0x1bd)]['createCommandEncoder']();const _0x435a21=_0x8a637d[_0x20bddd(0x257)]({'colorAttachments':[{'view':this[_0x20bddd(0x200)]['getCurrentTexture']()[_0x20bddd(0x206)](),'clearValue':this[_0x20bddd(0x120)],'loadOp':_0x20bddd(0x1c7),'storeOp':'store'}]});_0x435a21[_0x20bddd(0x132)](this[_0x20bddd(0x22b)]),_0x435a21[_0x20bddd(0x17e)](0x0,this[_0x20bddd(0x214)]),_0x435a21['draw'](0x6),_0x435a21[_0x20bddd(0x182)](),this[_0x20bddd(0x1bd)][_0x20bddd(0x230)][_0x20bddd(0x247)]([_0x8a637d['finish']()]);}}class StandardTextObject{constructor(_0xd42524,_0x1066e8=0x5,_0x1598d5=_0x1f323d(0x223)){const _0x3bcfea=_0x1f323d;this['_textFont']=_0x1598d5,this['_lineSpacing']=_0x1066e8,this[_0x3bcfea(0x259)]=document['createElement'](_0x3bcfea(0x194)),this['_textContext']=this['_textCanvas'][_0x3bcfea(0x1f2)]('2d'),this[_0x3bcfea(0x1d5)](_0xd42524),this['updateText'](_0xd42524),this['_textCanvas']['style'][_0x3bcfea(0x1b5)]='absolute',this[_0x3bcfea(0x259)][_0x3bcfea(0x21c)]['top']='10px',this['_textCanvas'][_0x3bcfea(0x21c)]['left']=_0x3bcfea(0x25d),this['_textCanvas']['style'][_0x3bcfea(0x1bb)]=_0x3bcfea(0x126),document[_0x3bcfea(0x1c8)][_0x3bcfea(0x1e2)](this['_textCanvas']);}[_0x1f323d(0x1ce)](){const _0x3fb43a=_0x1f323d;this[_0x3fb43a(0x259)][_0x3fb43a(0x14a)]=!this['_textCanvas'][_0x3fb43a(0x14a)];}[_0x1f323d(0x1d5)](_0x572a7d){const _0x595fac=_0x1f323d;this[_0x595fac(0x11f)]['font']=this[_0x595fac(0x220)],this['_lines']=_0x572a7d['split']('\x0a'),this['_width']=Math[_0x595fac(0x1b0)](...this['_lines'][_0x595fac(0x18c)](_0x4abbf1=>this[_0x595fac(0x11f)][_0x595fac(0x227)](_0x4abbf1)[_0x595fac(0x179)]));const _0x434ca5=this['_textFont'][_0x595fac(0x1e0)](/(\d+)px/);_0x434ca5?this[_0x595fac(0x234)]=parseInt(_0x434ca5[0x1],0xa):(this[_0x595fac(0x234)]=0x12,this[_0x595fac(0x220)]=_0x595fac(0x223)),this[_0x595fac(0x1a1)]=this[_0x595fac(0x224)][_0x595fac(0x1b6)]*(this[_0x595fac(0x234)]+this['_lineSpacing']),this[_0x595fac(0x232)]=0x5,this[_0x595fac(0x1b9)]=0x3,this['_canvasWidth']=Math[_0x595fac(0x1e5)](this[_0x595fac(0x20d)]+this[_0x595fac(0x232)]*0x2),this[_0x595fac(0x184)]=Math['ceil'](this[_0x595fac(0x1a1)]+this[_0x595fac(0x1b9)]),this[_0x595fac(0x259)][_0x595fac(0x179)]=this[_0x595fac(0x172)],this[_0x595fac(0x259)][_0x595fac(0x242)]=this['_canvasHeight'],this[_0x595fac(0x11f)][_0x595fac(0x1e3)]=this[_0x595fac(0x220)],this[_0x595fac(0x11f)][_0x595fac(0x1e1)]=_0x595fac(0x18e);}[_0x1f323d(0x237)](_0xb75aa5){const _0xd3f745=_0x1f323d;this[_0xd3f745(0x224)]=_0xb75aa5[_0xd3f745(0x209)]('\x0a'),this[_0xd3f745(0x11f)][_0xd3f745(0x14d)]=_0xd3f745(0x1a2),this[_0xd3f745(0x11f)]['clearRect'](0x0,0x0,this['_canvasWidth'],this['_canvasHeight']),this[_0xd3f745(0x11f)][_0xd3f745(0x23e)](0x0,0x0,this[_0xd3f745(0x172)],this[_0xd3f745(0x184)]),this[_0xd3f745(0x11f)][_0xd3f745(0x14d)]=_0xd3f745(0x145),this[_0xd3f745(0x224)][_0xd3f745(0x236)]((_0x231ff0,_0x64218d)=>{const _0x2adba4=_0xd3f745,_0x3d83c0=this[_0x2adba4(0x232)],_0x3e8d08=this[_0x2adba4(0x1b9)]+_0x64218d*(this['_fontSize']+this[_0x2adba4(0x1e4)]);this[_0x2adba4(0x11f)][_0x2adba4(0x187)](_0x231ff0,_0x3d83c0,_0x3e8d08);});}}class SceneObject{static [_0x1f323d(0x1e9)]=0x0;constructor(_0x552e61,_0x5dad9d){const _0x49a9e2=_0x1f323d;if(this['constructor']==SceneObject)throw new Error(_0x49a9e2(0x1a6));this[_0x49a9e2(0x1bd)]=_0x552e61,this['_canvasFormat']=_0x5dad9d,SceneObject[_0x49a9e2(0x1e9)]+=0x1;}['getName'](){const _0x275476=_0x1f323d;return this[_0x275476(0x12e)][_0x275476(0x1af)]+'\x20'+SceneObject[_0x275476(0x1e9)]['toString']();}async[_0x1f323d(0x1f0)](){const _0x5b2e12=_0x1f323d;await this[_0x5b2e12(0x12d)](),await this[_0x5b2e12(0x14f)](),await this[_0x5b2e12(0x14e)](),await this['createComputePipeline']();}async[_0x1f323d(0x12d)](){const _0x35f272=_0x1f323d;throw new Error(_0x35f272(0x1d9));}['updateGeometry'](){}[_0x1f323d(0x1d4)](_0x331776){return new Promise((_0x4d327c,_0x44990a)=>{const _0x180bd6=_0x319a,_0x30e8e3=new XMLHttpRequest();_0x30e8e3[_0x180bd6(0x18f)](_0x180bd6(0x16a),_0x331776),_0x30e8e3[_0x180bd6(0x1ff)](_0x180bd6(0x1a7),_0x180bd6(0x264)),_0x30e8e3[_0x180bd6(0x1ee)]=function(){const _0x2247dc=_0x180bd6;_0x30e8e3[_0x2247dc(0x15d)]===XMLHttpRequest[_0x2247dc(0x228)]&&_0x30e8e3['status']===0xc8?_0x4d327c(_0x30e8e3[_0x2247dc(0x1d1)]):_0x44990a({'status':_0x30e8e3['status'],'statusText':_0x30e8e3[_0x2247dc(0x240)]});},_0x30e8e3[_0x180bd6(0x1d0)]=function(){const _0x2404f7=_0x180bd6;_0x44990a({'status':_0x30e8e3[_0x2404f7(0x1eb)],'statusText':_0x30e8e3[_0x2404f7(0x240)]});},_0x30e8e3['send']();});}async[_0x1f323d(0x14f)](){throw new Error('Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.');}async[_0x1f323d(0x14e)](){const _0x14cf6d=_0x1f323d;throw new Error(_0x14cf6d(0x13b));}['render'](_0x1ee9d0){const _0x33a33b=_0x1f323d;throw new Error(_0x33a33b(0x1aa));}async[_0x1f323d(0x252)](){const _0x50e939=_0x1f323d;throw new Error(_0x50e939(0x125));}['compute'](_0x3499fa){const _0x114f6c=_0x1f323d;throw new Error(_0x114f6c(0x149));}}class RayTracingObject extends SceneObject{async[_0x1f323d(0x12d)](){}async[_0x1f323d(0x14f)](){const _0x25814a=_0x1f323d;let _0x15e310=await this[_0x25814a(0x1d4)]('/shaders/optimized_tracenothing.wgsl');this[_0x25814a(0x201)]=this[_0x25814a(0x1bd)]['createShaderModule']({'label':'\x20Shader\x20'+this[_0x25814a(0x157)](),'code':_0x15e310});}['updateGeometry'](){}async[_0x1f323d(0x14e)](){}[_0x1f323d(0x24d)](_0x263ba1){}async[_0x1f323d(0x252)](){const _0x344a95=_0x1f323d;this[_0x344a95(0x18b)]=this['_device'][_0x344a95(0x252)]({'label':_0x344a95(0x21a)+this[_0x344a95(0x157)](),'layout':_0x344a95(0x1ed),'compute':{'module':this[_0x344a95(0x201)],'entryPoint':_0x344a95(0x1fb)}});}['createBindGroup'](_0x583384){const _0x5a2361=_0x1f323d;this[_0x5a2361(0x214)]=this[_0x5a2361(0x1bd)][_0x5a2361(0x14c)]({'label':'Ray\x20Tracing\x20Bind\x20Group','layout':this[_0x5a2361(0x18b)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':_0x583384['createView']()}]}),this[_0x5a2361(0x134)]=Math[_0x5a2361(0x1e5)](_0x583384[_0x5a2361(0x179)]),this[_0x5a2361(0x25b)]=Math[_0x5a2361(0x1e5)](_0x583384[_0x5a2361(0x242)]);}[_0x1f323d(0x1df)](_0x4ea3f8){const _0x49dfd5=_0x1f323d;_0x4ea3f8[_0x49dfd5(0x132)](this[_0x49dfd5(0x18b)]),_0x4ea3f8[_0x49dfd5(0x17e)](0x0,this[_0x49dfd5(0x214)]),_0x4ea3f8[_0x49dfd5(0x127)](Math[_0x49dfd5(0x1e5)](this[_0x49dfd5(0x134)]/0x10),Math['ceil'](this[_0x49dfd5(0x25b)]/0x10));}}class UnitCube{constructor(){const _0x3e5408=_0x1f323d;this[_0x3e5408(0x262)]=new Float32Array(Array(0x10)[_0x3e5408(0x1f6)](0x0)),this[_0x3e5408(0x262)][0x0]=0x1,this[_0x3e5408(0x217)]=new Float32Array(Array(0x4)[_0x3e5408(0x1f6)](0x1)),this[_0x3e5408(0x190)]=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x3e5408(0x250)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x3e5408(0x19a)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x3e5408(0x25c)]=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x3e5408(0x19e)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x3e5408(0x11c)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}['updatePose'](_0x41aeb5){const _0x5e0424=_0x1f323d;for(let _0x5f13eb=0x0;_0x5f13eb<0x10;++_0x5f13eb)this[_0x5e0424(0x262)][_0x5f13eb]=_0x41aeb5[_0x5f13eb];}}class UnitSphere{constructor(){const _0x2df20d=_0x1f323d;this[_0x2df20d(0x262)]=new Float32Array(Array(0x10)[_0x2df20d(0x1f6)](0x0)),this[_0x2df20d(0x262)][0x0]=0x1,this[_0x2df20d(0x217)]=new Float32Array(Array(0x4)[_0x2df20d(0x1f6)](0x1));}}class UnitCylinder{constructor(){const _0x2927ee=_0x1f323d;this['_pose']=new Float32Array(Array(0x10)['fill'](0x0)),this[_0x2927ee(0x262)][0x0]=0x1,this[_0x2927ee(0x217)]=new Float32Array(Array(0x4)[_0x2927ee(0x1f6)](0x1));}}class UnitCone{constructor(){const _0x4395e5=_0x1f323d;this[_0x4395e5(0x262)]=new Float32Array(Array(0x10)['fill'](0x0)),this[_0x4395e5(0x262)][0x0]=0x1,this[_0x4395e5(0x217)]=new Float32Array(Array(0x4)[_0x4395e5(0x1f6)](0x1));}}class RayTracingLightBounceDemoSceneObject extends RayTracingObject{constructor(_0x2d840b,_0x181529,_0x22a11f,_0x444240=!![]){const _0x299866=_0x1f323d;super(_0x2d840b,_0x181529),this[_0x299866(0x196)]=new UnitCube(),this[_0x299866(0x193)]=new UnitCube(),this[_0x299866(0x1d2)]=new UnitSphere(),this['_cylinder']=new UnitCylinder(),this[_0x299866(0x1b7)]=new UnitCone(),this[_0x299866(0x213)]=_0x22a11f,this['_showTexture']=_0x444240,this[_0x299866(0x178)]=new Int32Array([0x1,0x0,0x0,0x0]),this[_0x299866(0x171)]=new Image(),this[_0x299866(0x171)][_0x299866(0x163)]=_0x299866(0x1cf),this[_0x299866(0x210)]=new Image(),this['_metal'][_0x299866(0x163)]=_0x299866(0x238),this['_light']=new Image(),this['_light'][_0x299866(0x163)]=_0x299866(0x219),this[_0x299866(0x25f)]=new Image(),this[_0x299866(0x25f)][_0x299866(0x163)]=_0x299866(0x186),this[_0x299866(0x164)]=new Image(),this[_0x299866(0x164)][_0x299866(0x163)]='/assets/envnegy.jpg',this[_0x299866(0x1c5)]=new Image(),this[_0x299866(0x1c5)][_0x299866(0x163)]=_0x299866(0x253),this[_0x299866(0x258)]=new Image(),this[_0x299866(0x258)][_0x299866(0x163)]='/assets/envposx.jpg',this[_0x299866(0x130)]=new Image(),this[_0x299866(0x130)][_0x299866(0x163)]=_0x299866(0x155),this[_0x299866(0x1c6)]=new Image(),this[_0x299866(0x1c6)][_0x299866(0x163)]=_0x299866(0x222),this[_0x299866(0x1f1)]=new Int32Array([0x1,0x1,0x1,0x0]);}async[_0x1f323d(0x12d)](){const _0x526ad0=_0x1f323d;this[_0x526ad0(0x255)]=this['_device']['createBuffer']({'label':'Camera\x20'+this[_0x526ad0(0x157)](),'size':this[_0x526ad0(0x213)][_0x526ad0(0x262)][_0x526ad0(0x20b)]+this[_0x526ad0(0x213)][_0x526ad0(0x245)]['byteLength']+this[_0x526ad0(0x213)][_0x526ad0(0x1c2)]['byteLength'],'usage':GPUBufferUsage[_0x526ad0(0x146)]|GPUBufferUsage[_0x526ad0(0x18a)]}),this['_device']['queue'][_0x526ad0(0x241)](this['_cameraBuffer'],0x0,this[_0x526ad0(0x213)][_0x526ad0(0x262)]),this[_0x526ad0(0x1bd)]['queue']['writeBuffer'](this['_cameraBuffer'],this[_0x526ad0(0x213)][_0x526ad0(0x262)][_0x526ad0(0x20b)],this['_camera'][_0x526ad0(0x245)]),this['_device'][_0x526ad0(0x230)]['writeBuffer'](this[_0x526ad0(0x255)],this[_0x526ad0(0x213)][_0x526ad0(0x262)]['byteLength']+this[_0x526ad0(0x213)][_0x526ad0(0x245)][_0x526ad0(0x20b)],this[_0x526ad0(0x213)][_0x526ad0(0x1c2)]),this[_0x526ad0(0x165)]=this[_0x526ad0(0x1bd)]['createBuffer']({'label':'Box\x20'+this[_0x526ad0(0x157)](),'size':(this[_0x526ad0(0x196)]['_pose'][_0x526ad0(0x20b)]+this['_box'][_0x526ad0(0x217)][_0x526ad0(0x20b)]+this['_box']['_top'][_0x526ad0(0x20b)]*0x6)*0x2,'usage':GPUBufferUsage[_0x526ad0(0x1b4)]|GPUBufferUsage[_0x526ad0(0x18a)]});let _0x161683=0x0;this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x196)][_0x526ad0(0x262)]),_0x161683+=this[_0x526ad0(0x196)]['_pose'][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)]['queue'][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x196)]['_scales']),_0x161683+=this[_0x526ad0(0x196)][_0x526ad0(0x217)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this['_box'][_0x526ad0(0x190)]),_0x161683+=this[_0x526ad0(0x196)][_0x526ad0(0x190)]['byteLength'],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x196)]['_back']),_0x161683+=this[_0x526ad0(0x196)]['_back']['byteLength'],this[_0x526ad0(0x1bd)]['queue']['writeBuffer'](this['_boxBuffer'],_0x161683,this['_box']['_left']),_0x161683+=this['_box']['_left'][_0x526ad0(0x20b)],this['_device'][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x196)]['_right']),_0x161683+=this[_0x526ad0(0x196)][_0x526ad0(0x25c)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this['_box'][_0x526ad0(0x19e)]),_0x161683+=this[_0x526ad0(0x196)][_0x526ad0(0x19e)]['byteLength'],this[_0x526ad0(0x1bd)]['queue']['writeBuffer'](this[_0x526ad0(0x165)],_0x161683,this['_box'][_0x526ad0(0x11c)]),_0x161683+=this[_0x526ad0(0x196)]['_down'][_0x526ad0(0x20b)],this[_0x526ad0(0x207)]=_0x161683,this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this['_boxBuffer'],_0x161683,this[_0x526ad0(0x193)][_0x526ad0(0x262)]),_0x161683+=this[_0x526ad0(0x193)]['_pose'][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)]['writeBuffer'](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x193)]['_scales']),_0x161683+=this[_0x526ad0(0x193)][_0x526ad0(0x217)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x193)][_0x526ad0(0x190)]),_0x161683+=this[_0x526ad0(0x193)][_0x526ad0(0x190)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this['_boxBuffer'],_0x161683,this['_cube'][_0x526ad0(0x250)]),_0x161683+=this[_0x526ad0(0x193)][_0x526ad0(0x250)][_0x526ad0(0x20b)],this['_device'][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x193)][_0x526ad0(0x19a)]),_0x161683+=this[_0x526ad0(0x193)][_0x526ad0(0x19a)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this['_boxBuffer'],_0x161683,this[_0x526ad0(0x193)]['_right']),_0x161683+=this[_0x526ad0(0x193)]['_right'][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)]['queue'][_0x526ad0(0x241)](this['_boxBuffer'],_0x161683,this[_0x526ad0(0x193)][_0x526ad0(0x19e)]),_0x161683+=this[_0x526ad0(0x193)][_0x526ad0(0x19e)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x165)],_0x161683,this[_0x526ad0(0x193)][_0x526ad0(0x11c)]),this['_sphereBuffer']=this[_0x526ad0(0x1bd)][_0x526ad0(0x161)]({'label':_0x526ad0(0x25e)+this['getName'](),'size':this[_0x526ad0(0x1d2)][_0x526ad0(0x262)]['byteLength']+this[_0x526ad0(0x1d2)][_0x526ad0(0x217)][_0x526ad0(0x20b)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage['COPY_DST']}),_0x161683=0x0,this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this['_sphereBuffer'],_0x161683,this[_0x526ad0(0x1d2)][_0x526ad0(0x262)]),_0x161683+=this['_sphere'][_0x526ad0(0x262)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x1b3)],_0x161683,this[_0x526ad0(0x1d2)][_0x526ad0(0x217)]),this[_0x526ad0(0x1d7)]=this[_0x526ad0(0x1bd)]['createBuffer']({'label':_0x526ad0(0x24c)+this[_0x526ad0(0x157)](),'size':this[_0x526ad0(0x1b7)][_0x526ad0(0x262)][_0x526ad0(0x20b)]+this[_0x526ad0(0x1b7)][_0x526ad0(0x217)][_0x526ad0(0x20b)],'usage':GPUBufferUsage[_0x526ad0(0x1b4)]|GPUBufferUsage['COPY_DST']}),_0x161683=0x0,this['_device']['queue'][_0x526ad0(0x241)](this[_0x526ad0(0x1d7)],_0x161683,this['_cone'][_0x526ad0(0x262)]),_0x161683+=this[_0x526ad0(0x1b7)][_0x526ad0(0x262)]['byteLength'],this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x1d7)],_0x161683,this['_cone'][_0x526ad0(0x217)]),this['_cylinderBuffer']=this[_0x526ad0(0x1bd)][_0x526ad0(0x161)]({'label':_0x526ad0(0x174)+this[_0x526ad0(0x157)](),'size':this[_0x526ad0(0x261)][_0x526ad0(0x262)][_0x526ad0(0x20b)]+this[_0x526ad0(0x261)][_0x526ad0(0x217)][_0x526ad0(0x20b)],'usage':GPUBufferUsage[_0x526ad0(0x1b4)]|GPUBufferUsage['COPY_DST']}),_0x161683=0x0,this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x23b)],_0x161683,this[_0x526ad0(0x261)][_0x526ad0(0x262)]),_0x161683+=this[_0x526ad0(0x261)][_0x526ad0(0x262)][_0x526ad0(0x20b)],this[_0x526ad0(0x1bd)]['queue']['writeBuffer'](this['_cylinderBuffer'],_0x161683,this[_0x526ad0(0x261)][_0x526ad0(0x217)]),this[_0x526ad0(0x169)]=this[_0x526ad0(0x1bd)][_0x526ad0(0x161)]({'label':'Parameters\x20'+this['getName'](),'size':this['_params'][_0x526ad0(0x20b)],'usage':GPUBufferUsage[_0x526ad0(0x146)]|GPUBufferUsage[_0x526ad0(0x18a)]}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x241)](this[_0x526ad0(0x169)],0x0,this['_params']),this['_lightBuffer']=this[_0x526ad0(0x1bd)][_0x526ad0(0x161)]({'label':'Light\x20'+this[_0x526ad0(0x157)](),'size':0x14*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage[_0x526ad0(0x146)]|GPUBufferUsage['COPY_DST']}),await this[_0x526ad0(0x171)]['decode'](),this['_goldBitmap']=await createImageBitmap(this[_0x526ad0(0x171)]),this[_0x526ad0(0x1cc)]=this['_device'][_0x526ad0(0x1d6)]({'label':_0x526ad0(0x1c0)+this['getName'](),'size':[this['_goldBitmap']['width'],this['_goldBitmap'][_0x526ad0(0x242)],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage[_0x526ad0(0x212)]}),this['_device'][_0x526ad0(0x230)][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x181)]},{'texture':this[_0x526ad0(0x1cc)]},[this[_0x526ad0(0x181)][_0x526ad0(0x179)],this[_0x526ad0(0x181)][_0x526ad0(0x242)]]),await this[_0x526ad0(0x210)][_0x526ad0(0x21f)](),this[_0x526ad0(0x142)]=await createImageBitmap(this[_0x526ad0(0x210)]),this[_0x526ad0(0x203)]=this[_0x526ad0(0x1bd)]['createTexture']({'label':_0x526ad0(0x1c0)+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x142)][_0x526ad0(0x179)],this['_metalBitmap'][_0x526ad0(0x242)],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage[_0x526ad0(0x212)]}),this['_device'][_0x526ad0(0x230)]['copyExternalImageToTexture']({'source':this[_0x526ad0(0x142)]},{'texture':this['_metalTexture']},[this[_0x526ad0(0x142)][_0x526ad0(0x179)],this[_0x526ad0(0x142)][_0x526ad0(0x242)]]),await this[_0x526ad0(0x13e)]['decode'](),this[_0x526ad0(0x16f)]=await createImageBitmap(this[_0x526ad0(0x13e)]),this[_0x526ad0(0x1cb)]=this['_device']['createTexture']({'label':_0x526ad0(0x1c0)+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x16f)]['width'],this[_0x526ad0(0x16f)]['height'],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage['RENDER_ATTACHMENT']}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x16f)]},{'texture':this[_0x526ad0(0x1cb)]},[this[_0x526ad0(0x16f)]['width'],this['_lightBitmap'][_0x526ad0(0x242)]]),await this[_0x526ad0(0x25f)][_0x526ad0(0x21f)](),this['_envnxBitmap']=await createImageBitmap(this[_0x526ad0(0x25f)]),this[_0x526ad0(0x1dd)]=this[_0x526ad0(0x1bd)][_0x526ad0(0x1d6)]({'label':_0x526ad0(0x1c0)+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x20f)]['width'],this[_0x526ad0(0x20f)][_0x526ad0(0x242)],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x526ad0(0x212)]}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)]['copyExternalImageToTexture']({'source':this['_envnxBitmap']},{'texture':this['_envnxTexture']},[this[_0x526ad0(0x20f)][_0x526ad0(0x179)],this[_0x526ad0(0x20f)][_0x526ad0(0x242)]]),await this['_envny'][_0x526ad0(0x21f)](),this[_0x526ad0(0x156)]=await createImageBitmap(this['_envny']),this[_0x526ad0(0x1de)]=this[_0x526ad0(0x1bd)][_0x526ad0(0x1d6)]({'label':'Texture\x20'+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x156)][_0x526ad0(0x179)],this['_envnyBitmap'][_0x526ad0(0x242)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage[_0x526ad0(0x212)]}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x156)]},{'texture':this[_0x526ad0(0x1de)]},[this[_0x526ad0(0x156)][_0x526ad0(0x179)],this[_0x526ad0(0x156)]['height']]),await this['_envnz'][_0x526ad0(0x21f)](),this[_0x526ad0(0x22e)]=await createImageBitmap(this[_0x526ad0(0x1c5)]),this['_envnzTexture']=this[_0x526ad0(0x1bd)][_0x526ad0(0x1d6)]({'label':_0x526ad0(0x1c0)+this['getName'](),'size':[this[_0x526ad0(0x22e)][_0x526ad0(0x179)],this[_0x526ad0(0x22e)]['height'],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage['TEXTURE_BINDING']|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage[_0x526ad0(0x212)]}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)]['copyExternalImageToTexture']({'source':this[_0x526ad0(0x22e)]},{'texture':this[_0x526ad0(0x11d)]},[this['_envnzBitmap'][_0x526ad0(0x179)],this[_0x526ad0(0x22e)][_0x526ad0(0x242)]]),await this[_0x526ad0(0x258)]['decode'](),this[_0x526ad0(0x168)]=await createImageBitmap(this[_0x526ad0(0x258)]),this['_envpxTexture']=this[_0x526ad0(0x1bd)]['createTexture']({'label':'Texture\x20'+this['getName'](),'size':[this['_envpxBitmap'][_0x526ad0(0x179)],this[_0x526ad0(0x168)][_0x526ad0(0x242)],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage[_0x526ad0(0x212)]}),this[_0x526ad0(0x1bd)]['queue'][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x168)]},{'texture':this[_0x526ad0(0x11b)]},[this[_0x526ad0(0x168)][_0x526ad0(0x179)],this[_0x526ad0(0x168)]['height']]),await this['_envpy'][_0x526ad0(0x21f)](),this['_envpyBitmap']=await createImageBitmap(this['_envpy']),this['_envpyTexture']=this[_0x526ad0(0x1bd)]['createTexture']({'label':_0x526ad0(0x1c0)+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x1a0)][_0x526ad0(0x179)],this[_0x526ad0(0x1a0)][_0x526ad0(0x242)],0x1],'format':_0x526ad0(0x19f),'usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage[_0x526ad0(0x18a)]|GPUTextureUsage['RENDER_ATTACHMENT']}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x1a0)]},{'texture':this[_0x526ad0(0x12c)]},[this[_0x526ad0(0x1a0)][_0x526ad0(0x179)],this[_0x526ad0(0x1a0)][_0x526ad0(0x242)]]),await this[_0x526ad0(0x1c6)][_0x526ad0(0x21f)](),this['_envpzBitmap']=await createImageBitmap(this[_0x526ad0(0x1c6)]),this['_envpzTexture']=this[_0x526ad0(0x1bd)][_0x526ad0(0x1d6)]({'label':'Texture\x20'+this[_0x526ad0(0x157)](),'size':[this[_0x526ad0(0x1f8)]['width'],this[_0x526ad0(0x1f8)][_0x526ad0(0x242)],0x1],'format':'rgba8unorm','usage':GPUTextureUsage[_0x526ad0(0x20e)]|GPUTextureUsage['COPY_DST']|GPUTextureUsage[_0x526ad0(0x212)]}),this['_device']['queue'][_0x526ad0(0x1ac)]({'source':this[_0x526ad0(0x1f8)]},{'texture':this[_0x526ad0(0x251)]},[this[_0x526ad0(0x1f8)][_0x526ad0(0x179)],this[_0x526ad0(0x1f8)]['height']]),this[_0x526ad0(0x1c9)]=this[_0x526ad0(0x1bd)][_0x526ad0(0x244)]({'magFilter':_0x526ad0(0x1b1),'minFilter':'linear'}),this['_textureParamBuffer']=this[_0x526ad0(0x1bd)][_0x526ad0(0x161)]({'label':'Parameters\x20'+this[_0x526ad0(0x157)](),'size':this['_textureParams']['byteLength'],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x526ad0(0x18a)]}),this[_0x526ad0(0x1bd)][_0x526ad0(0x230)]['writeBuffer'](this['_textureParamBuffer'],0x0,this['_textureParams']);}[_0x1f323d(0x226)](){const _0x40b05e=_0x1f323d;this[_0x40b05e(0x213)]['updateSize'](this[_0x40b05e(0x14b)],this[_0x40b05e(0x151)]),this[_0x40b05e(0x1bd)][_0x40b05e(0x230)]['writeBuffer'](this['_cameraBuffer'],this[_0x40b05e(0x213)][_0x40b05e(0x262)]['byteLength']+this[_0x40b05e(0x213)][_0x40b05e(0x245)][_0x40b05e(0x20b)],this[_0x40b05e(0x213)][_0x40b05e(0x1c2)]);}[_0x1f323d(0x19d)](){const _0x44c2ef=_0x1f323d;this[_0x44c2ef(0x1bd)][_0x44c2ef(0x230)]['writeBuffer'](this[_0x44c2ef(0x165)],0x0,this['_box'][_0x44c2ef(0x262)]);}[_0x1f323d(0x23c)](){const _0x4702ee=_0x1f323d;this[_0x4702ee(0x1bd)][_0x4702ee(0x230)][_0x4702ee(0x241)](this[_0x4702ee(0x165)],this['_box'][_0x4702ee(0x262)][_0x4702ee(0x20b)],this[_0x4702ee(0x196)][_0x4702ee(0x217)]);}[_0x1f323d(0x133)](){const _0x33e75f=_0x1f323d;this[_0x33e75f(0x1bd)][_0x33e75f(0x230)]['writeBuffer'](this[_0x33e75f(0x165)],this[_0x33e75f(0x207)],this[_0x33e75f(0x193)]['_pose']);}[_0x1f323d(0x1f4)](){const _0x4e1fba=_0x1f323d;this[_0x4e1fba(0x1bd)][_0x4e1fba(0x230)][_0x4e1fba(0x241)](this['_boxBuffer'],this[_0x4e1fba(0x207)]+this[_0x4e1fba(0x193)][_0x4e1fba(0x262)][_0x4e1fba(0x20b)],this[_0x4e1fba(0x193)][_0x4e1fba(0x217)]);}[_0x1f323d(0x17c)](){const _0x5ac08e=_0x1f323d;this[_0x5ac08e(0x1bd)][_0x5ac08e(0x230)][_0x5ac08e(0x241)](this[_0x5ac08e(0x1b3)],0x0,this[_0x5ac08e(0x1d2)][_0x5ac08e(0x262)]);}[_0x1f323d(0x24a)](){const _0x9ec316=_0x1f323d;this[_0x9ec316(0x1bd)][_0x9ec316(0x230)][_0x9ec316(0x241)](this['_sphereBuffer'],this[_0x9ec316(0x1d2)][_0x9ec316(0x262)][_0x9ec316(0x20b)],this[_0x9ec316(0x1d2)][_0x9ec316(0x217)]);}[_0x1f323d(0x1ae)](){const _0x1a5900=_0x1f323d;this['_device'][_0x1a5900(0x230)][_0x1a5900(0x241)](this[_0x1a5900(0x1d7)],0x0,this['_cone'][_0x1a5900(0x262)]);}[_0x1f323d(0x1e7)](){const _0x2dfc66=_0x1f323d;this['_device']['queue']['writeBuffer'](this[_0x2dfc66(0x1d7)],this[_0x2dfc66(0x1b7)][_0x2dfc66(0x262)][_0x2dfc66(0x20b)],this['_cone'][_0x2dfc66(0x217)]);}['updateCylinderPose'](){const _0x48b3f1=_0x1f323d;this[_0x48b3f1(0x1bd)][_0x48b3f1(0x230)]['writeBuffer'](this[_0x48b3f1(0x23b)],0x0,this['_cylinder']['_pose']);}[_0x1f323d(0x175)](){const _0x20b51e=_0x1f323d;this[_0x20b51e(0x1bd)][_0x20b51e(0x230)][_0x20b51e(0x241)](this[_0x20b51e(0x23b)],this[_0x20b51e(0x261)][_0x20b51e(0x262)][_0x20b51e(0x20b)],this[_0x20b51e(0x261)][_0x20b51e(0x217)]);}[_0x1f323d(0x195)](){const _0x4c612b=_0x1f323d;this[_0x4c612b(0x1bd)][_0x4c612b(0x230)][_0x4c612b(0x241)](this['_cameraBuffer'],0x0,this[_0x4c612b(0x213)][_0x4c612b(0x262)]);}[_0x1f323d(0x124)](){const _0x1b9709=_0x1f323d;this[_0x1b9709(0x1bd)][_0x1b9709(0x230)]['writeBuffer'](this[_0x1b9709(0x255)],this['_camera'][_0x1b9709(0x262)][_0x1b9709(0x20b)],this[_0x1b9709(0x213)][_0x1b9709(0x245)]);}[_0x1f323d(0x16e)](){const _0x1621bb=_0x1f323d;this[_0x1621bb(0x1bd)][_0x1621bb(0x230)]['writeBuffer'](this[_0x1621bb(0x169)],0x0,this['_params']);}['updateTextureParam'](){const _0x1a88a4=_0x1f323d;this[_0x1a88a4(0x1bd)][_0x1a88a4(0x230)][_0x1a88a4(0x241)](this[_0x1a88a4(0x211)],0x0,this[_0x1a88a4(0x1f1)]);}[_0x1f323d(0x246)](_0x3c392a){const _0x472a1f=_0x1f323d;let _0x263ce1=0x0;this[_0x472a1f(0x1bd)][_0x472a1f(0x230)][_0x472a1f(0x241)](this[_0x472a1f(0x254)],_0x263ce1,_0x3c392a[_0x472a1f(0x1fd)]),_0x263ce1+=_0x3c392a[_0x472a1f(0x1fd)][_0x472a1f(0x20b)],this[_0x472a1f(0x1bd)]['queue'][_0x472a1f(0x241)](this[_0x472a1f(0x254)],_0x263ce1,_0x3c392a['_position']),_0x263ce1+=_0x3c392a['_position'][_0x472a1f(0x20b)],this[_0x472a1f(0x1bd)][_0x472a1f(0x230)][_0x472a1f(0x241)](this['_lightBuffer'],_0x263ce1,_0x3c392a[_0x472a1f(0x1ec)]),_0x263ce1+=_0x3c392a[_0x472a1f(0x1ec)]['byteLength'],this[_0x472a1f(0x1bd)][_0x472a1f(0x230)][_0x472a1f(0x241)](this[_0x472a1f(0x254)],_0x263ce1,_0x3c392a[_0x472a1f(0x1ca)]),_0x263ce1+=_0x3c392a[_0x472a1f(0x1ca)][_0x472a1f(0x20b)],this['_device'][_0x472a1f(0x230)][_0x472a1f(0x241)](this['_lightBuffer'],_0x263ce1,_0x3c392a['_params']);}async[_0x1f323d(0x14f)](){const _0x16a0a2=_0x1f323d;let _0xe9185b=await this[_0x16a0a2(0x1d4)](_0x16a0a2(0x25a));this[_0x16a0a2(0x201)]=this[_0x16a0a2(0x1bd)][_0x16a0a2(0x229)]({'label':_0x16a0a2(0x21b)+this[_0x16a0a2(0x157)](),'code':_0xe9185b}),this['_bindGroupLayout1']=this['_device'][_0x16a0a2(0x215)]({'label':_0x16a0a2(0x1c1)+this[_0x16a0a2(0x157)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'buffer':{'type':_0x16a0a2(0x123)}},{'binding':0x2,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'storageTexture':{'format':this[_0x16a0a2(0x121)]}},{'binding':0x3,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x16a0a2(0x123)}},{'binding':0x4,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'buffer':{'type':'read-only-storage'}},{'binding':0x5,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'buffer':{'type':_0x16a0a2(0x123)}},{'binding':0x6,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'buffer':{}},{'binding':0x7,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x8,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'buffer':{}}]}),this[_0x16a0a2(0x221)]=this[_0x16a0a2(0x1bd)][_0x16a0a2(0x215)]({'label':_0x16a0a2(0x1e8)+this[_0x16a0a2(0x157)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':'float'}},{'binding':0x3,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x4,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'texture':{'sampleType':'float'}},{'binding':0x5,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'texture':{'sampleType':'float'}},{'binding':0x6,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x7,'visibility':GPUShaderStage[_0x16a0a2(0x144)],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x8,'visibility':GPUShaderStage['COMPUTE'],'texture':{'sampleType':_0x16a0a2(0x1ad)}},{'binding':0x9,'visibility':GPUShaderStage['COMPUTE'],'sampler':{}}]}),this[_0x16a0a2(0x192)]=this[_0x16a0a2(0x1bd)][_0x16a0a2(0x158)]({'label':_0x16a0a2(0x239),'bindGroupLayouts':[this['_bindGroupLayout1'],this[_0x16a0a2(0x221)]]});}async[_0x1f323d(0x252)](){const _0x2b0aa2=_0x1f323d;this[_0x2b0aa2(0x18b)]=this[_0x2b0aa2(0x1bd)][_0x2b0aa2(0x252)]({'label':'Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20'+this[_0x2b0aa2(0x157)](),'layout':this[_0x2b0aa2(0x192)],'compute':{'module':this[_0x2b0aa2(0x201)],'entryPoint':_0x2b0aa2(0x1fb)}});}['createBindGroup'](_0x34740a){const _0x28eaf6=_0x1f323d;this[_0x28eaf6(0x248)]=this[_0x28eaf6(0x1bd)][_0x28eaf6(0x14c)]({'label':'Ray\x20Trace\x20Box\x20Bind\x20Group\x201','layout':this[_0x28eaf6(0x18b)][_0x28eaf6(0x23d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x28eaf6(0x255)]}},{'binding':0x1,'resource':{'buffer':this[_0x28eaf6(0x165)]}},{'binding':0x2,'resource':_0x34740a['createView']()},{'binding':0x3,'resource':{'buffer':this['_sphereBuffer']}},{'binding':0x4,'resource':{'buffer':this[_0x28eaf6(0x1d7)]}},{'binding':0x5,'resource':{'buffer':this[_0x28eaf6(0x23b)]}},{'binding':0x6,'resource':{'buffer':this[_0x28eaf6(0x169)]}},{'binding':0x7,'resource':{'buffer':this['_lightBuffer']}},{'binding':0x8,'resource':{'buffer':this[_0x28eaf6(0x211)]}}]}),this[_0x28eaf6(0x139)]=this[_0x28eaf6(0x1bd)]['createBindGroup']({'label':_0x28eaf6(0x1dc),'layout':this[_0x28eaf6(0x18b)]['getBindGroupLayout'](0x1),'entries':[{'binding':0x0,'resource':this[_0x28eaf6(0x1cc)][_0x28eaf6(0x206)]()},{'binding':0x1,'resource':this[_0x28eaf6(0x203)]['createView']()},{'binding':0x2,'resource':this[_0x28eaf6(0x1cb)]['createView']()},{'binding':0x3,'resource':this[_0x28eaf6(0x1dd)][_0x28eaf6(0x206)]()},{'binding':0x4,'resource':this[_0x28eaf6(0x1de)][_0x28eaf6(0x206)]()},{'binding':0x5,'resource':this[_0x28eaf6(0x11d)]['createView']()},{'binding':0x6,'resource':this[_0x28eaf6(0x11b)][_0x28eaf6(0x206)]()},{'binding':0x7,'resource':this[_0x28eaf6(0x12c)]['createView']()},{'binding':0x8,'resource':this[_0x28eaf6(0x251)][_0x28eaf6(0x206)]()},{'binding':0x9,'resource':this[_0x28eaf6(0x1c9)]}]}),this[_0x28eaf6(0x134)]=Math['ceil'](_0x34740a[_0x28eaf6(0x179)]),this[_0x28eaf6(0x25b)]=Math[_0x28eaf6(0x1e5)](_0x34740a['height']);}[_0x1f323d(0x1df)](_0x4f1629){const _0x39ca8b=_0x1f323d;_0x4f1629[_0x39ca8b(0x132)](this[_0x39ca8b(0x18b)]),_0x4f1629[_0x39ca8b(0x17e)](0x0,this[_0x39ca8b(0x248)]),_0x4f1629[_0x39ca8b(0x17e)](0x1,this[_0x39ca8b(0x139)]),_0x4f1629[_0x39ca8b(0x127)](Math[_0x39ca8b(0x1e5)](this[_0x39ca8b(0x134)]/0x10),Math[_0x39ca8b(0x1e5)](this[_0x39ca8b(0x25b)]/0x10));}}class PGA3D{static[_0x1f323d(0x202)](_0x28b28d,_0x1dd735){return[_0x28b28d[0x0]*_0x1dd735[0x0]-_0x28b28d[0x1]*_0x1dd735[0x1]-_0x28b28d[0x2]*_0x1dd735[0x2]-_0x28b28d[0x3]*_0x1dd735[0x3]-_0x28b28d[0x7]*_0x1dd735[0x7]+_0x28b28d[0xb]*_0x1dd735[0xb]+_0x28b28d[0xc]*_0x1dd735[0xc]+_0x28b28d[0xd]*_0x1dd735[0xd],_0x28b28d[0x0]*_0x1dd735[0x1]+_0x28b28d[0x1]*_0x1dd735[0x0]-_0x28b28d[0x2]*_0x1dd735[0x3]+_0x28b28d[0x3]*_0x1dd735[0x2]+_0x28b28d[0x7]*_0x1dd735[0xd]+_0x28b28d[0xb]*_0x1dd735[0xc]-_0x28b28d[0xc]*_0x1dd735[0xb]+_0x28b28d[0xd]*_0x1dd735[0x7],_0x28b28d[0x0]*_0x1dd735[0x2]+_0x28b28d[0x1]*_0x1dd735[0x3]+_0x28b28d[0x2]*_0x1dd735[0x0]-_0x28b28d[0x3]*_0x1dd735[0x1]-_0x28b28d[0x7]*_0x1dd735[0xc]+_0x28b28d[0xb]*_0x1dd735[0xd]-_0x28b28d[0xc]*_0x1dd735[0x7]-_0x28b28d[0xd]*_0x1dd735[0xb],_0x28b28d[0x0]*_0x1dd735[0x3]-_0x28b28d[0x1]*_0x1dd735[0x2]+_0x28b28d[0x2]*_0x1dd735[0x1]+_0x28b28d[0x3]*_0x1dd735[0x0]+_0x28b28d[0x7]*_0x1dd735[0xb]+_0x28b28d[0xb]*_0x1dd735[0x7]+_0x28b28d[0xc]*_0x1dd735[0xd]-_0x28b28d[0xd]*_0x1dd735[0xc],_0x28b28d[0x0]*_0x1dd735[0x4]+_0x28b28d[0x1]*_0x1dd735[0x5]+_0x28b28d[0x2]*_0x1dd735[0x6]-_0x28b28d[0x3]*_0x1dd735[0xf]+_0x28b28d[0x4]*_0x1dd735[0x0]-_0x28b28d[0x5]*_0x1dd735[0x1]-_0x28b28d[0x6]*_0x1dd735[0x2]+_0x28b28d[0x7]*_0x1dd735[0xa]+_0x28b28d[0x8]*_0x1dd735[0xc]+_0x28b28d[0x9]*_0x1dd735[0xd]-_0x28b28d[0xa]*_0x1dd735[0x7]-_0x28b28d[0xb]*_0x1dd735[0xe]+_0x28b28d[0xc]*_0x1dd735[0x8]+_0x28b28d[0xd]*_0x1dd735[0x9]+_0x28b28d[0xe]*_0x1dd735[0xb]-_0x28b28d[0xf]*_0x1dd735[0x3],_0x28b28d[0x0]*_0x1dd735[0x5]-_0x28b28d[0x1]*_0x1dd735[0x4]+_0x28b28d[0x2]*_0x1dd735[0xf]+_0x28b28d[0x3]*_0x1dd735[0x6]+_0x28b28d[0x4]*_0x1dd735[0x1]+_0x28b28d[0x5]*_0x1dd735[0x0]-_0x28b28d[0x6]*_0x1dd735[0x3]-_0x28b28d[0x7]*_0x1dd735[0x9]-_0x28b28d[0x8]*_0x1dd735[0xb]+_0x28b28d[0x9]*_0x1dd735[0x7]+_0x28b28d[0xa]*_0x1dd735[0xc]-_0x28b28d[0xb]*_0x1dd735[0x8]-_0x28b28d[0xc]*_0x1dd735[0xe]+_0x28b28d[0xd]*_0x1dd735[0xa]+_0x28b28d[0xe]*_0x1dd735[0xc]+_0x28b28d[0xf]*_0x1dd735[0x2],_0x28b28d[0x0]*_0x1dd735[0x6]-_0x28b28d[0x1]*_0x1dd735[0xf]-_0x28b28d[0x2]*_0x1dd735[0x4]-_0x28b28d[0x3]*_0x1dd735[0x5]+_0x28b28d[0x4]*_0x1dd735[0x2]+_0x28b28d[0x5]*_0x1dd735[0x3]+_0x28b28d[0x6]*_0x1dd735[0x0]+_0x28b28d[0x7]*_0x1dd735[0x8]-_0x28b28d[0x8]*_0x1dd735[0x7]-_0x28b28d[0x9]*_0x1dd735[0xb]-_0x28b28d[0xa]*_0x1dd735[0xc]-_0x28b28d[0xb]*_0x1dd735[0x9]-_0x28b28d[0xc]*_0x1dd735[0xa]-_0x28b28d[0xd]*_0x1dd735[0xe]+_0x28b28d[0xe]*_0x1dd735[0xd]-_0x28b28d[0xf]*_0x1dd735[0x1],_0x28b28d[0x0]*_0x1dd735[0x7]+_0x28b28d[0x1]*_0x1dd735[0xd]-_0x28b28d[0x2]*_0x1dd735[0xc]+_0x28b28d[0x3]*_0x1dd735[0xb]+_0x28b28d[0x7]*_0x1dd735[0x0]+_0x28b28d[0xb]*_0x1dd735[0x3]-_0x28b28d[0xc]*_0x1dd735[0x2]+_0x28b28d[0xd]*_0x1dd735[0x1],_0x28b28d[0x0]*_0x1dd735[0x8]+_0x28b28d[0x1]*_0x1dd735[0xe]-_0x28b28d[0x2]*_0x1dd735[0xa]+_0x28b28d[0x3]*_0x1dd735[0x9]+_0x28b28d[0x4]*_0x1dd735[0xc]-_0x28b28d[0x5]*_0x1dd735[0xb]+_0x28b28d[0x6]*_0x1dd735[0x7]-_0x28b28d[0x7]*_0x1dd735[0x6]+_0x28b28d[0x8]*_0x1dd735[0x0]-_0x28b28d[0x9]*_0x1dd735[0x3]+_0x28b28d[0xa]*_0x1dd735[0x2]-_0x28b28d[0xb]*_0x1dd735[0x5]+_0x28b28d[0xc]*_0x1dd735[0x4]-_0x28b28d[0xd]*_0x1dd735[0xf]+_0x28b28d[0xe]*_0x1dd735[0x1]+_0x28b28d[0xf]*_0x1dd735[0xd],_0x28b28d[0x0]*_0x1dd735[0x9]+_0x28b28d[0x1]*_0x1dd735[0xa]+_0x28b28d[0x2]*_0x1dd735[0xe]-_0x28b28d[0x3]*_0x1dd735[0x8]+_0x28b28d[0x4]*_0x1dd735[0xd]-_0x28b28d[0x5]*_0x1dd735[0x7]-_0x28b28d[0x6]*_0x1dd735[0xb]+_0x28b28d[0x7]*_0x1dd735[0x5]+_0x28b28d[0x8]*_0x1dd735[0x3]+_0x28b28d[0x9]*_0x1dd735[0x0]-_0x28b28d[0xa]*_0x1dd735[0x1]-_0x28b28d[0xb]*_0x1dd735[0x6]+_0x28b28d[0xc]*_0x1dd735[0xf]+_0x28b28d[0xd]*_0x1dd735[0x4]+_0x28b28d[0xe]*_0x1dd735[0x2]-_0x28b28d[0xf]*_0x1dd735[0xc],_0x28b28d[0x0]*_0x1dd735[0xa]-_0x28b28d[0x1]*_0x1dd735[0x9]+_0x28b28d[0x2]*_0x1dd735[0x8]+_0x28b28d[0x3]*_0x1dd735[0xe]+_0x28b28d[0x4]*_0x1dd735[0x7]+_0x28b28d[0x5]*_0x1dd735[0xd]-_0x28b28d[0x6]*_0x1dd735[0xc]-_0x28b28d[0x7]*_0x1dd735[0x4]-_0x28b28d[0x8]*_0x1dd735[0x2]+_0x28b28d[0x9]*_0x1dd735[0x1]+_0x28b28d[0xa]*_0x1dd735[0x0]-_0x28b28d[0xb]*_0x1dd735[0xf]-_0x28b28d[0xc]*_0x1dd735[0x6]+_0x28b28d[0xd]*_0x1dd735[0x5]+_0x28b28d[0xe]*_0x1dd735[0x3]+_0x28b28d[0xf]*_0x1dd735[0xb],_0x28b28d[0x0]*_0x1dd735[0xb]+_0x28b28d[0x1]*_0x1dd735[0xc]+_0x28b28d[0x2]*_0x1dd735[0xd]-_0x28b28d[0x3]*_0x1dd735[0x7]-_0x28b28d[0x7]*_0x1dd735[0x3]+_0x28b28d[0xb]*_0x1dd735[0x0]-_0x28b28d[0xc]*_0x1dd735[0x1]-_0x28b28d[0xd]*_0x1dd735[0x2],_0x28b28d[0x0]*_0x1dd735[0xc]-_0x28b28d[0x1]*_0x1dd735[0xb]+_0x28b28d[0x2]*_0x1dd735[0x7]+_0x28b28d[0x3]*_0x1dd735[0xd]+_0x28b28d[0x7]*_0x1dd735[0x2]+_0x28b28d[0xb]*_0x1dd735[0x1]+_0x28b28d[0xc]*_0x1dd735[0x0]-_0x28b28d[0xd]*_0x1dd735[0x3],_0x28b28d[0x0]*_0x1dd735[0xd]-_0x28b28d[0x1]*_0x1dd735[0x7]-_0x28b28d[0x2]*_0x1dd735[0xb]-_0x28b28d[0x3]*_0x1dd735[0xc]-_0x28b28d[0x7]*_0x1dd735[0x1]+_0x28b28d[0xb]*_0x1dd735[0x2]+_0x28b28d[0xc]*_0x1dd735[0x3]+_0x28b28d[0xd]*_0x1dd735[0x0],_0x28b28d[0x0]*_0x1dd735[0xe]-_0x28b28d[0x1]*_0x1dd735[0x8]-_0x28b28d[0x2]*_0x1dd735[0x9]-_0x28b28d[0x3]*_0x1dd735[0xa]+_0x28b28d[0x4]*_0x1dd735[0xb]+_0x28b28d[0x5]*_0x1dd735[0xc]+_0x28b28d[0x6]*_0x1dd735[0xd]+_0x28b28d[0x7]*_0x1dd735[0xf]-_0x28b28d[0x8]*_0x1dd735[0x1]-_0x28b28d[0x9]*_0x1dd735[0x2]-_0x28b28d[0xa]*_0x1dd735[0x3]-_0x28b28d[0xb]*_0x1dd735[0x4]-_0x28b28d[0xc]*_0x1dd735[0x5]-_0x28b28d[0xd]*_0x1dd735[0x6]+_0x28b28d[0xe]*_0x1dd735[0x0]-_0x28b28d[0xf]*_0x1dd735[0x7],_0x28b28d[0x0]*_0x1dd735[0xf]+_0x28b28d[0x1]*_0x1dd735[0x6]-_0x28b28d[0x2]*_0x1dd735[0x5]+_0x28b28d[0x3]*_0x1dd735[0x4]+_0x28b28d[0x4]*_0x1dd735[0x3]-_0x28b28d[0x5]*_0x1dd735[0x2]+_0x28b28d[0x6]*_0x1dd735[0x1]-_0x28b28d[0x7]*_0x1dd735[0xe]+_0x28b28d[0x8]*_0x1dd735[0xd]-_0x28b28d[0x9]*_0x1dd735[0xc]+_0x28b28d[0xa]*_0x1dd735[0xb]-_0x28b28d[0xb]*_0x1dd735[0xa]+_0x28b28d[0xc]*_0x1dd735[0x9]-_0x28b28d[0xd]*_0x1dd735[0x8]+_0x28b28d[0xe]*_0x1dd735[0x7]+_0x28b28d[0xf]*_0x1dd735[0x0]];}static[_0x1f323d(0x131)](_0x4e5f48){return[_0x4e5f48[0x0],-_0x4e5f48[0x1],-_0x4e5f48[0x2],-_0x4e5f48[0x3],-_0x4e5f48[0x4],-_0x4e5f48[0x5],-_0x4e5f48[0x6],-_0x4e5f48[0x7],-_0x4e5f48[0x8],-_0x4e5f48[0x9],-_0x4e5f48[0xa],_0x4e5f48[0xb],_0x4e5f48[0xc],_0x4e5f48[0xd],_0x4e5f48[0xe],_0x4e5f48[0xf]];}static[_0x1f323d(0x140)](_0x2cb8e0,_0xcec9cc){const _0x34996f=_0x1f323d;return PGA3D[_0x34996f(0x202)](_0xcec9cc,PGA3D[_0x34996f(0x202)](_0x2cb8e0,PGA3D['reverse'](_0xcec9cc)));}static[_0x1f323d(0x150)](_0x42ac4a){const _0x42c94b=_0x1f323d;return Math['sqrt'](_0x42ac4a[_0x42c94b(0x18c)](_0x393481=>_0x393481*_0x393481)['reduce']((_0x29c1d1,_0x4f06fb)=>_0x29c1d1+_0x4f06fb,0x0));}static[_0x1f323d(0x17a)](_0x485099,_0x2aef95,_0x307b6a){return[0x1,0x0,0x0,0x0,-_0x485099/0x2,-_0x2aef95/0x2,-_0x307b6a/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x1f323d(0x197)](_0x10cab8){return[0x1,0x0,0x0,0x0,_0x10cab8[0x4],_0x10cab8[0x5],_0x10cab8[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x1f323d(0x13d)](_0x221677,_0x5ab745=0x1,_0x3e0999=0x0,_0x5ba08f=0x0,_0x190e43=0x0,_0x27c431=0x0,_0x4c12d2=0x0){const _0x17d17b=_0x1f323d;let _0x3998aa=Math[_0x17d17b(0x1a8)](_0x221677/0x2),_0x4579a6=Math[_0x17d17b(0x1bc)](_0x221677/0x2),_0x16816=PGA3D[_0x17d17b(0x22c)](_0x190e43,_0x27c431,_0x4c12d2,_0x5ab745,_0x3e0999,_0x5ba08f);return[_0x3998aa,_0x4579a6*_0x16816[0x1],_0x4579a6*_0x16816[0x2],_0x4579a6*_0x16816[0x3],_0x4579a6*_0x16816[0x4],_0x4579a6*_0x16816[0x5],_0x4579a6*_0x16816[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x1f323d(0x11e)](_0x544176){return[_0x544176[0x0],_0x544176[0x1],_0x544176[0x2],_0x544176[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createDir'](_0x34438c,_0x1b1d3a,_0x228eb3){return[0x0,_0x228eb3,-_0x1b1d3a,_0x34438c,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x1f323d(0x22c)](_0x11e034,_0x57a21a,_0x93bb5d,_0x382d27,_0x291788,_0x4f5960){const _0x27f10e=_0x1f323d;let _0x4eb7ae=PGA3D[_0x27f10e(0x13f)](_0x382d27,_0x291788,_0x4f5960),_0x291d76=PGA3D[_0x27f10e(0x147)](_0x4eb7ae);return[0x0,_0x291d76[0x1],_0x291d76[0x2],_0x291d76[0x3],-(-_0x291d76[0x2]*_0x93bb5d-_0x291d76[0x1]*_0x57a21a),-(_0x291d76[0x1]*_0x11e034-_0x291d76[0x3]*_0x93bb5d),-(_0x291d76[0x3]*_0x57a21a+_0x291d76[0x2]*_0x11e034),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createPoint'](_0x2c11fb,_0x53de4e,_0x4103c5){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x4103c5,_0x53de4e,-_0x2c11fb,0x0,0x0,0x0,0x0,0x0];}static[_0x1f323d(0x19c)](_0x41bc09){return[-_0x41bc09[0xa]/_0x41bc09[0x7],_0x41bc09[0x9]/_0x41bc09[0x7],-_0x41bc09[0x8]/_0x41bc09[0x7]];}static[_0x1f323d(0x154)](_0x5ead99,_0x299969,_0x5a9013,_0x2772e3){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x5ead99,_0x299969,_0x5a9013,-_0x2772e3,0x0];}static[_0x1f323d(0x21e)](_0x20806f,_0x1bde5f,_0x2fd2ad){const _0x20f92d=_0x1f323d;let _0x55eeca=_0x1bde5f[0x1]*_0x2fd2ad[0x2]-_0x2fd2ad[0x1]*_0x1bde5f[0x2]-(_0x20806f[0x1]*_0x2fd2ad[0x2]-_0x2fd2ad[0x1]*_0x20806f[0x2])+(_0x20806f[0x1]*_0x1bde5f[0x2]-_0x1bde5f[0x1]*_0x20806f[0x2]),_0x29b3e7=_0x1bde5f[0x0]*_0x2fd2ad[0x2]-_0x2fd2ad[0x0]*_0x1bde5f[0x2]-(_0x20806f[0x0]*_0x2fd2ad[0x2]-_0x2fd2ad[0x0]*_0x20806f[0x2])+(_0x20806f[0x0]*_0x1bde5f[0x2]-_0x1bde5f[0x0]*_0x20806f[0x2]),_0x4f4287=_0x1bde5f[0x0]*_0x2fd2ad[0x1]-_0x2fd2ad[0x0]*_0x1bde5f[0x1]-(_0x20806f[0x0]*_0x2fd2ad[0x1]-_0x2fd2ad[0x0]*_0x20806f[0x1])+(_0x20806f[0x0]*_0x1bde5f[0x1]-_0x1bde5f[0x0]*_0x20806f[0x1]),_0x3fad35=_0x20806f[0x0]*(_0x1bde5f[0x1]*_0x2fd2ad[0x2]-_0x2fd2ad[0x1]*_0x1bde5f[0x2])-_0x1bde5f[0x0]*(_0x20806f[0x1]*_0x2fd2ad[0x2]-_0x2fd2ad[0x1]*_0x20806f[0x2])+_0x2fd2ad[0x0]*(_0x20806f[0x1]*_0x1bde5f[0x2]-_0x1bde5f[0x1]*_0x20806f[0x2]);return PGA3D[_0x20f92d(0x154)](_0x55eeca,-_0x29b3e7,_0x4f4287,_0x3fad35);}static[_0x1f323d(0x20c)](_0xc38d81,_0xb7224c){const _0x252b7d=_0x1f323d;let _0xbb1e82=PGA3D[_0x252b7d(0x202)](_0xc38d81,_0xb7224c),_0x24b256=Math[_0x252b7d(0x23a)](_0xbb1e82[0x7])<=1e-8,_0x983dc5=_0x24b256&&Math['abs'](_0xbb1e82[0x8])<=1e-8&&Math['abs'](_0xbb1e82[0x9])<=1e-8&&Math[_0x252b7d(0x23a)](_0xbb1e82[0xa])<=1e-8;return[PGA3D['extractPoint'](_0xbb1e82),!_0x24b256,_0x983dc5];}static[_0x1f323d(0x147)](_0x5cf497){const _0x58bf5b=_0x1f323d;let _0x3114ec=PGA3D['motorNorm'](_0x5cf497);if(_0x3114ec==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x5cf497[_0x58bf5b(0x18c)](_0x5b88e0=>_0x5b88e0/_0x3114ec);}static[_0x1f323d(0x1fa)](_0x2ac8c9,_0x27c032){const _0x50db37=_0x1f323d;let _0xd7bf78=PGA3D[_0x50db37(0x140)](PGA3D[_0x50db37(0x22f)](_0x2ac8c9[0x0],_0x2ac8c9[0x1],_0x2ac8c9[0x2]),_0x27c032);return PGA3D[_0x50db37(0x19c)](_0xd7bf78);}static[_0x1f323d(0x216)](_0xd68511,_0x46e3aa){const _0x1cc9db=_0x1f323d;let _0x3078af=PGA3D[_0x1cc9db(0x11e)](_0x46e3aa),_0x418203=PGA3D[_0x1cc9db(0x140)](PGA3D['createPoint'](_0xd68511[0x0],_0xd68511[0x1],_0xd68511[0x2]),_0x3078af);return PGA3D[_0x1cc9db(0x19c)](_0x418203);}static[_0x1f323d(0x1a9)](_0x43ec39,_0x459fad,_0xc9e7f3,_0x275daa){const _0x23e64f=_0x1f323d;let _0x4feaff=PGA3D['createPoint'](_0x43ec39[0x0],_0x43ec39[0x1],_0x43ec39[0x2]),_0x3f3a80=PGA3D[_0x23e64f(0x22f)](_0x459fad[0x0],_0x459fad[0x1],_0x459fad[0x2]),_0x2ed289=PGA3D[_0x23e64f(0x22f)](_0xc9e7f3[0x0],_0xc9e7f3[0x1],_0xc9e7f3[0x2]),_0x2ae23a=PGA3D[_0x23e64f(0x22f)](_0x275daa[0x0],_0x275daa[0x1],_0x275daa[0x2]),_0x46707c=PGA3D[_0x23e64f(0x21e)](_0x43ec39,_0x459fad,_0xc9e7f3),_0x26a4c7=PGA3D[_0x23e64f(0x21e)](_0x275daa,_0x459fad,_0xc9e7f3),_0x33de8f=PGA3D[_0x23e64f(0x21e)](_0x43ec39,_0x275daa,_0xc9e7f3),_0x48f07d=PGA3D[_0x23e64f(0x21e)](_0x43ec39,_0x459fad,_0x275daa),_0x9f9bfc=_0x46707c[0xb]*_0x46707c[0xb]+_0x46707c[0xc]*_0x46707c[0xc]+_0x46707c[0xd]*_0x46707c[0xd]+_0x46707c[0xe]*_0x46707c[0xe],_0x2345dd=_0x46707c[0xb]*_0x26a4c7[0xb]+_0x46707c[0xc]*_0x26a4c7[0xc]+_0x46707c[0xd]*_0x26a4c7[0xd]+_0x46707c[0xe]*_0x26a4c7[0xe],_0x2be6b3=_0x46707c[0xb]*_0x33de8f[0xb]+_0x46707c[0xc]*_0x33de8f[0xc]+_0x46707c[0xd]*_0x33de8f[0xd]+_0x46707c[0xe]*_0x33de8f[0xe],_0x19a34c=_0x46707c[0xb]*_0x48f07d[0xb]+_0x46707c[0xc]*_0x48f07d[0xc]+_0x46707c[0xd]*_0x48f07d[0xd]+_0x46707c[0xe]*_0x48f07d[0xe],_0x132d54=_0x2345dd/_0x9f9bfc,_0x4fd738=_0x2be6b3/_0x9f9bfc,_0x4964e4=_0x19a34c/_0x9f9bfc;return _0x132d54>=0x0&&_0x132d54<=0x1&&_0x4fd738>=0x0&&_0x4fd738<=0x1&&_0x4964e4>=0x0&&_0x4964e4<=0x1;}}class Camera{constructor(_0x111295,_0x5106a1){const _0x298388=_0x1f323d;this[_0x298388(0x262)]=new Float32Array(Array(0x10)[_0x298388(0x1f6)](0x0)),this[_0x298388(0x262)][0x0]=0x1,this[_0x298388(0x245)]=new Float32Array(Array(0x2)[_0x298388(0x1f6)](0x1)),this['_resolutions']=new Float32Array([_0x111295,_0x5106a1]),this[_0x298388(0x231)]=![];}['resetPose'](){const _0x4dce4f=_0x1f323d;this[_0x4dce4f(0x262)][0x0]=0x1;for(let _0x9d2ae4=0x1;_0x9d2ae4<0x10;++_0x9d2ae4)this[_0x4dce4f(0x262)][_0x9d2ae4]=0x0;this['_focal'][0x0]=0x1,this[_0x4dce4f(0x245)][0x1]=0x1;}['updatePose'](_0x4ffd0c){for(let _0x2e65cb=0x0;_0x2e65cb<0x10;++_0x2e65cb)this['_pose'][_0x2e65cb]=_0x4ffd0c[_0x2e65cb];}[_0x1f323d(0x153)](_0x37b724,_0x77bc1c){const _0x282123=_0x1f323d;this[_0x282123(0x1c2)][0x0]=_0x37b724,this[_0x282123(0x1c2)][0x1]=_0x77bc1c;}['moveX'](_0x581c17){const _0x1ee263=_0x1f323d;let _0x5c45e2=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x1ee263(0x262)]),_0x4660e2=PGA3D[_0x1ee263(0x17a)](_0x581c17*_0x5c45e2[0x0],_0x581c17*_0x5c45e2[0x1],_0x581c17*_0x5c45e2[0x2]),_0x3039d6=PGA3D[_0x1ee263(0x147)](PGA3D[_0x1ee263(0x202)](_0x4660e2,this['_pose']));this[_0x1ee263(0x218)](_0x3039d6);}['moveY'](_0x5e420b){const _0x567701=_0x1f323d;let _0x596f6f=PGA3D[_0x567701(0x216)]([0x0,0x1,0x0],this['_pose']),_0x1cf9d1=PGA3D[_0x567701(0x17a)](_0x5e420b*_0x596f6f[0x0],_0x5e420b*_0x596f6f[0x1],_0x5e420b*_0x596f6f[0x2]),_0x1e99cf=PGA3D['normalizeMotor'](PGA3D[_0x567701(0x202)](_0x1cf9d1,this['_pose']));this[_0x567701(0x218)](_0x1e99cf);}[_0x1f323d(0x1c3)](_0x5db20b){const _0xb4f4ba=_0x1f323d;let _0x3f6c3c=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0xb4f4ba(0x262)]),_0x5f2c6a=PGA3D[_0xb4f4ba(0x17a)](_0x5db20b*_0x3f6c3c[0x0],_0x5db20b*_0x3f6c3c[0x1],_0x5db20b*_0x3f6c3c[0x2]),_0x59fa77=PGA3D[_0xb4f4ba(0x147)](PGA3D[_0xb4f4ba(0x202)](_0x5f2c6a,this[_0xb4f4ba(0x262)]));this['updatePose'](_0x59fa77);}['rotateX'](_0x4a0471){const _0x39e700=_0x1f323d;let _0x4305d2=PGA3D[_0x39e700(0x1fa)]([0x0,0x0,0x0],this[_0x39e700(0x262)]),_0x285633=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x39e700(0x262)]),_0x38a09f=PGA3D['createRotor'](_0x4a0471,_0x285633[0x0],_0x285633[0x1],_0x285633[0x2],_0x4305d2[0x0],_0x4305d2[0x1],_0x4305d2[0x2]),_0x5962a6=PGA3D['normalizeMotor'](PGA3D[_0x39e700(0x202)](_0x38a09f,this[_0x39e700(0x262)]));this[_0x39e700(0x218)](_0x5962a6);}['rotateY'](_0xc58a5c){const _0x1643fd=_0x1f323d;let _0xfd296e=PGA3D[_0x1643fd(0x1fa)]([0x0,0x0,0x0],this['_pose']),_0x191b1d=PGA3D[_0x1643fd(0x216)]([0x0,0x1,0x0],this['_pose']),_0x5f3573=PGA3D[_0x1643fd(0x13d)](_0xc58a5c,_0x191b1d[0x0],_0x191b1d[0x1],_0x191b1d[0x2],_0xfd296e[0x0],_0xfd296e[0x1],_0xfd296e[0x2]),_0x421404=PGA3D['normalizeMotor'](PGA3D[_0x1643fd(0x202)](_0x5f3573,this['_pose']));this[_0x1643fd(0x218)](_0x421404);}[_0x1f323d(0x243)](_0x5ecf26){const _0x2f2fcf=_0x1f323d;let _0x173264=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this[_0x2f2fcf(0x262)]),_0x4d39ee=PGA3D[_0x2f2fcf(0x216)]([0x0,0x0,0x1],this[_0x2f2fcf(0x262)]),_0x19c2b4=PGA3D['createRotor'](_0x5ecf26,_0x4d39ee[0x0],_0x4d39ee[0x1],_0x4d39ee[0x2],_0x173264[0x0],_0x173264[0x1],_0x173264[0x2]),_0x93973e=PGA3D['normalizeMotor'](PGA3D[_0x2f2fcf(0x202)](_0x19c2b4,this['_pose']));this[_0x2f2fcf(0x218)](_0x93973e);}}class Light{constructor(){const _0x16ee44=_0x1f323d;this[_0x16ee44(0x1fd)]=new Float32Array(Array(0x4)[_0x16ee44(0x1f6)](0x0)),this[_0x16ee44(0x1cd)]=new Float32Array(Array(0x4)[_0x16ee44(0x1f6)](0x0)),this[_0x16ee44(0x1ec)]=new Float32Array(Array(0x4)['fill'](0x0)),this[_0x16ee44(0x1ca)]=new Float32Array(Array(0x4)[_0x16ee44(0x1f6)](0x0)),this['_attenuation'][0x0]=0x1,this[_0x16ee44(0x178)]=new Float32Array(Array(0x4)['fill'](0x0));}}class PointLight extends Light{constructor(_0x4e5f8a=[0x1,0x1,0x1],_0xed8667=[0x0,0x0,0x0],_0x5b5f02=[0x1,0.1,0.01]){const _0x47cdcc=_0x1f323d;super();for(let _0x54f01c=0x0;_0x54f01c<0x3;++_0x54f01c){this[_0x47cdcc(0x1fd)][_0x54f01c]=_0x4e5f8a[_0x54f01c],this[_0x47cdcc(0x1cd)][_0x54f01c]=_0xed8667[_0x54f01c],this[_0x47cdcc(0x1ca)][_0x54f01c]=_0x5b5f02[_0x54f01c];}}}class RectangularLight extends Light{constructor(_0x3f3813=[0x1,0x1,0x1],_0x4e88bc=[0x0,0x0,0x0],_0x2c9ce5=[0x1,0.5,0.5],_0x46c7ab=0.1,_0x5c5111=0.1){const _0x2a247b=_0x1f323d;super();for(let _0x5b7fc7=0x0;_0x5b7fc7<0x3;++_0x5b7fc7){this[_0x2a247b(0x1fd)][_0x5b7fc7]=_0x3f3813[_0x5b7fc7],this[_0x2a247b(0x1cd)][_0x5b7fc7]=_0x4e88bc[_0x5b7fc7],this[_0x2a247b(0x1ca)][_0x5b7fc7]=_0x2c9ce5[_0x5b7fc7];}this[_0x2a247b(0x178)][0x0]=_0x46c7ab,this[_0x2a247b(0x178)][0x1]=_0x5c5111;}}class SphericalLight extends Light{constructor(_0x197c55=[0x1,0x1,0x1],_0x5883d2=[0x0,0x0,0x0],_0x1345fa=[0x1,0.5,0.5],_0x4944b6=0.1){const _0x570e50=_0x1f323d;super();for(let _0x29b729=0x0;_0x29b729<0x3;++_0x29b729){this[_0x570e50(0x1fd)][_0x29b729]=_0x197c55[_0x29b729],this['_position'][_0x29b729]=_0x5883d2[_0x29b729],this[_0x570e50(0x1ca)][_0x29b729]=_0x1345fa[_0x29b729];}this[_0x570e50(0x178)][0x0]=_0x4944b6;}}class DirectionalLight extends Light{constructor(_0x52ac20=[0x1,0x1,0x1],_0x2b0e27=[Math['sqrt'](0x3),Math[_0x1f323d(0x13c)](0x3),Math['sqrt'](0x3)]){const _0x56438a=_0x1f323d;super();for(let _0x1ddfa0=0x0;_0x1ddfa0<0x3;++_0x1ddfa0){this[_0x56438a(0x1fd)][_0x1ddfa0]=_0x52ac20[_0x1ddfa0],this[_0x56438a(0x1ec)][_0x1ddfa0]=_0x2b0e27[_0x1ddfa0];}}}class SpotLight extends Light{constructor(_0x27111b=[0x1,0x1,0x1],_0x514dd1=[0x0,0x0,0x0],_0x1c9c58=[0x0,0x1,0x0],_0x19569c=[0x1,0.1,0.01],_0x77fff7=0.785,_0x1583aa=0x5){const _0x3ede78=_0x1f323d;super();for(let _0x44cac1=0x0;_0x44cac1<0x3;++_0x44cac1){this['_intensity'][_0x44cac1]=_0x27111b[_0x44cac1],this[_0x3ede78(0x1cd)][_0x44cac1]=_0x514dd1[_0x44cac1],this[_0x3ede78(0x1ec)][_0x44cac1]=_0x1c9c58[_0x44cac1],this[_0x3ede78(0x1ca)][_0x44cac1]=_0x19569c[_0x44cac1];}this[_0x3ede78(0x178)][0x0]=_0x77fff7,this[_0x3ede78(0x178)][0x1]=_0x1583aa;}}async function init(){const _0x2a712c=_0x1f323d,_0x46971e=document['createElement']('canvas');_0x46971e['id']=_0x2a712c(0x170),document[_0x2a712c(0x1c8)][_0x2a712c(0x1e2)](_0x46971e);const _0x5136c9=new RayTracer(_0x46971e);await _0x5136c9[_0x2a712c(0x1f0)]();var _0x3217cd=new Camera(),_0x53d338=new RayTracingLightBounceDemoSceneObject(_0x5136c9[_0x2a712c(0x1bd)],_0x5136c9['_canvasFormat'],_0x3217cd);await _0x5136c9['setTracerObject'](_0x53d338),_0x53d338[_0x2a712c(0x196)]['_scales'][0x0]=0x2,_0x53d338[_0x2a712c(0x196)]['_scales'][0x1]=1.25,_0x53d338[_0x2a712c(0x196)]['_scales'][0x2]=0x2,_0x53d338[_0x2a712c(0x23c)](),_0x53d338['_box'][_0x2a712c(0x262)][0x6]=-0.2*_0x53d338['_box']['_scales'][0x2],_0x53d338[_0x2a712c(0x19d)](),_0x53d338[_0x2a712c(0x193)][_0x2a712c(0x217)][0x0]=0.3,_0x53d338[_0x2a712c(0x193)][_0x2a712c(0x217)][0x1]=0.5,_0x53d338['_cube'][_0x2a712c(0x217)][0x2]=0.3,_0x53d338[_0x2a712c(0x1f4)](),_0x53d338[_0x2a712c(0x193)][_0x2a712c(0x262)][0x4]=0.25,_0x53d338[_0x2a712c(0x193)]['_pose'][0x5]=-0.1875,_0x53d338[_0x2a712c(0x193)][_0x2a712c(0x262)][0x6]=-0.5,_0x53d338[_0x2a712c(0x133)](),_0x53d338['_sphere'][_0x2a712c(0x217)][0x0]=0.25,_0x53d338[_0x2a712c(0x1d2)][_0x2a712c(0x217)][0x1]=0.25,_0x53d338[_0x2a712c(0x1d2)][_0x2a712c(0x217)][0x2]=0.25,_0x53d338[_0x2a712c(0x24a)](),_0x53d338[_0x2a712c(0x1d2)][_0x2a712c(0x262)][0x4]=-0.225,_0x53d338['_sphere']['_pose'][0x5]=-0.1875,_0x53d338[_0x2a712c(0x1d2)]['_pose'][0x6]=-0.6,_0x53d338['updateSpherePose'](),_0x53d338[_0x2a712c(0x261)][_0x2a712c(0x217)][0x0]=0.2,_0x53d338[_0x2a712c(0x261)][_0x2a712c(0x217)][0x1]=1.25,_0x53d338[_0x2a712c(0x261)][_0x2a712c(0x217)][0x2]=0.2,_0x53d338['updateCylinderScales'](),_0x53d338['_cylinder'][_0x2a712c(0x262)][0x5]=0.3125,_0x53d338[_0x2a712c(0x261)][_0x2a712c(0x262)][0x6]=-0.75,_0x53d338[_0x2a712c(0x180)](),_0x53d338[_0x2a712c(0x1b7)]['_scales'][0x0]=0.2,_0x53d338[_0x2a712c(0x1b7)][_0x2a712c(0x217)][0x1]=-0.6,_0x53d338[_0x2a712c(0x1b7)][_0x2a712c(0x217)][0x2]=0.2,_0x53d338[_0x2a712c(0x1e7)](),_0x53d338[_0x2a712c(0x1b7)][_0x2a712c(0x262)][0x4]=-0.05,_0x53d338[_0x2a712c(0x1b7)]['_pose'][0x5]=-0.3125+0.00001,_0x53d338['_cone'][_0x2a712c(0x262)][0x6]=-0.4,_0x53d338[_0x2a712c(0x1ae)]();var _0x5ba9b6='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0an/N:\x20Change\x20Light\x20Source\x20(???????????)\x0am/M:\x20Change\x20Shading\x20(??????????)\x0av/V:\x20Change\x20Light\x20Color\x20(?????)\x0ag/G:\x20Change\x20sphere\x20shininess\x0ax/X:\x20Change\x20Trace\x20Depth\x20(??)\x0az/Z:\x20Change\x20Trace\x20Height\x20(XXX)\x0ay/Y:\x20Show/Hide\x20Cube\x20Map\x0at/T:\x20Show/Hide\x20Texture\x0ab/B:\x20Show/Hide\x20Bump\x20Map\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper',_0x56a2a6=new StandardTextObject(_0x5ba9b6);let _0x28a2f8='??';var _0x23966b=new StandardTextObject(_0x2a712c(0x160)+_0x28a2f8),_0x324904=0.05;_0x53d338[_0x2a712c(0x178)][0x1]=0x0;var _0x82a67b=[_0x2a712c(0x1b8),_0x2a712c(0x21d),_0x2a712c(0x1fe)];_0x53d338[_0x2a712c(0x178)][0x2]=0x2;var _0x2ad1a1=[_0x2a712c(0x141),_0x2a712c(0x1fc),_0x2a712c(0x17d),'Toon'];_0x53d338[_0x2a712c(0x178)][0x3]=0x19,_0x53d338[_0x2a712c(0x16e)](),_0x53d338[_0x2a712c(0x1f1)][0x0]=0x1,_0x53d338['_textureParams'][0x2]=0x0,_0x53d338[_0x2a712c(0x1f1)][0x3]=0xf,_0x53d338[_0x2a712c(0x22d)]();var _0x59b76d=0x3,_0x2c2ef2=[_0x2a712c(0x24b),_0x2a712c(0x12f),_0x2a712c(0x1bf),_0x2a712c(0x1ea)];_0x5ba9b6=_0x5ba9b6[_0x2a712c(0x166)](_0x2a712c(0x1b2),_0x82a67b[_0x53d338[_0x2a712c(0x178)][0x1]]),_0x5ba9b6=_0x5ba9b6[_0x2a712c(0x166)]('??????????',_0x2ad1a1[_0x53d338[_0x2a712c(0x178)][0x2]]),_0x5ba9b6=_0x5ba9b6[_0x2a712c(0x166)](_0x2a712c(0x1f9),_0x2c2ef2[_0x59b76d]),_0x5ba9b6=_0x5ba9b6[_0x2a712c(0x166)]('??',_0x53d338[_0x2a712c(0x1f1)][0x3]),_0x5ba9b6=_0x5ba9b6[_0x2a712c(0x166)](_0x2a712c(0x128),_0x5136c9[_0x2a712c(0x260)][_0x2a712c(0x233)](0x2)),_0x56a2a6['updateText'](_0x5ba9b6);var _0x1d3efb=null;let _0x44a382=async()=>{const _0x5d07e8=_0x2a712c;switch(_0x53d338[_0x5d07e8(0x178)][0x1]){case 0x0:_0x1d3efb=new PointLight();break;case 0x1:_0x1d3efb=new DirectionalLight();break;case 0x2:_0x1d3efb=new SpotLight();break;case 0x3:_0x1d3efb=new RectangularLight();break;case 0x4:_0x1d3efb=new SphericalLight();break;}switch(_0x59b76d){case 0x0:_0x1d3efb['_intensity'][0x1]=0x0,_0x1d3efb['_intensity'][0x2]=0x0;break;case 0x1:_0x1d3efb['_intensity'][0x0]=0x0,_0x1d3efb[_0x5d07e8(0x1fd)][0x2]=0x0;break;case 0x2:_0x1d3efb[_0x5d07e8(0x1fd)][0x0]=0x0,_0x1d3efb[_0x5d07e8(0x1fd)][0x1]=0x0;break;}_0x1d3efb[_0x5d07e8(0x1cd)][0x1]=-0.624,_0x1d3efb[_0x5d07e8(0x1cd)][0x2]=0.75;};await _0x44a382(),_0x53d338['updateLight'](_0x1d3efb);let _0x1b377a=async()=>{const _0x49aa96=_0x2a712c;_0x53d338['_textureParams'][0x0]?(_0x53d338[_0x49aa96(0x196)]['_scales'][0x0]=0x1000,_0x53d338[_0x49aa96(0x196)][_0x49aa96(0x217)][0x1]=0x1000,_0x53d338[_0x49aa96(0x196)][_0x49aa96(0x217)][0x2]=0x1000,_0x53d338[_0x49aa96(0x23c)]()):(_0x53d338[_0x49aa96(0x196)]['_scales'][0x0]=0x2,_0x53d338[_0x49aa96(0x196)][_0x49aa96(0x217)][0x1]=1.25,_0x53d338[_0x49aa96(0x196)][_0x49aa96(0x217)][0x2]=0x2,_0x53d338[_0x49aa96(0x23c)](),_0x53d338['_box']['_pose'][0x6]=-0.2*_0x53d338[_0x49aa96(0x196)]['_scales'][0x2],_0x53d338['updateBoxPose']());};await _0x1b377a(),window['addEventListener'](_0x2a712c(0x17f),async _0x2722f9=>{const _0x63eab9=_0x2a712c;switch(_0x2722f9[_0x63eab9(0x16d)]){case'h':case'H':_0x56a2a6[_0x63eab9(0x1ce)]();break;case'f':case'F':_0x23966b[_0x63eab9(0x1ce)]();break;case'w':case'W':_0x3217cd[_0x63eab9(0x183)](-_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case's':case'S':_0x3217cd[_0x63eab9(0x183)](_0x324904),_0x53d338['updateCameraPose']();break;case'a':case'A':_0x3217cd[_0x63eab9(0x19b)](-_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'd':case'D':_0x3217cd[_0x63eab9(0x19b)](_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'q':case'Q':_0x3217cd[_0x63eab9(0x1c3)](-_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'e':case'E':_0x3217cd['moveZ'](_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'i':case'I':_0x3217cd[_0x63eab9(0x198)](-_0x324904),_0x53d338['updateCameraPose']();break;case'k':case'K':_0x3217cd[_0x63eab9(0x198)](_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'j':case'J':_0x3217cd['rotateY'](_0x324904),_0x53d338['updateCameraPose']();break;case'l':case'L':_0x3217cd[_0x63eab9(0x1a5)](-_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'u':case'U':_0x3217cd[_0x63eab9(0x243)](-_0x324904),_0x53d338[_0x63eab9(0x195)]();break;case'o':case'O':_0x3217cd['rotateZ'](_0x324904),_0x53d338['updateCameraPose']();break;case'c':case'C':_0x53d338[_0x63eab9(0x178)][0x0]=!_0x53d338[_0x63eab9(0x178)][0x0],_0x53d338[_0x63eab9(0x16e)]();break;case'r':case'R':_0x3217cd[_0x63eab9(0x1ba)](),_0x53d338['updateCameraPose'](),_0x53d338[_0x63eab9(0x124)]();break;case'[':_0x3217cd[_0x63eab9(0x245)][0x0]*=1.1,_0x53d338[_0x63eab9(0x124)]();break;case']':_0x3217cd[_0x63eab9(0x245)][0x0]/=1.1,_0x53d338['updateCameraFocal']();break;case'{':_0x3217cd[_0x63eab9(0x245)][0x1]*=1.1,_0x53d338[_0x63eab9(0x124)]();break;case'}':_0x3217cd['_focal'][0x1]/=1.1,_0x53d338[_0x63eab9(0x124)]();break;case'n':case'N':let _0x3bd9f0=(_0x53d338['_params'][0x1]+0x1)%_0x82a67b[_0x63eab9(0x1b6)];_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0x82a67b[_0x53d338[_0x63eab9(0x178)][0x1]],_0x82a67b[_0x3bd9f0]),_0x56a2a6[_0x63eab9(0x237)](_0x5ba9b6),_0x53d338[_0x63eab9(0x178)][0x1]=_0x3bd9f0,await _0x44a382(),_0x53d338[_0x63eab9(0x16e)](),_0x53d338[_0x63eab9(0x246)](_0x1d3efb);break;case'm':case'M':let _0x51198f=(_0x53d338['_params'][0x2]+0x1)%_0x2ad1a1[_0x63eab9(0x1b6)];_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0x2ad1a1[_0x53d338[_0x63eab9(0x178)][0x2]],_0x2ad1a1[_0x51198f]),_0x56a2a6['updateText'](_0x5ba9b6),_0x53d338[_0x63eab9(0x178)][0x2]=_0x51198f,_0x53d338[_0x63eab9(0x16e)]();break;case'v':case'V':let _0x47a903=(_0x59b76d+0x1)%_0x2c2ef2[_0x63eab9(0x1b6)];_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0x2c2ef2[_0x59b76d],_0x2c2ef2[_0x47a903]),_0x56a2a6[_0x63eab9(0x237)](_0x5ba9b6),_0x59b76d=_0x47a903,await _0x44a382(),_0x53d338[_0x63eab9(0x246)](_0x1d3efb);break;case'g':_0x53d338[_0x63eab9(0x178)][0x3]=_0x53d338[_0x63eab9(0x178)][0x3]+0x1,_0x53d338[_0x63eab9(0x16e)]();break;case'G':_0x53d338['_params'][0x3]=_0x53d338[_0x63eab9(0x178)][0x3]-0x1;if(_0x53d338[_0x63eab9(0x178)][0x3]<0x1)_0x53d338[_0x63eab9(0x178)][0x3]=0x1;_0x53d338[_0x63eab9(0x16e)]();break;case'y':case'Y':_0x53d338['_textureParams'][0x0]=!_0x53d338[_0x63eab9(0x1f1)][0x0],_0x53d338['updateTextureParam'](),await _0x1b377a();break;case't':case'T':_0x53d338[_0x63eab9(0x1f1)][0x1]=!_0x53d338[_0x63eab9(0x1f1)][0x1],_0x53d338['updateTextureParam']();break;case'b':case'B':_0x53d338[_0x63eab9(0x1f1)][0x2]=!_0x53d338[_0x63eab9(0x1f1)][0x2],_0x53d338[_0x63eab9(0x22d)]();break;case'x':let _0xa33f84=_0x53d338[_0x63eab9(0x1f1)][0x3]+0x1;_0x5ba9b6=_0x5ba9b6['replace'](_0x53d338[_0x63eab9(0x1f1)][0x3],_0xa33f84),_0x56a2a6[_0x63eab9(0x237)](_0x5ba9b6),_0x53d338[_0x63eab9(0x1f1)][0x3]=_0xa33f84,_0x53d338['updateTextureParam']();break;case'X':let _0x3571ee=_0x53d338[_0x63eab9(0x1f1)][0x3]-0x1;if(_0x3571ee<0x1)_0x3571ee=0x1;_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0x53d338['_textureParams'][0x3],_0x3571ee),_0x56a2a6[_0x63eab9(0x237)](_0x5ba9b6),_0x53d338[_0x63eab9(0x1f1)][0x3]=_0x3571ee,_0x53d338['updateTextureParam']();break;case'z':_0x5136c9[_0x63eab9(0x1d3)]*=1.1;let _0x3093db='('+_0x5136c9['_tgtHeight']['toFixed'](0x2)+')';_0x5136c9[_0x63eab9(0x16c)]();let _0x3a4d3b='('+_0x5136c9['_tgtHeight'][_0x63eab9(0x233)](0x2)+')';_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0x3093db,_0x3a4d3b),_0x56a2a6['updateText'](_0x5ba9b6);break;case'Z':_0x5136c9[_0x63eab9(0x1d3)]/=1.1;let _0xa31a0a='('+_0x5136c9[_0x63eab9(0x260)][_0x63eab9(0x233)](0x2)+')';_0x5136c9[_0x63eab9(0x16c)]();let _0x16631b='('+_0x5136c9['_tgtHeight'][_0x63eab9(0x233)](0x2)+')';_0x5ba9b6=_0x5ba9b6[_0x63eab9(0x166)](_0xa31a0a,_0x16631b),_0x56a2a6['updateText'](_0x5ba9b6);break;}}),window['addEventListener']('keyup',_0x4f36db=>{});let _0xb49229=async _0x54a1b7=>{},_0x146673=async _0x5bf911=>{},_0x362104=_0x38a7af=>{};_0x46971e[_0x2a712c(0x188)](_0x2a712c(0x1da),_0xb49229),_0x46971e[_0x2a712c(0x188)](_0x2a712c(0x17b),_0x146673),_0x46971e[_0x2a712c(0x188)](_0x2a712c(0x162),_0x362104),_0x46971e[_0x2a712c(0x188)]('mouseenter',_0x2d6ae5=>{}),_0x46971e[_0x2a712c(0x188)](_0x2a712c(0x18d),_0x50ccf9=>{}),_0x46971e[_0x2a712c(0x188)]('touchstart',_0xb49229),_0x46971e['addEventListener'](_0x2a712c(0x177),_0x146673),_0x46971e[_0x2a712c(0x188)]('touchend',_0x362104),_0x56a2a6[_0x2a712c(0x259)]['style'][_0x2a712c(0x15a)]('pointer-events',_0x2a712c(0x176)),_0x23966b[_0x2a712c(0x259)][_0x2a712c(0x21c)]['setProperty'](_0x2a712c(0x1f3),_0x2a712c(0x176));var _0x4d049f=0x0,_0x595c47=0x3c,_0x40a75a=0x1/_0x595c47,_0x24e572=_0x40a75a*0x3e8,_0x46efb1;let _0x3a2f26=()=>{const _0x221a47=_0x2a712c;let _0x73f034=Date[_0x221a47(0x138)]()-_0x46efb1;_0x73f034>_0x24e572&&(++_0x4d049f,_0x46efb1=Date[_0x221a47(0x138)]()-_0x73f034%_0x24e572,_0x5136c9['render']()),requestAnimationFrame(_0x3a2f26);};return _0x46efb1=Date[_0x2a712c(0x138)](),_0x3a2f26(),_0x23966b[_0x2a712c(0x259)][_0x2a712c(0x21c)][_0x2a712c(0x15a)](_0x2a712c(0x16b),_0x2a712c(0x1db)),_0x23966b[_0x2a712c(0x259)][_0x2a712c(0x21c)][_0x2a712c(0x159)]='10px',setInterval(()=>{const _0x4f715d=_0x2a712c;_0x28a2f8=_0x4d049f,_0x4d049f=0x0,_0x23966b[_0x4f715d(0x237)](_0x4f715d(0x160)+_0x28a2f8);},0x3e8),_0x5136c9;}init()['then'](_0x5b7700=>{console['log'](_0x5b7700);})[_0x1f323d(0x1a4)](_0xab337f=>{const _0x1aba75=_0x1f323d,_0x3f9b25=document[_0x1aba75(0x167)]('p');_0x3f9b25[_0x1aba75(0x136)]=navigator[_0x1aba75(0x137)]+_0x1aba75(0x249)+_0xab337f['message'],document[_0x1aba75(0x1c8)][_0x1aba75(0x1e2)](_0x3f9b25),document['getElementById'](_0x1aba75(0x170))['remove']();});