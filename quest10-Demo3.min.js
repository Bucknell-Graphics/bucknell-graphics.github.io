/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x2bad72=_0x2352;function _0x1a4c(){const _0x4e5448=['Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','normalizeMesh','push','hidden','loadShader','cos','_offScreenTexture','rgba(1,\x201,\x201,\x200.5)','_faceArea','_mesh','bind','text/plain','rotateY','revokeObjectURL','numV','Vertices\x20Normals\x20and\x20More','_filename','BVH\x20','COPY_DST','Something\x20is\x20wrong!\x20The\x20surface\x20area\x20is\x20not\x20as\x20expected!','createRotor','Ray\x20Tracer\x20Pipeline','VERTEX','join','property','updatePose','getName','compute','1px\x20solid\x20red','createBindGroupLayout','measureText','set','limits','_dy','addEventListener','/assets/TOSCA/wolf0.ply','getBindGroupLayout','GET','Ray\x20Trace\x20Mesh\x20Pipeline\x20Layout','style','_canvasHeight','createTranslator','Ray\x20Trace\x20Mesh\x20Shader','_indexBuffer','_imgWidth','_faces','onerror','_vProp','arraybuffer','face','setInt16','submit','short','_canvasWidth','download.ply','transformOrigin','????????','getLeftChildIdx','application/octet-stream','unmap','element\x20vertex','3D\x20Grid','download','Camera\x20','vProp','_heightFactor','surfaceArea','INDEX','_objectCnt','initial','from','BVH','Ray\x20Tracer\x20Sampler','_neighbors','right','message','createBuffer','_cells','_numT','centerOfMass','_meshShaderModule','_gridBuffer','_context','normal\x20z','readBytes','requestDevice','updateGeometry','_grid','createPoint','_LEdge','forEach','slice','_camera','_tracer','/shaders/optimized_tracemesh.wgsl','None','createObjectURL','_AABBBuffer','write','_boundingBox','computeNormal','getCellHitPoints','constructor','2124956jwWNMX','writeBuffer','name','createDir','computeAABB','isLittleEndian','fill','Max\x20triangles\x20in\x20a\x20cell\x20exceeds\x20the\x20limit\x20(','_bvhBuffer','flat','</br>','end','_grid_size','splitTriangles','beginComputePass','Ray\x20Tracer\x20output\x20size\x20buffer','updateCameraPose','trim','innerHeight','/shaders/optimized_tracemeshgrid.wgsl','response','click','min','BVH\x20max\x20depth\x20must\x20be\x20an\x20integer\x20greater\x20than\x200.','updateSize','normal\x20x','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','vertices','_paddingx','vertexMain','maxBufferSize','appendNormalToVertices','getInt8','log','_tgtHeight','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','store','Cache-Control','Ray\x20Trace\x20Mesh\x20Orthogonal\x20Pipeline\x20','fragmentMain','createElement','applyMotorToDir','_pipelineLayout','getUint8','_paddingtop','status','_bvhdata','renderCanvas','data','responseText','_computePipeline','/shaders/optimized_tracemeshbvh.wgsl','length','_focal','finish','STORAGE','createShaderModule','requestAdapter','readASCIIPly','getContext','_bindGroup','_vertexBuffer','_triangles','_maxNumTriangles','createBindGroup','gpu','_width','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','border','_lineSpacing','setTracerObject','sqrt','normal\x20y','char','_sampler','COMPUTE','moveY','computeOrthogonalMain','_device','map','position','linePlaneIntersection','render','toggleVisibility','userAgent','UNIFORM','ply\x0aformat\x20','_textCanvas','canvas','_canvasFormat','_dz','beginRenderPass','_vertexBufferLayout','href','motorNorm','8386273CPJjem','little','reverse','Indices','moveX','getFloat32','fillText','unknown','_objects','_max_tri','int','float32x3',').\x20Try\x20to\x20increase\x20the\x20tree\x20depth.\x20Current:','maxStorageBufferBindingSize','linear','rotateZ','createRenderPipeline','catch','_LArea','extractRotor','top','_computeProjectivePipeline','body','initNodes','webgpu','_vertices','decode','element\x20face\x20','extractPoint','ascii','STORAGE_BINDING','_outputSizeBuffer','_minmax','fps:\x20','AABB','createComputePipeline','_canvas','keydown','end_header','_wgWidth','readBinaryPly','open','_lines','configure','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','vertex','createSampler','setPipeline','DONE','_height','init',').\x20Try\x20to\x20increase\x20the\x20grid\x20size.\x20Current:','height','innerWidth','BYTES_PER_ELEMENT','_isProjective','element\x20vertex\x20','getInt16','_pose','ThreeDGrid\x20grid\x20size\x20must\x20be\x20an\x20integer\x20greater\x20than\x200.','toFixed','_scaleFactor','Ray\x20Tracer\x20Shader','updateText','computeProjectiveMain','getInt32','setRequestHeader','statusText','Ray\x20Trace\x20Mesh\x20Bind\x20Group','pow','read-only-storage','clearRect','read','width','createPipelineLayout','devicePixelRatio','_area','no-cache,\x20no-store,\x20max-age=0','\x20Shader\x20','moveZ','resetPose','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','partitionTriangles','resize','initCells','createLine','findBestSplitSAH','2404360zfjHUC','_cameraBuffer','ceil','_faceNormal','_bindGroupLayout','dispatchWorkgroups','applyMotorToPoint','createGeometry','updateTextRegion','element\x20face','center','now','subdivide','_nodes','_dx','_fontSize','_bvh','triangles','updateCameraFocal','18px\x20Arial','createPlane','readHeader','_numV','geometricProduct','property\x20','328116SORPBM','resizeCanvas','1393380sWdecv','left','EPSILON','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','_center','_resolutions','buffer','_griddata','Ray\x20Tracing\x20Bind\x20Group','startsWith','queue','toString','10px','_pipeline','_textFont','has','MAX_VALUE','_clearColor','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','floor','max','numT','substring','_max_depth','split','getCurrentTexture','applyMotor','xxxxxxx','getMappedRange','byteLength','_LNum','font','renderToSelectedView','normalizeMotor','rotateX','binary_little_endian','Couldn\x27t\x20request\x20WebGPU\x20adapter.','abs','fillRect','getCellIdx','match','includes','TEXTURE_BINDING','Ray\x20Trace\x20Mesh\x20Projective\x20Pipeline\x20','appendChild','createPlaneFromPoints','size','_normal','createCommandEncoder','getUint16','_wgHeight','isInside','createShaders','_textContext','_imgHeight','add','getRightChildIdx','readBinary','replace','key','extractTranslator','float','format','Ray\x20Trace\x20Mesh\x20Layout\x20','createView','_shaderModule','send','auto','setBindGroup','3076560fPBziJ','property\x20list\x20int\x20int\x20vertex_indices\x0aend_header\x0a','AABB\x20','831446ffifid'];_0x1a4c=function(){return _0x4e5448;};return _0x1a4c();}(function(_0x536b35,_0x19d1d8){const _0x4a46dd=_0x2352,_0x2c8c03=_0x536b35();while(!![]){try{const _0x26340c=-parseInt(_0x4a46dd(0x2ae))/0x1+parseInt(_0x4a46dd(0x2f8))/0x2+-parseInt(_0x4a46dd(0x2b0))/0x3+-parseInt(_0x4a46dd(0x1df))/0x4+-parseInt(_0x4a46dd(0x295))/0x5+parseInt(_0x4a46dd(0x2f5))/0x6+parseInt(_0x4a46dd(0x23e))/0x7;if(_0x26340c===_0x19d1d8)break;else _0x2c8c03['push'](_0x2c8c03['shift']());}catch(_0x4c2f6e){_0x2c8c03['push'](_0x2c8c03['shift']());}}}(_0x1a4c,0x4e92b));class Renderer{constructor(_0x5b7aad){const _0x3e3d35=_0x2352;this[_0x3e3d35(0x262)]=_0x5b7aad,this[_0x3e3d35(0x246)]=[],this[_0x3e3d35(0x2c1)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x2bad72(0x270)](){const _0x2c7366=_0x2bad72;if(!navigator[_0x2c7366(0x220)])throw Error(_0x2c7366(0x222));const _0x37f588=await navigator[_0x2c7366(0x220)][_0x2c7366(0x218)]();if(!_0x37f588)throw Error(_0x2c7366(0x2d4));this[_0x2c7366(0x22d)]=await _0x37f588['requestDevice'](),this['_context']=this[_0x2c7366(0x262)][_0x2c7366(0x21a)](_0x2c7366(0x256)),this[_0x2c7366(0x238)]=navigator[_0x2c7366(0x220)]['getPreferredCanvasFormat'](),this[_0x2c7366(0x1ca)]['configure']({'device':this['_device'],'format':this[_0x2c7366(0x238)]}),this[_0x2c7366(0x2af)](),window[_0x2c7366(0x31b)](_0x2c7366(0x291),this['resizeCanvas']['bind'](this));}[_0x2bad72(0x2af)](){const _0x47de4f=_0x2bad72,_0x30fbcd=window['devicePixelRatio']||0x1,_0x5ee487=window['innerWidth']*_0x30fbcd,_0x5426f6=window[_0x47de4f(0x1f1)]*_0x30fbcd;this['_canvas'][_0x47de4f(0x287)]=_0x5ee487,this[_0x47de4f(0x262)][_0x47de4f(0x272)]=_0x5426f6,this[_0x47de4f(0x262)]['style']['width']=window[_0x47de4f(0x273)]+'px',this['_canvas']['style']['height']=window['innerHeight']+'px',this[_0x47de4f(0x262)][_0x47de4f(0x320)][_0x47de4f(0x1af)]=_0x47de4f(0x29f),this['render']();}async['appendSceneObject'](_0x2cbb28){const _0x3187f3=_0x2bad72;await _0x2cbb28['init'](),this[_0x3187f3(0x246)][_0x3187f3(0x2fb)](_0x2cbb28);}['renderToSelectedView'](_0x435626){const _0x3e7159=_0x2bad72;for(const _0x41b3d8 of this[_0x3e7159(0x246)]){_0x41b3d8?.[_0x3e7159(0x1ce)]();}let _0x3f7c66=this[_0x3e7159(0x22d)][_0x3e7159(0x2e0)]();const _0x549d16=_0x3f7c66[_0x3e7159(0x23a)]({'colorAttachments':[{'view':_0x435626,'clearValue':this['_clearColor'],'loadOp':'clear','storeOp':_0x3e7159(0x203)}]});for(const _0x5b3e73 of this[_0x3e7159(0x246)]){_0x5b3e73?.[_0x3e7159(0x231)](_0x549d16);}_0x549d16[_0x3e7159(0x1ea)]();const _0x328185=_0x3f7c66[_0x3e7159(0x1ed)]();for(const _0x3438d8 of this[_0x3e7159(0x246)]){_0x3438d8?.[_0x3e7159(0x314)](_0x328185);}_0x328185[_0x3e7159(0x1ea)]();const _0x1a9725=_0x3f7c66[_0x3e7159(0x215)]();this[_0x3e7159(0x22d)]['queue'][_0x3e7159(0x1ab)]([_0x1a9725]);}[_0x2bad72(0x231)](){const _0x2cd590=_0x2bad72;this[_0x2cd590(0x2d0)](this[_0x2cd590(0x1ca)][_0x2cd590(0x2c9)]()[_0x2cd590(0x2f0)]());}}class RayTracer extends Renderer{constructor(_0x3950ba){const _0x24b547=_0x2bad72;super(_0x3950ba),this[_0x24b547(0x1d5)]=null,this[_0x24b547(0x1b9)]=0x1;}async[_0x2bad72(0x270)](){const _0xce26e2=_0x2bad72;if(!navigator['gpu'])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x2e56de=await navigator[_0xce26e2(0x220)][_0xce26e2(0x218)]();if(!_0x2e56de)throw Error(_0xce26e2(0x2d4));const _0x423d85=_0x2e56de[_0xce26e2(0x319)];this[_0xce26e2(0x22d)]=await _0x2e56de[_0xce26e2(0x1cd)]({'requiredLimits':{'maxBufferSize':Math[_0xce26e2(0x1f5)](0x2**0x1e-0x1,_0x423d85[_0xce26e2(0x1fd)]),'maxStorageBufferBindingSize':Math['min'](0x2**0x1e-0x1,_0x423d85[_0xce26e2(0x24b)])}}),this['_context']=this[_0xce26e2(0x262)][_0xce26e2(0x21a)](_0xce26e2(0x256)),this[_0xce26e2(0x238)]='rgba8unorm',this[_0xce26e2(0x1ca)][_0xce26e2(0x269)]({'device':this['_device'],'format':this['_canvasFormat']}),this[_0xce26e2(0x2f1)]=this[_0xce26e2(0x22d)][_0xce26e2(0x217)]({'label':_0xce26e2(0x27c),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this['_outputSizeBuffer']=this[_0xce26e2(0x22d)][_0xce26e2(0x1c4)]({'label':_0xce26e2(0x1ee),'size':0x8,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0xce26e2(0x2bd)]=this[_0xce26e2(0x22d)][_0xce26e2(0x24e)]({'label':_0xce26e2(0x30e),'layout':_0xce26e2(0x2f3),'vertex':{'module':this[_0xce26e2(0x2f1)],'entryPoint':_0xce26e2(0x1fc)},'fragment':{'module':this[_0xce26e2(0x2f1)],'entryPoint':_0xce26e2(0x206),'targets':[{'format':this[_0xce26e2(0x238)]}]}}),this[_0xce26e2(0x229)]=this[_0xce26e2(0x22d)][_0xce26e2(0x26c)]({'label':_0xce26e2(0x1c0),'magFilter':_0xce26e2(0x24c),'minFilter':_0xce26e2(0x24c)}),this[_0xce26e2(0x2af)](),window[_0xce26e2(0x31b)]('resize',this[_0xce26e2(0x2af)][_0xce26e2(0x303)](this));}[_0x2bad72(0x2af)](){const _0xa69a4c=_0x2bad72,_0x4eb57e=window[_0xa69a4c(0x289)]||0x1,_0x5073b5=window[_0xa69a4c(0x273)]*_0x4eb57e,_0x2094b7=window[_0xa69a4c(0x1f1)]*_0x4eb57e,_0x5a79f0=_0x5073b5/_0x2094b7;this['_tgtHeight']=_0x2094b7*this[_0xa69a4c(0x1b9)];let _0x53f492={'width':this[_0xa69a4c(0x201)]*_0x5a79f0,'height':this[_0xa69a4c(0x201)]};this[_0xa69a4c(0x2ff)]=this[_0xa69a4c(0x22d)]['createTexture']({'size':_0x53f492,'format':this[_0xa69a4c(0x238)],'usage':GPUTextureUsage[_0xa69a4c(0x2da)]|GPUTextureUsage[_0xa69a4c(0x25c)]}),this[_0xa69a4c(0x1d5)]&&(this[_0xa69a4c(0x1d5)]['_imgWidth']=this['_offScreenTexture'][_0xa69a4c(0x287)],this[_0xa69a4c(0x1d5)][_0xa69a4c(0x2e6)]=this[_0xa69a4c(0x2ff)][_0xa69a4c(0x272)],this[_0xa69a4c(0x1d5)][_0xa69a4c(0x1ce)](),this['_tracer'][_0xa69a4c(0x21f)](this['_offScreenTexture'])),this[_0xa69a4c(0x21b)]=this[_0xa69a4c(0x22d)]['createBindGroup']({'label':_0xa69a4c(0x28f),'layout':this[_0xa69a4c(0x2bd)][_0xa69a4c(0x31d)](0x0),'entries':[{'binding':0x0,'resource':this[_0xa69a4c(0x2ff)][_0xa69a4c(0x2f0)]()},{'binding':0x1,'resource':this[_0xa69a4c(0x229)]},{'binding':0x2,'resource':{'buffer':this[_0xa69a4c(0x25d)]}}]}),super['resizeCanvas'](),this['_device'][_0xa69a4c(0x2ba)][_0xa69a4c(0x1e0)](this['_outputSizeBuffer'],0x0,new Float32Array([_0x5073b5,_0x2094b7]));}async['setTracerObject'](_0x1d5a99){const _0x108161=_0x2bad72;await _0x1d5a99?.['init'](),_0x1d5a99&&(_0x1d5a99[_0x108161(0x325)]=this[_0x108161(0x2ff)]['width'],_0x1d5a99['_imgHeight']=this['_offScreenTexture'][_0x108161(0x272)],_0x1d5a99[_0x108161(0x1ce)]()),this[_0x108161(0x1d5)]=_0x1d5a99,this[_0x108161(0x1d5)]?.['createBindGroup'](this[_0x108161(0x2ff)]);}[_0x2bad72(0x231)](){const _0xea125d=_0x2bad72;if(this[_0xea125d(0x1d5)]){let _0x1f13a7=this[_0xea125d(0x22d)][_0xea125d(0x2e0)]();const _0x4285b9=_0x1f13a7[_0xea125d(0x1ed)]();this[_0xea125d(0x1d5)]['compute'](_0x4285b9),_0x4285b9['end'](),this['_device'][_0xea125d(0x2ba)]['submit']([_0x1f13a7[_0xea125d(0x215)]()]);}let _0xc81273=this['_device'][_0xea125d(0x2e0)]();const _0xd23ae6=_0xc81273[_0xea125d(0x23a)]({'colorAttachments':[{'view':this['_context'][_0xea125d(0x2c9)]()['createView'](),'clearValue':this['_clearColor'],'loadOp':'clear','storeOp':_0xea125d(0x203)}]});_0xd23ae6[_0xea125d(0x26d)](this[_0xea125d(0x2bd)]),_0xd23ae6[_0xea125d(0x2f4)](0x0,this[_0xea125d(0x21b)]),_0xd23ae6['draw'](0x6),_0xd23ae6[_0xea125d(0x1ea)](),this[_0xea125d(0x22d)][_0xea125d(0x2ba)][_0xea125d(0x1ab)]([_0xc81273['finish']()]);}}class StandardTextObject{constructor(_0x4d5645,_0x3c1a82=0x5,_0x43ec24=_0x2bad72(0x2a8)){const _0x492396=_0x2bad72;this[_0x492396(0x2be)]=_0x43ec24,this[_0x492396(0x224)]=_0x3c1a82,this[_0x492396(0x236)]=document[_0x492396(0x207)](_0x492396(0x237)),this[_0x492396(0x2e5)]=this['_textCanvas'][_0x492396(0x21a)]('2d'),this[_0x492396(0x29d)](_0x4d5645),this['updateText'](_0x4d5645),this['_textCanvas'][_0x492396(0x320)][_0x492396(0x22f)]='absolute',this['_textCanvas'][_0x492396(0x320)][_0x492396(0x252)]=_0x492396(0x2bc),this[_0x492396(0x236)][_0x492396(0x320)][_0x492396(0x2b1)]='10px',this[_0x492396(0x236)]['style'][_0x492396(0x223)]=_0x492396(0x315),document[_0x492396(0x254)][_0x492396(0x2dc)](this[_0x492396(0x236)]);}[_0x2bad72(0x232)](){const _0x5d3759=_0x2bad72;this[_0x5d3759(0x236)]['hidden']=!this[_0x5d3759(0x236)][_0x5d3759(0x2fc)];}['updateTextRegion'](_0x390f47){const _0x52b2f7=_0x2bad72;this[_0x52b2f7(0x2e5)][_0x52b2f7(0x2cf)]=this[_0x52b2f7(0x2be)],this[_0x52b2f7(0x268)]=_0x390f47[_0x52b2f7(0x2c8)]('\x0a'),this[_0x52b2f7(0x221)]=Math['max'](...this[_0x52b2f7(0x268)][_0x52b2f7(0x22e)](_0x4e4a62=>this[_0x52b2f7(0x2e5)][_0x52b2f7(0x317)](_0x4e4a62)[_0x52b2f7(0x287)]));const _0x155a1f=this[_0x52b2f7(0x2be)][_0x52b2f7(0x2d8)](/(\d+)px/);_0x155a1f?this[_0x52b2f7(0x2a4)]=parseInt(_0x155a1f[0x1],0xa):(this[_0x52b2f7(0x2a4)]=0x12,this[_0x52b2f7(0x2be)]=_0x52b2f7(0x2a8)),this['_height']=this[_0x52b2f7(0x268)][_0x52b2f7(0x213)]*(this[_0x52b2f7(0x2a4)]+this[_0x52b2f7(0x224)]),this[_0x52b2f7(0x1fb)]=0x5,this[_0x52b2f7(0x20b)]=0x3,this[_0x52b2f7(0x1ad)]=Math['ceil'](this[_0x52b2f7(0x221)]+this[_0x52b2f7(0x1fb)]*0x2),this[_0x52b2f7(0x321)]=Math[_0x52b2f7(0x297)](this[_0x52b2f7(0x26f)]+this[_0x52b2f7(0x20b)]),this[_0x52b2f7(0x236)][_0x52b2f7(0x287)]=this[_0x52b2f7(0x1ad)],this[_0x52b2f7(0x236)][_0x52b2f7(0x272)]=this[_0x52b2f7(0x321)],this[_0x52b2f7(0x2e5)][_0x52b2f7(0x2cf)]=this[_0x52b2f7(0x2be)],this[_0x52b2f7(0x2e5)]['textBaseline']=_0x52b2f7(0x252);}[_0x2bad72(0x27d)](_0x5492d3){const _0x586768=_0x2bad72;this[_0x586768(0x268)]=_0x5492d3[_0x586768(0x2c8)]('\x0a'),this[_0x586768(0x2e5)]['fillStyle']=_0x586768(0x300),this[_0x586768(0x2e5)][_0x586768(0x285)](0x0,0x0,this['_canvasWidth'],this[_0x586768(0x321)]),this[_0x586768(0x2e5)][_0x586768(0x2d6)](0x0,0x0,this['_canvasWidth'],this[_0x586768(0x321)]),this[_0x586768(0x2e5)]['fillStyle']='white',this[_0x586768(0x268)][_0x586768(0x1d2)]((_0x4b090d,_0x2eb135)=>{const _0x2425c0=_0x586768,_0x131d45=this[_0x2425c0(0x1fb)],_0xb24796=this[_0x2425c0(0x20b)]+_0x2eb135*(this[_0x2425c0(0x2a4)]+this[_0x2425c0(0x224)]);this[_0x2425c0(0x2e5)][_0x2425c0(0x244)](_0x4b090d,_0x131d45,_0xb24796);});}}class PGA3D{static[_0x2bad72(0x2ac)](_0x551e21,_0x21fc57){return[_0x551e21[0x0]*_0x21fc57[0x0]-_0x551e21[0x1]*_0x21fc57[0x1]-_0x551e21[0x2]*_0x21fc57[0x2]-_0x551e21[0x3]*_0x21fc57[0x3]-_0x551e21[0x7]*_0x21fc57[0x7]+_0x551e21[0xb]*_0x21fc57[0xb]+_0x551e21[0xc]*_0x21fc57[0xc]+_0x551e21[0xd]*_0x21fc57[0xd],_0x551e21[0x0]*_0x21fc57[0x1]+_0x551e21[0x1]*_0x21fc57[0x0]-_0x551e21[0x2]*_0x21fc57[0x3]+_0x551e21[0x3]*_0x21fc57[0x2]+_0x551e21[0x7]*_0x21fc57[0xd]+_0x551e21[0xb]*_0x21fc57[0xc]-_0x551e21[0xc]*_0x21fc57[0xb]+_0x551e21[0xd]*_0x21fc57[0x7],_0x551e21[0x0]*_0x21fc57[0x2]+_0x551e21[0x1]*_0x21fc57[0x3]+_0x551e21[0x2]*_0x21fc57[0x0]-_0x551e21[0x3]*_0x21fc57[0x1]-_0x551e21[0x7]*_0x21fc57[0xc]+_0x551e21[0xb]*_0x21fc57[0xd]-_0x551e21[0xc]*_0x21fc57[0x7]-_0x551e21[0xd]*_0x21fc57[0xb],_0x551e21[0x0]*_0x21fc57[0x3]-_0x551e21[0x1]*_0x21fc57[0x2]+_0x551e21[0x2]*_0x21fc57[0x1]+_0x551e21[0x3]*_0x21fc57[0x0]+_0x551e21[0x7]*_0x21fc57[0xb]+_0x551e21[0xb]*_0x21fc57[0x7]+_0x551e21[0xc]*_0x21fc57[0xd]-_0x551e21[0xd]*_0x21fc57[0xc],_0x551e21[0x0]*_0x21fc57[0x4]+_0x551e21[0x1]*_0x21fc57[0x5]+_0x551e21[0x2]*_0x21fc57[0x6]-_0x551e21[0x3]*_0x21fc57[0xf]+_0x551e21[0x4]*_0x21fc57[0x0]-_0x551e21[0x5]*_0x21fc57[0x1]-_0x551e21[0x6]*_0x21fc57[0x2]+_0x551e21[0x7]*_0x21fc57[0xa]+_0x551e21[0x8]*_0x21fc57[0xc]+_0x551e21[0x9]*_0x21fc57[0xd]-_0x551e21[0xa]*_0x21fc57[0x7]-_0x551e21[0xb]*_0x21fc57[0xe]+_0x551e21[0xc]*_0x21fc57[0x8]+_0x551e21[0xd]*_0x21fc57[0x9]+_0x551e21[0xe]*_0x21fc57[0xb]-_0x551e21[0xf]*_0x21fc57[0x3],_0x551e21[0x0]*_0x21fc57[0x5]-_0x551e21[0x1]*_0x21fc57[0x4]+_0x551e21[0x2]*_0x21fc57[0xf]+_0x551e21[0x3]*_0x21fc57[0x6]+_0x551e21[0x4]*_0x21fc57[0x1]+_0x551e21[0x5]*_0x21fc57[0x0]-_0x551e21[0x6]*_0x21fc57[0x3]-_0x551e21[0x7]*_0x21fc57[0x9]-_0x551e21[0x8]*_0x21fc57[0xb]+_0x551e21[0x9]*_0x21fc57[0x7]+_0x551e21[0xa]*_0x21fc57[0xc]-_0x551e21[0xb]*_0x21fc57[0x8]-_0x551e21[0xc]*_0x21fc57[0xe]+_0x551e21[0xd]*_0x21fc57[0xa]+_0x551e21[0xe]*_0x21fc57[0xc]+_0x551e21[0xf]*_0x21fc57[0x2],_0x551e21[0x0]*_0x21fc57[0x6]-_0x551e21[0x1]*_0x21fc57[0xf]-_0x551e21[0x2]*_0x21fc57[0x4]-_0x551e21[0x3]*_0x21fc57[0x5]+_0x551e21[0x4]*_0x21fc57[0x2]+_0x551e21[0x5]*_0x21fc57[0x3]+_0x551e21[0x6]*_0x21fc57[0x0]+_0x551e21[0x7]*_0x21fc57[0x8]-_0x551e21[0x8]*_0x21fc57[0x7]-_0x551e21[0x9]*_0x21fc57[0xb]-_0x551e21[0xa]*_0x21fc57[0xc]-_0x551e21[0xb]*_0x21fc57[0x9]-_0x551e21[0xc]*_0x21fc57[0xa]-_0x551e21[0xd]*_0x21fc57[0xe]+_0x551e21[0xe]*_0x21fc57[0xd]-_0x551e21[0xf]*_0x21fc57[0x1],_0x551e21[0x0]*_0x21fc57[0x7]+_0x551e21[0x1]*_0x21fc57[0xd]-_0x551e21[0x2]*_0x21fc57[0xc]+_0x551e21[0x3]*_0x21fc57[0xb]+_0x551e21[0x7]*_0x21fc57[0x0]+_0x551e21[0xb]*_0x21fc57[0x3]-_0x551e21[0xc]*_0x21fc57[0x2]+_0x551e21[0xd]*_0x21fc57[0x1],_0x551e21[0x0]*_0x21fc57[0x8]+_0x551e21[0x1]*_0x21fc57[0xe]-_0x551e21[0x2]*_0x21fc57[0xa]+_0x551e21[0x3]*_0x21fc57[0x9]+_0x551e21[0x4]*_0x21fc57[0xc]-_0x551e21[0x5]*_0x21fc57[0xb]+_0x551e21[0x6]*_0x21fc57[0x7]-_0x551e21[0x7]*_0x21fc57[0x6]+_0x551e21[0x8]*_0x21fc57[0x0]-_0x551e21[0x9]*_0x21fc57[0x3]+_0x551e21[0xa]*_0x21fc57[0x2]-_0x551e21[0xb]*_0x21fc57[0x5]+_0x551e21[0xc]*_0x21fc57[0x4]-_0x551e21[0xd]*_0x21fc57[0xf]+_0x551e21[0xe]*_0x21fc57[0x1]+_0x551e21[0xf]*_0x21fc57[0xd],_0x551e21[0x0]*_0x21fc57[0x9]+_0x551e21[0x1]*_0x21fc57[0xa]+_0x551e21[0x2]*_0x21fc57[0xe]-_0x551e21[0x3]*_0x21fc57[0x8]+_0x551e21[0x4]*_0x21fc57[0xd]-_0x551e21[0x5]*_0x21fc57[0x7]-_0x551e21[0x6]*_0x21fc57[0xb]+_0x551e21[0x7]*_0x21fc57[0x5]+_0x551e21[0x8]*_0x21fc57[0x3]+_0x551e21[0x9]*_0x21fc57[0x0]-_0x551e21[0xa]*_0x21fc57[0x1]-_0x551e21[0xb]*_0x21fc57[0x6]+_0x551e21[0xc]*_0x21fc57[0xf]+_0x551e21[0xd]*_0x21fc57[0x4]+_0x551e21[0xe]*_0x21fc57[0x2]-_0x551e21[0xf]*_0x21fc57[0xc],_0x551e21[0x0]*_0x21fc57[0xa]-_0x551e21[0x1]*_0x21fc57[0x9]+_0x551e21[0x2]*_0x21fc57[0x8]+_0x551e21[0x3]*_0x21fc57[0xe]+_0x551e21[0x4]*_0x21fc57[0x7]+_0x551e21[0x5]*_0x21fc57[0xd]-_0x551e21[0x6]*_0x21fc57[0xc]-_0x551e21[0x7]*_0x21fc57[0x4]-_0x551e21[0x8]*_0x21fc57[0x2]+_0x551e21[0x9]*_0x21fc57[0x1]+_0x551e21[0xa]*_0x21fc57[0x0]-_0x551e21[0xb]*_0x21fc57[0xf]-_0x551e21[0xc]*_0x21fc57[0x6]+_0x551e21[0xd]*_0x21fc57[0x5]+_0x551e21[0xe]*_0x21fc57[0x3]+_0x551e21[0xf]*_0x21fc57[0xb],_0x551e21[0x0]*_0x21fc57[0xb]+_0x551e21[0x1]*_0x21fc57[0xc]+_0x551e21[0x2]*_0x21fc57[0xd]-_0x551e21[0x3]*_0x21fc57[0x7]-_0x551e21[0x7]*_0x21fc57[0x3]+_0x551e21[0xb]*_0x21fc57[0x0]-_0x551e21[0xc]*_0x21fc57[0x1]-_0x551e21[0xd]*_0x21fc57[0x2],_0x551e21[0x0]*_0x21fc57[0xc]-_0x551e21[0x1]*_0x21fc57[0xb]+_0x551e21[0x2]*_0x21fc57[0x7]+_0x551e21[0x3]*_0x21fc57[0xd]+_0x551e21[0x7]*_0x21fc57[0x2]+_0x551e21[0xb]*_0x21fc57[0x1]+_0x551e21[0xc]*_0x21fc57[0x0]-_0x551e21[0xd]*_0x21fc57[0x3],_0x551e21[0x0]*_0x21fc57[0xd]-_0x551e21[0x1]*_0x21fc57[0x7]-_0x551e21[0x2]*_0x21fc57[0xb]-_0x551e21[0x3]*_0x21fc57[0xc]-_0x551e21[0x7]*_0x21fc57[0x1]+_0x551e21[0xb]*_0x21fc57[0x2]+_0x551e21[0xc]*_0x21fc57[0x3]+_0x551e21[0xd]*_0x21fc57[0x0],_0x551e21[0x0]*_0x21fc57[0xe]-_0x551e21[0x1]*_0x21fc57[0x8]-_0x551e21[0x2]*_0x21fc57[0x9]-_0x551e21[0x3]*_0x21fc57[0xa]+_0x551e21[0x4]*_0x21fc57[0xb]+_0x551e21[0x5]*_0x21fc57[0xc]+_0x551e21[0x6]*_0x21fc57[0xd]+_0x551e21[0x7]*_0x21fc57[0xf]-_0x551e21[0x8]*_0x21fc57[0x1]-_0x551e21[0x9]*_0x21fc57[0x2]-_0x551e21[0xa]*_0x21fc57[0x3]-_0x551e21[0xb]*_0x21fc57[0x4]-_0x551e21[0xc]*_0x21fc57[0x5]-_0x551e21[0xd]*_0x21fc57[0x6]+_0x551e21[0xe]*_0x21fc57[0x0]-_0x551e21[0xf]*_0x21fc57[0x7],_0x551e21[0x0]*_0x21fc57[0xf]+_0x551e21[0x1]*_0x21fc57[0x6]-_0x551e21[0x2]*_0x21fc57[0x5]+_0x551e21[0x3]*_0x21fc57[0x4]+_0x551e21[0x4]*_0x21fc57[0x3]-_0x551e21[0x5]*_0x21fc57[0x2]+_0x551e21[0x6]*_0x21fc57[0x1]-_0x551e21[0x7]*_0x21fc57[0xe]+_0x551e21[0x8]*_0x21fc57[0xd]-_0x551e21[0x9]*_0x21fc57[0xc]+_0x551e21[0xa]*_0x21fc57[0xb]-_0x551e21[0xb]*_0x21fc57[0xa]+_0x551e21[0xc]*_0x21fc57[0x9]-_0x551e21[0xd]*_0x21fc57[0x8]+_0x551e21[0xe]*_0x21fc57[0x7]+_0x551e21[0xf]*_0x21fc57[0x0]];}static[_0x2bad72(0x240)](_0x4095f6){return[_0x4095f6[0x0],-_0x4095f6[0x1],-_0x4095f6[0x2],-_0x4095f6[0x3],-_0x4095f6[0x4],-_0x4095f6[0x5],-_0x4095f6[0x6],-_0x4095f6[0x7],-_0x4095f6[0x8],-_0x4095f6[0x9],-_0x4095f6[0xa],_0x4095f6[0xb],_0x4095f6[0xc],_0x4095f6[0xd],_0x4095f6[0xe],_0x4095f6[0xf]];}static[_0x2bad72(0x2ca)](_0x598a8f,_0x2c1b3c){const _0x5e35b1=_0x2bad72;return PGA3D[_0x5e35b1(0x2ac)](_0x2c1b3c,PGA3D[_0x5e35b1(0x2ac)](_0x598a8f,PGA3D[_0x5e35b1(0x240)](_0x2c1b3c)));}static[_0x2bad72(0x23d)](_0x4c1c82){const _0x2e9027=_0x2bad72;return Math[_0x2e9027(0x226)](_0x4c1c82[_0x2e9027(0x22e)](_0x183d5d=>_0x183d5d*_0x183d5d)['reduce']((_0x4b855b,_0x575d0e)=>_0x4b855b+_0x575d0e,0x0));}static[_0x2bad72(0x322)](_0x39bce7,_0x200f4b,_0x539a20){return[0x1,0x0,0x0,0x0,-_0x39bce7/0x2,-_0x200f4b/0x2,-_0x539a20/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x2ec)](_0xa82dab){return[0x1,0x0,0x0,0x0,_0xa82dab[0x4],_0xa82dab[0x5],_0xa82dab[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x30d)](_0x53edfd,_0x4eda22=0x1,_0x91f02=0x0,_0x1767f1=0x0,_0x1e4955=0x0,_0x332bb7=0x0,_0x1a6584=0x0){const _0x192026=_0x2bad72;let _0x2be4bd=Math[_0x192026(0x2fe)](_0x53edfd/0x2),_0x510c90=Math['sin'](_0x53edfd/0x2),_0x58f9cd=PGA3D[_0x192026(0x293)](_0x1e4955,_0x332bb7,_0x1a6584,_0x4eda22,_0x91f02,_0x1767f1);return[_0x2be4bd,_0x510c90*_0x58f9cd[0x1],_0x510c90*_0x58f9cd[0x2],_0x510c90*_0x58f9cd[0x3],_0x510c90*_0x58f9cd[0x4],_0x510c90*_0x58f9cd[0x5],_0x510c90*_0x58f9cd[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['extractRotor'](_0x4a62c6){return[_0x4a62c6[0x0],_0x4a62c6[0x1],_0x4a62c6[0x2],_0x4a62c6[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x1e2)](_0x4fe62f,_0x4dc537,_0x37e15e){return[0x0,_0x37e15e,-_0x4dc537,_0x4fe62f,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x293)](_0x179e83,_0x15b370,_0x5c2329,_0x3d3c9c,_0x2bb195,_0x33d15d){const _0x5ad819=_0x2bad72;let _0x561f3a=PGA3D[_0x5ad819(0x1e2)](_0x3d3c9c,_0x2bb195,_0x33d15d),_0x40c965=PGA3D[_0x5ad819(0x2d1)](_0x561f3a);return[0x0,_0x40c965[0x1],_0x40c965[0x2],_0x40c965[0x3],-(-_0x40c965[0x2]*_0x5c2329-_0x40c965[0x1]*_0x15b370),-(_0x40c965[0x1]*_0x179e83-_0x40c965[0x3]*_0x5c2329),-(_0x40c965[0x3]*_0x15b370+_0x40c965[0x2]*_0x179e83),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x1d0)](_0x24deb3,_0x3376ba,_0x54b363){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x54b363,_0x3376ba,-_0x24deb3,0x0,0x0,0x0,0x0,0x0];}static[_0x2bad72(0x25a)](_0x1e886a){return[-_0x1e886a[0xa]/_0x1e886a[0x7],_0x1e886a[0x9]/_0x1e886a[0x7],-_0x1e886a[0x8]/_0x1e886a[0x7]];}static[_0x2bad72(0x2a9)](_0x57a8a9,_0xd6fbf,_0x8a3eb,_0x43119a){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x57a8a9,_0xd6fbf,_0x8a3eb,-_0x43119a,0x0];}static[_0x2bad72(0x2dd)](_0x26eb47,_0x5370dc,_0x537a5d){const _0x259349=_0x2bad72;let _0x2961fb=_0x5370dc[0x1]*_0x537a5d[0x2]-_0x537a5d[0x1]*_0x5370dc[0x2]-(_0x26eb47[0x1]*_0x537a5d[0x2]-_0x537a5d[0x1]*_0x26eb47[0x2])+(_0x26eb47[0x1]*_0x5370dc[0x2]-_0x5370dc[0x1]*_0x26eb47[0x2]),_0x2137ce=_0x5370dc[0x0]*_0x537a5d[0x2]-_0x537a5d[0x0]*_0x5370dc[0x2]-(_0x26eb47[0x0]*_0x537a5d[0x2]-_0x537a5d[0x0]*_0x26eb47[0x2])+(_0x26eb47[0x0]*_0x5370dc[0x2]-_0x5370dc[0x0]*_0x26eb47[0x2]),_0x2505fc=_0x5370dc[0x0]*_0x537a5d[0x1]-_0x537a5d[0x0]*_0x5370dc[0x1]-(_0x26eb47[0x0]*_0x537a5d[0x1]-_0x537a5d[0x0]*_0x26eb47[0x1])+(_0x26eb47[0x0]*_0x5370dc[0x1]-_0x5370dc[0x0]*_0x26eb47[0x1]),_0x4d3d60=_0x26eb47[0x0]*(_0x5370dc[0x1]*_0x537a5d[0x2]-_0x537a5d[0x1]*_0x5370dc[0x2])-_0x5370dc[0x0]*(_0x26eb47[0x1]*_0x537a5d[0x2]-_0x537a5d[0x1]*_0x26eb47[0x2])+_0x537a5d[0x0]*(_0x26eb47[0x1]*_0x5370dc[0x2]-_0x5370dc[0x1]*_0x26eb47[0x2]);return PGA3D[_0x259349(0x2a9)](_0x2961fb,-_0x2137ce,_0x2505fc,_0x4d3d60);}static[_0x2bad72(0x230)](_0x525ea0,_0x449f03){const _0x258124=_0x2bad72;let _0x4894e0=PGA3D[_0x258124(0x2ac)](_0x525ea0,_0x449f03),_0x510110=Math[_0x258124(0x2d5)](_0x4894e0[0x7])<=1e-8,_0xfa6bd=_0x510110&&Math[_0x258124(0x2d5)](_0x4894e0[0x8])<=1e-8&&Math['abs'](_0x4894e0[0x9])<=1e-8&&Math[_0x258124(0x2d5)](_0x4894e0[0xa])<=1e-8;return[PGA3D[_0x258124(0x25a)](_0x4894e0),!_0x510110,_0xfa6bd];}static[_0x2bad72(0x2d1)](_0x35c7b7){const _0x13cc3c=_0x2bad72;let _0x116eec=PGA3D[_0x13cc3c(0x23d)](_0x35c7b7);if(_0x116eec==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x35c7b7[_0x13cc3c(0x22e)](_0x11ad02=>_0x11ad02/_0x116eec);}static[_0x2bad72(0x29b)](_0x31fd00,_0x4e9ab8){const _0x4470da=_0x2bad72;let _0x6a5de2=PGA3D['applyMotor'](PGA3D[_0x4470da(0x1d0)](_0x31fd00[0x0],_0x31fd00[0x1],_0x31fd00[0x2]),_0x4e9ab8);return PGA3D[_0x4470da(0x25a)](_0x6a5de2);}static['applyMotorToDir'](_0x559f77,_0x521311){const _0x198621=_0x2bad72;let _0x272bf4=PGA3D[_0x198621(0x251)](_0x521311),_0x2e6814=PGA3D[_0x198621(0x2ca)](PGA3D[_0x198621(0x1d0)](_0x559f77[0x0],_0x559f77[0x1],_0x559f77[0x2]),_0x272bf4);return PGA3D['extractPoint'](_0x2e6814);}static[_0x2bad72(0x2e3)](_0xe45e82,_0x277f76,_0x42efb3,_0x5388c5){const _0x215f01=_0x2bad72;let _0x5a8585=PGA3D['createPoint'](_0xe45e82[0x0],_0xe45e82[0x1],_0xe45e82[0x2]),_0x330ed6=PGA3D[_0x215f01(0x1d0)](_0x277f76[0x0],_0x277f76[0x1],_0x277f76[0x2]),_0x4f9c78=PGA3D[_0x215f01(0x1d0)](_0x42efb3[0x0],_0x42efb3[0x1],_0x42efb3[0x2]),_0x46ee5a=PGA3D[_0x215f01(0x1d0)](_0x5388c5[0x0],_0x5388c5[0x1],_0x5388c5[0x2]),_0x3a7b83=PGA3D[_0x215f01(0x2dd)](_0xe45e82,_0x277f76,_0x42efb3),_0x223a23=PGA3D[_0x215f01(0x2dd)](_0x5388c5,_0x277f76,_0x42efb3),_0x481fc4=PGA3D[_0x215f01(0x2dd)](_0xe45e82,_0x5388c5,_0x42efb3),_0x522eca=PGA3D[_0x215f01(0x2dd)](_0xe45e82,_0x277f76,_0x5388c5),_0x170895=_0x3a7b83[0xb]*_0x3a7b83[0xb]+_0x3a7b83[0xc]*_0x3a7b83[0xc]+_0x3a7b83[0xd]*_0x3a7b83[0xd]+_0x3a7b83[0xe]*_0x3a7b83[0xe],_0x34d4b1=_0x3a7b83[0xb]*_0x223a23[0xb]+_0x3a7b83[0xc]*_0x223a23[0xc]+_0x3a7b83[0xd]*_0x223a23[0xd]+_0x3a7b83[0xe]*_0x223a23[0xe],_0x28ca7a=_0x3a7b83[0xb]*_0x481fc4[0xb]+_0x3a7b83[0xc]*_0x481fc4[0xc]+_0x3a7b83[0xd]*_0x481fc4[0xd]+_0x3a7b83[0xe]*_0x481fc4[0xe],_0x2c6188=_0x3a7b83[0xb]*_0x522eca[0xb]+_0x3a7b83[0xc]*_0x522eca[0xc]+_0x3a7b83[0xd]*_0x522eca[0xd]+_0x3a7b83[0xe]*_0x522eca[0xe],_0x2e5e76=_0x34d4b1/_0x170895,_0x123d55=_0x28ca7a/_0x170895,_0x3fd721=_0x2c6188/_0x170895;return _0x2e5e76>=0x0&&_0x2e5e76<=0x1&&_0x123d55>=0x0&&_0x123d55<=0x1&&_0x3fd721>=0x0&&_0x3fd721<=0x1;}}class Camera{constructor(_0x1d00bc=0x200,_0x1fae13=0x200){const _0x34e9c5=_0x2bad72;this[_0x34e9c5(0x278)]=new Float32Array(Array(0x10)[_0x34e9c5(0x1e5)](0x0)),this['_pose'][0x0]=0x1,this[_0x34e9c5(0x214)]=new Float32Array(Array(0x2)[_0x34e9c5(0x1e5)](0x1)),this[_0x34e9c5(0x2b5)]=new Float32Array([_0x1d00bc,_0x1fae13]),this['_isProjective']=![];}[_0x2bad72(0x28e)](){const _0xeb1321=_0x2bad72;this[_0xeb1321(0x278)][0x0]=0x1;for(let _0x42a8d0=0x1;_0x42a8d0<0x10;++_0x42a8d0)this[_0xeb1321(0x278)][_0x42a8d0]=0x0;this['_focal'][0x0]=0x1,this[_0xeb1321(0x214)][0x1]=0x1;}[_0x2bad72(0x312)](_0x1019ab){const _0x2cb78b=_0x2bad72;for(let _0x4edbd1=0x0;_0x4edbd1<0x10;++_0x4edbd1)this[_0x2cb78b(0x278)][_0x4edbd1]=_0x1019ab[_0x4edbd1];}[_0x2bad72(0x1f7)](_0x23e3e6,_0x34a3e4){const _0x115618=_0x2bad72;this[_0x115618(0x2b5)][0x0]=_0x23e3e6,this[_0x115618(0x2b5)][0x1]=_0x34a3e4;}['moveX'](_0x5e27d1){const _0x4ce973=_0x2bad72;let _0x93190f=PGA3D[_0x4ce973(0x208)]([0x1,0x0,0x0],this[_0x4ce973(0x278)]),_0x20021c=PGA3D[_0x4ce973(0x322)](_0x5e27d1*_0x93190f[0x0],_0x5e27d1*_0x93190f[0x1],_0x5e27d1*_0x93190f[0x2]),_0x4a842c=PGA3D['normalizeMotor'](PGA3D[_0x4ce973(0x2ac)](_0x20021c,this['_pose']));this[_0x4ce973(0x312)](_0x4a842c);}[_0x2bad72(0x22b)](_0x16cd0d){const _0x222472=_0x2bad72;let _0x3ddc1b=PGA3D['applyMotorToDir']([0x0,0x1,0x0],this[_0x222472(0x278)]),_0x30d109=PGA3D[_0x222472(0x322)](_0x16cd0d*_0x3ddc1b[0x0],_0x16cd0d*_0x3ddc1b[0x1],_0x16cd0d*_0x3ddc1b[0x2]),_0x560f1b=PGA3D['normalizeMotor'](PGA3D[_0x222472(0x2ac)](_0x30d109,this[_0x222472(0x278)]));this[_0x222472(0x312)](_0x560f1b);}[_0x2bad72(0x28d)](_0x21e8c9){const _0x5b0fa0=_0x2bad72;let _0x124b48=PGA3D[_0x5b0fa0(0x208)]([0x0,0x0,0x1],this['_pose']),_0x52439f=PGA3D[_0x5b0fa0(0x322)](_0x21e8c9*_0x124b48[0x0],_0x21e8c9*_0x124b48[0x1],_0x21e8c9*_0x124b48[0x2]),_0x1addc8=PGA3D[_0x5b0fa0(0x2d1)](PGA3D[_0x5b0fa0(0x2ac)](_0x52439f,this[_0x5b0fa0(0x278)]));this[_0x5b0fa0(0x312)](_0x1addc8);}[_0x2bad72(0x2d2)](_0x4eea22){const _0x5353bd=_0x2bad72;let _0x323257=PGA3D[_0x5353bd(0x29b)]([0x0,0x0,0x0],this[_0x5353bd(0x278)]),_0x2ec9a=PGA3D[_0x5353bd(0x208)]([0x1,0x0,0x0],this[_0x5353bd(0x278)]),_0x1b83ba=PGA3D['createRotor'](_0x4eea22,_0x2ec9a[0x0],_0x2ec9a[0x1],_0x2ec9a[0x2],_0x323257[0x0],_0x323257[0x1],_0x323257[0x2]),_0x47fbbd=PGA3D['normalizeMotor'](PGA3D[_0x5353bd(0x2ac)](_0x1b83ba,this[_0x5353bd(0x278)]));this[_0x5353bd(0x312)](_0x47fbbd);}[_0x2bad72(0x305)](_0x28abda){const _0x2fdff2=_0x2bad72;let _0x43b387=PGA3D[_0x2fdff2(0x29b)]([0x0,0x0,0x0],this[_0x2fdff2(0x278)]),_0x491a53=PGA3D['applyMotorToDir']([0x0,0x1,0x0],this[_0x2fdff2(0x278)]),_0x5ec08c=PGA3D[_0x2fdff2(0x30d)](_0x28abda,_0x491a53[0x0],_0x491a53[0x1],_0x491a53[0x2],_0x43b387[0x0],_0x43b387[0x1],_0x43b387[0x2]),_0x4d0be1=PGA3D[_0x2fdff2(0x2d1)](PGA3D[_0x2fdff2(0x2ac)](_0x5ec08c,this['_pose']));this['updatePose'](_0x4d0be1);}[_0x2bad72(0x24d)](_0x4c298c){const _0x8a32a9=_0x2bad72;let _0x124a7e=PGA3D[_0x8a32a9(0x29b)]([0x0,0x0,0x0],this['_pose']),_0xba2ca5=PGA3D[_0x8a32a9(0x208)]([0x0,0x0,0x1],this['_pose']),_0x1c20e1=PGA3D[_0x8a32a9(0x30d)](_0x4c298c,_0xba2ca5[0x0],_0xba2ca5[0x1],_0xba2ca5[0x2],_0x124a7e[0x0],_0x124a7e[0x1],_0x124a7e[0x2]),_0x37b743=PGA3D[_0x8a32a9(0x2d1)](PGA3D[_0x8a32a9(0x2ac)](_0x1c20e1,this[_0x8a32a9(0x278)]));this[_0x8a32a9(0x312)](_0x37b743);}}class SceneObject{static ['_objectCnt']=0x0;constructor(_0xa62665,_0x1cf447){const _0x74a825=_0x2bad72;if(this[_0x74a825(0x1de)]==SceneObject)throw new Error(_0x74a825(0x2c2));this[_0x74a825(0x22d)]=_0xa62665,this['_canvasFormat']=_0x1cf447,SceneObject[_0x74a825(0x1bc)]+=0x1;}[_0x2bad72(0x313)](){const _0x18eb3c=_0x2bad72;return this['constructor'][_0x18eb3c(0x1e1)]+'\x20'+SceneObject[_0x18eb3c(0x1bc)][_0x18eb3c(0x2bb)]();}async[_0x2bad72(0x270)](){const _0x142107=_0x2bad72;await this[_0x142107(0x29c)](),await this['createShaders'](),await this[_0x142107(0x24e)](),await this['createComputePipeline']();}async[_0x2bad72(0x29c)](){const _0xdca140=_0x2bad72;throw new Error(_0xdca140(0x202));}['updateGeometry'](){}[_0x2bad72(0x2fd)](_0x3133a9){return new Promise((_0x28abd1,_0x3d9aec)=>{const _0x1a87f9=_0x2352,_0x1cf81d=new XMLHttpRequest();_0x1cf81d['open'](_0x1a87f9(0x31e),_0x3133a9),_0x1cf81d['setRequestHeader'](_0x1a87f9(0x204),_0x1a87f9(0x28b)),_0x1cf81d['onload']=function(){const _0xd99e54=_0x1a87f9;_0x1cf81d['readyState']===XMLHttpRequest[_0xd99e54(0x26e)]&&_0x1cf81d[_0xd99e54(0x20c)]===0xc8?_0x28abd1(_0x1cf81d[_0xd99e54(0x210)]):_0x3d9aec({'status':_0x1cf81d[_0xd99e54(0x20c)],'statusText':_0x1cf81d[_0xd99e54(0x281)]});},_0x1cf81d[_0x1a87f9(0x1a6)]=function(){const _0xfd3940=_0x1a87f9;_0x3d9aec({'status':_0x1cf81d[_0xfd3940(0x20c)],'statusText':_0x1cf81d['statusText']});},_0x1cf81d[_0x1a87f9(0x2f2)]();});}async[_0x2bad72(0x2e4)](){const _0x8245e3=_0x2bad72;throw new Error(_0x8245e3(0x2b3));}async['createRenderPipeline'](){throw new Error('Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.');}[_0x2bad72(0x231)](_0x57b7f7){const _0x5603b2=_0x2bad72;throw new Error(_0x5603b2(0x2f9));}async[_0x2bad72(0x261)](){const _0x1b80cb=_0x2bad72;throw new Error(_0x1b80cb(0x26a));}['compute'](_0x2678e4){const _0x2272a7=_0x2bad72;throw new Error(_0x2272a7(0x1f9));}}class RayTracingObject extends SceneObject{async[_0x2bad72(0x29c)](){}async['createShaders'](){const _0x497204=_0x2bad72;let _0x21cdb8=await this[_0x497204(0x2fd)]('/shaders/optimized_tracenothing.wgsl');this['_shaderModule']=this[_0x497204(0x22d)][_0x497204(0x217)]({'label':_0x497204(0x28c)+this['getName'](),'code':_0x21cdb8});}['updateGeometry'](){}async[_0x2bad72(0x24e)](){}[_0x2bad72(0x231)](_0x254abf){}async[_0x2bad72(0x261)](){const _0x26e6a5=_0x2bad72;this[_0x26e6a5(0x211)]=this[_0x26e6a5(0x22d)]['createComputePipeline']({'label':'Ray\x20Tracing\x20Pipeline\x20'+this['getName'](),'layout':'auto','compute':{'module':this[_0x26e6a5(0x2f1)],'entryPoint':'computeMain'}});}['createBindGroup'](_0x2101ef){const _0xad08c8=_0x2bad72;this[_0xad08c8(0x21b)]=this[_0xad08c8(0x22d)][_0xad08c8(0x21f)]({'label':_0xad08c8(0x2b8),'layout':this[_0xad08c8(0x211)][_0xad08c8(0x31d)](0x0),'entries':[{'binding':0x0,'resource':_0x2101ef['createView']()}]}),this[_0xad08c8(0x265)]=Math[_0xad08c8(0x297)](_0x2101ef[_0xad08c8(0x287)]),this[_0xad08c8(0x2e2)]=Math[_0xad08c8(0x297)](_0x2101ef[_0xad08c8(0x272)]);}['compute'](_0x30b6f1){const _0x2aedd4=_0x2bad72;_0x30b6f1[_0x2aedd4(0x26d)](this['_computePipeline']),_0x30b6f1[_0x2aedd4(0x2f4)](0x0,this['_bindGroup']),_0x30b6f1[_0x2aedd4(0x29a)](Math[_0x2aedd4(0x297)](this['_wgWidth']/0x10),Math[_0x2aedd4(0x297)](this['_wgHeight']/0x10));}}class MeshIO{constructor(){const _0x4778ce=_0x2bad72;if(this[_0x4778ce(0x1de)]==MeshIO)throw new Error('Abstract\x20classes\x20can\x27t\x20be\x20instantiated.');}static async[_0x2bad72(0x286)](_0x3e2d5f){throw new Error('Method\x20\x27read(filename)\x27\x20must\x20be\x20implemented.');}static async['write'](_0xd98b5,_0x389502,_0xbf9934=![]){throw new Error('Method\x20\x27write(filename)\x27\x20muste\x20be\x20implemented.');}}class PlyIO extends MeshIO{constructor(){}static['readBinary'](_0x7694f6){return new Promise((_0x351b87,_0x12f0f1)=>{const _0x1dc298=_0x2352,_0x20963f=new XMLHttpRequest();_0x20963f[_0x1dc298(0x267)]('GET',_0x7694f6),_0x20963f[_0x1dc298(0x280)](_0x1dc298(0x204),_0x1dc298(0x28b)),_0x20963f['responseType']=_0x1dc298(0x1a8),_0x20963f['onload']=function(){const _0xae9b0=_0x1dc298;_0x20963f['readyState']===XMLHttpRequest[_0xae9b0(0x26e)]&&_0x20963f[_0xae9b0(0x20c)]===0xc8?_0x351b87(_0x20963f[_0xae9b0(0x1f3)]):_0x12f0f1(new Error('Error\x20loading\x20PLY\x20file:\x20'+_0x20963f[_0xae9b0(0x20c)]));},_0x20963f[_0x1dc298(0x1a6)]=function(){_0x12f0f1(new Error('Network\x20error\x20loading\x20PLY\x20file'));},_0x20963f[_0x1dc298(0x2f2)]();});}static[_0x2bad72(0x2aa)](_0x4fadc1){const _0x569177=_0x2bad72,_0xc02766=_0x4fadc1[_0x569177(0x2c8)]('\x0a');let _0x30c8e4=0x0,_0x549a0f=0x0,_0x3c314e=0x0,_0x52e470=[],_0x431ca8=[],_0x37015d=_0x569177(0x2ee),_0x58df3f=_0x569177(0x245);_0x30c8e4+=_0xc02766[0x0][_0x569177(0x213)]+0x1;const _0x532e84=_0xc02766[0x0]['trim']();if(_0x532e84!=='ply')throw new Error('Input\x20is\x20not\x20a\x20ply\x20file:\x20'+filename);for(let _0x555ecd=0x1;_0x555ecd<_0xc02766[_0x569177(0x213)];++_0x555ecd){_0x30c8e4+=_0xc02766[_0x555ecd]['length']+0x1;const _0x1f53ca=_0xc02766[_0x555ecd][_0x569177(0x1f0)]();if(_0x1f53ca===_0x569177(0x264)){_0x37015d=_0x569177(0x20f);break;}_0x1f53ca['startsWith'](_0x569177(0x2ee))&&(_0x58df3f=_0x1f53ca[_0x569177(0x2c8)]('\x20')[0x1]);if(_0x1f53ca[_0x569177(0x2b9)](_0x569177(0x1b4)))_0x549a0f=parseInt(_0x1f53ca['split']('\x20')[0x2]),_0x37015d=_0x569177(0x26b);else{if(_0x1f53ca[_0x569177(0x2b9)](_0x569177(0x29e)))_0x3c314e=parseInt(_0x1f53ca['split']('\x20')[0x2]),_0x37015d=_0x569177(0x1a9);else{if(_0x1f53ca[_0x569177(0x2b9)](_0x569177(0x311))){if(_0x37015d===_0x569177(0x26b))_0x52e470['push'](_0x1f53ca[_0x569177(0x2c8)]('\x20')['slice'](0x1)[_0x569177(0x310)]('\x20'));else _0x37015d===_0x569177(0x1a9)&&_0x431ca8[_0x569177(0x2fb)](_0x1f53ca[_0x569177(0x2c8)]('\x20')[_0x569177(0x1d3)](0x1)[_0x569177(0x310)]('\x20'));}}}}return[_0x30c8e4,_0x549a0f,_0x3c314e,_0x52e470,_0x431ca8,_0x58df3f];}static[_0x2bad72(0x219)](_0x178a9f,_0x4b701d,_0x5b9db){const _0x490c69=_0x2bad72,_0x35b4d9=[],_0x143230=_0x178a9f[_0x490c69(0x2c8)]('\x0a');for(let _0x206bd4=0x0;_0x206bd4<_0x4b701d;++_0x206bd4){const _0x5ce7bd=_0x143230[_0x206bd4][_0x490c69(0x1f0)]();_0x35b4d9['push'](_0x5ce7bd[_0x490c69(0x2c8)]('\x20')['map'](parseFloat));}const _0x19ba80=[];for(let _0x3181ce=_0x4b701d;_0x3181ce<_0x4b701d+_0x5b9db;++_0x3181ce){const _0x284426=_0x143230[_0x3181ce][_0x490c69(0x1f0)]();let _0x4469b6=_0x284426['split']('\x20')['slice'](0x1);for(let _0x757154=0x0;_0x757154<_0x4469b6['length']-0x2;++_0x757154){_0x19ba80[_0x490c69(0x2fb)]([parseInt(_0x4469b6[0x0]),parseInt(_0x4469b6[_0x757154+0x1]),parseInt(_0x4469b6[_0x757154+0x2])]);}}return[_0x35b4d9,_0x19ba80];}static['readBytes'](_0x204e3a,_0x6e9151,_0x61eee8,_0x488835){const _0x5a0a2e=_0x2bad72;switch(_0x488835){case _0x5a0a2e(0x228):return[_0x204e3a[_0x5a0a2e(0x1ff)](_0x6e9151,0x1)];break;case'uchar':return[_0x204e3a[_0x5a0a2e(0x20a)](_0x6e9151,0x1)];break;case _0x5a0a2e(0x1ac):return[_0x204e3a[_0x5a0a2e(0x277)](_0x6e9151,_0x61eee8),0x2];break;case'ushort':return[_0x204e3a[_0x5a0a2e(0x2e1)](_0x6e9151,_0x61eee8),0x2];break;case _0x5a0a2e(0x248):return[_0x204e3a[_0x5a0a2e(0x27f)](_0x6e9151,_0x61eee8),0x4];break;case'uint':return[_0x204e3a['getUint32'](_0x6e9151,_0x61eee8),0x4];break;case _0x5a0a2e(0x2ed):return[_0x204e3a[_0x5a0a2e(0x243)](_0x6e9151,_0x61eee8),0x4];break;case'double':return[_0x204e3a['getFloat64'](_0x6e9151,_0x61eee8),0x8];break;}}static[_0x2bad72(0x266)](_0x1684bd,_0x127b84,_0x2ef772,_0xe0e7c6,_0x37fb3b,_0x4afea1,_0x289863){const _0x42d3b7=_0x2bad72;let _0x3f8232=_0x289863[_0x42d3b7(0x2d9)](_0x42d3b7(0x23f));const _0xdc9498=[];for(let _0x24d49d=0x0;_0x24d49d<_0x2ef772;++_0x24d49d){const _0x1c5946=[];for(let _0x2fe797=0x0;_0x2fe797<_0x37fb3b['length'];++_0x2fe797){const [_0x2e07bb,_0x4a1f40]=_0x37fb3b[_0x2fe797][_0x42d3b7(0x2c8)]('\x20'),[_0x4f61cf,_0x11d52f]=PlyIO[_0x42d3b7(0x1cc)](_0x1684bd,_0x127b84,_0x3f8232,_0x2e07bb);_0x1c5946['push'](_0x4f61cf),_0x127b84+=_0x11d52f;}_0xdc9498[_0x42d3b7(0x2fb)](_0x1c5946);}const [_0x5651fe,_0x1e9f57,_0x10a1b0,_0xad2124]=_0x4afea1[0x0]['split']('\x20'),_0x4f2b18=[];for(let _0x153798=0x0;_0x153798<_0xe0e7c6;++_0x153798){const [_0x44a145,_0x4cac45]=PlyIO[_0x42d3b7(0x1cc)](_0x1684bd,_0x127b84,_0x3f8232,_0x1e9f57);_0x127b84+=_0x4cac45;const _0x397507=[];for(let _0x41dfbb=0x0;_0x41dfbb<_0x44a145;++_0x41dfbb){const [_0x4bd38b,_0xb41f82]=PlyIO[_0x42d3b7(0x1cc)](_0x1684bd,_0x127b84,_0x3f8232,_0x10a1b0);_0x397507['push'](_0x4bd38b),_0x127b84+=_0xb41f82;}for(let _0x57a4f1=0x0;_0x57a4f1<_0x397507['length']-0x2;++_0x57a4f1){_0x4f2b18['push']([_0x397507[0x0],_0x397507[_0x57a4f1+0x1],_0x397507[_0x57a4f1+0x2]]);}}return[_0xdc9498,_0x4f2b18];}static async['read'](_0x286e64){const _0x3a4702=_0x2bad72;let _0x26422f=await PlyIO[_0x3a4702(0x2e9)](_0x286e64),_0x19b7fa=new TextDecoder()[_0x3a4702(0x258)](_0x26422f);const [_0x51afe7,_0x16b621,_0x3adb89,_0x3dfce9,_0x273f23,_0x29ec8d]=PlyIO[_0x3a4702(0x2aa)](_0x19b7fa);if(_0x29ec8d===_0x3a4702(0x25b)){const [_0x4c8b52,_0x5e7791]=PlyIO[_0x3a4702(0x219)](_0x19b7fa[_0x3a4702(0x2c6)](_0x51afe7),_0x16b621,_0x3adb89,_0x3dfce9,_0x273f23);return[_0x4c8b52,_0x5e7791,_0x3dfce9];}else{const [_0x36789f,_0x56de99]=PlyIO[_0x3a4702(0x266)](new DataView(_0x26422f),_0x51afe7,_0x16b621,_0x3adb89,_0x3dfce9,_0x273f23,_0x29ec8d);return[_0x36789f,_0x56de99,_0x3dfce9];}}static['isLittleEndian'](){const _0x552853=_0x2bad72,_0xd8e8ff=new ArrayBuffer(0x2),_0x40ed06=new DataView(_0xd8e8ff);return _0x40ed06[_0x552853(0x1aa)](0x0,0x100,!![]),_0x40ed06['getInt8'](0x0)===0x0;}static async[_0x2bad72(0x1da)](_0x38e5bc,_0x5297c4,_0x1d2a81=![]){const _0x322997=_0x2bad72,_0x14928c=PlyIO[_0x322997(0x1e4)]();let _0x210d06=_0x322997(0x235)+(_0x1d2a81?_0x322997(0x25b):_0x14928c?_0x322997(0x2d3):'binary_big_endian')+'\x201.0\x0a';_0x210d06+=_0x322997(0x276)+_0x38e5bc[_0x322997(0x307)]+'\x0a';for(let _0x32e40e=0x0;_0x32e40e<_0x38e5bc[_0x322997(0x1b8)]['length'];++_0x32e40e){_0x210d06+=_0x322997(0x2ad)+_0x38e5bc[_0x322997(0x1b8)][_0x32e40e]+'\x0a';}_0x210d06+=_0x322997(0x259)+_0x38e5bc['numT']+'\x0a',_0x210d06+=_0x322997(0x2f6);if(_0x1d2a81){for(let _0x5c3814=0x0;_0x5c3814<_0x38e5bc['numV'];++_0x5c3814){let _0x275136='';for(let _0x3e7642=0x0;_0x3e7642<_0x38e5bc['vProp'][_0x322997(0x213)];++_0x3e7642){_0x275136+=_0x38e5bc[_0x322997(0x1fa)][_0x5c3814*_0x38e5bc[_0x322997(0x1b8)][_0x322997(0x213)]+_0x3e7642]+'\x20';}_0x210d06+=_0x275136[_0x322997(0x1f0)]()+'\x0a';}for(let _0x22435a=0x0;_0x22435a<_0x38e5bc['numT'];++_0x22435a){_0x210d06+='3\x20'+_0x38e5bc[_0x322997(0x2a6)][0x3*_0x22435a]+'\x20'+_0x38e5bc[_0x322997(0x2a6)][0x3*_0x22435a+0x1]+'\x20'+_0x38e5bc[_0x322997(0x2a6)][0x3*_0x22435a+0x2]+'\x0a';}const _0x5d4ae0=new Blob([_0x210d06],{'type':_0x322997(0x304)}),_0xe67edf=document[_0x322997(0x207)]('a');_0xe67edf[_0x322997(0x23c)]=URL[_0x322997(0x1d8)](_0x5d4ae0),_0xe67edf[_0x322997(0x1b6)]=_0x322997(0x1ae),_0xe67edf[_0x322997(0x1f4)](),URL[_0x322997(0x306)](_0xe67edf['href']);}else{const _0x5734b5=new Uint8Array(_0x38e5bc[_0x322997(0x1fa)][_0x322997(0x213)]*0x4);_0x38e5bc['vertices'][_0x322997(0x1d2)]((_0x425510,_0x33c418)=>{const _0x2878c6=_0x322997,_0x1c0eb5=new Float32Array([_0x425510]);_0x5734b5[_0x2878c6(0x318)](new Uint8Array(_0x1c0eb5[_0x2878c6(0x2b6)]),_0x33c418*0x4);});const _0x3c7ae4=new Uint8Array(_0x38e5bc[_0x322997(0x2c5)]*0x4*0x4);for(let _0xfd2de5=0x0;_0xfd2de5<_0x38e5bc[_0x322997(0x2c5)];++_0xfd2de5){const _0x41bd4b=new Int32Array([0x3,_0x38e5bc['triangles'][0x3*_0xfd2de5],_0x38e5bc[_0x322997(0x2a6)][0x3*_0xfd2de5+0x1],_0x38e5bc[_0x322997(0x2a6)][0x3*_0xfd2de5+0x2]]);_0x3c7ae4[_0x322997(0x318)](new Uint8Array(_0x41bd4b[_0x322997(0x2b6)]),_0xfd2de5*0x4*0x4);}const _0xee3df2=new Blob([new TextEncoder()['encode'](_0x210d06),_0x5734b5,_0x3c7ae4],{'type':_0x322997(0x1b2)}),_0x4d1fc4=document['createElement']('a');_0x4d1fc4[_0x322997(0x23c)]=URL[_0x322997(0x1d8)](_0xee3df2),_0x4d1fc4[_0x322997(0x1b6)]=_0x322997(0x1ae),_0x4d1fc4[_0x322997(0x1f4)](),URL['revokeObjectURL'](_0x4d1fc4['href']);}}}class TriangleMesh{constructor(_0x42b68c){const _0x2e0abd=_0x2bad72;this[_0x2e0abd(0x309)]=_0x42b68c;}['centerOfMass'](){const _0x34c712=_0x2bad72;let _0xd2363d=[0x0,0x0,0x0];for(let _0x46bfc8=0x0;_0x46bfc8<this[_0x34c712(0x2ab)];++_0x46bfc8){for(let _0x38eeb5=0x0;_0x38eeb5<0x3;++_0x38eeb5){_0xd2363d[_0x38eeb5]+=this[_0x34c712(0x257)][_0x46bfc8][_0x38eeb5];}}for(let _0x15d3ff=0x0;_0x15d3ff<0x3;++_0x15d3ff){_0xd2363d[_0x15d3ff]/=this[_0x34c712(0x2ab)];}return _0xd2363d;}[_0x2bad72(0x1ba)](){const _0x1e3d1d=_0x2bad72,_0x2107ad=(_0x19a3c8,_0x4e8494)=>Math[_0x1e3d1d(0x226)](Math[_0x1e3d1d(0x283)](_0x4e8494[0x0]-_0x19a3c8[0x0],0x2)+Math[_0x1e3d1d(0x283)](_0x4e8494[0x1]-_0x19a3c8[0x1],0x2)+Math[_0x1e3d1d(0x283)](_0x4e8494[0x2]-_0x19a3c8[0x2],0x2)),_0x121a7e=(_0x4e918e,_0x54a621,_0x685c21,_0x70bafb)=>Math[_0x1e3d1d(0x226)](_0x70bafb*(_0x70bafb-_0x4e918e)*(_0x70bafb-_0x54a621)*(_0x70bafb-_0x685c21));let _0x45b8ea=0x0;this['_faceArea']=new Array(this[_0x1e3d1d(0x1c6)]);for(let _0x42719d=0x0;_0x42719d<this[_0x1e3d1d(0x1c6)];++_0x42719d){const _0x160f9a=this[_0x1e3d1d(0x257)][this[_0x1e3d1d(0x21d)][_0x42719d][0x0]],_0x25a59f=this['_vertices'][this[_0x1e3d1d(0x21d)][_0x42719d][0x1]],_0x4d4e2a=this['_vertices'][this[_0x1e3d1d(0x21d)][_0x42719d][0x2]],_0x3a097d=_0x2107ad(_0x160f9a,_0x25a59f),_0x47dd73=_0x2107ad(_0x25a59f,_0x4d4e2a),_0x3b17ac=_0x2107ad(_0x4d4e2a,_0x160f9a),_0x537907=(_0x3a097d+_0x47dd73+_0x3b17ac)/0x2;this['_faceArea'][_0x42719d]=_0x121a7e(_0x3a097d,_0x47dd73,_0x3b17ac,_0x537907),_0x45b8ea+=this['_faceArea'][_0x42719d];}return _0x45b8ea;}['normalizeMesh'](){const _0x384ffe=_0x2bad72;this['_center']=this[_0x384ffe(0x1c7)]();for(let _0x5e9e6f=0x0;_0x5e9e6f<this['_numV'];++_0x5e9e6f){for(let _0x2407df=0x0;_0x2407df<0x3;++_0x2407df){this['_vertices'][_0x5e9e6f][_0x2407df]-=this[_0x384ffe(0x2b4)][_0x2407df];}}this['_area']=this[_0x384ffe(0x1ba)]();const _0x3487cc=0x1;this['_scaleFactor']=Math[_0x384ffe(0x226)](0x1/this[_0x384ffe(0x28a)]*_0x3487cc);for(let _0x1ca5fa=0x0;_0x1ca5fa<this[_0x384ffe(0x2ab)];++_0x1ca5fa){for(let _0x48325a=0x0;_0x48325a<0x3;++_0x48325a){this[_0x384ffe(0x257)][_0x1ca5fa][_0x48325a]*=this[_0x384ffe(0x27b)];}}Math[_0x384ffe(0x2d5)](this[_0x384ffe(0x1ba)]()-_0x3487cc)>0.0001&&console[_0x384ffe(0x200)](_0x384ffe(0x30c));}['computeNormal'](){const _0x2c483=_0x2bad72;this[_0x2c483(0x298)]=new Array(this['_numT']),this[_0x2c483(0x2df)]=Array[_0x2c483(0x1be)]({'length':this[_0x2c483(0x2ab)]},_0xf9ae9d=>new Array(0x3)[_0x2c483(0x1e5)](0x0));const _0x487d25=(_0x4b7777,_0x57396c,_0x3c44d2)=>{const _0x140689=_0x2c483;let _0x49d2d0=[_0x57396c[0x0]-_0x4b7777[0x0],_0x57396c[0x1]-_0x4b7777[0x1],_0x57396c[0x2]-_0x4b7777[0x2]],_0x541f5b=[_0x3c44d2[0x0]-_0x4b7777[0x0],_0x3c44d2[0x1]-_0x4b7777[0x1],_0x3c44d2[0x2]-_0x4b7777[0x2]],_0xb77bd=[_0x49d2d0[0x1]*_0x541f5b[0x2]-_0x49d2d0[0x2]*_0x541f5b[0x1],_0x49d2d0[0x2]*_0x541f5b[0x0]-_0x49d2d0[0x0]*_0x541f5b[0x2],_0x49d2d0[0x0]*_0x541f5b[0x1]-_0x49d2d0[0x1]*_0x541f5b[0x0]],_0x4233bf=Math['sqrt'](_0xb77bd[0x0]**0x2+_0xb77bd[0x1]**0x2+_0xb77bd[0x2]**0x2);return _0xb77bd=_0xb77bd[_0x140689(0x22e)](_0x254b19=>_0x254b19/_0x4233bf),_0xb77bd;};for(let _0x569463=0x0;_0x569463<this[_0x2c483(0x1c6)];++_0x569463){if(this[_0x2c483(0x301)][_0x569463]>0x0){this[_0x2c483(0x298)][_0x569463]=_0x487d25(this['_vertices'][this[_0x2c483(0x21d)][_0x569463][0x0]],this['_vertices'][this['_triangles'][_0x569463][0x1]],this['_vertices'][this[_0x2c483(0x21d)][_0x569463][0x2]]);for(let _0x4976d7=0x0;_0x4976d7<0x3;++_0x4976d7){for(let _0x486cc1=0x0;_0x486cc1<0x3;++_0x486cc1){this[_0x2c483(0x2df)][this[_0x2c483(0x21d)][_0x569463][_0x4976d7]][_0x486cc1]+=this[_0x2c483(0x298)][_0x569463][_0x486cc1]*this[_0x2c483(0x301)][_0x569463]/0x3;}}}else this[_0x2c483(0x298)][_0x569463]=new Array(0x3);}}[_0x2bad72(0x1fe)](){const _0xfe78b3=_0x2bad72;this[_0xfe78b3(0x1a7)][_0xfe78b3(0x2fb)](_0xfe78b3(0x1f8),_0xfe78b3(0x227),_0xfe78b3(0x1cb));for(let _0x33b4d1=0x0;_0x33b4d1<this[_0xfe78b3(0x2ab)];++_0x33b4d1){let _0x447677=Math['sqrt'](this[_0xfe78b3(0x2df)][_0x33b4d1][0x0]**0x2+this[_0xfe78b3(0x2df)][_0x33b4d1][0x1]**0x2+this[_0xfe78b3(0x2df)][_0x33b4d1][0x2]**0x2);this[_0xfe78b3(0x2df)][_0x33b4d1]=this['_normal'][_0x33b4d1]['map'](_0x19cca0=>_0x19cca0/_0x447677),this[_0xfe78b3(0x257)][_0x33b4d1]['push'](this['_normal'][_0x33b4d1][0x0],this[_0xfe78b3(0x2df)][_0x33b4d1][0x1],this['_normal'][_0x33b4d1][0x2]);}}['computeLaplacianCoordinates'](){const _0x4e4089=_0x2bad72;this[_0x4e4089(0x1c1)]=Array[_0x4e4089(0x1be)]({'length':this[_0x4e4089(0x2ab)]},_0x538d45=>new Map()),this['_faces']=Array[_0x4e4089(0x1be)]({'length':this[_0x4e4089(0x2ab)]},_0x19cbaf=>new Set());for(let _0x2733df=0x0;_0x2733df<this[_0x4e4089(0x1c6)];++_0x2733df){for(let _0x4c6e36=0x0;_0x4c6e36<0x3;++_0x4c6e36){let _0x2a7223=this[_0x4e4089(0x21d)][_0x2733df][_0x4c6e36],_0x14256f=this['_triangles'][_0x2733df][(_0x4c6e36+0x1)%0x3];!this[_0x4e4089(0x1c1)][_0x2a7223][_0x4e4089(0x2bf)](_0x14256f)?this[_0x4e4089(0x1c1)][_0x2a7223][_0x4e4089(0x318)](_0x14256f,this[_0x4e4089(0x301)][_0x2733df]):this[_0x4e4089(0x1c1)][_0x2a7223][_0x14256f]+=this[_0x4e4089(0x301)][_0x2733df],this[_0x4e4089(0x326)][_0x2a7223][_0x4e4089(0x2e7)](_0x2733df);}}this[_0x4e4089(0x2ce)]=Array[_0x4e4089(0x1be)]({'length':this[_0x4e4089(0x2ab)]},_0x5bbf93=>new Array(0x3)[_0x4e4089(0x1e5)](0x0)),this[_0x4e4089(0x1d1)]=Array[_0x4e4089(0x1be)]({'length':this['_numV']},_0x3fc273=>new Array(0x3)[_0x4e4089(0x1e5)](0x0)),this['_LArea']=Array[_0x4e4089(0x1be)]({'length':this[_0x4e4089(0x2ab)]},_0x48d7d5=>new Array(0x3)['fill'](0x0));for(let _0x15ee8d=0x0;_0x15ee8d<this['_numV'];++_0x15ee8d){var _0x213ddf=0x0,_0x2e8197=0x0,_0x34a4af=0x0;let _0x116fc8=this[_0x4e4089(0x257)][_0x15ee8d];this[_0x4e4089(0x1c1)][_0x15ee8d][_0x4e4089(0x1d2)]((_0xffef08,_0x4a8ee9)=>{const _0x20782d=_0x4e4089;let _0x3cfd50=this[_0x20782d(0x257)][_0x4a8ee9],_0x5118d8=0x1/Math[_0x20782d(0x226)]((_0x116fc8[0x0]-_0x3cfd50[0x0])**0x2+(_0x116fc8[0x1]-_0x3cfd50[0x1])**0x2+(_0x116fc8[0x2]-_0x3cfd50[0x2])**0x2);for(let _0x4c0a85=0x0;_0x4c0a85<0x3;++_0x4c0a85){this[_0x20782d(0x2ce)][_0x15ee8d][_0x4c0a85]+=_0x3cfd50[_0x4c0a85],this['_LEdge'][_0x15ee8d][_0x4c0a85]+=_0x3cfd50[_0x4c0a85]*_0x5118d8,this[_0x20782d(0x250)][_0x15ee8d][_0x4c0a85]+=_0x3cfd50[_0x4c0a85]*_0xffef08;}_0x213ddf+=0x1,_0x2e8197+=_0x5118d8,_0x34a4af+=_0xffef08;});for(let _0x177a74=0x0;_0x177a74<0x3;++_0x177a74){this[_0x4e4089(0x2ce)][_0x15ee8d][_0x177a74]=_0x116fc8[_0x177a74]-this[_0x4e4089(0x2ce)][_0x15ee8d][_0x177a74]/_0x213ddf,this[_0x4e4089(0x1d1)][_0x15ee8d][_0x177a74]=_0x116fc8[_0x177a74]-this[_0x4e4089(0x1d1)][_0x15ee8d][_0x177a74]/_0x2e8197,this[_0x4e4089(0x250)][_0x15ee8d][_0x177a74]=_0x116fc8[_0x177a74]-this[_0x4e4089(0x250)][_0x15ee8d][_0x177a74]/_0x34a4af;}}}async[_0x2bad72(0x270)](){const _0x3e4296=_0x2bad72;let [_0x35c99e,_0xd599a9,_0x91cc52]=await PlyIO[_0x3e4296(0x286)](this[_0x3e4296(0x309)]);this[_0x3e4296(0x2ab)]=_0x35c99e[_0x3e4296(0x213)],this[_0x3e4296(0x1c6)]=_0xd599a9[_0x3e4296(0x213)],this[_0x3e4296(0x1a7)]=_0x91cc52,this[_0x3e4296(0x257)]=_0x35c99e,this[_0x3e4296(0x21d)]=_0xd599a9,this[_0x3e4296(0x2fa)](),this[_0x3e4296(0x1a7)][_0x3e4296(0x213)]==0x3&&(this[_0x3e4296(0x1dc)](),this[_0x3e4296(0x1fe)]()),this['computeLaplacianCoordinates']();}}class RayTracingTriangleMeshObject extends RayTracingObject{constructor(_0x125471,_0x5c1274,_0x1246dc,_0x39ba57){const _0x191924=_0x2bad72;super(_0x125471,_0x5c1274),this[_0x191924(0x302)]=new TriangleMesh(_0x1246dc),this['_camera']=_0x39ba57;}async[_0x2bad72(0x29c)](){const _0x595df4=_0x2bad72;await this[_0x595df4(0x302)]['init'](),this['_numV']=this[_0x595df4(0x302)][_0x595df4(0x2ab)],this['_numT']=this[_0x595df4(0x302)][_0x595df4(0x1c6)],this[_0x595df4(0x1a7)]=this[_0x595df4(0x302)][_0x595df4(0x1a7)],this['_vertices']=this[_0x595df4(0x302)]['_vertices']['flat'](),this[_0x595df4(0x21d)]=this['_mesh'][_0x595df4(0x21d)][_0x595df4(0x1e8)](),this[_0x595df4(0x21c)]=this[_0x595df4(0x22d)][_0x595df4(0x1c4)]({'label':'Vertices\x20Normals\x20and\x20More','size':this['_vertices']['length']*Float32Array[_0x595df4(0x274)],'usage':GPUBufferUsage[_0x595df4(0x30f)]|GPUBufferUsage[_0x595df4(0x216)]|GPUBufferUsage[_0x595df4(0x30b)],'mappedAtCreation':!![]}),new Float32Array(this[_0x595df4(0x21c)]['getMappedRange']())[_0x595df4(0x318)](this['_vertices']),this[_0x595df4(0x21c)][_0x595df4(0x1b3)](),this['_vertexBufferLayout']={'arrayStride':this[_0x595df4(0x1a7)]['length']*Float32Array[_0x595df4(0x274)],'attributes':[{'format':_0x595df4(0x249),'offset':0x0,'shaderLocation':0x0},{'format':'float32x3','offset':0x3*Float32Array[_0x595df4(0x274)],'shaderLocation':0x1}]},this['_indexBuffer']=this[_0x595df4(0x22d)][_0x595df4(0x1c4)]({'label':'Indices','size':this[_0x595df4(0x21d)]['length']*Uint32Array[_0x595df4(0x274)],'usage':GPUBufferUsage[_0x595df4(0x1bb)]|GPUBufferUsage[_0x595df4(0x216)]|GPUBufferUsage[_0x595df4(0x30b)],'mappedAtCreation':!![]}),new Uint32Array(this[_0x595df4(0x324)][_0x595df4(0x2cc)]())[_0x595df4(0x318)](this[_0x595df4(0x21d)]),this[_0x595df4(0x324)]['unmap'](),this[_0x595df4(0x296)]=this[_0x595df4(0x22d)][_0x595df4(0x1c4)]({'label':_0x595df4(0x1b7)+this[_0x595df4(0x313)](),'size':this[_0x595df4(0x1d4)]['_pose'][_0x595df4(0x2cd)]+this[_0x595df4(0x1d4)]['_focal'][_0x595df4(0x2cd)]+this[_0x595df4(0x1d4)]['_resolutions']['byteLength'],'usage':GPUBufferUsage[_0x595df4(0x234)]|GPUBufferUsage[_0x595df4(0x30b)]}),this[_0x595df4(0x22d)][_0x595df4(0x2ba)][_0x595df4(0x1e0)](this[_0x595df4(0x296)],0x0,this['_camera'][_0x595df4(0x278)]),this[_0x595df4(0x22d)]['queue']['writeBuffer'](this[_0x595df4(0x296)],this['_camera']['_pose'][_0x595df4(0x2cd)],this[_0x595df4(0x1d4)][_0x595df4(0x214)]),this[_0x595df4(0x22d)][_0x595df4(0x2ba)][_0x595df4(0x1e0)](this['_cameraBuffer'],this[_0x595df4(0x1d4)][_0x595df4(0x278)][_0x595df4(0x2cd)]+this['_camera'][_0x595df4(0x214)][_0x595df4(0x2cd)],this[_0x595df4(0x1d4)][_0x595df4(0x2b5)]);}[_0x2bad72(0x1ce)](){const _0x5c8761=_0x2bad72;this[_0x5c8761(0x1d4)][_0x5c8761(0x1f7)](this[_0x5c8761(0x325)],this[_0x5c8761(0x2e6)]),this[_0x5c8761(0x22d)][_0x5c8761(0x2ba)][_0x5c8761(0x1e0)](this[_0x5c8761(0x296)],this[_0x5c8761(0x1d4)][_0x5c8761(0x278)][_0x5c8761(0x2cd)]+this[_0x5c8761(0x1d4)][_0x5c8761(0x214)][_0x5c8761(0x2cd)],this['_camera'][_0x5c8761(0x2b5)]);}['updateCameraPose'](){const _0x47af5c=_0x2bad72;this[_0x47af5c(0x22d)]['queue'][_0x47af5c(0x1e0)](this[_0x47af5c(0x296)],0x0,this[_0x47af5c(0x1d4)][_0x47af5c(0x278)]);}[_0x2bad72(0x2a7)](){const _0x5e047a=_0x2bad72;this[_0x5e047a(0x22d)][_0x5e047a(0x2ba)][_0x5e047a(0x1e0)](this[_0x5e047a(0x296)],this[_0x5e047a(0x1d4)][_0x5e047a(0x278)][_0x5e047a(0x2cd)],this[_0x5e047a(0x1d4)]['_focal']);}async[_0x2bad72(0x2e4)](){const _0xa4cf7d=_0x2bad72;let _0x1e555d=await this['loadShader'](_0xa4cf7d(0x1d6));this['_meshShaderModule']=this[_0xa4cf7d(0x22d)][_0xa4cf7d(0x217)]({'label':'Ray\x20Trace\x20Mesh\x20Shader','code':_0x1e555d}),this['_bindGroupLayout']=this[_0xa4cf7d(0x22d)][_0xa4cf7d(0x316)]({'label':_0xa4cf7d(0x2ef)+this[_0xa4cf7d(0x313)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0xa4cf7d(0x22a)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0xa4cf7d(0x22a)],'buffer':{'type':_0xa4cf7d(0x284)}},{'binding':0x2,'visibility':GPUShaderStage[_0xa4cf7d(0x22a)],'buffer':{'type':_0xa4cf7d(0x284)}},{'binding':0x3,'visibility':GPUShaderStage[_0xa4cf7d(0x22a)],'storageTexture':{'format':this[_0xa4cf7d(0x238)]}}]}),this[_0xa4cf7d(0x209)]=this[_0xa4cf7d(0x22d)][_0xa4cf7d(0x288)]({'label':'Ray\x20Trace\x20Mesh\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0xa4cf7d(0x299)]]});}async['createRenderPipeline'](){}[_0x2bad72(0x231)](_0x282c2d){}[_0x2bad72(0x21f)](_0x1d36ae){const _0x528623=_0x2bad72;this[_0x528623(0x21b)]=this['_device'][_0x528623(0x21f)]({'label':_0x528623(0x282),'layout':this[_0x528623(0x211)][_0x528623(0x31d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x528623(0x296)]}},{'binding':0x1,'resource':{'buffer':this[_0x528623(0x21c)]}},{'binding':0x2,'resource':{'buffer':this[_0x528623(0x324)]}},{'binding':0x3,'resource':_0x1d36ae[_0x528623(0x2f0)]()}]}),this[_0x528623(0x265)]=Math[_0x528623(0x297)](_0x1d36ae[_0x528623(0x287)]),this[_0x528623(0x2e2)]=Math[_0x528623(0x297)](_0x1d36ae[_0x528623(0x272)]);}async[_0x2bad72(0x261)](){const _0xbd80c4=_0x2bad72;this[_0xbd80c4(0x211)]=this[_0xbd80c4(0x22d)][_0xbd80c4(0x261)]({'label':_0xbd80c4(0x205)+this[_0xbd80c4(0x313)](),'layout':this[_0xbd80c4(0x209)],'compute':{'module':this[_0xbd80c4(0x1c8)],'entryPoint':_0xbd80c4(0x22c)}}),this[_0xbd80c4(0x253)]=this[_0xbd80c4(0x22d)][_0xbd80c4(0x261)]({'label':'Ray\x20Trace\x20Mesh\x20Projective\x20Pipeline\x20'+this[_0xbd80c4(0x313)](),'layout':this[_0xbd80c4(0x209)],'compute':{'module':this['_meshShaderModule'],'entryPoint':_0xbd80c4(0x27e)}});}[_0x2bad72(0x314)](_0x597edf){const _0x56f01c=_0x2bad72;this['_camera']?.[_0x56f01c(0x275)]?_0x597edf['setPipeline'](this[_0x56f01c(0x253)]):_0x597edf[_0x56f01c(0x26d)](this[_0x56f01c(0x211)]),_0x597edf[_0x56f01c(0x2f4)](0x0,this[_0x56f01c(0x21b)]),_0x597edf['dispatchWorkgroups'](Math[_0x56f01c(0x297)](this[_0x56f01c(0x265)]/0x10),Math[_0x56f01c(0x297)](this[_0x56f01c(0x2e2)]/0x10));}}function _0x2352(_0x8e9d6a,_0x178d38){const _0x1a4c1f=_0x1a4c();return _0x2352=function(_0x23528f,_0x23be8e){_0x23528f=_0x23528f-0x1a6;let _0x462d9d=_0x1a4c1f[_0x23528f];return _0x462d9d;},_0x2352(_0x8e9d6a,_0x178d38);}class RayTracingTriangleMeshAABBObject extends RayTracingObject{constructor(_0x463819,_0x2386c4,_0x1aa34d,_0x3ec15c){const _0x3f6d1f=_0x2bad72;super(_0x463819,_0x2386c4),this[_0x3f6d1f(0x302)]=new TriangleMesh(_0x1aa34d),this[_0x3f6d1f(0x1d4)]=_0x3ec15c;}async['createGeometry'](){const _0x1d403c=_0x2bad72;await this[_0x1d403c(0x302)]['init'](),this[_0x1d403c(0x2ab)]=this[_0x1d403c(0x302)][_0x1d403c(0x2ab)],this[_0x1d403c(0x1c6)]=this[_0x1d403c(0x302)][_0x1d403c(0x1c6)],this[_0x1d403c(0x1a7)]=this[_0x1d403c(0x302)][_0x1d403c(0x1a7)],this[_0x1d403c(0x257)]=this[_0x1d403c(0x302)][_0x1d403c(0x257)]['flat'](),this[_0x1d403c(0x21d)]=this[_0x1d403c(0x302)][_0x1d403c(0x21d)][_0x1d403c(0x1e8)](),this[_0x1d403c(0x21c)]=this[_0x1d403c(0x22d)][_0x1d403c(0x1c4)]({'label':_0x1d403c(0x308),'size':this[_0x1d403c(0x257)][_0x1d403c(0x213)]*Float32Array[_0x1d403c(0x274)],'usage':GPUBufferUsage[_0x1d403c(0x30f)]|GPUBufferUsage[_0x1d403c(0x216)]|GPUBufferUsage['COPY_DST'],'mappedAtCreation':!![]}),new Float32Array(this['_vertexBuffer']['getMappedRange']())[_0x1d403c(0x318)](this[_0x1d403c(0x257)]),this[_0x1d403c(0x21c)][_0x1d403c(0x1b3)](),this[_0x1d403c(0x23b)]={'arrayStride':this[_0x1d403c(0x1a7)][_0x1d403c(0x213)]*Float32Array['BYTES_PER_ELEMENT'],'attributes':[{'format':'float32x3','offset':0x0,'shaderLocation':0x0},{'format':_0x1d403c(0x249),'offset':0x3*Float32Array[_0x1d403c(0x274)],'shaderLocation':0x1}]},this['_indexBuffer']=this[_0x1d403c(0x22d)][_0x1d403c(0x1c4)]({'label':_0x1d403c(0x241),'size':this[_0x1d403c(0x21d)][_0x1d403c(0x213)]*Uint32Array[_0x1d403c(0x274)],'usage':GPUBufferUsage[_0x1d403c(0x1bb)]|GPUBufferUsage[_0x1d403c(0x216)]|GPUBufferUsage[_0x1d403c(0x30b)],'mappedAtCreation':!![]}),new Uint32Array(this[_0x1d403c(0x324)][_0x1d403c(0x2cc)]())[_0x1d403c(0x318)](this[_0x1d403c(0x21d)]),this['_indexBuffer'][_0x1d403c(0x1b3)](),this[_0x1d403c(0x296)]=this[_0x1d403c(0x22d)][_0x1d403c(0x1c4)]({'label':_0x1d403c(0x1b7)+this[_0x1d403c(0x313)](),'size':this[_0x1d403c(0x1d4)][_0x1d403c(0x278)]['byteLength']+this[_0x1d403c(0x1d4)][_0x1d403c(0x214)][_0x1d403c(0x2cd)]+this['_camera'][_0x1d403c(0x2b5)]['byteLength'],'usage':GPUBufferUsage[_0x1d403c(0x234)]|GPUBufferUsage['COPY_DST']}),this['_device'][_0x1d403c(0x2ba)]['writeBuffer'](this[_0x1d403c(0x296)],0x0,this[_0x1d403c(0x1d4)][_0x1d403c(0x278)]),this[_0x1d403c(0x22d)][_0x1d403c(0x2ba)][_0x1d403c(0x1e0)](this[_0x1d403c(0x296)],this[_0x1d403c(0x1d4)][_0x1d403c(0x278)]['byteLength'],this[_0x1d403c(0x1d4)][_0x1d403c(0x214)]),this[_0x1d403c(0x22d)]['queue'][_0x1d403c(0x1e0)](this['_cameraBuffer'],this[_0x1d403c(0x1d4)][_0x1d403c(0x278)][_0x1d403c(0x2cd)]+this[_0x1d403c(0x1d4)][_0x1d403c(0x214)]['byteLength'],this[_0x1d403c(0x1d4)][_0x1d403c(0x2b5)]),this['_minmax']=new Float32Array([Number[_0x1d403c(0x2c0)],Number[_0x1d403c(0x2c0)],Number[_0x1d403c(0x2c0)],0x0,-Number[_0x1d403c(0x2c0)],-Number[_0x1d403c(0x2c0)],-Number[_0x1d403c(0x2c0)],0x0]);for(let _0x5b0745=0x0;_0x5b0745<this['_numV'];++_0x5b0745){let _0x457441=this[_0x1d403c(0x302)][_0x1d403c(0x257)][_0x5b0745];this[_0x1d403c(0x25e)][0x0]=Math[_0x1d403c(0x1f5)](this[_0x1d403c(0x25e)][0x0],_0x457441[0x0]),this[_0x1d403c(0x25e)][0x1]=Math[_0x1d403c(0x1f5)](this[_0x1d403c(0x25e)][0x1],_0x457441[0x1]),this[_0x1d403c(0x25e)][0x2]=Math['min'](this[_0x1d403c(0x25e)][0x2],_0x457441[0x2]),this['_minmax'][0x4]=Math[_0x1d403c(0x2c4)](this[_0x1d403c(0x25e)][0x4],_0x457441[0x0]),this[_0x1d403c(0x25e)][0x5]=Math[_0x1d403c(0x2c4)](this[_0x1d403c(0x25e)][0x5],_0x457441[0x1]),this[_0x1d403c(0x25e)][0x6]=Math[_0x1d403c(0x2c4)](this['_minmax'][0x6],_0x457441[0x2]);}this[_0x1d403c(0x1d9)]=this['_device']['createBuffer']({'label':_0x1d403c(0x2f7)+this[_0x1d403c(0x313)](),'size':this[_0x1d403c(0x25e)][_0x1d403c(0x2cd)],'usage':GPUBufferUsage[_0x1d403c(0x234)]|GPUBufferUsage['COPY_DST']}),this[_0x1d403c(0x22d)]['queue'][_0x1d403c(0x1e0)](this[_0x1d403c(0x1d9)],0x0,this['_minmax']);}['updateGeometry'](){const _0x52380d=_0x2bad72;this['_camera'][_0x52380d(0x1f7)](this[_0x52380d(0x325)],this[_0x52380d(0x2e6)]),this[_0x52380d(0x22d)][_0x52380d(0x2ba)][_0x52380d(0x1e0)](this['_cameraBuffer'],this[_0x52380d(0x1d4)][_0x52380d(0x278)]['byteLength']+this[_0x52380d(0x1d4)][_0x52380d(0x214)][_0x52380d(0x2cd)],this['_camera']['_resolutions']);}[_0x2bad72(0x1ef)](){const _0x40b67e=_0x2bad72;this[_0x40b67e(0x22d)][_0x40b67e(0x2ba)][_0x40b67e(0x1e0)](this[_0x40b67e(0x296)],0x0,this[_0x40b67e(0x1d4)][_0x40b67e(0x278)]);}['updateCameraFocal'](){const _0x125a1e=_0x2bad72;this[_0x125a1e(0x22d)]['queue'][_0x125a1e(0x1e0)](this['_cameraBuffer'],this[_0x125a1e(0x1d4)][_0x125a1e(0x278)][_0x125a1e(0x2cd)],this[_0x125a1e(0x1d4)][_0x125a1e(0x214)]);}async[_0x2bad72(0x2e4)](){const _0x76921a=_0x2bad72;let _0x36ba1c=await this[_0x76921a(0x2fd)]('/shaders/optimized_tracemeshaabb.wgsl');this['_meshShaderModule']=this[_0x76921a(0x22d)][_0x76921a(0x217)]({'label':'Ray\x20Trace\x20Mesh\x20Shader','code':_0x36ba1c}),this[_0x76921a(0x299)]=this[_0x76921a(0x22d)]['createBindGroupLayout']({'label':_0x76921a(0x2ef)+this[_0x76921a(0x313)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x76921a(0x284)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x76921a(0x284)}},{'binding':0x3,'visibility':GPUShaderStage[_0x76921a(0x22a)],'buffer':{}},{'binding':0x4,'visibility':GPUShaderStage[_0x76921a(0x22a)],'storageTexture':{'format':this[_0x76921a(0x238)]}}]}),this[_0x76921a(0x209)]=this[_0x76921a(0x22d)][_0x76921a(0x288)]({'label':'Ray\x20Trace\x20Mesh\x20Pipeline\x20Layout','bindGroupLayouts':[this['_bindGroupLayout']]});}async[_0x2bad72(0x24e)](){}['render'](_0x1dee42){}[_0x2bad72(0x21f)](_0x550437){const _0xf77ec6=_0x2bad72;this['_bindGroup']=this['_device'][_0xf77ec6(0x21f)]({'label':_0xf77ec6(0x282),'layout':this[_0xf77ec6(0x211)][_0xf77ec6(0x31d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0xf77ec6(0x296)]}},{'binding':0x1,'resource':{'buffer':this[_0xf77ec6(0x21c)]}},{'binding':0x2,'resource':{'buffer':this[_0xf77ec6(0x324)]}},{'binding':0x3,'resource':{'buffer':this[_0xf77ec6(0x1d9)]}},{'binding':0x4,'resource':_0x550437['createView']()}]}),this[_0xf77ec6(0x265)]=Math[_0xf77ec6(0x297)](_0x550437[_0xf77ec6(0x287)]),this['_wgHeight']=Math[_0xf77ec6(0x297)](_0x550437[_0xf77ec6(0x272)]);}async['createComputePipeline'](){const _0x2b059a=_0x2bad72;this[_0x2b059a(0x211)]=this['_device']['createComputePipeline']({'label':'Ray\x20Trace\x20Mesh\x20Orthogonal\x20Pipeline\x20'+this[_0x2b059a(0x313)](),'layout':this[_0x2b059a(0x209)],'compute':{'module':this['_meshShaderModule'],'entryPoint':'computeOrthogonalMain'}}),this[_0x2b059a(0x253)]=this[_0x2b059a(0x22d)]['createComputePipeline']({'label':'Ray\x20Trace\x20Mesh\x20Projective\x20Pipeline\x20'+this[_0x2b059a(0x313)](),'layout':this[_0x2b059a(0x209)],'compute':{'module':this['_meshShaderModule'],'entryPoint':'computeProjectiveMain'}});}['compute'](_0x714b91){const _0x379eef=_0x2bad72;this['_camera']?.['_isProjective']?_0x714b91[_0x379eef(0x26d)](this[_0x379eef(0x253)]):_0x714b91['setPipeline'](this[_0x379eef(0x211)]),_0x714b91[_0x379eef(0x2f4)](0x0,this[_0x379eef(0x21b)]),_0x714b91['dispatchWorkgroups'](Math['ceil'](this[_0x379eef(0x265)]/0x10),Math['ceil'](this[_0x379eef(0x2e2)]/0x10));}}class ThreeDGrid{constructor(_0x182763,_0x18a4de=0x80,_0x399c85=0x20){const _0x315573=_0x2bad72;this[_0x315573(0x302)]=_0x182763,this[_0x315573(0x1eb)]=_0x18a4de,this[_0x315573(0x247)]=_0x399c85;if(Math[_0x315573(0x2c3)](this[_0x315573(0x1eb)])!=this['_grid_size']||this[_0x315573(0x1eb)]<0x1)throw new Error(_0x315573(0x279));}[_0x2bad72(0x292)](){const _0x43085c=_0x2bad72;this['_cells']=Array[_0x43085c(0x1be)]({'length':this[_0x43085c(0x1eb)]},()=>Array[_0x43085c(0x1be)]({'length':this['_grid_size']},()=>Array[_0x43085c(0x1be)]({'length':this[_0x43085c(0x1eb)]},()=>[[],new Set()]))),this[_0x43085c(0x2a3)]=(this['_boundingBox'][0x3]-this[_0x43085c(0x1db)][0x0])/this[_0x43085c(0x1eb)],this[_0x43085c(0x31a)]=(this[_0x43085c(0x1db)][0x4]-this[_0x43085c(0x1db)][0x1])/this['_grid_size'],this[_0x43085c(0x239)]=(this[_0x43085c(0x1db)][0x5]-this[_0x43085c(0x1db)][0x2])/this[_0x43085c(0x1eb)];for(let _0x352075=0x0;_0x352075<this['_grid_size'];++_0x352075){const _0x168e4d=this[_0x43085c(0x1db)][0x2]+_0x352075*this[_0x43085c(0x239)],_0x10ee49=_0x168e4d+this[_0x43085c(0x239)];for(let _0x27116e=0x0;_0x27116e<this[_0x43085c(0x1eb)];++_0x27116e){const _0x21cb74=this[_0x43085c(0x1db)][0x1]+_0x27116e*this[_0x43085c(0x31a)],_0x25ee48=_0x21cb74+this['_dy'];for(let _0x4f788e=0x0;_0x4f788e<this['_grid_size'];++_0x4f788e){const _0x325d9a=this[_0x43085c(0x1db)][0x0]+_0x4f788e*this[_0x43085c(0x2a3)],_0x222282=_0x325d9a+this[_0x43085c(0x2a3)];this[_0x43085c(0x1c5)][_0x352075][_0x27116e][_0x4f788e][0x0]=[_0x325d9a,_0x21cb74,_0x168e4d,_0x222282,_0x25ee48,_0x10ee49];}}}}[_0x2bad72(0x2d7)](_0x463469){const _0x42e449=_0x2bad72,[_0xbfd4e6,_0x2c0604,_0x5c5791,_0x48c22b,_0x4a600f,_0x1baa3e]=this['_boundingBox'];if(_0xbfd4e6<_0x463469[0x0]&&_0x463469[0x0]<_0x48c22b&&_0x2c0604<_0x463469[0x1]&&_0x463469[0x1]<_0x4a600f&&_0x5c5791<_0x463469[0x2]&&_0x463469[0x2]<_0x1baa3e)return[Math[_0x42e449(0x2c3)]((_0x463469[0x0]-_0xbfd4e6)/this[_0x42e449(0x2a3)]),Math[_0x42e449(0x2c3)]((_0x463469[0x1]-_0x2c0604)/this['_dy']),Math[_0x42e449(0x2c3)]((_0x463469[0x2]-_0x5c5791)/this[_0x42e449(0x239)])];else return[-0x1,-0x1,-0x1];}[_0x2bad72(0x1dd)](_0x4eaa50,_0x39e29c,_0x52c98a){const [_0x5cc4cb,_0x263261,_0x296c0c,_0x36818b,_0x3f1ca3,_0x2d07dc]=_0x4eaa50[0x0],_0x4d74ac=(_0x5cc4cb-_0x39e29c[0x0])/_0x52c98a[0x0],_0x4fc79d=(_0x36818b-_0x39e29c[0x0])/_0x52c98a[0x0],_0x2fff92=(_0x263261-_0x39e29c[0x1])/_0x52c98a[0x1],_0x328b3b=(_0x3f1ca3-_0x39e29c[0x1])/_0x52c98a[0x1],_0x53eeef=(_0x263261-_0x39e29c[0x2])/_0x52c98a[0x2],_0x528dd9=(_0x3f1ca3-_0x39e29c[0x2])/_0x52c98a[0x2];return[_0x4d74ac,_0x4fc79d,_0x2fff92,_0x328b3b,_0x53eeef,_0x528dd9];}['partitionTriangles'](){const _0x139deb=_0x2bad72;this[_0x139deb(0x21e)]=0x0;for(let _0x54cbc0=0x0;_0x54cbc0<this[_0x139deb(0x302)][_0x139deb(0x1c6)];++_0x54cbc0){let _0x210311=this[_0x139deb(0x302)][_0x139deb(0x21d)][_0x54cbc0],_0x3701eb=this['_mesh']['_vertices'][_0x210311[0x0]],_0x54deca=this[_0x139deb(0x302)][_0x139deb(0x257)][_0x210311[0x1]],_0x211bc6=this[_0x139deb(0x302)]['_vertices'][_0x210311[0x2]];const [_0x1d0a26,_0x4aa55b,_0xc52aea]=this[_0x139deb(0x2d7)]([Math['min'](_0x3701eb[0x0],_0x54deca[0x0],_0x211bc6[0x0]),Math[_0x139deb(0x1f5)](_0x3701eb[0x1],_0x54deca[0x1],_0x211bc6[0x1]),Math['min'](_0x3701eb[0x2],_0x54deca[0x2],_0x211bc6[0x2])]),[_0x135478,_0x3c32c5,_0x589bc0]=this[_0x139deb(0x2d7)]([Math[_0x139deb(0x2c4)](_0x3701eb[0x0],_0x54deca[0x0],_0x211bc6[0x0]),Math[_0x139deb(0x2c4)](_0x3701eb[0x1],_0x54deca[0x1],_0x211bc6[0x1]),Math[_0x139deb(0x2c4)](_0x3701eb[0x2],_0x54deca[0x2],_0x211bc6[0x2])]);for(let _0x4c4fb4=_0xc52aea;_0x4c4fb4<=_0x589bc0;++_0x4c4fb4){for(let _0x3be131=_0x4aa55b;_0x3be131<=_0x3c32c5;++_0x3be131){for(let _0x2accb2=_0x1d0a26;_0x2accb2<=_0x135478;++_0x2accb2){const _0x3de227=this[_0x139deb(0x1c5)][_0x4c4fb4][_0x3be131][_0x2accb2],_0x2c731c=this[_0x139deb(0x302)][_0x139deb(0x298)][_0x54cbc0];_0x3de227[0x1][_0x139deb(0x2e7)](_0x54cbc0),this[_0x139deb(0x21e)]=Math[_0x139deb(0x2c4)](this['_maxNumTriangles'],_0x3de227[0x1][_0x139deb(0x2de)]);}}}}if(this[_0x139deb(0x21e)]>this[_0x139deb(0x247)])throw _0x139deb(0x1e6),this[_0x139deb(0x247)],_0x139deb(0x271),this[_0x139deb(0x21e)];}async['init'](){const _0x49b702=_0x2bad72;let _0x54bcd2=Number['MAX_VALUE'],_0x4b5492=Number[_0x49b702(0x2c0)],_0x3b43ef=Number['MAX_VALUE'],_0x14dac5=-Number[_0x49b702(0x2c0)],_0x311f9f=-Number[_0x49b702(0x2c0)],_0x19bac4=-Number[_0x49b702(0x2c0)];for(let _0x18e703=0x0;_0x18e703<this['_mesh']['_numV'];++_0x18e703){let _0x726b57=this[_0x49b702(0x302)]['_vertices'][_0x18e703];_0x54bcd2=Math[_0x49b702(0x1f5)](_0x54bcd2,_0x726b57[0x0]),_0x4b5492=Math[_0x49b702(0x1f5)](_0x4b5492,_0x726b57[0x1]),_0x3b43ef=Math[_0x49b702(0x1f5)](_0x3b43ef,_0x726b57[0x2]),_0x14dac5=Math['max'](_0x14dac5,_0x726b57[0x0]),_0x311f9f=Math[_0x49b702(0x2c4)](_0x311f9f,_0x726b57[0x1]),_0x19bac4=Math[_0x49b702(0x2c4)](_0x19bac4,_0x726b57[0x2]);}this[_0x49b702(0x2b2)]=Math[_0x49b702(0x1f5)]((_0x14dac5-_0x54bcd2)/this[_0x49b702(0x1eb)],(_0x311f9f-_0x4b5492)/this[_0x49b702(0x1eb)],(_0x19bac4-_0x3b43ef)/this[_0x49b702(0x1eb)])*0.0001,this['_boundingBox']=[_0x54bcd2-this[_0x49b702(0x2b2)],_0x4b5492-this[_0x49b702(0x2b2)],_0x3b43ef-this[_0x49b702(0x2b2)],_0x14dac5+this[_0x49b702(0x2b2)],_0x311f9f+this['EPSILON'],_0x19bac4+this[_0x49b702(0x2b2)]],this[_0x49b702(0x292)](),this[_0x49b702(0x290)]();}}class RayTracingTriangleMeshGridObject extends RayTracingObject{constructor(_0x25e3e4,_0x5604fd,_0x44d27e,_0x5cc820){const _0x897e2b=_0x2bad72;super(_0x25e3e4,_0x5604fd),this[_0x897e2b(0x302)]=new TriangleMesh(_0x44d27e),this[_0x897e2b(0x1cf)]=new ThreeDGrid(this[_0x897e2b(0x302)]),this[_0x897e2b(0x1d4)]=_0x5cc820;}async[_0x2bad72(0x29c)](){const _0x4f0391=_0x2bad72;await this[_0x4f0391(0x302)]['init'](),this['_numV']=this[_0x4f0391(0x302)][_0x4f0391(0x2ab)],this[_0x4f0391(0x1c6)]=this['_mesh'][_0x4f0391(0x1c6)],this['_vProp']=this[_0x4f0391(0x302)][_0x4f0391(0x1a7)],this[_0x4f0391(0x257)]=this['_mesh'][_0x4f0391(0x257)][_0x4f0391(0x1e8)](),this[_0x4f0391(0x21d)]=this[_0x4f0391(0x302)][_0x4f0391(0x21d)][_0x4f0391(0x1e8)](),this[_0x4f0391(0x21c)]=this['_device'][_0x4f0391(0x1c4)]({'label':_0x4f0391(0x308),'size':this[_0x4f0391(0x257)][_0x4f0391(0x213)]*Float32Array['BYTES_PER_ELEMENT'],'usage':GPUBufferUsage[_0x4f0391(0x30f)]|GPUBufferUsage[_0x4f0391(0x216)]|GPUBufferUsage[_0x4f0391(0x30b)],'mappedAtCreation':!![]}),new Float32Array(this[_0x4f0391(0x21c)][_0x4f0391(0x2cc)]())[_0x4f0391(0x318)](this[_0x4f0391(0x257)]),this[_0x4f0391(0x21c)][_0x4f0391(0x1b3)](),this[_0x4f0391(0x23b)]={'arrayStride':this[_0x4f0391(0x1a7)][_0x4f0391(0x213)]*Float32Array['BYTES_PER_ELEMENT'],'attributes':[{'format':_0x4f0391(0x249),'offset':0x0,'shaderLocation':0x0},{'format':_0x4f0391(0x249),'offset':0x3*Float32Array[_0x4f0391(0x274)],'shaderLocation':0x1}]},this['_indexBuffer']=this[_0x4f0391(0x22d)][_0x4f0391(0x1c4)]({'label':_0x4f0391(0x241),'size':this[_0x4f0391(0x21d)]['length']*Uint32Array[_0x4f0391(0x274)],'usage':GPUBufferUsage['INDEX']|GPUBufferUsage[_0x4f0391(0x216)]|GPUBufferUsage['COPY_DST'],'mappedAtCreation':!![]}),new Uint32Array(this[_0x4f0391(0x324)]['getMappedRange']())[_0x4f0391(0x318)](this[_0x4f0391(0x21d)]),this[_0x4f0391(0x324)][_0x4f0391(0x1b3)](),this[_0x4f0391(0x296)]=this['_device'][_0x4f0391(0x1c4)]({'label':_0x4f0391(0x1b7)+this[_0x4f0391(0x313)](),'size':this[_0x4f0391(0x1d4)][_0x4f0391(0x278)][_0x4f0391(0x2cd)]+this[_0x4f0391(0x1d4)][_0x4f0391(0x214)]['byteLength']+this[_0x4f0391(0x1d4)][_0x4f0391(0x2b5)][_0x4f0391(0x2cd)],'usage':GPUBufferUsage[_0x4f0391(0x234)]|GPUBufferUsage[_0x4f0391(0x30b)]}),this[_0x4f0391(0x22d)][_0x4f0391(0x2ba)][_0x4f0391(0x1e0)](this['_cameraBuffer'],0x0,this[_0x4f0391(0x1d4)][_0x4f0391(0x278)]),this[_0x4f0391(0x22d)]['queue'][_0x4f0391(0x1e0)](this[_0x4f0391(0x296)],this[_0x4f0391(0x1d4)][_0x4f0391(0x278)]['byteLength'],this[_0x4f0391(0x1d4)][_0x4f0391(0x214)]),this[_0x4f0391(0x22d)][_0x4f0391(0x2ba)][_0x4f0391(0x1e0)](this[_0x4f0391(0x296)],this[_0x4f0391(0x1d4)][_0x4f0391(0x278)][_0x4f0391(0x2cd)]+this[_0x4f0391(0x1d4)]['_focal'][_0x4f0391(0x2cd)],this['_camera'][_0x4f0391(0x2b5)]),this[_0x4f0391(0x25e)]=new Float32Array([Number['MAX_VALUE'],Number[_0x4f0391(0x2c0)],Number[_0x4f0391(0x2c0)],0x0,-Number[_0x4f0391(0x2c0)],-Number['MAX_VALUE'],-Number[_0x4f0391(0x2c0)],0x0]);for(let _0x53f25a=0x0;_0x53f25a<this[_0x4f0391(0x2ab)];++_0x53f25a){let _0xe74fd4=this[_0x4f0391(0x302)][_0x4f0391(0x257)][_0x53f25a];this[_0x4f0391(0x25e)][0x0]=Math['min'](this['_minmax'][0x0],_0xe74fd4[0x0]),this[_0x4f0391(0x25e)][0x1]=Math[_0x4f0391(0x1f5)](this['_minmax'][0x1],_0xe74fd4[0x1]),this[_0x4f0391(0x25e)][0x2]=Math[_0x4f0391(0x1f5)](this['_minmax'][0x2],_0xe74fd4[0x2]),this['_minmax'][0x4]=Math[_0x4f0391(0x2c4)](this[_0x4f0391(0x25e)][0x4],_0xe74fd4[0x0]),this['_minmax'][0x5]=Math['max'](this[_0x4f0391(0x25e)][0x5],_0xe74fd4[0x1]),this[_0x4f0391(0x25e)][0x6]=Math[_0x4f0391(0x2c4)](this['_minmax'][0x6],_0xe74fd4[0x2]);}await this['_grid'][_0x4f0391(0x270)](),this[_0x4f0391(0x2b7)]=new Float32Array(0xc+this['_grid'][_0x4f0391(0x1eb)]*this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)]*this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)]*this[_0x4f0391(0x1cf)][_0x4f0391(0x247)]),this['_griddata'][0x0]=this[_0x4f0391(0x1cf)]['_grid_size'],this[_0x4f0391(0x2b7)][0x1]=this['_grid'][_0x4f0391(0x1eb)],this[_0x4f0391(0x2b7)][0x2]=this['_grid'][_0x4f0391(0x1eb)],this['_griddata'][0x4]=this[_0x4f0391(0x1cf)][_0x4f0391(0x1db)][0x0],this['_griddata'][0x5]=this[_0x4f0391(0x1cf)][_0x4f0391(0x1db)][0x1],this['_griddata'][0x6]=this[_0x4f0391(0x1cf)]['_boundingBox'][0x2],this[_0x4f0391(0x2b7)][0x8]=this['_grid'][_0x4f0391(0x2a3)],this['_griddata'][0x9]=this[_0x4f0391(0x1cf)][_0x4f0391(0x31a)],this['_griddata'][0xa]=this[_0x4f0391(0x1cf)][_0x4f0391(0x239)],this[_0x4f0391(0x2b7)][0xb]=this[_0x4f0391(0x1cf)][_0x4f0391(0x247)];for(let _0xb4f118=0x0;_0xb4f118<this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)];++_0xb4f118){for(let _0x5ad447=0x0;_0x5ad447<this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)];++_0x5ad447){for(let _0x8224ec=0x0;_0x8224ec<this[_0x4f0391(0x1cf)]['_grid_size'];++_0x8224ec){let _0x37936a=_0xb4f118*(this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)]*this[_0x4f0391(0x1cf)][_0x4f0391(0x1eb)])+_0x5ad447*this[_0x4f0391(0x1cf)]['_grid_size']+_0x8224ec,_0x4702b7=this[_0x4f0391(0x1cf)][_0x4f0391(0x1c5)][_0xb4f118][_0x5ad447][_0x8224ec][0x1],_0x5c25a3=0x0;_0x4702b7[_0x4f0391(0x1d2)](_0x8f06f4=>{const _0x885803=_0x4f0391;this[_0x885803(0x2b7)][0xc+_0x37936a*this['_grid']['_max_tri']+_0x5c25a3]=_0x8f06f4,++_0x5c25a3;});while(_0x5c25a3<this[_0x4f0391(0x1cf)][_0x4f0391(0x247)]){this[_0x4f0391(0x2b7)][0xc+_0x37936a*this[_0x4f0391(0x1cf)]['_max_tri']+_0x5c25a3]=-0x1,++_0x5c25a3;}}}}this[_0x4f0391(0x1c9)]=this[_0x4f0391(0x22d)][_0x4f0391(0x1c4)]({'label':'Grid\x20'+this[_0x4f0391(0x313)](),'size':this[_0x4f0391(0x2b7)][_0x4f0391(0x2cd)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage['COPY_DST']}),this[_0x4f0391(0x22d)][_0x4f0391(0x2ba)]['writeBuffer'](this[_0x4f0391(0x1c9)],0x0,this[_0x4f0391(0x2b7)]);}[_0x2bad72(0x1ce)](){const _0x177ae8=_0x2bad72;this[_0x177ae8(0x1d4)][_0x177ae8(0x1f7)](this[_0x177ae8(0x325)],this[_0x177ae8(0x2e6)]),this[_0x177ae8(0x22d)][_0x177ae8(0x2ba)]['writeBuffer'](this['_cameraBuffer'],this['_camera'][_0x177ae8(0x278)][_0x177ae8(0x2cd)]+this[_0x177ae8(0x1d4)][_0x177ae8(0x214)]['byteLength'],this[_0x177ae8(0x1d4)][_0x177ae8(0x2b5)]);}['updateCameraPose'](){const _0x2ed82c=_0x2bad72;this[_0x2ed82c(0x22d)][_0x2ed82c(0x2ba)][_0x2ed82c(0x1e0)](this[_0x2ed82c(0x296)],0x0,this[_0x2ed82c(0x1d4)][_0x2ed82c(0x278)]);}[_0x2bad72(0x2a7)](){const _0x583993=_0x2bad72;this[_0x583993(0x22d)][_0x583993(0x2ba)]['writeBuffer'](this[_0x583993(0x296)],this['_camera']['_pose'][_0x583993(0x2cd)],this[_0x583993(0x1d4)][_0x583993(0x214)]);}async[_0x2bad72(0x2e4)](){const _0x98ccc4=_0x2bad72;let _0x37b0d8=await this[_0x98ccc4(0x2fd)](_0x98ccc4(0x1f2));this[_0x98ccc4(0x1c8)]=this['_device'][_0x98ccc4(0x217)]({'label':_0x98ccc4(0x323),'code':_0x37b0d8}),this[_0x98ccc4(0x299)]=this[_0x98ccc4(0x22d)][_0x98ccc4(0x316)]({'label':_0x98ccc4(0x2ef)+this['getName'](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x98ccc4(0x22a)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x98ccc4(0x284)}},{'binding':0x2,'visibility':GPUShaderStage[_0x98ccc4(0x22a)],'buffer':{'type':_0x98ccc4(0x284)}},{'binding':0x3,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':'read-only-storage'}},{'binding':0x4,'visibility':GPUShaderStage[_0x98ccc4(0x22a)],'storageTexture':{'format':this[_0x98ccc4(0x238)]}}]}),this[_0x98ccc4(0x209)]=this[_0x98ccc4(0x22d)][_0x98ccc4(0x288)]({'label':_0x98ccc4(0x31f),'bindGroupLayouts':[this[_0x98ccc4(0x299)]]});}async[_0x2bad72(0x24e)](){}[_0x2bad72(0x231)](_0x5506dc){}[_0x2bad72(0x21f)](_0xccd1b7){const _0x3024a7=_0x2bad72;this[_0x3024a7(0x21b)]=this[_0x3024a7(0x22d)][_0x3024a7(0x21f)]({'label':_0x3024a7(0x282),'layout':this['_computePipeline']['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_cameraBuffer']}},{'binding':0x1,'resource':{'buffer':this['_vertexBuffer']}},{'binding':0x2,'resource':{'buffer':this[_0x3024a7(0x324)]}},{'binding':0x3,'resource':{'buffer':this[_0x3024a7(0x1c9)]}},{'binding':0x4,'resource':_0xccd1b7[_0x3024a7(0x2f0)]()}]}),this['_wgWidth']=Math[_0x3024a7(0x297)](_0xccd1b7[_0x3024a7(0x287)]),this[_0x3024a7(0x2e2)]=Math['ceil'](_0xccd1b7[_0x3024a7(0x272)]);}async[_0x2bad72(0x261)](){const _0x2e8ef9=_0x2bad72;this[_0x2e8ef9(0x211)]=this[_0x2e8ef9(0x22d)][_0x2e8ef9(0x261)]({'label':_0x2e8ef9(0x205)+this[_0x2e8ef9(0x313)](),'layout':this[_0x2e8ef9(0x209)],'compute':{'module':this[_0x2e8ef9(0x1c8)],'entryPoint':_0x2e8ef9(0x22c)}}),this[_0x2e8ef9(0x253)]=this[_0x2e8ef9(0x22d)][_0x2e8ef9(0x261)]({'label':_0x2e8ef9(0x2db)+this[_0x2e8ef9(0x313)](),'layout':this[_0x2e8ef9(0x209)],'compute':{'module':this[_0x2e8ef9(0x1c8)],'entryPoint':_0x2e8ef9(0x27e)}});}[_0x2bad72(0x314)](_0x1b3c2a){const _0x24b9ad=_0x2bad72;this['_camera']?.['_isProjective']?_0x1b3c2a[_0x24b9ad(0x26d)](this[_0x24b9ad(0x253)]):_0x1b3c2a[_0x24b9ad(0x26d)](this[_0x24b9ad(0x211)]),_0x1b3c2a[_0x24b9ad(0x2f4)](0x0,this['_bindGroup']),_0x1b3c2a[_0x24b9ad(0x29a)](Math[_0x24b9ad(0x297)](this[_0x24b9ad(0x265)]/0x10),Math[_0x24b9ad(0x297)](this[_0x24b9ad(0x2e2)]/0x10));}}class BVH{constructor(_0xaad0e9,_0x28ee31=0xd,_0x10a313=0x40){const _0x5edc1c=_0x2bad72;this['_mesh']=_0xaad0e9,this['_max_depth']=_0x28ee31,this[_0x5edc1c(0x247)]=_0x10a313;if(Math[_0x5edc1c(0x2c3)](this[_0x5edc1c(0x2c7)])!=this[_0x5edc1c(0x2c7)]||this[_0x5edc1c(0x2c7)]<0x1)throw new Error(_0x5edc1c(0x1f6));}[_0x2bad72(0x1e3)](_0x24eeaa){const _0x4a284e=_0x2bad72;let _0x56ad3a=Number['MAX_VALUE'],_0x16ee1d=Number[_0x4a284e(0x2c0)],_0xe1be86=Number[_0x4a284e(0x2c0)],_0x1ea488=-Number[_0x4a284e(0x2c0)],_0xdff1ea=-Number['MAX_VALUE'],_0x2c5ee1=-Number[_0x4a284e(0x2c0)];return _0x24eeaa[_0x4a284e(0x1d2)](_0xb650ac=>{const _0x56698f=_0x4a284e;let _0x89071d=this['_mesh'][_0x56698f(0x21d)][_0xb650ac];for(let _0x2b58cb=0x0;_0x2b58cb<0x3;++_0x2b58cb){let _0x14d13f=this[_0x56698f(0x302)][_0x56698f(0x257)][_0x89071d[_0x2b58cb]];_0x56ad3a=Math[_0x56698f(0x1f5)](_0x56ad3a,_0x14d13f[0x0]),_0x16ee1d=Math[_0x56698f(0x1f5)](_0x16ee1d,_0x14d13f[0x1]),_0xe1be86=Math[_0x56698f(0x1f5)](_0xe1be86,_0x14d13f[0x2]),_0x1ea488=Math[_0x56698f(0x2c4)](_0x1ea488,_0x14d13f[0x0]),_0xdff1ea=Math['max'](_0xdff1ea,_0x14d13f[0x1]),_0x2c5ee1=Math['max'](_0x2c5ee1,_0x14d13f[0x2]);}}),[_0x56ad3a,_0x16ee1d,_0xe1be86,_0x1ea488,_0xdff1ea,_0x2c5ee1];}[_0x2bad72(0x255)](){const _0x4a796f=_0x2bad72;this[_0x4a796f(0x2a2)]=Array[_0x4a796f(0x1be)]({'length':Math['pow'](0x2,this[_0x4a796f(0x2c7)])-0x1},()=>[[],new Set()]);for(let _0x5aa489=0x0;_0x5aa489<this[_0x4a796f(0x302)]['_numT'];++_0x5aa489){this['_nodes'][0x0][0x1]['add'](_0x5aa489);}this[_0x4a796f(0x1db)]=this[_0x4a796f(0x1e3)](this[_0x4a796f(0x2a2)][0x0][0x1]),this[_0x4a796f(0x2a2)][0x0][0x0]=this['_boundingBox'];}[_0x2bad72(0x1b1)](_0x44a954){return 0x2*_0x44a954+0x1;}[_0x2bad72(0x2e8)](_0x2e5209){return 0x2*_0x2e5209+0x2;}[_0x2bad72(0x1ba)](_0x50ee25){const [_0x3dcba8,_0x583d81,_0x1db1db,_0x580633,_0x3386b9,_0x50a309]=_0x50ee25;let _0x541f53=[_0x580633-_0x3dcba8,_0x3386b9-_0x583d81,_0x50a309-_0x1db1db];return 0x2*(_0x541f53[0x0]*_0x541f53[0x1]+_0x541f53[0x1]*_0x541f53[0x2]+_0x541f53[0x2]*_0x541f53[0x0]);}[_0x2bad72(0x1ec)](_0xa75503,_0x19a4fd,_0xbaf323){const _0x1d91e3=_0x2bad72;var _0xe60fd=new Set(),_0x320d35=new Set();return _0xa75503[_0x1d91e3(0x1d2)](_0xb0a81d=>{const _0x185fce=_0x1d91e3;let _0x55912b=this[_0x185fce(0x302)][_0x185fce(0x21d)][_0xb0a81d];for(let _0x5a97bd=0x0;_0x5a97bd<0x3;++_0x5a97bd){let _0x58b4a8=this[_0x185fce(0x302)]['_vertices'][_0x55912b[_0x5a97bd]];_0x58b4a8[_0xbaf323]<_0x19a4fd?_0xe60fd[_0x185fce(0x2e7)](_0xb0a81d):_0x320d35['add'](_0xb0a81d);}}),[_0xe60fd,_0x320d35];}[_0x2bad72(0x294)](_0x2a0bd5,_0x3f56d9){const _0x2285a3=_0x2bad72;let _0x157755=this[_0x2285a3(0x1ba)](_0x2a0bd5),_0x50b8e9=Infinity,_0x3dbda6=null,_0x25d8e0=null,_0x570cf7=null,_0x43a75f=null,_0x13d335=-0x1,_0x14de41=-0x1;for(let _0x348722=0x0;_0x348722<0x3;++_0x348722){let _0x5a042c=(_0x2a0bd5[_0x348722+0x3]-_0x2a0bd5[_0x348722])/0x14;for(let _0x3a2c03=_0x2a0bd5[_0x348722];_0x3a2c03<_0x2a0bd5[_0x348722+0x3];_0x3a2c03+=_0x5a042c){let [_0x521b5b,_0x64d120]=this[_0x2285a3(0x1ec)](_0x3f56d9,_0x3a2c03,_0x348722),_0x48dbe7=this['computeAABB'](_0x521b5b),_0x2975da=this[_0x2285a3(0x1e3)](_0x64d120),_0x14c555=(_0x521b5b[_0x2285a3(0x2de)]*this[_0x2285a3(0x1ba)](_0x48dbe7)+_0x64d120[_0x2285a3(0x2de)]*this[_0x2285a3(0x1ba)](_0x2975da))/_0x157755;_0x14c555<_0x50b8e9&&(_0x50b8e9=_0x14c555,_0x3dbda6=_0x521b5b,_0x570cf7=_0x48dbe7,_0x25d8e0=_0x64d120,_0x43a75f=_0x2975da,_0x13d335=_0x348722,_0x14de41=_0x3a2c03);}}return[_0x3dbda6,_0x570cf7,_0x25d8e0,_0x43a75f,_0x13d335,_0x14de41];}['subdivide'](_0x563c74){const _0x2f4f0c=_0x2bad72;let _0x399c42=this[_0x2f4f0c(0x2a2)][_0x563c74],_0x46bc34=this[_0x2f4f0c(0x1b1)](_0x563c74),_0x5cc47b=this[_0x2f4f0c(0x2e8)](_0x563c74);if(_0x5cc47b<this[_0x2f4f0c(0x2a2)][_0x2f4f0c(0x213)]&&_0x399c42[0x1][_0x2f4f0c(0x2de)]>this[_0x2f4f0c(0x247)]){const [_0x2c7745,_0x184ab6,_0x59e410,_0x126db9,_0x136787,_0x4850fd]=this['findBestSplitSAH'](_0x399c42[0x0],_0x399c42[0x1]);_0x2c7745&&_0x2c7745['size']<_0x399c42[0x1][_0x2f4f0c(0x2de)]&&_0x59e410&&_0x59e410[_0x2f4f0c(0x2de)]<_0x399c42[0x1]['size']?(this[_0x2f4f0c(0x2a2)][_0x563c74][0x0][_0x2f4f0c(0x2fb)](_0x136787,_0x4850fd),this[_0x2f4f0c(0x2a2)][_0x46bc34][0x0]=_0x184ab6,this[_0x2f4f0c(0x2a2)][_0x46bc34][0x1]=_0x2c7745,this[_0x2f4f0c(0x2a2)][_0x5cc47b][0x0]=_0x126db9,this[_0x2f4f0c(0x2a2)][_0x5cc47b][0x1]=_0x59e410,this['subdivide'](_0x46bc34),this[_0x2f4f0c(0x2a1)](_0x5cc47b)):this[_0x2f4f0c(0x21e)]=Math[_0x2f4f0c(0x2c4)](this[_0x2f4f0c(0x21e)],_0x399c42[0x1][_0x2f4f0c(0x2de)]);}else this['_maxNumTriangles']=Math['max'](this[_0x2f4f0c(0x21e)],_0x399c42[0x1][_0x2f4f0c(0x2de)]);}async[_0x2bad72(0x270)](){const _0x533078=_0x2bad72;this[_0x533078(0x255)](),this[_0x533078(0x21e)]=0x0,this['subdivide'](0x0),this[_0x533078(0x21e)]>this[_0x533078(0x247)]&&console['log']('Max\x20triangles\x20in\x20a\x20cell\x20exceeds\x20the\x20limit\x20(',this[_0x533078(0x247)],_0x533078(0x24a),this[_0x533078(0x21e)]);}}class RayTracingTriangleMeshBVHObject extends RayTracingObject{constructor(_0x3f073b,_0x337117,_0x1cf246,_0x36ea0a){const _0x5af580=_0x2bad72;super(_0x3f073b,_0x337117),this[_0x5af580(0x302)]=new TriangleMesh(_0x1cf246),this[_0x5af580(0x2a5)]=new BVH(this['_mesh']),this[_0x5af580(0x1d4)]=_0x36ea0a;}async[_0x2bad72(0x29c)](){const _0x26c012=_0x2bad72;await this[_0x26c012(0x302)]['init'](),this['_numV']=this['_mesh']['_numV'],this[_0x26c012(0x1c6)]=this['_mesh'][_0x26c012(0x1c6)],this[_0x26c012(0x1a7)]=this[_0x26c012(0x302)][_0x26c012(0x1a7)],this[_0x26c012(0x257)]=this[_0x26c012(0x302)][_0x26c012(0x257)][_0x26c012(0x1e8)](),this[_0x26c012(0x21d)]=this['_mesh'][_0x26c012(0x21d)][_0x26c012(0x1e8)](),this[_0x26c012(0x21c)]=this[_0x26c012(0x22d)][_0x26c012(0x1c4)]({'label':'Vertices\x20Normals\x20and\x20More','size':this[_0x26c012(0x257)][_0x26c012(0x213)]*Float32Array[_0x26c012(0x274)],'usage':GPUBufferUsage['VERTEX']|GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x26c012(0x30b)],'mappedAtCreation':!![]}),new Float32Array(this[_0x26c012(0x21c)][_0x26c012(0x2cc)]())[_0x26c012(0x318)](this[_0x26c012(0x257)]),this[_0x26c012(0x21c)][_0x26c012(0x1b3)](),this['_vertexBufferLayout']={'arrayStride':this[_0x26c012(0x1a7)][_0x26c012(0x213)]*Float32Array[_0x26c012(0x274)],'attributes':[{'format':_0x26c012(0x249),'offset':0x0,'shaderLocation':0x0},{'format':_0x26c012(0x249),'offset':0x3*Float32Array[_0x26c012(0x274)],'shaderLocation':0x1}]},this[_0x26c012(0x324)]=this[_0x26c012(0x22d)][_0x26c012(0x1c4)]({'label':_0x26c012(0x241),'size':this[_0x26c012(0x21d)]['length']*Uint32Array[_0x26c012(0x274)],'usage':GPUBufferUsage[_0x26c012(0x1bb)]|GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x26c012(0x30b)],'mappedAtCreation':!![]}),new Uint32Array(this['_indexBuffer'][_0x26c012(0x2cc)]())[_0x26c012(0x318)](this['_triangles']),this[_0x26c012(0x324)][_0x26c012(0x1b3)](),this[_0x26c012(0x296)]=this[_0x26c012(0x22d)]['createBuffer']({'label':'Camera\x20'+this[_0x26c012(0x313)](),'size':this['_camera'][_0x26c012(0x278)][_0x26c012(0x2cd)]+this['_camera']['_focal'][_0x26c012(0x2cd)]+this[_0x26c012(0x1d4)][_0x26c012(0x2b5)]['byteLength'],'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0x26c012(0x22d)][_0x26c012(0x2ba)]['writeBuffer'](this['_cameraBuffer'],0x0,this[_0x26c012(0x1d4)][_0x26c012(0x278)]),this[_0x26c012(0x22d)]['queue'][_0x26c012(0x1e0)](this[_0x26c012(0x296)],this[_0x26c012(0x1d4)]['_pose'][_0x26c012(0x2cd)],this['_camera'][_0x26c012(0x214)]),this['_device'][_0x26c012(0x2ba)]['writeBuffer'](this['_cameraBuffer'],this['_camera'][_0x26c012(0x278)][_0x26c012(0x2cd)]+this[_0x26c012(0x1d4)][_0x26c012(0x214)][_0x26c012(0x2cd)],this['_camera'][_0x26c012(0x2b5)]),this['_minmax']=new Float32Array([Number['MAX_VALUE'],Number['MAX_VALUE'],Number[_0x26c012(0x2c0)],0x0,-Number[_0x26c012(0x2c0)],-Number['MAX_VALUE'],-Number[_0x26c012(0x2c0)],0x0]);for(let _0xd94f08=0x0;_0xd94f08<this[_0x26c012(0x2ab)];++_0xd94f08){let _0x747264=this['_mesh'][_0x26c012(0x257)][_0xd94f08];this[_0x26c012(0x25e)][0x0]=Math[_0x26c012(0x1f5)](this[_0x26c012(0x25e)][0x0],_0x747264[0x0]),this[_0x26c012(0x25e)][0x1]=Math[_0x26c012(0x1f5)](this[_0x26c012(0x25e)][0x1],_0x747264[0x1]),this[_0x26c012(0x25e)][0x2]=Math[_0x26c012(0x1f5)](this[_0x26c012(0x25e)][0x2],_0x747264[0x2]),this[_0x26c012(0x25e)][0x4]=Math[_0x26c012(0x2c4)](this[_0x26c012(0x25e)][0x4],_0x747264[0x0]),this['_minmax'][0x5]=Math['max'](this[_0x26c012(0x25e)][0x5],_0x747264[0x1]),this[_0x26c012(0x25e)][0x6]=Math[_0x26c012(0x2c4)](this[_0x26c012(0x25e)][0x6],_0x747264[0x2]);}await this[_0x26c012(0x2a5)][_0x26c012(0x270)](),this['_bvhdata']=new Float32Array(0x4+this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x26c012(0x213)]*(0x8+this['_bvh'][_0x26c012(0x247)])),this[_0x26c012(0x20d)][0x0]=this['_bvh'][_0x26c012(0x247)],this[_0x26c012(0x20d)][0x1]=this[_0x26c012(0x2a5)][_0x26c012(0x2c7)];for(let _0x32e9a8=0x0;_0x32e9a8<this[_0x26c012(0x2a5)][_0x26c012(0x2a2)]['length'];++_0x32e9a8){let _0x46b1fe=0x4+(0x8+this['_bvh'][_0x26c012(0x247)])*_0x32e9a8;var _0x4dcaf5=0x0;this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0]['length']&&(_0x4dcaf5=0x8,this['_bvhdata'][_0x46b1fe+0x0]=this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][0x0],this[_0x26c012(0x20d)][_0x46b1fe+0x1]=this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][0x1],this[_0x26c012(0x20d)][_0x46b1fe+0x2]=this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][0x2],this[_0x26c012(0x20d)][_0x46b1fe+0x4]=this['_bvh']['_nodes'][_0x32e9a8][0x0][0x3],this[_0x26c012(0x20d)][_0x46b1fe+0x5]=this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][0x4],this[_0x26c012(0x20d)][_0x46b1fe+0x6]=this[_0x26c012(0x2a5)]['_nodes'][_0x32e9a8][0x0][0x5],this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][_0x26c012(0x213)]>0x6?(this[_0x26c012(0x20d)][_0x46b1fe+0x3]=this['_bvh']['_nodes'][_0x32e9a8][0x0][0x6],this[_0x26c012(0x20d)][_0x46b1fe+0x7]=this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x0][0x7]):(this[_0x26c012(0x20d)][_0x46b1fe+0x3]=-0x1,this[_0x26c012(0x20d)][_0x46b1fe+0x7]=-0x1,this[_0x26c012(0x2a5)][_0x26c012(0x2a2)][_0x32e9a8][0x1]['forEach'](_0x285056=>{this['_bvhdata'][_0x46b1fe+_0x4dcaf5]=_0x285056,++_0x4dcaf5;})));while(_0x4dcaf5<0x8+this[_0x26c012(0x2a5)]['_max_tri']){this[_0x26c012(0x20d)][_0x46b1fe+_0x4dcaf5]=-0x1,++_0x4dcaf5;}}this[_0x26c012(0x1e7)]=this[_0x26c012(0x22d)]['createBuffer']({'label':_0x26c012(0x30a)+this[_0x26c012(0x313)](),'size':this[_0x26c012(0x20d)]['byteLength'],'usage':GPUBufferUsage[_0x26c012(0x216)]|GPUBufferUsage[_0x26c012(0x30b)]}),this[_0x26c012(0x22d)][_0x26c012(0x2ba)]['writeBuffer'](this[_0x26c012(0x1e7)],0x0,this[_0x26c012(0x20d)]);}['updateGeometry'](){const _0x3cd0c3=_0x2bad72;this[_0x3cd0c3(0x1d4)][_0x3cd0c3(0x1f7)](this[_0x3cd0c3(0x325)],this[_0x3cd0c3(0x2e6)]),this[_0x3cd0c3(0x22d)][_0x3cd0c3(0x2ba)][_0x3cd0c3(0x1e0)](this['_cameraBuffer'],this[_0x3cd0c3(0x1d4)][_0x3cd0c3(0x278)]['byteLength']+this[_0x3cd0c3(0x1d4)]['_focal'][_0x3cd0c3(0x2cd)],this['_camera'][_0x3cd0c3(0x2b5)]);}[_0x2bad72(0x1ef)](){const _0x259391=_0x2bad72;this['_device'][_0x259391(0x2ba)][_0x259391(0x1e0)](this['_cameraBuffer'],0x0,this[_0x259391(0x1d4)][_0x259391(0x278)]);}[_0x2bad72(0x2a7)](){const _0x55d964=_0x2bad72;this['_device'][_0x55d964(0x2ba)]['writeBuffer'](this[_0x55d964(0x296)],this[_0x55d964(0x1d4)][_0x55d964(0x278)][_0x55d964(0x2cd)],this['_camera']['_focal']);}async[_0x2bad72(0x2e4)](){const _0x385070=_0x2bad72;let _0xffa459=await this[_0x385070(0x2fd)](_0x385070(0x212));this[_0x385070(0x1c8)]=this[_0x385070(0x22d)]['createShaderModule']({'label':_0x385070(0x323),'code':_0xffa459}),this['_bindGroupLayout']=this['_device'][_0x385070(0x316)]({'label':_0x385070(0x2ef)+this[_0x385070(0x313)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x385070(0x22a)],'buffer':{'type':'read-only-storage'}},{'binding':0x2,'visibility':GPUShaderStage[_0x385070(0x22a)],'buffer':{'type':'read-only-storage'}},{'binding':0x3,'visibility':GPUShaderStage[_0x385070(0x22a)],'buffer':{'type':_0x385070(0x284)}},{'binding':0x4,'visibility':GPUShaderStage[_0x385070(0x22a)],'storageTexture':{'format':this[_0x385070(0x238)]}}]}),this['_pipelineLayout']=this[_0x385070(0x22d)][_0x385070(0x288)]({'label':_0x385070(0x31f),'bindGroupLayouts':[this[_0x385070(0x299)]]});}async[_0x2bad72(0x24e)](){}[_0x2bad72(0x231)](_0x73fb22){}['createBindGroup'](_0x1ad3af){const _0x54d19f=_0x2bad72;this[_0x54d19f(0x21b)]=this[_0x54d19f(0x22d)][_0x54d19f(0x21f)]({'label':_0x54d19f(0x282),'layout':this[_0x54d19f(0x211)][_0x54d19f(0x31d)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x54d19f(0x296)]}},{'binding':0x1,'resource':{'buffer':this[_0x54d19f(0x21c)]}},{'binding':0x2,'resource':{'buffer':this[_0x54d19f(0x324)]}},{'binding':0x3,'resource':{'buffer':this['_bvhBuffer']}},{'binding':0x4,'resource':_0x1ad3af['createView']()}]}),this[_0x54d19f(0x265)]=Math['ceil'](_0x1ad3af[_0x54d19f(0x287)]),this['_wgHeight']=Math[_0x54d19f(0x297)](_0x1ad3af[_0x54d19f(0x272)]);}async[_0x2bad72(0x261)](){const _0x48c6ce=_0x2bad72;this['_computePipeline']=this['_device'][_0x48c6ce(0x261)]({'label':'Ray\x20Trace\x20Mesh\x20Orthogonal\x20Pipeline\x20'+this[_0x48c6ce(0x313)](),'layout':this['_pipelineLayout'],'compute':{'module':this['_meshShaderModule'],'entryPoint':_0x48c6ce(0x22c)}}),this[_0x48c6ce(0x253)]=this['_device'][_0x48c6ce(0x261)]({'label':_0x48c6ce(0x2db)+this[_0x48c6ce(0x313)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x48c6ce(0x1c8)],'entryPoint':_0x48c6ce(0x27e)}});}['compute'](_0x59f583){const _0x845077=_0x2bad72;this[_0x845077(0x1d4)]?.[_0x845077(0x275)]?_0x59f583[_0x845077(0x26d)](this[_0x845077(0x253)]):_0x59f583[_0x845077(0x26d)](this['_computePipeline']),_0x59f583[_0x845077(0x2f4)](0x0,this[_0x845077(0x21b)]),_0x59f583[_0x845077(0x29a)](Math[_0x845077(0x297)](this[_0x845077(0x265)]/0x10),Math[_0x845077(0x297)](this['_wgHeight']/0x10));}}async function init(){const _0x4ac5ed=_0x2bad72,_0x517f81=document[_0x4ac5ed(0x207)](_0x4ac5ed(0x237));_0x517f81['id']=_0x4ac5ed(0x20e),document['body'][_0x4ac5ed(0x2dc)](_0x517f81);const _0x49f7fb=new RayTracer(_0x517f81);_0x49f7fb[_0x4ac5ed(0x1b9)]=0x1/Math[_0x4ac5ed(0x283)](1.1,0x7),await _0x49f7fb['init']();var _0x3e5aa5=new Camera();_0x3e5aa5[_0x4ac5ed(0x278)][0x0]=0.18809913098812103,_0x3e5aa5['_pose'][0x1]=-0.0767698660492897,_0x3e5aa5['_pose'][0x2]=-0.0767698660492897,_0x3e5aa5[_0x4ac5ed(0x278)][0x3]=0.18809913098812103,_0x3e5aa5[_0x4ac5ed(0x278)][0x4]=-0.6141012907028198,_0x3e5aa5['_pose'][0x5]=0.29343530535697937,_0x3e5aa5[_0x4ac5ed(0x278)][0x6]=0.6404831409454346,_0x3e5aa5['_pose'][0xf]=0.20977813005447388,_0x3e5aa5[_0x4ac5ed(0x214)][0x0]=0x1/0x4,_0x3e5aa5[_0x4ac5ed(0x214)][0x1]=0x1/0x4,_0x3e5aa5[_0x4ac5ed(0x275)]=!![];var _0x48ae81='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0az/Z:\x20Change\x20Trace\x20Height\x20(XXXXXX)\x0a\x20\x20\x20\x20\x20\x20[Height\x20Factor:\x20xxxxxxx]\x0am/M:\x20Change\x20Acc\x20Method\x20(????????)\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper',_0x241e1a=0x3,_0x149c93=[_0x4ac5ed(0x1d7),_0x4ac5ed(0x260),_0x4ac5ed(0x1b5),_0x4ac5ed(0x1bf)],_0x3eb202=new StandardTextObject(_0x48ae81);_0x48ae81=_0x48ae81['replace']('XXXXXX',_0x49f7fb[_0x4ac5ed(0x201)][_0x4ac5ed(0x27a)](0x2)),_0x48ae81=_0x48ae81[_0x4ac5ed(0x2ea)](_0x4ac5ed(0x2cb),_0x49f7fb['_heightFactor'][_0x4ac5ed(0x27a)](0x2)),_0x48ae81=_0x48ae81[_0x4ac5ed(0x2ea)](_0x4ac5ed(0x1b0),_0x149c93[_0x241e1a]),_0x3eb202[_0x4ac5ed(0x27d)](_0x48ae81);var _0x9096ba=null,_0x4977d1=async()=>{const _0x7a48cf=_0x4ac5ed;switch(_0x241e1a){case 0x0:_0x9096ba=new RayTracingTriangleMeshObject(_0x49f7fb[_0x7a48cf(0x22d)],_0x49f7fb[_0x7a48cf(0x238)],_0x7a48cf(0x31c),_0x3e5aa5);break;case 0x1:_0x9096ba=new RayTracingTriangleMeshAABBObject(_0x49f7fb[_0x7a48cf(0x22d)],_0x49f7fb['_canvasFormat'],_0x7a48cf(0x31c),_0x3e5aa5);break;case 0x2:_0x9096ba=new RayTracingTriangleMeshGridObject(_0x49f7fb[_0x7a48cf(0x22d)],_0x49f7fb[_0x7a48cf(0x238)],_0x7a48cf(0x31c),_0x3e5aa5);break;case 0x3:_0x9096ba=new RayTracingTriangleMeshBVHObject(_0x49f7fb[_0x7a48cf(0x22d)],_0x49f7fb[_0x7a48cf(0x238)],_0x7a48cf(0x31c),_0x3e5aa5);break;}await _0x49f7fb[_0x7a48cf(0x225)](_0x9096ba);};await _0x4977d1();let _0x33b979='??';var _0x38ebc4=new StandardTextObject(_0x4ac5ed(0x25f)+_0x33b979),_0x373448=0.05;window[_0x4ac5ed(0x31b)](_0x4ac5ed(0x263),async _0x35fba5=>{const _0x4e86e5=_0x4ac5ed;switch(_0x35fba5[_0x4e86e5(0x2eb)]){case'h':case'H':_0x3eb202['toggleVisibility']();break;case'f':case'F':_0x38ebc4[_0x4e86e5(0x232)]();break;case'w':case'W':_0x3e5aa5[_0x4e86e5(0x22b)](-_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case's':case'S':_0x3e5aa5[_0x4e86e5(0x22b)](_0x373448),_0x9096ba?.['updateCameraPose']();break;case'a':case'A':_0x3e5aa5[_0x4e86e5(0x242)](-_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'd':case'D':_0x3e5aa5[_0x4e86e5(0x242)](_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'q':case'Q':_0x3e5aa5[_0x4e86e5(0x28d)](-_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'e':case'E':_0x3e5aa5[_0x4e86e5(0x28d)](_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'i':case'I':_0x3e5aa5[_0x4e86e5(0x2d2)](-_0x373448*_0x3e5aa5['_focal'][0x1]),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'k':case'K':_0x3e5aa5[_0x4e86e5(0x2d2)](_0x373448*_0x3e5aa5[_0x4e86e5(0x214)][0x1]),_0x9096ba?.['updateCameraPose']();break;case'j':case'J':_0x3e5aa5['rotateY'](_0x373448*_0x3e5aa5[_0x4e86e5(0x214)][0x0]),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'l':case'L':_0x3e5aa5['rotateY'](-_0x373448*_0x3e5aa5['_focal'][0x0]),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'u':case'U':_0x3e5aa5[_0x4e86e5(0x24d)](-_0x373448),_0x9096ba?.[_0x4e86e5(0x1ef)]();break;case'o':case'O':_0x3e5aa5['rotateZ'](_0x373448),_0x9096ba?.['updateCameraPose']();break;case'r':case'R':_0x3e5aa5[_0x4e86e5(0x28e)](),_0x3e5aa5['_pose'][0x0]=0.18809913098812103,_0x3e5aa5['_pose'][0x1]=-0.0767698660492897,_0x3e5aa5[_0x4e86e5(0x278)][0x2]=-0.0767698660492897,_0x3e5aa5[_0x4e86e5(0x278)][0x3]=0.18809913098812103,_0x3e5aa5[_0x4e86e5(0x278)][0x4]=-0.6141012907028198,_0x3e5aa5[_0x4e86e5(0x278)][0x5]=0.29343530535697937,_0x3e5aa5[_0x4e86e5(0x278)][0x6]=0.6404831409454346,_0x3e5aa5[_0x4e86e5(0x278)][0xf]=0.20977813005447388,_0x3e5aa5[_0x4e86e5(0x214)][0x0]=0x1/0x4,_0x3e5aa5[_0x4e86e5(0x214)][0x1]=0x1/0x4,_0x9096ba?.[_0x4e86e5(0x1ef)](),_0x9096ba?.[_0x4e86e5(0x2a7)]();break;case'[':_0x3e5aa5[_0x4e86e5(0x214)][0x0]*=1.1,_0x9096ba?.['updateCameraFocal']();break;case']':_0x3e5aa5[_0x4e86e5(0x214)][0x0]/=1.1,_0x9096ba?.['updateCameraFocal']();break;case'{':_0x3e5aa5['_focal'][0x1]*=1.1,_0x9096ba?.['updateCameraFocal']();break;case'}':_0x3e5aa5[_0x4e86e5(0x214)][0x1]/=1.1,_0x9096ba?.[_0x4e86e5(0x2a7)]();break;case'z':let _0x33f8f1=_0x49f7fb[_0x4e86e5(0x1b9)]['toFixed'](0x2);_0x49f7fb[_0x4e86e5(0x1b9)]*=1.1;let _0xf523cb='('+_0x49f7fb['_tgtHeight'][_0x4e86e5(0x27a)](0x2)+')';_0x49f7fb[_0x4e86e5(0x2af)]();let _0x36bd3a='('+_0x49f7fb[_0x4e86e5(0x201)][_0x4e86e5(0x27a)](0x2)+')';_0x48ae81=_0x48ae81[_0x4e86e5(0x2ea)](_0xf523cb,_0x36bd3a),_0x48ae81=_0x48ae81[_0x4e86e5(0x2ea)](_0x33f8f1,_0x49f7fb[_0x4e86e5(0x1b9)][_0x4e86e5(0x27a)](0x2)),_0x3eb202[_0x4e86e5(0x27d)](_0x48ae81);break;case'Z':let _0x398625=_0x49f7fb[_0x4e86e5(0x1b9)][_0x4e86e5(0x27a)](0x2);_0x49f7fb[_0x4e86e5(0x1b9)]/=1.1;let _0x4900fc='('+_0x49f7fb['_tgtHeight'][_0x4e86e5(0x27a)](0x2)+')';_0x49f7fb['resizeCanvas']();let _0x5e5a87='('+_0x49f7fb[_0x4e86e5(0x201)][_0x4e86e5(0x27a)](0x2)+')';_0x48ae81=_0x48ae81[_0x4e86e5(0x2ea)](_0x4900fc,_0x5e5a87),_0x48ae81=_0x48ae81['replace'](_0x398625,_0x49f7fb[_0x4e86e5(0x1b9)][_0x4e86e5(0x27a)](0x2)),_0x3eb202[_0x4e86e5(0x27d)](_0x48ae81);break;case'm':let _0x518675=(_0x241e1a+0x1)%_0x149c93['length'];_0x48ae81=_0x48ae81['replace'](_0x149c93[_0x241e1a],_0x149c93[_0x518675]),_0x3eb202[_0x4e86e5(0x27d)](_0x48ae81),_0x241e1a=_0x518675,await _0x4977d1();break;case'M':let _0x290477=(_0x241e1a+_0x149c93['length']-0x1)%_0x149c93[_0x4e86e5(0x213)];_0x48ae81=_0x48ae81[_0x4e86e5(0x2ea)](_0x149c93[_0x241e1a],_0x149c93[_0x290477]),_0x3eb202[_0x4e86e5(0x27d)](_0x48ae81),_0x241e1a=_0x290477,await _0x4977d1();break;}});var _0x21976f=0x0,_0x4dff7c=0x3c,_0x23b094=0x1/_0x4dff7c,_0x36b25c=_0x23b094*0x3e8,_0x23f46d;let _0x59d610=()=>{const _0x285335=_0x4ac5ed;let _0x3a8e74=Date[_0x285335(0x2a0)]()-_0x23f46d;_0x3a8e74>_0x36b25c&&(++_0x21976f,_0x23f46d=Date['now']()-_0x3a8e74%_0x36b25c,_0x49f7fb[_0x285335(0x231)]()),requestAnimationFrame(_0x59d610);};return _0x23f46d=Date['now'](),_0x59d610(),_0x38ebc4[_0x4ac5ed(0x236)][_0x4ac5ed(0x320)]['setProperty'](_0x4ac5ed(0x2b1),_0x4ac5ed(0x1bd)),_0x38ebc4[_0x4ac5ed(0x236)][_0x4ac5ed(0x320)][_0x4ac5ed(0x1c2)]=_0x4ac5ed(0x2bc),setInterval(()=>{const _0xf5556=_0x4ac5ed;_0x33b979=_0x21976f,_0x21976f=0x0,_0x38ebc4[_0xf5556(0x27d)]('fps:\x20'+_0x33b979);},0x3e8),_0x49f7fb;}init()['then'](_0x25668c=>{const _0xcb76c=_0x2bad72;console[_0xcb76c(0x200)](_0x25668c);})[_0x2bad72(0x24f)](_0x12b63b=>{const _0x12b9f1=_0x2bad72,_0x5a3cb2=document[_0x12b9f1(0x207)]('p');_0x5a3cb2['innerHTML']=navigator[_0x12b9f1(0x233)]+_0x12b9f1(0x1e9)+_0x12b63b[_0x12b9f1(0x1c3)],document['body'][_0x12b9f1(0x2dc)](_0x5a3cb2),document['getElementById'](_0x12b9f1(0x20e))['remove']();});
