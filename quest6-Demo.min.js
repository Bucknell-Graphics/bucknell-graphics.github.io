/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
function _0x251c(_0x103243,_0x4c3e86){const _0xff7479=_0xff74();return _0x251c=function(_0x251c51,_0x22acbb){_0x251c51=_0x251c51-0x1a1;let _0x5538d2=_0xff7479[_0x251c51];return _0x5538d2;},_0x251c(_0x103243,_0x4c3e86);}const _0x14ceaf=_0x251c;(function(_0x1ae7af,_0x14da0b){const _0x221099=_0x251c,_0x4b5b6f=_0x1ae7af();while(!![]){try{const _0x4e0c87=-parseInt(_0x221099(0x215))/0x1+parseInt(_0x221099(0x20b))/0x2*(-parseInt(_0x221099(0x22b))/0x3)+-parseInt(_0x221099(0x282))/0x4+parseInt(_0x221099(0x28a))/0x5*(parseInt(_0x221099(0x27a))/0x6)+parseInt(_0x221099(0x1c8))/0x7*(-parseInt(_0x221099(0x29c))/0x8)+-parseInt(_0x221099(0x23b))/0x9+parseInt(_0x221099(0x227))/0xa;if(_0x4e0c87===_0x14da0b)break;else _0x4b5b6f['push'](_0x4b5b6f['shift']());}catch(_0x1deaae){_0x4b5b6f['push'](_0x4b5b6f['shift']());}}}(_0xff74,0x3adc7));class Renderer{constructor(_0x178e0e){const _0x43e73a=_0x251c;this[_0x43e73a(0x217)]=_0x178e0e,this[_0x43e73a(0x1f7)]=[],this[_0x43e73a(0x29a)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async[_0x14ceaf(0x295)](){const _0x2574e5=_0x14ceaf;if(!navigator[_0x2574e5(0x224)])throw Error(_0x2574e5(0x297));const _0x57fd8e=await navigator[_0x2574e5(0x224)][_0x2574e5(0x25d)]();if(!_0x57fd8e)throw Error(_0x2574e5(0x1fd));this[_0x2574e5(0x257)]=await _0x57fd8e[_0x2574e5(0x1ab)](),this['_context']=this[_0x2574e5(0x217)][_0x2574e5(0x280)](_0x2574e5(0x273)),this['_canvasFormat']=navigator[_0x2574e5(0x224)][_0x2574e5(0x249)](),this[_0x2574e5(0x23d)][_0x2574e5(0x1b0)]({'device':this[_0x2574e5(0x257)],'format':this[_0x2574e5(0x296)]}),this[_0x2574e5(0x26a)](),window[_0x2574e5(0x291)](_0x2574e5(0x1f9),this[_0x2574e5(0x26a)][_0x2574e5(0x1a8)](this));}[_0x14ceaf(0x26a)](){const _0x224934=_0x14ceaf,_0x8c0911=window[_0x224934(0x1af)]||0x1,_0xa9609a=window[_0x224934(0x1e4)]*_0x8c0911,_0xb0db25=window[_0x224934(0x24a)]*_0x8c0911;this['_canvas']['width']=_0xa9609a,this['_canvas'][_0x224934(0x1d7)]=_0xb0db25,this['_canvas'][_0x224934(0x1aa)][_0x224934(0x1e7)]=window[_0x224934(0x1e4)]+'px',this[_0x224934(0x217)][_0x224934(0x1aa)][_0x224934(0x1d7)]=window['innerHeight']+'px',this[_0x224934(0x217)][_0x224934(0x1aa)][_0x224934(0x235)]=_0x224934(0x1ae),this[_0x224934(0x1e9)]();}async[_0x14ceaf(0x27f)](_0x35eb66){const _0x3a14fc=_0x14ceaf;await _0x35eb66[_0x3a14fc(0x295)](),this[_0x3a14fc(0x1f7)][_0x3a14fc(0x238)](_0x35eb66);}[_0x14ceaf(0x293)](_0x31d7a4){const _0x2338a8=_0x14ceaf;for(const _0x20b214 of this['_objects']){_0x20b214?.[_0x2338a8(0x246)]();}let _0x16bd60=this[_0x2338a8(0x257)]['createCommandEncoder']();const _0x3839c9=_0x16bd60[_0x2338a8(0x1bf)]({'colorAttachments':[{'view':_0x31d7a4,'clearValue':this[_0x2338a8(0x29a)],'loadOp':_0x2338a8(0x26e),'storeOp':'store'}]});for(const _0x43d43f of this[_0x2338a8(0x1f7)]){_0x43d43f?.[_0x2338a8(0x1e9)](_0x3839c9);}_0x3839c9[_0x2338a8(0x23a)]();const _0x3d247a=_0x16bd60[_0x2338a8(0x1b4)]();for(const _0x1a9a8d of this['_objects']){_0x1a9a8d?.['compute'](_0x3d247a);}_0x3d247a[_0x2338a8(0x23a)]();const _0x23cf5c=_0x16bd60[_0x2338a8(0x1a1)]();this[_0x2338a8(0x257)][_0x2338a8(0x20d)]['submit']([_0x23cf5c]);}['render'](){const _0x18cd1f=_0x14ceaf;this[_0x18cd1f(0x293)](this[_0x18cd1f(0x23d)]['getCurrentTexture']()[_0x18cd1f(0x252)]());}}class RayTracer extends Renderer{constructor(_0x10f31b){const _0x515684=_0x14ceaf;super(_0x10f31b),this[_0x515684(0x230)]=null;}async[_0x14ceaf(0x295)](){const _0xbd58e=_0x14ceaf;if(!navigator[_0xbd58e(0x224)])throw Error(_0xbd58e(0x297));const _0x2e0893=await navigator[_0xbd58e(0x224)][_0xbd58e(0x25d)]();if(!_0x2e0893)throw Error('Couldn\x27t\x20request\x20WebGPU\x20adapter.');this[_0xbd58e(0x257)]=await _0x2e0893[_0xbd58e(0x1ab)](),this[_0xbd58e(0x23d)]=this[_0xbd58e(0x217)][_0xbd58e(0x280)](_0xbd58e(0x273)),this[_0xbd58e(0x296)]='rgba8unorm',this[_0xbd58e(0x23d)][_0xbd58e(0x1b0)]({'device':this[_0xbd58e(0x257)],'format':this[_0xbd58e(0x296)]}),this[_0xbd58e(0x202)]=this[_0xbd58e(0x257)]['createShaderModule']({'label':_0xbd58e(0x1d3),'code':'\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20'}),this[_0xbd58e(0x1ff)]=this[_0xbd58e(0x257)][_0xbd58e(0x271)]({'label':_0xbd58e(0x216),'layout':_0xbd58e(0x1f0),'vertex':{'module':this[_0xbd58e(0x202)],'entryPoint':_0xbd58e(0x22e)},'fragment':{'module':this[_0xbd58e(0x202)],'entryPoint':_0xbd58e(0x1f3),'targets':[{'format':this[_0xbd58e(0x296)]}]}}),this[_0xbd58e(0x288)]=this[_0xbd58e(0x257)][_0xbd58e(0x1ec)]({'label':_0xbd58e(0x1be),'magFilter':'linear','minFilter':_0xbd58e(0x25f)}),this['resizeCanvas'](),window[_0xbd58e(0x291)](_0xbd58e(0x1f9),this[_0xbd58e(0x26a)][_0xbd58e(0x1a8)](this));}[_0x14ceaf(0x26a)](){const _0x61f0dc=_0x14ceaf,_0x54cce6=window[_0x61f0dc(0x1af)]||0x1,_0x3442e0=window[_0x61f0dc(0x1e4)]*_0x54cce6,_0x558d0e=window[_0x61f0dc(0x24a)]*_0x54cce6;let _0x2eaac7={'width':_0x3442e0,'height':_0x558d0e};this[_0x61f0dc(0x22d)]=this[_0x61f0dc(0x257)]['createTexture']({'size':_0x2eaac7,'format':this[_0x61f0dc(0x296)],'usage':GPUTextureUsage[_0x61f0dc(0x1c0)]|GPUTextureUsage[_0x61f0dc(0x27b)]|GPUTextureUsage[_0x61f0dc(0x1b7)]}),this[_0x61f0dc(0x230)]&&(this['_tracer']['_imgWidth']=this[_0x61f0dc(0x22d)][_0x61f0dc(0x1e7)],this[_0x61f0dc(0x230)]['_imgHeight']=this[_0x61f0dc(0x22d)]['height'],this[_0x61f0dc(0x230)][_0x61f0dc(0x246)](),this['_tracer'][_0x61f0dc(0x1d6)](this['_offScreenTexture'])),this[_0x61f0dc(0x23c)]=this['_device'][_0x61f0dc(0x1d6)]({'label':_0x61f0dc(0x231),'layout':this[_0x61f0dc(0x1ff)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':this[_0x61f0dc(0x22d)][_0x61f0dc(0x252)]()},{'binding':0x1,'resource':this[_0x61f0dc(0x288)]}]}),super['resizeCanvas']();}async[_0x14ceaf(0x1df)](_0x525fd4){const _0x360bfa=_0x14ceaf;await _0x525fd4[_0x360bfa(0x295)](),_0x525fd4[_0x360bfa(0x1c4)]=this[_0x360bfa(0x22d)][_0x360bfa(0x1e7)],_0x525fd4[_0x360bfa(0x274)]=this['_offScreenTexture'][_0x360bfa(0x1d7)],_0x525fd4[_0x360bfa(0x246)](),this[_0x360bfa(0x230)]=_0x525fd4,this[_0x360bfa(0x230)][_0x360bfa(0x1d6)](this['_offScreenTexture']);}[_0x14ceaf(0x1e9)](){const _0x467a4d=_0x14ceaf;if(this[_0x467a4d(0x230)]){let _0x363c91=this[_0x467a4d(0x257)]['createCommandEncoder']();const _0x59bb9b=_0x363c91[_0x467a4d(0x1b4)]();this[_0x467a4d(0x230)]['compute'](_0x59bb9b),_0x59bb9b['end'](),this[_0x467a4d(0x257)]['queue']['submit']([_0x363c91[_0x467a4d(0x1a1)]()]);}let _0x293f5a=this[_0x467a4d(0x257)]['createCommandEncoder']();const _0xd15c41=_0x293f5a[_0x467a4d(0x1bf)]({'colorAttachments':[{'view':this[_0x467a4d(0x23d)]['getCurrentTexture']()['createView'](),'clearValue':this['_clearColor'],'loadOp':_0x467a4d(0x26e),'storeOp':'store'}]});_0xd15c41[_0x467a4d(0x234)](this['_pipeline']),_0xd15c41[_0x467a4d(0x289)](0x0,this['_bindGroup']),_0xd15c41[_0x467a4d(0x1c3)](0x6),_0xd15c41[_0x467a4d(0x23a)](),this[_0x467a4d(0x257)][_0x467a4d(0x20d)]['submit']([_0x293f5a[_0x467a4d(0x1a1)]()]);}}class StandardTextObject{constructor(_0x4d9699,_0x4126a3=0x5,_0x49ff44=_0x14ceaf(0x211)){const _0x39709b=_0x14ceaf;this['_textFont']=_0x49ff44,this[_0x39709b(0x263)]=_0x4126a3,this[_0x39709b(0x1b8)]=document[_0x39709b(0x28c)](_0x39709b(0x299)),this[_0x39709b(0x225)]=this[_0x39709b(0x1b8)][_0x39709b(0x280)]('2d'),this[_0x39709b(0x26f)](_0x4d9699),this[_0x39709b(0x286)](_0x4d9699),this[_0x39709b(0x1b8)][_0x39709b(0x1aa)][_0x39709b(0x275)]=_0x39709b(0x1b5),this[_0x39709b(0x1b8)][_0x39709b(0x1aa)][_0x39709b(0x1f6)]='10px',this[_0x39709b(0x1b8)][_0x39709b(0x1aa)]['left']='10px',this[_0x39709b(0x1b8)][_0x39709b(0x1aa)]['border']='1px\x20solid\x20red',document[_0x39709b(0x258)][_0x39709b(0x214)](this[_0x39709b(0x1b8)]);}[_0x14ceaf(0x1d4)](){const _0xb7c2cf=_0x14ceaf;this['_textCanvas'][_0xb7c2cf(0x1b1)]=!this['_textCanvas'][_0xb7c2cf(0x1b1)];}[_0x14ceaf(0x26f)](_0x4a7290){const _0x2e2a42=_0x14ceaf;this['_textContext'][_0x2e2a42(0x1d2)]=this[_0x2e2a42(0x294)],this[_0x2e2a42(0x1c2)]=_0x4a7290[_0x2e2a42(0x1ac)]('\x0a'),this[_0x2e2a42(0x248)]=Math[_0x2e2a42(0x245)](...this[_0x2e2a42(0x1c2)][_0x2e2a42(0x220)](_0x50bcac=>this[_0x2e2a42(0x225)][_0x2e2a42(0x1bd)](_0x50bcac)[_0x2e2a42(0x1e7)]));const _0x66c613=this[_0x2e2a42(0x294)][_0x2e2a42(0x212)](/(\d+)px/);_0x66c613?this['_fontSize']=parseInt(_0x66c613[0x1],0xa):(this['_fontSize']=0x12,this[_0x2e2a42(0x294)]=_0x2e2a42(0x211)),this['_height']=this[_0x2e2a42(0x1c2)][_0x2e2a42(0x264)]*(this[_0x2e2a42(0x1e3)]+this[_0x2e2a42(0x263)]),this[_0x2e2a42(0x24f)]=0x5,this[_0x2e2a42(0x22c)]=0x3,this[_0x2e2a42(0x261)]=Math['ceil'](this[_0x2e2a42(0x248)]+this[_0x2e2a42(0x24f)]*0x2),this[_0x2e2a42(0x1b9)]=Math['ceil'](this['_height']+this[_0x2e2a42(0x22c)]),this[_0x2e2a42(0x1b8)][_0x2e2a42(0x1e7)]=this[_0x2e2a42(0x261)],this[_0x2e2a42(0x1b8)][_0x2e2a42(0x1d7)]=this[_0x2e2a42(0x1b9)],this[_0x2e2a42(0x225)]['font']=this[_0x2e2a42(0x294)],this['_textContext']['textBaseline']=_0x2e2a42(0x1f6);}['updateText'](_0x594332){const _0x46cfea=_0x14ceaf;this[_0x46cfea(0x1c2)]=_0x594332[_0x46cfea(0x1ac)]('\x0a'),this[_0x46cfea(0x225)][_0x46cfea(0x242)]=_0x46cfea(0x1f4),this[_0x46cfea(0x225)][_0x46cfea(0x1dd)](0x0,0x0,this[_0x46cfea(0x261)],this['_canvasHeight']),this[_0x46cfea(0x225)][_0x46cfea(0x292)](0x0,0x0,this[_0x46cfea(0x261)],this['_canvasHeight']),this[_0x46cfea(0x225)]['fillStyle']=_0x46cfea(0x23e),this['_lines'][_0x46cfea(0x277)]((_0x1ce4ea,_0x2df355)=>{const _0x4b770a=_0x46cfea,_0x16ef3e=this[_0x4b770a(0x24f)],_0x1a405e=this[_0x4b770a(0x22c)]+_0x2df355*(this['_fontSize']+this['_lineSpacing']);this[_0x4b770a(0x225)]['fillText'](_0x1ce4ea,_0x16ef3e,_0x1a405e);});}}class SceneObject{static [_0x14ceaf(0x28e)]=0x0;constructor(_0x259681,_0x3e26dc){const _0x3f6abc=_0x14ceaf;if(this[_0x3f6abc(0x233)]==SceneObject)throw new Error(_0x3f6abc(0x1de));this['_device']=_0x259681,this['_canvasFormat']=_0x3e26dc,SceneObject[_0x3f6abc(0x28e)]+=0x1;}[_0x14ceaf(0x1ca)](){const _0xa47247=_0x14ceaf;return this[_0xa47247(0x233)][_0xa47247(0x26c)]+'\x20'+SceneObject['_objectCnt'][_0xa47247(0x1e2)]();}async[_0x14ceaf(0x295)](){const _0x4a4855=_0x14ceaf;await this[_0x4a4855(0x237)](),await this['createShaders'](),await this[_0x4a4855(0x271)](),await this[_0x4a4855(0x1e0)]();}async[_0x14ceaf(0x237)](){const _0x36a3bb=_0x14ceaf;throw new Error(_0x36a3bb(0x219));}[_0x14ceaf(0x246)](){}[_0x14ceaf(0x1a2)](_0x24a47e){return new Promise((_0x54c71b,_0x390354)=>{const _0x57fd92=_0x251c,_0x2695d0=new XMLHttpRequest();_0x2695d0[_0x57fd92(0x1ba)]('GET',_0x24a47e),_0x2695d0[_0x57fd92(0x1a6)]('Cache-Control','no-cache,\x20no-store,\x20max-age=0'),_0x2695d0['onload']=function(){const _0x25e4a9=_0x57fd92;_0x2695d0[_0x25e4a9(0x24e)]===XMLHttpRequest[_0x25e4a9(0x272)]&&_0x2695d0[_0x25e4a9(0x20e)]===0xc8?_0x54c71b(_0x2695d0[_0x25e4a9(0x21a)]):_0x390354({'status':_0x2695d0[_0x25e4a9(0x20e)],'statusText':_0x2695d0[_0x25e4a9(0x1f5)]});},_0x2695d0[_0x57fd92(0x207)]=function(){const _0x294531=_0x57fd92;_0x390354({'status':_0x2695d0[_0x294531(0x20e)],'statusText':_0x2695d0[_0x294531(0x1f5)]});},_0x2695d0['send']();});}async[_0x14ceaf(0x232)](){const _0x4d3259=_0x14ceaf;throw new Error(_0x4d3259(0x1ee));}async['createRenderPipeline'](){const _0x3ebe98=_0x14ceaf;throw new Error(_0x3ebe98(0x210));}[_0x14ceaf(0x1e9)](_0x5a9cf4){const _0x3fc00c=_0x14ceaf;throw new Error(_0x3fc00c(0x260));}async['createComputePipeline'](){throw new Error('Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.');}[_0x14ceaf(0x284)](_0x333247){const _0x495991=_0x14ceaf;throw new Error(_0x495991(0x1d1));}}class RayTracingObject extends SceneObject{async[_0x14ceaf(0x237)](){}async['createShaders'](){const _0x5dbba9=_0x14ceaf;let _0xa867da=await this[_0x5dbba9(0x1a2)]('/shaders/optimized_tracenothing.wgsl');this[_0x5dbba9(0x202)]=this[_0x5dbba9(0x257)][_0x5dbba9(0x265)]({'label':'\x20Shader\x20'+this[_0x5dbba9(0x1ca)](),'code':_0xa867da});}[_0x14ceaf(0x246)](){}async[_0x14ceaf(0x271)](){}[_0x14ceaf(0x1e9)](_0x426bfb){}async[_0x14ceaf(0x1e0)](){const _0x3f3162=_0x14ceaf;this[_0x3f3162(0x256)]=this[_0x3f3162(0x257)][_0x3f3162(0x1e0)]({'label':_0x3f3162(0x283)+this[_0x3f3162(0x1ca)](),'layout':'auto','compute':{'module':this[_0x3f3162(0x202)],'entryPoint':_0x3f3162(0x206)}});}['createBindGroup'](_0x2662d1){const _0x32658c=_0x14ceaf;this[_0x32658c(0x23c)]=this[_0x32658c(0x257)][_0x32658c(0x1d6)]({'label':_0x32658c(0x270),'layout':this['_computePipeline']['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':_0x2662d1[_0x32658c(0x252)]()}]}),this[_0x32658c(0x1cf)]=Math[_0x32658c(0x205)](_0x2662d1[_0x32658c(0x1e7)]),this[_0x32658c(0x1ce)]=Math[_0x32658c(0x205)](_0x2662d1['height']);}[_0x14ceaf(0x284)](_0x45464f){const _0x3ea358=_0x14ceaf;_0x45464f[_0x3ea358(0x234)](this[_0x3ea358(0x256)]),_0x45464f[_0x3ea358(0x289)](0x0,this['_bindGroup']),_0x45464f[_0x3ea358(0x285)](Math[_0x3ea358(0x205)](this[_0x3ea358(0x1cf)]/0x8),Math[_0x3ea358(0x205)](this['_wgHeight']/0x8));}}class UnitCube{constructor(){const _0x18c1a0=_0x14ceaf;this[_0x18c1a0(0x21e)]=new Float32Array(Array(0x10)['fill'](0x0)),this[_0x18c1a0(0x21e)][0x0]=0x1,this[_0x18c1a0(0x1da)]=new Float32Array(Array(0x4)[_0x18c1a0(0x28f)](0x1)),this[_0x18c1a0(0x26d)]=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_back']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x18c1a0(0x287)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_right']=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this[_0x18c1a0(0x223)]=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this['_down']=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}['updatePose'](_0x39cdb3){for(let _0xf86267=0x0;_0xf86267<0x10;++_0xf86267)this['_pose'][_0xf86267]=_0x39cdb3[_0xf86267];}}class UnitCubeSphere extends UnitCube{constructor(_0x37bda6=0x3){const _0x5b1811=_0x14ceaf;super(),this[_0x5b1811(0x1c1)]=[][_0x5b1811(0x1a9)](Array[_0x5b1811(0x22f)](this['_front']),Array[_0x5b1811(0x22f)](this[_0x5b1811(0x1a5)]),Array[_0x5b1811(0x22f)](this[_0x5b1811(0x287)]),Array[_0x5b1811(0x22f)](this[_0x5b1811(0x20a)]),Array[_0x5b1811(0x22f)](this[_0x5b1811(0x223)]),Array[_0x5b1811(0x22f)](this[_0x5b1811(0x22a)]));let _0x1c8f2f=[],_0xf09525=_0x5a9f95=>{let _0x1f7126=Math['sqrt'](_0x5a9f95[0x0]*_0x5a9f95[0x0]+_0x5a9f95[0x1]*_0x5a9f95[0x1]+_0x5a9f95[0x2]*_0x5a9f95[0x2]);return[_0x5a9f95[0x0]/_0x1f7126,_0x5a9f95[0x1]/_0x1f7126,_0x5a9f95[0x2]/_0x1f7126];};for(let _0x22f520=0x0;_0x22f520<this[_0x5b1811(0x1c1)][_0x5b1811(0x264)];_0x22f520+=0x4){let _0x466e4c=_0xf09525([this[_0x5b1811(0x1c1)][_0x22f520+0x0],this[_0x5b1811(0x1c1)][_0x22f520+0x1],this[_0x5b1811(0x1c1)][_0x22f520+0x2]]);this[_0x5b1811(0x1c1)][_0x22f520+0x0]=_0x466e4c[0x0],this[_0x5b1811(0x1c1)][_0x22f520+0x1]=_0x466e4c[0x1],this[_0x5b1811(0x1c1)][_0x22f520+0x2]=_0x466e4c[0x2];}for(let _0x3d083b=0x0;_0x3d083b<_0x37bda6;++_0x3d083b){for(let _0x2506ff=0x0;_0x2506ff<this[_0x5b1811(0x1c1)][_0x5b1811(0x264)];_0x2506ff+=0x10){let _0x2ae167=[this[_0x5b1811(0x1c1)][_0x2506ff+0x0],this[_0x5b1811(0x1c1)][_0x2506ff+0x1],this['_faces'][_0x2506ff+0x2]],_0x263a93=[this['_faces'][_0x2506ff+0x4],this['_faces'][_0x2506ff+0x5],this[_0x5b1811(0x1c1)][_0x2506ff+0x6]],_0xc1bff7=[this[_0x5b1811(0x1c1)][_0x2506ff+0x8],this[_0x5b1811(0x1c1)][_0x2506ff+0x9],this[_0x5b1811(0x1c1)][_0x2506ff+0xa]],_0x294350=[this['_faces'][_0x2506ff+0xc],this[_0x5b1811(0x1c1)][_0x2506ff+0xd],this[_0x5b1811(0x1c1)][_0x2506ff+0xe]],_0x4171c2=_0xf09525([(_0x294350[0x0]+_0xc1bff7[0x0])/0x2,(_0x294350[0x1]+_0xc1bff7[0x1])/0x2,(_0x294350[0x2]+_0xc1bff7[0x2])/0x2]),_0x2fc4b8=_0xf09525([(_0x2ae167[0x0]+_0x294350[0x0])/0x2,(_0x2ae167[0x1]+_0x294350[0x1])/0x2,(_0x2ae167[0x2]+_0x294350[0x2])/0x2]),_0x1f4128=_0xf09525([(_0x2ae167[0x0]+_0x263a93[0x0])/0x2,(_0x2ae167[0x1]+_0x263a93[0x1])/0x2,(_0x2ae167[0x2]+_0x263a93[0x2])/0x2]),_0x8d3d56=_0xf09525([(_0x263a93[0x0]+_0xc1bff7[0x0])/0x2,(_0x263a93[0x1]+_0xc1bff7[0x1])/0x2,(_0x263a93[0x2]+_0xc1bff7[0x2])/0x2]),_0x12211f=_0xf09525([(_0x1f4128[0x0]+_0x4171c2[0x0])/0x2,(_0x1f4128[0x1]+_0x4171c2[0x1])/0x2,(_0x1f4128[0x2]+_0x4171c2[0x2])/0x2]);_0x1c8f2f['push'](..._0x2ae167,0x1,..._0x1f4128,0x1,..._0x12211f,0x1,..._0x2fc4b8,0x1),_0x1c8f2f[_0x5b1811(0x238)](..._0x1f4128,0x1,..._0x263a93,0x1,..._0x8d3d56,0x1,..._0x12211f,0x1),_0x1c8f2f['push'](..._0x12211f,0x1,..._0x8d3d56,0x1,..._0xc1bff7,0x1,..._0x4171c2,0x1),_0x1c8f2f[_0x5b1811(0x238)](..._0x2fc4b8,0x1,..._0x12211f,0x1,..._0x4171c2,0x1,..._0x294350,0x1);}this[_0x5b1811(0x1c1)]=_0x1c8f2f,_0x1c8f2f=[];}this[_0x5b1811(0x1c1)]=new Float32Array(this[_0x5b1811(0x1c1)]);}}function _0xff74(){const _0x217a76=['COMPUTE','_objectCnt','fill','updateSphereScales','addEventListener','fillRect','renderToSelectedView','_textFont','init','_canvasFormat','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','STORAGE','canvas','_clearColor','resetPose','542600cfzAKc','then','finish','loadShader','initial','COPY_DST','_back','setRequestHeader','UNIFORM','bind','concat','style','requestDevice','split','createBindGroupLayout','center','devicePixelRatio','configure','hidden','_cube','_computeProjectivePipeline','beginComputePass','absolute','applyMotorToPoint','STORAGE_BINDING','_textCanvas','_canvasHeight','open','updateCameraFocal','mouseenter','measureText','Ray\x20Tracer\x20Sampler','beginRenderPass','RENDER_ATTACHMENT','_faces','_lines','draw','_imgWidth','_isProjective','createPlane','createDir','49uYpwQg','_pipelineLayout','getName','updatePose','createTranslator','_showTexture','_wgHeight','_wgWidth','createPoint','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','font','Ray\x20Tracer\x20Shader','toggleVisibility','</br>','createBindGroup','height','extractTranslator','updateCubePose','_scales','motorNorm','renderCanvas','clearRect','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','setTracerObject','createComputePipeline','_cubeOffset','toString','_fontSize','innerWidth','isInside','key','width','rotateZ','render','updateSize','reverse','createSampler','abs','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','computeOrthogonalMain','auto','createPlaneFromPoints','Ray\x20Trace\x20Box\x20Layout\x20','fragmentMain','rgba(1,\x201,\x201,\x200.5)','statusText','top','_objects','remove','resize','none','message','_bindGroupLayout','Couldn\x27t\x20request\x20WebGPU\x20adapter.','moveY','_pipeline','rotateY','_sphereBuffer','_shaderModule','moveX','updateSpherePose','ceil','computeMain','onerror','\x20Shader\x20','extractPoint','_right','2qDhdlv','cos','queue','status','applyMotor','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','18px\x20Arial','match','applyMotorToDir','appendChild','136053CKlEqP','Ray\x20Tracer\x20Pipeline','_canvas','_focal','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','responseText','touchstart','createPipelineLayout','Ray\x20Trace\x20Box\x20Bind\x20Group','_pose','Camera\x20','map','now','keyup','_top','gpu','_textContext','catch','17391330eAAtDm','Ray\x20Trace\x20Box\x20Projective\x20Pipeline\x20','getBindGroupLayout','_down','1071192iSepUt','_paddingtop','_offScreenTexture','vertexMain','from','_tracer','Ray\x20Tracer\x20Renderer\x20Bind\x20Group','createShaders','constructor','setPipeline','transformOrigin','WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper','createGeometry','push','createLine','end','2491371wNORer','_bindGroup','_context','white','reduce','log','rotateX','fillStyle','geometricProduct','normalizeMotor','max','updateGeometry','_sphere','_width','getPreferredCanvasFormat','innerHeight','setProperty','_boxBuffer','updateCubeScales','readyState','_paddingx','fps:\x20','keydown','createView','updateBoxPose','sin','read-only-storage','_computePipeline','_device','body','byteLength','pointer-events','mouseleave','createRotor','requestAdapter','Sphere\x20','linear','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','_canvasWidth','_resolutions','_lineSpacing','length','createShaderModule','_cameraBuffer','_camera','left','Box\x20','resizeCanvas','sqrt','name','_front','clear','updateTextRegion','Ray\x20Tracing\x20Bind\x20Group','createRenderPipeline','DONE','webgpu','_imgHeight','position','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','forEach','updateCameraPose','extractRotor','3534xYSFpJ','TEXTURE_BINDING','moveZ','_box','writeBuffer','appendSceneObject','getContext','touchmove','1361996kFcJtj','Ray\x20Tracing\x20Pipeline\x20','compute','dispatchWorkgroups','updateText','_left','_sampler','setBindGroup','740EAMjFL','createBuffer','createElement'];_0xff74=function(){return _0x217a76;};return _0xff74();}class RayTracingDemoSceneObject extends RayTracingObject{constructor(_0x501fac,_0x1c4ba7,_0x5962ac,_0x4a6cd2=!![]){const _0x26feb1=_0x14ceaf;super(_0x501fac,_0x1c4ba7),this[_0x26feb1(0x27d)]=new UnitCube(),this[_0x26feb1(0x1b2)]=new UnitCube(),this['_sphere']=new UnitCubeSphere(),this['_camera']=_0x5962ac,this[_0x26feb1(0x1cd)]=_0x4a6cd2;}async[_0x14ceaf(0x237)](){const _0x39ff67=_0x14ceaf;this[_0x39ff67(0x266)]=this['_device'][_0x39ff67(0x28b)]({'label':_0x39ff67(0x21f)+this[_0x39ff67(0x1ca)](),'size':this[_0x39ff67(0x267)]['_pose'][_0x39ff67(0x259)]+this['_camera'][_0x39ff67(0x218)][_0x39ff67(0x259)]+this[_0x39ff67(0x267)][_0x39ff67(0x262)][_0x39ff67(0x259)],'usage':GPUBufferUsage[_0x39ff67(0x1a7)]|GPUBufferUsage[_0x39ff67(0x1a4)]}),this['_device']['queue'][_0x39ff67(0x27e)](this[_0x39ff67(0x266)],0x0,this[_0x39ff67(0x267)][_0x39ff67(0x21e)]),this['_device'][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_cameraBuffer'],this['_camera'][_0x39ff67(0x21e)][_0x39ff67(0x259)],this[_0x39ff67(0x267)][_0x39ff67(0x218)]),this['_device'][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_cameraBuffer'],this['_camera'][_0x39ff67(0x21e)][_0x39ff67(0x259)]+this['_camera']['_focal'][_0x39ff67(0x259)],this[_0x39ff67(0x267)][_0x39ff67(0x262)]),this['_boxBuffer']=this[_0x39ff67(0x257)][_0x39ff67(0x28b)]({'label':_0x39ff67(0x269)+this['getName'](),'size':(this[_0x39ff67(0x27d)][_0x39ff67(0x21e)][_0x39ff67(0x259)]+this[_0x39ff67(0x27d)][_0x39ff67(0x1da)][_0x39ff67(0x259)]+this['_box'][_0x39ff67(0x223)]['byteLength']*0x6)*0x2,'usage':GPUBufferUsage[_0x39ff67(0x298)]|GPUBufferUsage[_0x39ff67(0x1a4)]});let _0x586210=0x0;this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x27d)]['_pose']),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x21e)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_boxBuffer'],_0x586210,this['_box']['_scales']),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x1da)][_0x39ff67(0x259)],this['_device'][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x27d)][_0x39ff67(0x26d)]),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x26d)]['byteLength'],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_boxBuffer'],_0x586210,this[_0x39ff67(0x27d)][_0x39ff67(0x1a5)]),_0x586210+=this[_0x39ff67(0x27d)]['_back']['byteLength'],this[_0x39ff67(0x257)]['queue'][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x27d)]['_left']),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x287)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x27d)][_0x39ff67(0x20a)]),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x20a)][_0x39ff67(0x259)],this[_0x39ff67(0x257)]['queue']['writeBuffer'](this['_boxBuffer'],_0x586210,this[_0x39ff67(0x27d)]['_top']),_0x586210+=this[_0x39ff67(0x27d)][_0x39ff67(0x223)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x27d)][_0x39ff67(0x22a)]),_0x586210+=this[_0x39ff67(0x27d)]['_down'][_0x39ff67(0x259)],this[_0x39ff67(0x1e1)]=_0x586210,this['_device'][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_boxBuffer'],_0x586210,this['_cube'][_0x39ff67(0x21e)]),_0x586210+=this['_cube']['_pose'][_0x39ff67(0x259)],this[_0x39ff67(0x257)]['queue'][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x1b2)]['_scales']),_0x586210+=this[_0x39ff67(0x1b2)][_0x39ff67(0x1da)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_boxBuffer'],_0x586210,this[_0x39ff67(0x1b2)]['_front']),_0x586210+=this[_0x39ff67(0x1b2)][_0x39ff67(0x26d)]['byteLength'],this[_0x39ff67(0x257)]['queue'][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x1b2)]['_back']),_0x586210+=this[_0x39ff67(0x1b2)][_0x39ff67(0x1a5)][_0x39ff67(0x259)],this['_device'][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x1b2)][_0x39ff67(0x287)]),_0x586210+=this[_0x39ff67(0x1b2)][_0x39ff67(0x287)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)]['writeBuffer'](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x1b2)][_0x39ff67(0x20a)]),_0x586210+=this['_cube']['_right'][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x24c)],_0x586210,this[_0x39ff67(0x1b2)]['_top']),_0x586210+=this['_cube'][_0x39ff67(0x223)][_0x39ff67(0x259)],this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this['_boxBuffer'],_0x586210,this[_0x39ff67(0x1b2)][_0x39ff67(0x22a)]),this['_sphereBuffer']=this[_0x39ff67(0x257)][_0x39ff67(0x28b)]({'label':_0x39ff67(0x25e)+this[_0x39ff67(0x1ca)](),'size':this[_0x39ff67(0x247)][_0x39ff67(0x21e)][_0x39ff67(0x259)]+this['_sphere'][_0x39ff67(0x1da)][_0x39ff67(0x259)]+this['_sphere'][_0x39ff67(0x1c1)][_0x39ff67(0x259)],'usage':GPUBufferUsage[_0x39ff67(0x298)]|GPUBufferUsage['COPY_DST']}),_0x586210=0x0,this[_0x39ff67(0x257)][_0x39ff67(0x20d)][_0x39ff67(0x27e)](this[_0x39ff67(0x201)],_0x586210,this[_0x39ff67(0x247)][_0x39ff67(0x21e)]),_0x586210+=this['_sphere'][_0x39ff67(0x21e)][_0x39ff67(0x259)],this[_0x39ff67(0x257)]['queue'][_0x39ff67(0x27e)](this['_sphereBuffer'],_0x586210,this[_0x39ff67(0x247)][_0x39ff67(0x1da)]),_0x586210+=this[_0x39ff67(0x247)][_0x39ff67(0x1da)]['byteLength'],this['_device']['queue'][_0x39ff67(0x27e)](this['_sphereBuffer'],_0x586210,this['_sphere'][_0x39ff67(0x1c1)]);}[_0x14ceaf(0x246)](){const _0x52316f=_0x14ceaf;this[_0x52316f(0x267)]['updateSize'](this[_0x52316f(0x1c4)],this['_imgHeight']),this[_0x52316f(0x257)][_0x52316f(0x20d)]['writeBuffer'](this[_0x52316f(0x266)],this[_0x52316f(0x267)][_0x52316f(0x21e)][_0x52316f(0x259)]+this[_0x52316f(0x267)][_0x52316f(0x218)]['byteLength'],this[_0x52316f(0x267)]['_resolutions']);}[_0x14ceaf(0x253)](){const _0x25fc69=_0x14ceaf;this[_0x25fc69(0x257)][_0x25fc69(0x20d)][_0x25fc69(0x27e)](this[_0x25fc69(0x24c)],0x0,this[_0x25fc69(0x27d)][_0x25fc69(0x21e)]);}['updateBoxScales'](){const _0x1db995=_0x14ceaf;this['_device']['queue']['writeBuffer'](this[_0x1db995(0x24c)],this[_0x1db995(0x27d)][_0x1db995(0x21e)][_0x1db995(0x259)],this[_0x1db995(0x27d)][_0x1db995(0x1da)]);}['updateCubePose'](){const _0x23a475=_0x14ceaf;this['_device'][_0x23a475(0x20d)][_0x23a475(0x27e)](this[_0x23a475(0x24c)],this['_cubeOffset'],this[_0x23a475(0x1b2)]['_pose']);}[_0x14ceaf(0x24d)](){const _0x46c4f1=_0x14ceaf;this[_0x46c4f1(0x257)][_0x46c4f1(0x20d)]['writeBuffer'](this['_boxBuffer'],this[_0x46c4f1(0x1e1)]+this[_0x46c4f1(0x1b2)][_0x46c4f1(0x21e)]['byteLength'],this[_0x46c4f1(0x1b2)][_0x46c4f1(0x1da)]);}['updateSpherePose'](){const _0x1dc7e9=_0x14ceaf;this[_0x1dc7e9(0x257)][_0x1dc7e9(0x20d)]['writeBuffer'](this['_sphereBuffer'],0x0,this[_0x1dc7e9(0x247)][_0x1dc7e9(0x21e)]);}[_0x14ceaf(0x290)](){const _0x176a12=_0x14ceaf;this['_device'][_0x176a12(0x20d)]['writeBuffer'](this[_0x176a12(0x201)],this[_0x176a12(0x247)][_0x176a12(0x21e)][_0x176a12(0x259)],this['_sphere'][_0x176a12(0x1da)]);}[_0x14ceaf(0x278)](){const _0x59a450=_0x14ceaf;this[_0x59a450(0x257)]['queue'][_0x59a450(0x27e)](this[_0x59a450(0x266)],0x0,this[_0x59a450(0x267)][_0x59a450(0x21e)]);}['updateCameraFocal'](){const _0x4912a8=_0x14ceaf;this[_0x4912a8(0x257)][_0x4912a8(0x20d)][_0x4912a8(0x27e)](this[_0x4912a8(0x266)],this[_0x4912a8(0x267)][_0x4912a8(0x21e)][_0x4912a8(0x259)],this[_0x4912a8(0x267)][_0x4912a8(0x218)]);}async['createShaders'](){const _0x335631=_0x14ceaf;let _0x29f1dc=await this[_0x335631(0x1a2)]('/shaders/optimized_tracedemobox.wgsl');this[_0x335631(0x202)]=this[_0x335631(0x257)][_0x335631(0x265)]({'label':_0x335631(0x208)+this[_0x335631(0x1ca)](),'code':_0x29f1dc}),this['_bindGroupLayout']=this[_0x335631(0x257)][_0x335631(0x1ad)]({'label':_0x335631(0x1f2)+this[_0x335631(0x1ca)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage['COMPUTE'],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x335631(0x28d)],'buffer':{'type':_0x335631(0x255)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'storageTexture':{'format':this[_0x335631(0x296)]}},{'binding':0x3,'visibility':GPUShaderStage[_0x335631(0x28d)],'buffer':{'type':'read-only-storage'}}]}),this[_0x335631(0x1c9)]=this[_0x335631(0x257)][_0x335631(0x21c)]({'label':_0x335631(0x276),'bindGroupLayouts':[this[_0x335631(0x1fc)]]});}async[_0x14ceaf(0x1e0)](){const _0x5699e9=_0x14ceaf;this[_0x5699e9(0x256)]=this[_0x5699e9(0x257)][_0x5699e9(0x1e0)]({'label':'Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20'+this['getName'](),'layout':this[_0x5699e9(0x1c9)],'compute':{'module':this[_0x5699e9(0x202)],'entryPoint':_0x5699e9(0x1ef)}}),this[_0x5699e9(0x1b3)]=this[_0x5699e9(0x257)]['createComputePipeline']({'label':_0x5699e9(0x228)+this[_0x5699e9(0x1ca)](),'layout':this[_0x5699e9(0x1c9)],'compute':{'module':this[_0x5699e9(0x202)],'entryPoint':'computeProjectiveMain'}});}[_0x14ceaf(0x1d6)](_0x57301b){const _0x39d8f1=_0x14ceaf;this['_bindGroup']=this[_0x39d8f1(0x257)][_0x39d8f1(0x1d6)]({'label':_0x39d8f1(0x21d),'layout':this[_0x39d8f1(0x256)][_0x39d8f1(0x229)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x39d8f1(0x266)]}},{'binding':0x1,'resource':{'buffer':this[_0x39d8f1(0x24c)]}},{'binding':0x2,'resource':_0x57301b['createView']()},{'binding':0x3,'resource':{'buffer':this[_0x39d8f1(0x201)]}}]}),this[_0x39d8f1(0x1cf)]=Math['ceil'](_0x57301b[_0x39d8f1(0x1e7)]),this['_wgHeight']=Math[_0x39d8f1(0x205)](_0x57301b[_0x39d8f1(0x1d7)]);}[_0x14ceaf(0x284)](_0x5a3cf6){const _0x4f03c3=_0x14ceaf;this[_0x4f03c3(0x267)]?.['_isProjective']?_0x5a3cf6[_0x4f03c3(0x234)](this[_0x4f03c3(0x1b3)]):_0x5a3cf6[_0x4f03c3(0x234)](this[_0x4f03c3(0x256)]),_0x5a3cf6[_0x4f03c3(0x289)](0x0,this['_bindGroup']),_0x5a3cf6[_0x4f03c3(0x285)](Math['ceil'](this['_wgWidth']/0x8),Math[_0x4f03c3(0x205)](this['_wgHeight']/0x8));}}class PGA3D{static[_0x14ceaf(0x243)](_0x29dff5,_0x337bd7){return[_0x29dff5[0x0]*_0x337bd7[0x0]-_0x29dff5[0x1]*_0x337bd7[0x1]-_0x29dff5[0x2]*_0x337bd7[0x2]-_0x29dff5[0x3]*_0x337bd7[0x3]-_0x29dff5[0x7]*_0x337bd7[0x7]+_0x29dff5[0xb]*_0x337bd7[0xb]+_0x29dff5[0xc]*_0x337bd7[0xc]+_0x29dff5[0xd]*_0x337bd7[0xd],_0x29dff5[0x0]*_0x337bd7[0x1]+_0x29dff5[0x1]*_0x337bd7[0x0]-_0x29dff5[0x2]*_0x337bd7[0x3]+_0x29dff5[0x3]*_0x337bd7[0x2]+_0x29dff5[0x7]*_0x337bd7[0xd]+_0x29dff5[0xb]*_0x337bd7[0xc]-_0x29dff5[0xc]*_0x337bd7[0xb]+_0x29dff5[0xd]*_0x337bd7[0x7],_0x29dff5[0x0]*_0x337bd7[0x2]+_0x29dff5[0x1]*_0x337bd7[0x3]+_0x29dff5[0x2]*_0x337bd7[0x0]-_0x29dff5[0x3]*_0x337bd7[0x1]-_0x29dff5[0x7]*_0x337bd7[0xc]+_0x29dff5[0xb]*_0x337bd7[0xd]-_0x29dff5[0xc]*_0x337bd7[0x7]-_0x29dff5[0xd]*_0x337bd7[0xb],_0x29dff5[0x0]*_0x337bd7[0x3]-_0x29dff5[0x1]*_0x337bd7[0x2]+_0x29dff5[0x2]*_0x337bd7[0x1]+_0x29dff5[0x3]*_0x337bd7[0x0]+_0x29dff5[0x7]*_0x337bd7[0xb]+_0x29dff5[0xb]*_0x337bd7[0x7]+_0x29dff5[0xc]*_0x337bd7[0xd]-_0x29dff5[0xd]*_0x337bd7[0xc],_0x29dff5[0x0]*_0x337bd7[0x4]+_0x29dff5[0x1]*_0x337bd7[0x5]+_0x29dff5[0x2]*_0x337bd7[0x6]-_0x29dff5[0x3]*_0x337bd7[0xf]+_0x29dff5[0x4]*_0x337bd7[0x0]-_0x29dff5[0x5]*_0x337bd7[0x1]-_0x29dff5[0x6]*_0x337bd7[0x2]+_0x29dff5[0x7]*_0x337bd7[0xa]+_0x29dff5[0x8]*_0x337bd7[0xc]+_0x29dff5[0x9]*_0x337bd7[0xd]-_0x29dff5[0xa]*_0x337bd7[0x7]-_0x29dff5[0xb]*_0x337bd7[0xe]+_0x29dff5[0xc]*_0x337bd7[0x8]+_0x29dff5[0xd]*_0x337bd7[0x9]+_0x29dff5[0xe]*_0x337bd7[0xb]-_0x29dff5[0xf]*_0x337bd7[0x3],_0x29dff5[0x0]*_0x337bd7[0x5]-_0x29dff5[0x1]*_0x337bd7[0x4]+_0x29dff5[0x2]*_0x337bd7[0xf]+_0x29dff5[0x3]*_0x337bd7[0x6]+_0x29dff5[0x4]*_0x337bd7[0x1]+_0x29dff5[0x5]*_0x337bd7[0x0]-_0x29dff5[0x6]*_0x337bd7[0x3]-_0x29dff5[0x7]*_0x337bd7[0x9]-_0x29dff5[0x8]*_0x337bd7[0xb]+_0x29dff5[0x9]*_0x337bd7[0x7]+_0x29dff5[0xa]*_0x337bd7[0xc]-_0x29dff5[0xb]*_0x337bd7[0x8]-_0x29dff5[0xc]*_0x337bd7[0xe]+_0x29dff5[0xd]*_0x337bd7[0xa]+_0x29dff5[0xe]*_0x337bd7[0xc]+_0x29dff5[0xf]*_0x337bd7[0x2],_0x29dff5[0x0]*_0x337bd7[0x6]-_0x29dff5[0x1]*_0x337bd7[0xf]-_0x29dff5[0x2]*_0x337bd7[0x4]-_0x29dff5[0x3]*_0x337bd7[0x5]+_0x29dff5[0x4]*_0x337bd7[0x2]+_0x29dff5[0x5]*_0x337bd7[0x3]+_0x29dff5[0x6]*_0x337bd7[0x0]+_0x29dff5[0x7]*_0x337bd7[0x8]-_0x29dff5[0x8]*_0x337bd7[0x7]-_0x29dff5[0x9]*_0x337bd7[0xb]-_0x29dff5[0xa]*_0x337bd7[0xc]-_0x29dff5[0xb]*_0x337bd7[0x9]-_0x29dff5[0xc]*_0x337bd7[0xa]-_0x29dff5[0xd]*_0x337bd7[0xe]+_0x29dff5[0xe]*_0x337bd7[0xd]-_0x29dff5[0xf]*_0x337bd7[0x1],_0x29dff5[0x0]*_0x337bd7[0x7]+_0x29dff5[0x1]*_0x337bd7[0xd]-_0x29dff5[0x2]*_0x337bd7[0xc]+_0x29dff5[0x3]*_0x337bd7[0xb]+_0x29dff5[0x7]*_0x337bd7[0x0]+_0x29dff5[0xb]*_0x337bd7[0x3]-_0x29dff5[0xc]*_0x337bd7[0x2]+_0x29dff5[0xd]*_0x337bd7[0x1],_0x29dff5[0x0]*_0x337bd7[0x8]+_0x29dff5[0x1]*_0x337bd7[0xe]-_0x29dff5[0x2]*_0x337bd7[0xa]+_0x29dff5[0x3]*_0x337bd7[0x9]+_0x29dff5[0x4]*_0x337bd7[0xc]-_0x29dff5[0x5]*_0x337bd7[0xb]+_0x29dff5[0x6]*_0x337bd7[0x7]-_0x29dff5[0x7]*_0x337bd7[0x6]+_0x29dff5[0x8]*_0x337bd7[0x0]-_0x29dff5[0x9]*_0x337bd7[0x3]+_0x29dff5[0xa]*_0x337bd7[0x2]-_0x29dff5[0xb]*_0x337bd7[0x5]+_0x29dff5[0xc]*_0x337bd7[0x4]-_0x29dff5[0xd]*_0x337bd7[0xf]+_0x29dff5[0xe]*_0x337bd7[0x1]+_0x29dff5[0xf]*_0x337bd7[0xd],_0x29dff5[0x0]*_0x337bd7[0x9]+_0x29dff5[0x1]*_0x337bd7[0xa]+_0x29dff5[0x2]*_0x337bd7[0xe]-_0x29dff5[0x3]*_0x337bd7[0x8]+_0x29dff5[0x4]*_0x337bd7[0xd]-_0x29dff5[0x5]*_0x337bd7[0x7]-_0x29dff5[0x6]*_0x337bd7[0xb]+_0x29dff5[0x7]*_0x337bd7[0x5]+_0x29dff5[0x8]*_0x337bd7[0x3]+_0x29dff5[0x9]*_0x337bd7[0x0]-_0x29dff5[0xa]*_0x337bd7[0x1]-_0x29dff5[0xb]*_0x337bd7[0x6]+_0x29dff5[0xc]*_0x337bd7[0xf]+_0x29dff5[0xd]*_0x337bd7[0x4]+_0x29dff5[0xe]*_0x337bd7[0x2]-_0x29dff5[0xf]*_0x337bd7[0xc],_0x29dff5[0x0]*_0x337bd7[0xa]-_0x29dff5[0x1]*_0x337bd7[0x9]+_0x29dff5[0x2]*_0x337bd7[0x8]+_0x29dff5[0x3]*_0x337bd7[0xe]+_0x29dff5[0x4]*_0x337bd7[0x7]+_0x29dff5[0x5]*_0x337bd7[0xd]-_0x29dff5[0x6]*_0x337bd7[0xc]-_0x29dff5[0x7]*_0x337bd7[0x4]-_0x29dff5[0x8]*_0x337bd7[0x2]+_0x29dff5[0x9]*_0x337bd7[0x1]+_0x29dff5[0xa]*_0x337bd7[0x0]-_0x29dff5[0xb]*_0x337bd7[0xf]-_0x29dff5[0xc]*_0x337bd7[0x6]+_0x29dff5[0xd]*_0x337bd7[0x5]+_0x29dff5[0xe]*_0x337bd7[0x3]+_0x29dff5[0xf]*_0x337bd7[0xb],_0x29dff5[0x0]*_0x337bd7[0xb]+_0x29dff5[0x1]*_0x337bd7[0xc]+_0x29dff5[0x2]*_0x337bd7[0xd]-_0x29dff5[0x3]*_0x337bd7[0x7]-_0x29dff5[0x7]*_0x337bd7[0x3]+_0x29dff5[0xb]*_0x337bd7[0x0]-_0x29dff5[0xc]*_0x337bd7[0x1]-_0x29dff5[0xd]*_0x337bd7[0x2],_0x29dff5[0x0]*_0x337bd7[0xc]-_0x29dff5[0x1]*_0x337bd7[0xb]+_0x29dff5[0x2]*_0x337bd7[0x7]+_0x29dff5[0x3]*_0x337bd7[0xd]+_0x29dff5[0x7]*_0x337bd7[0x2]+_0x29dff5[0xb]*_0x337bd7[0x1]+_0x29dff5[0xc]*_0x337bd7[0x0]-_0x29dff5[0xd]*_0x337bd7[0x3],_0x29dff5[0x0]*_0x337bd7[0xd]-_0x29dff5[0x1]*_0x337bd7[0x7]-_0x29dff5[0x2]*_0x337bd7[0xb]-_0x29dff5[0x3]*_0x337bd7[0xc]-_0x29dff5[0x7]*_0x337bd7[0x1]+_0x29dff5[0xb]*_0x337bd7[0x2]+_0x29dff5[0xc]*_0x337bd7[0x3]+_0x29dff5[0xd]*_0x337bd7[0x0],_0x29dff5[0x0]*_0x337bd7[0xe]-_0x29dff5[0x1]*_0x337bd7[0x8]-_0x29dff5[0x2]*_0x337bd7[0x9]-_0x29dff5[0x3]*_0x337bd7[0xa]+_0x29dff5[0x4]*_0x337bd7[0xb]+_0x29dff5[0x5]*_0x337bd7[0xc]+_0x29dff5[0x6]*_0x337bd7[0xd]+_0x29dff5[0x7]*_0x337bd7[0xf]-_0x29dff5[0x8]*_0x337bd7[0x1]-_0x29dff5[0x9]*_0x337bd7[0x2]-_0x29dff5[0xa]*_0x337bd7[0x3]-_0x29dff5[0xb]*_0x337bd7[0x4]-_0x29dff5[0xc]*_0x337bd7[0x5]-_0x29dff5[0xd]*_0x337bd7[0x6]+_0x29dff5[0xe]*_0x337bd7[0x0]-_0x29dff5[0xf]*_0x337bd7[0x7],_0x29dff5[0x0]*_0x337bd7[0xf]+_0x29dff5[0x1]*_0x337bd7[0x6]-_0x29dff5[0x2]*_0x337bd7[0x5]+_0x29dff5[0x3]*_0x337bd7[0x4]+_0x29dff5[0x4]*_0x337bd7[0x3]-_0x29dff5[0x5]*_0x337bd7[0x2]+_0x29dff5[0x6]*_0x337bd7[0x1]-_0x29dff5[0x7]*_0x337bd7[0xe]+_0x29dff5[0x8]*_0x337bd7[0xd]-_0x29dff5[0x9]*_0x337bd7[0xc]+_0x29dff5[0xa]*_0x337bd7[0xb]-_0x29dff5[0xb]*_0x337bd7[0xa]+_0x29dff5[0xc]*_0x337bd7[0x9]-_0x29dff5[0xd]*_0x337bd7[0x8]+_0x29dff5[0xe]*_0x337bd7[0x7]+_0x29dff5[0xf]*_0x337bd7[0x0]];}static['reverse'](_0x561b3d){return[_0x561b3d[0x0],-_0x561b3d[0x1],-_0x561b3d[0x2],-_0x561b3d[0x3],-_0x561b3d[0x4],-_0x561b3d[0x5],-_0x561b3d[0x6],-_0x561b3d[0x7],-_0x561b3d[0x8],-_0x561b3d[0x9],-_0x561b3d[0xa],_0x561b3d[0xb],_0x561b3d[0xc],_0x561b3d[0xd],_0x561b3d[0xe],_0x561b3d[0xf]];}static['applyMotor'](_0x45f115,_0x5d79c3){const _0x47055b=_0x14ceaf;return PGA3D[_0x47055b(0x243)](_0x5d79c3,PGA3D[_0x47055b(0x243)](_0x45f115,PGA3D[_0x47055b(0x1eb)](_0x5d79c3)));}static['motorNorm'](_0x515f36){const _0x1e2eb8=_0x14ceaf;return Math[_0x1e2eb8(0x26b)](_0x515f36[_0x1e2eb8(0x220)](_0x317443=>_0x317443*_0x317443)[_0x1e2eb8(0x23f)]((_0x16382b,_0x384624)=>_0x16382b+_0x384624,0x0));}static['createTranslator'](_0x1855d8,_0x1ad406,_0x2b23ee){return[0x1,0x0,0x0,0x0,-_0x1855d8/0x2,-_0x1ad406/0x2,-_0x2b23ee/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x1d8)](_0x324b35){return[0x1,0x0,0x0,0x0,_0x324b35[0x4],_0x324b35[0x5],_0x324b35[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createRotor'](_0x4d20ee,_0x574e6e=0x1,_0x5ef012=0x0,_0x491ff5=0x0,_0x4dc85c=0x0,_0x320851=0x0,_0x38ef1b=0x0){const _0x17f6d5=_0x14ceaf;let _0x265d14=Math[_0x17f6d5(0x20c)](_0x4d20ee/0x2),_0x3e4a6b=Math[_0x17f6d5(0x254)](_0x4d20ee/0x2),_0x1440e5=PGA3D[_0x17f6d5(0x239)](_0x4dc85c,_0x320851,_0x38ef1b,_0x574e6e,_0x5ef012,_0x491ff5);return[_0x265d14,_0x3e4a6b*_0x1440e5[0x1],_0x3e4a6b*_0x1440e5[0x2],_0x3e4a6b*_0x1440e5[0x3],_0x3e4a6b*_0x1440e5[0x4],_0x3e4a6b*_0x1440e5[0x5],_0x3e4a6b*_0x1440e5[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x279)](_0x54e459){return[_0x54e459[0x0],_0x54e459[0x1],_0x54e459[0x2],_0x54e459[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x1c7)](_0x197e0d,_0x581fd6,_0x2b0b34){return[0x0,_0x2b0b34,-_0x581fd6,_0x197e0d,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x239)](_0x23430a,_0x1b0864,_0x1f2e8c,_0xe9614f,_0x313055,_0x26b215){const _0x49fd53=_0x14ceaf;let _0xee9093=PGA3D[_0x49fd53(0x1c7)](_0xe9614f,_0x313055,_0x26b215),_0x2d961f=PGA3D[_0x49fd53(0x244)](_0xee9093);return[0x0,_0x2d961f[0x1],_0x2d961f[0x2],_0x2d961f[0x3],-(-_0x2d961f[0x2]*_0x1f2e8c-_0x2d961f[0x1]*_0x1b0864),-(_0x2d961f[0x1]*_0x23430a-_0x2d961f[0x3]*_0x1f2e8c),-(_0x2d961f[0x3]*_0x1b0864+_0x2d961f[0x2]*_0x23430a),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x1d0)](_0x527108,_0x7ac1d5,_0x4903c0){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0x4903c0,_0x7ac1d5,-_0x527108,0x0,0x0,0x0,0x0,0x0];}static[_0x14ceaf(0x209)](_0x527eb3){return[-_0x527eb3[0xa]/_0x527eb3[0x7],_0x527eb3[0x9]/_0x527eb3[0x7],-_0x527eb3[0x8]/_0x527eb3[0x7]];}static[_0x14ceaf(0x1c6)](_0x328380,_0x1aebd9,_0x2cf02f,_0x44fba4){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0x328380,_0x1aebd9,_0x2cf02f,-_0x44fba4,0x0];}static[_0x14ceaf(0x1f1)](_0x215022,_0x186625,_0x49d5ec){let _0x5110b2=_0x186625[0x1]*_0x49d5ec[0x2]-_0x49d5ec[0x1]*_0x186625[0x2]-(_0x215022[0x1]*_0x49d5ec[0x2]-_0x49d5ec[0x1]*_0x215022[0x2])+(_0x215022[0x1]*_0x186625[0x2]-_0x186625[0x1]*_0x215022[0x2]),_0x4004e3=_0x186625[0x0]*_0x49d5ec[0x2]-_0x49d5ec[0x0]*_0x186625[0x2]-(_0x215022[0x0]*_0x49d5ec[0x2]-_0x49d5ec[0x0]*_0x215022[0x2])+(_0x215022[0x0]*_0x186625[0x2]-_0x186625[0x0]*_0x215022[0x2]),_0x323d98=_0x186625[0x0]*_0x49d5ec[0x1]-_0x49d5ec[0x0]*_0x186625[0x1]-(_0x215022[0x0]*_0x49d5ec[0x1]-_0x49d5ec[0x0]*_0x215022[0x1])+(_0x215022[0x0]*_0x186625[0x1]-_0x186625[0x0]*_0x215022[0x1]),_0x222552=_0x215022[0x0]*(_0x186625[0x1]*_0x49d5ec[0x2]-_0x49d5ec[0x1]*_0x186625[0x2])-_0x186625[0x0]*(_0x215022[0x1]*_0x49d5ec[0x2]-_0x49d5ec[0x1]*_0x215022[0x2])+_0x49d5ec[0x0]*(_0x215022[0x1]*_0x186625[0x2]-_0x186625[0x1]*_0x215022[0x2]);return PGA3D['createPlane'](_0x5110b2,-_0x4004e3,_0x323d98,_0x222552);}static['linePlaneIntersection'](_0x4e6953,_0x546772){const _0x28d2c8=_0x14ceaf;let _0x23b738=PGA3D[_0x28d2c8(0x243)](_0x4e6953,_0x546772),_0x55e02d=Math[_0x28d2c8(0x1ed)](_0x23b738[0x7])<=1e-8,_0x27a569=_0x55e02d&&Math[_0x28d2c8(0x1ed)](_0x23b738[0x8])<=1e-8&&Math[_0x28d2c8(0x1ed)](_0x23b738[0x9])<=1e-8&&Math[_0x28d2c8(0x1ed)](_0x23b738[0xa])<=1e-8;return[PGA3D[_0x28d2c8(0x209)](_0x23b738),!_0x55e02d,_0x27a569];}static[_0x14ceaf(0x244)](_0x58f986){const _0x10dca1=_0x14ceaf;let _0x2c70e1=PGA3D[_0x10dca1(0x1db)](_0x58f986);if(_0x2c70e1==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x58f986[_0x10dca1(0x220)](_0x36b818=>_0x36b818/_0x2c70e1);}static[_0x14ceaf(0x1b6)](_0x34e81a,_0x2efeba){const _0x31354c=_0x14ceaf;let _0x95d5f2=PGA3D[_0x31354c(0x20f)](PGA3D['createPoint'](_0x34e81a[0x0],_0x34e81a[0x1],_0x34e81a[0x2]),_0x2efeba);return PGA3D[_0x31354c(0x209)](_0x95d5f2);}static[_0x14ceaf(0x213)](_0x5eca26,_0x400fc9){const _0x4d3fe5=_0x14ceaf;let _0x548e06=PGA3D[_0x4d3fe5(0x279)](_0x400fc9),_0x3be329=PGA3D[_0x4d3fe5(0x20f)](PGA3D[_0x4d3fe5(0x1d0)](_0x5eca26[0x0],_0x5eca26[0x1],_0x5eca26[0x2]),_0x548e06);return PGA3D[_0x4d3fe5(0x209)](_0x3be329);}static[_0x14ceaf(0x1e5)](_0x661f0e,_0x467fe7,_0x410c08,_0x199b54){const _0x277503=_0x14ceaf;let _0x1f2be8=PGA3D[_0x277503(0x1d0)](_0x661f0e[0x0],_0x661f0e[0x1],_0x661f0e[0x2]),_0x5e3971=PGA3D['createPoint'](_0x467fe7[0x0],_0x467fe7[0x1],_0x467fe7[0x2]),_0x3b09ee=PGA3D[_0x277503(0x1d0)](_0x410c08[0x0],_0x410c08[0x1],_0x410c08[0x2]),_0x5a884b=PGA3D['createPoint'](_0x199b54[0x0],_0x199b54[0x1],_0x199b54[0x2]),_0x53a92a=PGA3D[_0x277503(0x1f1)](_0x661f0e,_0x467fe7,_0x410c08),_0x368865=PGA3D[_0x277503(0x1f1)](_0x199b54,_0x467fe7,_0x410c08),_0x5705ff=PGA3D[_0x277503(0x1f1)](_0x661f0e,_0x199b54,_0x410c08),_0x1221cc=PGA3D[_0x277503(0x1f1)](_0x661f0e,_0x467fe7,_0x199b54),_0x3c05c1=_0x53a92a[0xb]*_0x53a92a[0xb]+_0x53a92a[0xc]*_0x53a92a[0xc]+_0x53a92a[0xd]*_0x53a92a[0xd]+_0x53a92a[0xe]*_0x53a92a[0xe],_0x37d716=_0x53a92a[0xb]*_0x368865[0xb]+_0x53a92a[0xc]*_0x368865[0xc]+_0x53a92a[0xd]*_0x368865[0xd]+_0x53a92a[0xe]*_0x368865[0xe],_0x5385e2=_0x53a92a[0xb]*_0x5705ff[0xb]+_0x53a92a[0xc]*_0x5705ff[0xc]+_0x53a92a[0xd]*_0x5705ff[0xd]+_0x53a92a[0xe]*_0x5705ff[0xe],_0x44d118=_0x53a92a[0xb]*_0x1221cc[0xb]+_0x53a92a[0xc]*_0x1221cc[0xc]+_0x53a92a[0xd]*_0x1221cc[0xd]+_0x53a92a[0xe]*_0x1221cc[0xe],_0xc0a16e=_0x37d716/_0x3c05c1,_0x1ded90=_0x5385e2/_0x3c05c1,_0x4ef9b2=_0x44d118/_0x3c05c1;return _0xc0a16e>=0x0&&_0xc0a16e<=0x1&&_0x1ded90>=0x0&&_0x1ded90<=0x1&&_0x4ef9b2>=0x0&&_0x4ef9b2<=0x1;}}class Camera{constructor(_0x231887,_0x5d11e0){const _0x10b7aa=_0x14ceaf;this['_pose']=new Float32Array(Array(0x10)[_0x10b7aa(0x28f)](0x0)),this['_pose'][0x0]=0x1,this[_0x10b7aa(0x218)]=new Float32Array(Array(0x2)[_0x10b7aa(0x28f)](0x1)),this['_resolutions']=new Float32Array([_0x231887,_0x5d11e0]),this['_isProjective']=![];}[_0x14ceaf(0x29b)](){const _0x41e277=_0x14ceaf;this[_0x41e277(0x21e)][0x0]=0x1;for(let _0x1fcfb8=0x1;_0x1fcfb8<0x10;++_0x1fcfb8)this[_0x41e277(0x21e)][_0x1fcfb8]=0x0;this[_0x41e277(0x218)][0x0]=0x1,this[_0x41e277(0x218)][0x1]=0x1;}['updatePose'](_0x1d3359){const _0xd34db4=_0x14ceaf;for(let _0x2cac24=0x0;_0x2cac24<0x10;++_0x2cac24)this[_0xd34db4(0x21e)][_0x2cac24]=_0x1d3359[_0x2cac24];}[_0x14ceaf(0x1ea)](_0x5c0f52,_0x5af5df){const _0x11348a=_0x14ceaf;this[_0x11348a(0x262)][0x0]=_0x5c0f52,this[_0x11348a(0x262)][0x1]=_0x5af5df;}['moveX'](_0x13541){const _0x152951=_0x14ceaf;let _0x183829=PGA3D[_0x152951(0x213)]([0x1,0x0,0x0],this[_0x152951(0x21e)]),_0x2317a4=PGA3D[_0x152951(0x1cc)](_0x13541*_0x183829[0x0],_0x13541*_0x183829[0x1],_0x13541*_0x183829[0x2]),_0xed4986=PGA3D[_0x152951(0x244)](PGA3D[_0x152951(0x243)](_0x2317a4,this[_0x152951(0x21e)]));this['updatePose'](_0xed4986);}[_0x14ceaf(0x1fe)](_0x28e218){const _0x128f03=_0x14ceaf;let _0x5a3ec1=PGA3D[_0x128f03(0x213)]([0x0,0x1,0x0],this[_0x128f03(0x21e)]),_0x204006=PGA3D[_0x128f03(0x1cc)](_0x28e218*_0x5a3ec1[0x0],_0x28e218*_0x5a3ec1[0x1],_0x28e218*_0x5a3ec1[0x2]),_0x51c084=PGA3D[_0x128f03(0x244)](PGA3D[_0x128f03(0x243)](_0x204006,this[_0x128f03(0x21e)]));this[_0x128f03(0x1cb)](_0x51c084);}[_0x14ceaf(0x27c)](_0x5773a3){const _0x557e30=_0x14ceaf;let _0x111ab3=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x557e30(0x21e)]),_0x8e86cb=PGA3D[_0x557e30(0x1cc)](_0x5773a3*_0x111ab3[0x0],_0x5773a3*_0x111ab3[0x1],_0x5773a3*_0x111ab3[0x2]),_0x3ef6da=PGA3D[_0x557e30(0x244)](PGA3D[_0x557e30(0x243)](_0x8e86cb,this[_0x557e30(0x21e)]));this['updatePose'](_0x3ef6da);}['rotateX'](_0x14fade){const _0x436cdf=_0x14ceaf;let _0x352a5f=PGA3D[_0x436cdf(0x1b6)]([0x0,0x0,0x0],this[_0x436cdf(0x21e)]),_0xdeb2b3=PGA3D['applyMotorToDir']([0x1,0x0,0x0],this[_0x436cdf(0x21e)]),_0x4be9a1=PGA3D['createRotor'](_0x14fade,_0xdeb2b3[0x0],_0xdeb2b3[0x1],_0xdeb2b3[0x2],_0x352a5f[0x0],_0x352a5f[0x1],_0x352a5f[0x2]),_0x5ca6ba=PGA3D['normalizeMotor'](PGA3D['geometricProduct'](_0x4be9a1,this['_pose']));this[_0x436cdf(0x1cb)](_0x5ca6ba);}[_0x14ceaf(0x200)](_0x199bab){const _0x20cd48=_0x14ceaf;let _0x3266ff=PGA3D[_0x20cd48(0x1b6)]([0x0,0x0,0x0],this[_0x20cd48(0x21e)]),_0x3db970=PGA3D[_0x20cd48(0x213)]([0x0,0x1,0x0],this[_0x20cd48(0x21e)]),_0x257d92=PGA3D[_0x20cd48(0x25c)](_0x199bab,_0x3db970[0x0],_0x3db970[0x1],_0x3db970[0x2],_0x3266ff[0x0],_0x3266ff[0x1],_0x3266ff[0x2]),_0x159979=PGA3D['normalizeMotor'](PGA3D[_0x20cd48(0x243)](_0x257d92,this['_pose']));this['updatePose'](_0x159979);}[_0x14ceaf(0x1e8)](_0xc5d586){const _0x4901f3=_0x14ceaf;let _0x1bbbbb=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this[_0x4901f3(0x21e)]),_0x5c6385=PGA3D[_0x4901f3(0x213)]([0x0,0x0,0x1],this[_0x4901f3(0x21e)]),_0x55964d=PGA3D['createRotor'](_0xc5d586,_0x5c6385[0x0],_0x5c6385[0x1],_0x5c6385[0x2],_0x1bbbbb[0x0],_0x1bbbbb[0x1],_0x1bbbbb[0x2]),_0x466e1d=PGA3D[_0x4901f3(0x244)](PGA3D[_0x4901f3(0x243)](_0x55964d,this[_0x4901f3(0x21e)]));this['updatePose'](_0x466e1d);}}async function init(){const _0x492c70=_0x14ceaf,_0x5542f0=document[_0x492c70(0x28c)](_0x492c70(0x299));_0x5542f0['id']='renderCanvas',document[_0x492c70(0x258)]['appendChild'](_0x5542f0);const _0x5f5290=new RayTracer(_0x5542f0);await _0x5f5290[_0x492c70(0x295)]();var _0xefca15=new Camera(),_0x123f70=new RayTracingDemoSceneObject(_0x5f5290['_device'],_0x5f5290[_0x492c70(0x296)],_0xefca15);await _0x5f5290[_0x492c70(0x1df)](_0x123f70),_0x123f70['_box']['_pose'][0x6]=-0.4,_0x123f70[_0x492c70(0x253)](),_0x123f70[_0x492c70(0x27d)]['_scales'][0x0]=0x2,_0x123f70[_0x492c70(0x27d)]['_scales'][0x1]=1.25,_0x123f70[_0x492c70(0x27d)]['_scales'][0x2]=0x2,_0x123f70['updateBoxScales'](),_0x123f70[_0x492c70(0x1b2)]['_scales'][0x0]=0.3,_0x123f70[_0x492c70(0x1b2)]['_scales'][0x1]=0.5,_0x123f70[_0x492c70(0x1b2)][_0x492c70(0x1da)][0x2]=0.3,_0x123f70[_0x492c70(0x24d)](),_0x123f70[_0x492c70(0x1b2)][_0x492c70(0x21e)][0x4]=0.15,_0x123f70['_cube'][_0x492c70(0x21e)][0x5]=-(0.5*_0x123f70[_0x492c70(0x27d)]['_scales'][0x1]/0x2)+0.5*_0x123f70[_0x492c70(0x1b2)][_0x492c70(0x1da)][0x1]/0x2,_0x123f70['_cube'][_0x492c70(0x21e)][0x6]=-0.5,_0x123f70[_0x492c70(0x1d9)](),_0x123f70[_0x492c70(0x247)][_0x492c70(0x1da)][0x0]=0.25,_0x123f70['_sphere']['_scales'][0x1]=0.25,_0x123f70['_sphere'][_0x492c70(0x1da)][0x2]=0.25,_0x123f70[_0x492c70(0x290)](),_0x123f70[_0x492c70(0x247)][_0x492c70(0x21e)][0x4]=-0.15,_0x123f70[_0x492c70(0x247)][_0x492c70(0x21e)][0x5]=-(0.5*_0x123f70[_0x492c70(0x27d)][_0x492c70(0x1da)][0x1]/0x2)+0.5*_0x123f70[_0x492c70(0x247)][_0x492c70(0x1da)][0x1]/0x2,_0x123f70[_0x492c70(0x247)][_0x492c70(0x21e)][0x6]=-0.5,_0x123f70[_0x492c70(0x204)]();var _0xc96f07=_0x492c70(0x236);_0xefca15['_isProjective']=!![];var _0x2c0ca2=new StandardTextObject(_0xc96f07);let _0x9be62c='??';var _0x583ef6=new StandardTextObject(_0x492c70(0x250)+_0x9be62c),_0x3d28a6=0.05;window[_0x492c70(0x291)](_0x492c70(0x251),async _0x4a1dec=>{const _0x16adf7=_0x492c70;switch(_0x4a1dec[_0x16adf7(0x1e6)]){case'h':case'H':_0x2c0ca2['toggleVisibility']();break;case'f':case'F':_0x583ef6[_0x16adf7(0x1d4)]();break;case'w':case'W':_0xefca15[_0x16adf7(0x1fe)](-_0x3d28a6),_0x123f70['updateCameraPose']();break;case's':case'S':_0xefca15[_0x16adf7(0x1fe)](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'a':case'A':_0xefca15[_0x16adf7(0x203)](-_0x3d28a6),_0x123f70['updateCameraPose']();break;case'd':case'D':_0xefca15['moveX'](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'q':case'Q':_0xefca15[_0x16adf7(0x27c)](-_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'e':case'E':_0xefca15['moveZ'](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'i':case'I':_0xefca15['rotateX'](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'k':case'K':_0xefca15[_0x16adf7(0x241)](-_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'j':case'J':_0xefca15['rotateY'](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'l':case'L':_0xefca15[_0x16adf7(0x200)](-_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'u':case'U':_0xefca15[_0x16adf7(0x1e8)](_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'o':case'O':_0xefca15[_0x16adf7(0x1e8)](-_0x3d28a6),_0x123f70[_0x16adf7(0x278)]();break;case'c':case'C':_0xefca15[_0x16adf7(0x1c5)]=!_0xefca15[_0x16adf7(0x1c5)];break;case'r':case'R':_0xefca15[_0x16adf7(0x29b)](),_0x123f70[_0x16adf7(0x278)](),_0x123f70['updateCameraFocal']();break;case'[':_0xefca15[_0x16adf7(0x218)][0x0]*=1.1,_0x123f70[_0x16adf7(0x1bb)]();break;case']':_0xefca15[_0x16adf7(0x218)][0x0]/=1.1,_0x123f70['updateCameraFocal']();break;case'{':_0xefca15[_0x16adf7(0x218)][0x1]*=1.1,_0x123f70[_0x16adf7(0x1bb)]();break;case'}':_0xefca15['_focal'][0x1]/=1.1,_0x123f70[_0x16adf7(0x1bb)]();break;}}),window[_0x492c70(0x291)](_0x492c70(0x222),_0x130145=>{});let _0x2127a9=async _0x45762b=>{},_0x5dcb86=async _0x173125=>{},_0x435e11=_0x51e6f7=>{};_0x5542f0[_0x492c70(0x291)]('mousedown',_0x2127a9),_0x5542f0[_0x492c70(0x291)]('mousemove',_0x5dcb86),_0x5542f0['addEventListener']('mouseup',_0x435e11),_0x5542f0['addEventListener'](_0x492c70(0x1bc),_0x1ef2d3=>{}),_0x5542f0[_0x492c70(0x291)](_0x492c70(0x25b),_0x49b5bb=>{}),_0x5542f0[_0x492c70(0x291)](_0x492c70(0x21b),_0x2127a9),_0x5542f0[_0x492c70(0x291)](_0x492c70(0x281),_0x5dcb86),_0x5542f0['addEventListener']('touchend',_0x435e11),_0x2c0ca2[_0x492c70(0x1b8)][_0x492c70(0x1aa)]['setProperty'](_0x492c70(0x25a),_0x492c70(0x1fa)),_0x583ef6[_0x492c70(0x1b8)][_0x492c70(0x1aa)][_0x492c70(0x24b)](_0x492c70(0x25a),_0x492c70(0x1fa));var _0x216d73=0x0,_0x5567d6=0x3c,_0x149ed2=0x1/_0x5567d6,_0x795a28=_0x149ed2*0x3e8,_0x456fb7;let _0x4e44c9=()=>{const _0x3c24fa=_0x492c70;let _0x3c2890=Date['now']()-_0x456fb7;_0x3c2890>_0x795a28&&(++_0x216d73,_0x456fb7=Date[_0x3c24fa(0x221)]()-_0x3c2890%_0x795a28,_0x5f5290[_0x3c24fa(0x1e9)]()),requestAnimationFrame(_0x4e44c9);};return _0x456fb7=Date[_0x492c70(0x221)](),_0x4e44c9(),_0x583ef6[_0x492c70(0x1b8)][_0x492c70(0x1aa)][_0x492c70(0x24b)](_0x492c70(0x268),_0x492c70(0x1a3)),_0x583ef6[_0x492c70(0x1b8)][_0x492c70(0x1aa)]['right']='10px',setInterval(()=>{const _0x2cc64a=_0x492c70;_0x9be62c=_0x216d73,_0x216d73=0x0,_0x583ef6[_0x2cc64a(0x286)]('fps:\x20'+_0x9be62c);},0x3e8),_0x5f5290;}init()[_0x14ceaf(0x29d)](_0xed1ba0=>{const _0x5bf289=_0x14ceaf;console[_0x5bf289(0x240)](_0xed1ba0);})[_0x14ceaf(0x226)](_0x11e6e2=>{const _0x16030d=_0x14ceaf,_0x58305f=document[_0x16030d(0x28c)]('p');_0x58305f['innerHTML']=navigator['userAgent']+_0x16030d(0x1d5)+_0x11e6e2[_0x16030d(0x1fb)],document[_0x16030d(0x258)][_0x16030d(0x214)](_0x58305f),document['getElementById'](_0x16030d(0x1dc))[_0x16030d(0x1f8)]();});