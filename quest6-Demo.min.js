/*!
 * Copyright (c) 2025 SingChun LEE @ Bucknell University. CC BY-NC 4.0.
 * 
 * This code is provided mainly for educational purposes at Bucknell University.
 *
 * This code is licensed under the Creative Commons Attribution-NonCommerical 4.0
 * International License. To view a copy of the license, visit 
 *   https://creativecommons.org/licenses/by-nc/4.0/
 * or send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.
 *
 * You are free to:
 *  - Share: copy and redistribute the material in any medium or format.
 *  - Adapt: remix, transform, and build upon the material.
 *
 * Under the following terms:
 *  - Attribution: You must give appropriate credit, provide a link to the license,
 *                 and indicate if changes where made.
 *  - NonCommerical: You may not use the material for commerical purposes.
 *  - No additional restrictions: You may not apply legal terms or technological 
 *                                measures that legally restrict others from doing
 *                                anything the license permits.
 */
const _0x11b7ee=_0x1f18;(function(_0x5a7c14,_0x1868a){const _0x4ac9a6=_0x1f18,_0x2b6b0d=_0x5a7c14();while(!![]){try{const _0x2ccbdc=parseInt(_0x4ac9a6(0x2bc))/0x1*(-parseInt(_0x4ac9a6(0x289))/0x2)+parseInt(_0x4ac9a6(0x2b8))/0x3*(-parseInt(_0x4ac9a6(0x29a))/0x4)+-parseInt(_0x4ac9a6(0x258))/0x5*(-parseInt(_0x4ac9a6(0x1ed))/0x6)+-parseInt(_0x4ac9a6(0x2b3))/0x7+parseInt(_0x4ac9a6(0x273))/0x8+-parseInt(_0x4ac9a6(0x2ca))/0x9+parseInt(_0x4ac9a6(0x263))/0xa*(parseInt(_0x4ac9a6(0x230))/0xb);if(_0x2ccbdc===_0x1868a)break;else _0x2b6b0d['push'](_0x2b6b0d['shift']());}catch(_0x2ca9e7){_0x2b6b0d['push'](_0x2b6b0d['shift']());}}}(_0xb6d0,0x29046));class Renderer{constructor(_0x285eec){const _0x8aba19=_0x1f18;this[_0x8aba19(0x241)]=_0x285eec,this[_0x8aba19(0x2ab)]=[],this[_0x8aba19(0x203)]={'r':0x0,'g':0x38/0xff,'b':0x65/0xff,'a':0x1};}async['init'](){const _0x580c78=_0x1f18;if(!navigator[_0x580c78(0x2b2)])throw Error(_0x580c78(0x272));const _0x171216=await navigator[_0x580c78(0x2b2)]['requestAdapter']();if(!_0x171216)throw Error(_0x580c78(0x24d));this[_0x580c78(0x2b5)]=await _0x171216[_0x580c78(0x2bf)](),this[_0x580c78(0x2b6)]=this[_0x580c78(0x241)]['getContext'](_0x580c78(0x255)),this[_0x580c78(0x229)]=navigator['gpu'][_0x580c78(0x24e)](),this[_0x580c78(0x2b6)]['configure']({'device':this[_0x580c78(0x2b5)],'format':this[_0x580c78(0x229)]}),this[_0x580c78(0x234)](),window[_0x580c78(0x28f)](_0x580c78(0x2a1),this[_0x580c78(0x234)][_0x580c78(0x227)](this));}['resizeCanvas'](){const _0x863dc1=_0x1f18,_0x5dfee5=window[_0x863dc1(0x221)]||0x1,_0x11b168=window[_0x863dc1(0x23e)]*_0x5dfee5,_0x3de617=window[_0x863dc1(0x2c5)]*_0x5dfee5;this[_0x863dc1(0x241)][_0x863dc1(0x2e1)]=_0x11b168,this[_0x863dc1(0x241)][_0x863dc1(0x276)]=_0x3de617,this[_0x863dc1(0x241)][_0x863dc1(0x2db)][_0x863dc1(0x2e1)]=window[_0x863dc1(0x23e)]+'px',this[_0x863dc1(0x241)][_0x863dc1(0x2db)][_0x863dc1(0x276)]=window[_0x863dc1(0x2c5)]+'px',this[_0x863dc1(0x241)][_0x863dc1(0x2db)][_0x863dc1(0x29b)]='center',this['render']();}async[_0x11b7ee(0x2a9)](_0x1aa774){const _0x176de6=_0x11b7ee;await _0x1aa774[_0x176de6(0x291)](),this[_0x176de6(0x2ab)][_0x176de6(0x239)](_0x1aa774);}['renderToSelectedView'](_0x567ce1){const _0xe47f08=_0x11b7ee;for(const _0x276f8f of this[_0xe47f08(0x2ab)]){_0x276f8f?.['updateGeometry']();}let _0x5809cd=this[_0xe47f08(0x2b5)][_0xe47f08(0x296)]();const _0x4119ed=_0x5809cd[_0xe47f08(0x26a)]({'colorAttachments':[{'view':_0x567ce1,'clearValue':this[_0xe47f08(0x203)],'loadOp':'clear','storeOp':'store'}]});for(const _0x4dcf4c of this['_objects']){_0x4dcf4c?.['render'](_0x4119ed);}_0x4119ed['end']();const _0x41212c=_0x5809cd['beginComputePass']();for(const _0x30eb3b of this[_0xe47f08(0x2ab)]){_0x30eb3b?.[_0xe47f08(0x21c)](_0x41212c);}_0x41212c[_0xe47f08(0x2d1)]();const _0x27cde8=_0x5809cd[_0xe47f08(0x26c)]();this[_0xe47f08(0x2b5)][_0xe47f08(0x205)][_0xe47f08(0x278)]([_0x27cde8]);}[_0x11b7ee(0x1e6)](){const _0x51ee78=_0x11b7ee;this['renderToSelectedView'](this[_0x51ee78(0x2b6)][_0x51ee78(0x217)]()['createView']());}}class RayTracer extends Renderer{constructor(_0x2185f4){const _0x4262dc=_0x11b7ee;super(_0x2185f4),this[_0x4262dc(0x2dd)]=null;}async['init'](){const _0x230c51=_0x11b7ee;if(!navigator[_0x230c51(0x2b2)])throw Error('WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.');const _0x2b71e4=await navigator[_0x230c51(0x2b2)][_0x230c51(0x20a)]();if(!_0x2b71e4)throw Error(_0x230c51(0x24d));this[_0x230c51(0x2b5)]=await _0x2b71e4['requestDevice'](),this['_context']=this[_0x230c51(0x241)]['getContext'](_0x230c51(0x255)),this[_0x230c51(0x229)]=_0x230c51(0x2c3),this['_context'][_0x230c51(0x24b)]({'device':this[_0x230c51(0x2b5)],'format':this[_0x230c51(0x229)]}),this['_shaderModule']=this[_0x230c51(0x2b5)]['createShaderModule']({'label':_0x230c51(0x204),'code':_0x230c51(0x253)}),this[_0x230c51(0x25d)]=this['_device'][_0x230c51(0x252)]({'label':_0x230c51(0x256),'size':0x8,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage['COPY_DST']}),this[_0x230c51(0x249)]=this[_0x230c51(0x2b5)][_0x230c51(0x2b1)]({'label':'Ray\x20Tracer\x20Pipeline','layout':'auto','vertex':{'module':this['_shaderModule'],'entryPoint':'vertexMain'},'fragment':{'module':this[_0x230c51(0x295)],'entryPoint':_0x230c51(0x238),'targets':[{'format':this[_0x230c51(0x229)]}]}}),this[_0x230c51(0x226)]=this[_0x230c51(0x2b5)][_0x230c51(0x211)]({'label':'Ray\x20Tracer\x20Sampler','magFilter':_0x230c51(0x247),'minFilter':'linear'}),this[_0x230c51(0x234)](),window[_0x230c51(0x28f)](_0x230c51(0x2a1),this[_0x230c51(0x234)][_0x230c51(0x227)](this));}[_0x11b7ee(0x234)](){const _0x84ae2b=_0x11b7ee,_0x505c58=window[_0x84ae2b(0x221)]||0x1,_0x18dcd8=window[_0x84ae2b(0x23e)]*_0x505c58,_0x4dab41=window[_0x84ae2b(0x2c5)]*_0x505c58,_0x31c6c6=_0x18dcd8/_0x4dab41;let _0x23c090={'width':0x200*_0x31c6c6,'height':0x200};this['_offScreenTexture']=this[_0x84ae2b(0x2b5)]['createTexture']({'size':_0x23c090,'format':this['_canvasFormat'],'usage':GPUTextureUsage[_0x84ae2b(0x1f1)]|GPUTextureUsage[_0x84ae2b(0x1f3)]}),this[_0x84ae2b(0x2dd)]&&(this[_0x84ae2b(0x2dd)][_0x84ae2b(0x21b)]=this[_0x84ae2b(0x2d0)][_0x84ae2b(0x2e1)],this[_0x84ae2b(0x2dd)][_0x84ae2b(0x22c)]=this['_offScreenTexture'][_0x84ae2b(0x276)],this[_0x84ae2b(0x2dd)][_0x84ae2b(0x2da)](),this[_0x84ae2b(0x2dd)]['createBindGroup'](this['_offScreenTexture'])),this['_bindGroup']=this[_0x84ae2b(0x2b5)][_0x84ae2b(0x206)]({'label':'Ray\x20Tracer\x20Renderer\x20Bind\x20Group','layout':this[_0x84ae2b(0x249)][_0x84ae2b(0x285)](0x0),'entries':[{'binding':0x0,'resource':this[_0x84ae2b(0x2d0)][_0x84ae2b(0x28e)]()},{'binding':0x1,'resource':this[_0x84ae2b(0x226)]},{'binding':0x2,'resource':{'buffer':this['_outputSizeBuffer']}}]}),super[_0x84ae2b(0x234)](),this[_0x84ae2b(0x2b5)][_0x84ae2b(0x205)][_0x84ae2b(0x1f9)](this[_0x84ae2b(0x25d)],0x0,new Float32Array([_0x18dcd8,_0x4dab41]));}async[_0x11b7ee(0x1ee)](_0x21eea4){const _0x54c3c0=_0x11b7ee;await _0x21eea4[_0x54c3c0(0x291)](),_0x21eea4[_0x54c3c0(0x21b)]=this[_0x54c3c0(0x2d0)][_0x54c3c0(0x2e1)],_0x21eea4['_imgHeight']=this['_offScreenTexture'][_0x54c3c0(0x276)],_0x21eea4[_0x54c3c0(0x2da)](),this['_tracer']=_0x21eea4,this[_0x54c3c0(0x2dd)][_0x54c3c0(0x206)](this[_0x54c3c0(0x2d0)]);}[_0x11b7ee(0x1e6)](){const _0x22dd53=_0x11b7ee;if(this[_0x22dd53(0x2dd)]){let _0x21e58c=this[_0x22dd53(0x2b5)][_0x22dd53(0x296)]();const _0x21baeb=_0x21e58c[_0x22dd53(0x1ec)]();this['_tracer'][_0x22dd53(0x21c)](_0x21baeb),_0x21baeb[_0x22dd53(0x2d1)](),this[_0x22dd53(0x2b5)][_0x22dd53(0x205)][_0x22dd53(0x278)]([_0x21e58c[_0x22dd53(0x26c)]()]);}let _0x32b92b=this[_0x22dd53(0x2b5)][_0x22dd53(0x296)]();const _0x3a23d0=_0x32b92b[_0x22dd53(0x26a)]({'colorAttachments':[{'view':this['_context'][_0x22dd53(0x217)]()[_0x22dd53(0x28e)](),'clearValue':this['_clearColor'],'loadOp':_0x22dd53(0x24f),'storeOp':_0x22dd53(0x244)}]});_0x3a23d0[_0x22dd53(0x22b)](this[_0x22dd53(0x249)]),_0x3a23d0[_0x22dd53(0x201)](0x0,this[_0x22dd53(0x246)]),_0x3a23d0[_0x22dd53(0x1e5)](0x6),_0x3a23d0[_0x22dd53(0x2d1)](),this[_0x22dd53(0x2b5)][_0x22dd53(0x205)][_0x22dd53(0x278)]([_0x32b92b[_0x22dd53(0x26c)]()]);}}function _0x1f18(_0x4c1c46,_0x1d4f46){const _0xb6d0f9=_0xb6d0();return _0x1f18=function(_0x1f18d8,_0x5362d4){_0x1f18d8=_0x1f18d8-0x1e1;let _0x230e32=_0xb6d0f9[_0x1f18d8];return _0x230e32;},_0x1f18(_0x4c1c46,_0x1d4f46);}class StandardTextObject{constructor(_0x17ba4b,_0x21f4f9=0x5,_0x39796b=_0x11b7ee(0x274)){const _0x3ee859=_0x11b7ee;this[_0x3ee859(0x22f)]=_0x39796b,this['_lineSpacing']=_0x21f4f9,this['_textCanvas']=document[_0x3ee859(0x27f)]('canvas'),this['_textContext']=this[_0x3ee859(0x2d5)]['getContext']('2d'),this[_0x3ee859(0x2aa)](_0x17ba4b),this['updateText'](_0x17ba4b),this[_0x3ee859(0x2d5)][_0x3ee859(0x2db)]['position']=_0x3ee859(0x2a6),this['_textCanvas']['style'][_0x3ee859(0x23d)]=_0x3ee859(0x23a),this[_0x3ee859(0x2d5)][_0x3ee859(0x2db)][_0x3ee859(0x284)]='10px',this[_0x3ee859(0x2d5)][_0x3ee859(0x2db)][_0x3ee859(0x232)]=_0x3ee859(0x1fb),document['body'][_0x3ee859(0x2ad)](this['_textCanvas']);}[_0x11b7ee(0x29d)](){const _0x50a0ab=_0x11b7ee;this[_0x50a0ab(0x2d5)][_0x50a0ab(0x236)]=!this[_0x50a0ab(0x2d5)][_0x50a0ab(0x236)];}[_0x11b7ee(0x2aa)](_0x822c98){const _0xc3c4a4=_0x11b7ee;this[_0xc3c4a4(0x1f7)]['font']=this[_0xc3c4a4(0x22f)],this[_0xc3c4a4(0x1f8)]=_0x822c98[_0xc3c4a4(0x29f)]('\x0a'),this[_0xc3c4a4(0x26f)]=Math[_0xc3c4a4(0x22d)](...this[_0xc3c4a4(0x1f8)][_0xc3c4a4(0x250)](_0x4a7e79=>this[_0xc3c4a4(0x1f7)][_0xc3c4a4(0x290)](_0x4a7e79)[_0xc3c4a4(0x2e1)]));const _0x2555ff=this[_0xc3c4a4(0x22f)][_0xc3c4a4(0x23b)](/(\d+)px/);_0x2555ff?this[_0xc3c4a4(0x222)]=parseInt(_0x2555ff[0x1],0xa):(this['_fontSize']=0x12,this[_0xc3c4a4(0x22f)]='18px\x20Arial'),this[_0xc3c4a4(0x2df)]=this[_0xc3c4a4(0x1f8)][_0xc3c4a4(0x200)]*(this[_0xc3c4a4(0x222)]+this[_0xc3c4a4(0x1fc)]),this['_paddingx']=0x5,this[_0xc3c4a4(0x269)]=0x3,this['_canvasWidth']=Math[_0xc3c4a4(0x22a)](this[_0xc3c4a4(0x26f)]+this[_0xc3c4a4(0x1e9)]*0x2),this[_0xc3c4a4(0x264)]=Math['ceil'](this[_0xc3c4a4(0x2df)]+this[_0xc3c4a4(0x269)]),this[_0xc3c4a4(0x2d5)][_0xc3c4a4(0x2e1)]=this[_0xc3c4a4(0x2a5)],this['_textCanvas'][_0xc3c4a4(0x276)]=this['_canvasHeight'],this[_0xc3c4a4(0x1f7)]['font']=this['_textFont'],this['_textContext'][_0xc3c4a4(0x215)]=_0xc3c4a4(0x23d);}['updateText'](_0x165e3b){const _0x24672c=_0x11b7ee;this[_0x24672c(0x1f8)]=_0x165e3b[_0x24672c(0x29f)]('\x0a'),this[_0x24672c(0x1f7)][_0x24672c(0x1ea)]=_0x24672c(0x20d),this[_0x24672c(0x1f7)][_0x24672c(0x2cd)](0x0,0x0,this[_0x24672c(0x2a5)],this[_0x24672c(0x264)]),this['_textContext']['fillRect'](0x0,0x0,this[_0x24672c(0x2a5)],this[_0x24672c(0x264)]),this[_0x24672c(0x1f7)][_0x24672c(0x1ea)]=_0x24672c(0x25b),this[_0x24672c(0x1f8)][_0x24672c(0x270)]((_0x34ff1e,_0x497923)=>{const _0x19d088=_0x24672c,_0x453242=this[_0x19d088(0x1e9)],_0x37f5be=this[_0x19d088(0x269)]+_0x497923*(this[_0x19d088(0x222)]+this[_0x19d088(0x1fc)]);this[_0x19d088(0x1f7)][_0x19d088(0x1e4)](_0x34ff1e,_0x453242,_0x37f5be);});}}class SceneObject{static ['_objectCnt']=0x0;constructor(_0x18d62a,_0x48cbc2){const _0xb25561=_0x11b7ee;if(this['constructor']==SceneObject)throw new Error(_0xb25561(0x2bb));this[_0xb25561(0x2b5)]=_0x18d62a,this[_0xb25561(0x229)]=_0x48cbc2,SceneObject[_0xb25561(0x2a8)]+=0x1;}[_0x11b7ee(0x28c)](){const _0x21f95e=_0x11b7ee;return this['constructor'][_0x21f95e(0x2cf)]+'\x20'+SceneObject[_0x21f95e(0x2a8)][_0x21f95e(0x23c)]();}async['init'](){const _0x14b4db=_0x11b7ee;await this[_0x14b4db(0x212)](),await this[_0x14b4db(0x214)](),await this[_0x14b4db(0x2b1)](),await this[_0x14b4db(0x2be)]();}async[_0x11b7ee(0x212)](){const _0x28929c=_0x11b7ee;throw new Error(_0x28929c(0x29e));}['updateGeometry'](){}[_0x11b7ee(0x2c6)](_0x19dbfc){return new Promise((_0x25f8f0,_0x29ec38)=>{const _0x251f23=_0x1f18,_0x2feed9=new XMLHttpRequest();_0x2feed9['open'](_0x251f23(0x1f5),_0x19dbfc),_0x2feed9['setRequestHeader']('Cache-Control',_0x251f23(0x271)),_0x2feed9[_0x251f23(0x261)]=function(){const _0x261371=_0x251f23;_0x2feed9[_0x261371(0x21e)]===XMLHttpRequest[_0x261371(0x220)]&&_0x2feed9[_0x261371(0x225)]===0xc8?_0x25f8f0(_0x2feed9['responseText']):_0x29ec38({'status':_0x2feed9[_0x261371(0x225)],'statusText':_0x2feed9[_0x261371(0x20e)]});},_0x2feed9['onerror']=function(){const _0x24ff70=_0x251f23;_0x29ec38({'status':_0x2feed9[_0x24ff70(0x225)],'statusText':_0x2feed9[_0x24ff70(0x20e)]});},_0x2feed9['send']();});}async[_0x11b7ee(0x214)](){const _0x4ba85b=_0x11b7ee;throw new Error(_0x4ba85b(0x279));}async[_0x11b7ee(0x2b1)](){const _0x164ad5=_0x11b7ee;throw new Error(_0x164ad5(0x259));}[_0x11b7ee(0x1e6)](_0x32ffe2){const _0x4dd079=_0x11b7ee;throw new Error(_0x4dd079(0x27b));}async['createComputePipeline'](){const _0x3170c0=_0x11b7ee;throw new Error(_0x3170c0(0x268));}['compute'](_0x59b121){const _0x50c996=_0x11b7ee;throw new Error(_0x50c996(0x1eb));}}class RayTracingObject extends SceneObject{async['createGeometry'](){}async['createShaders'](){const _0x4cf999=_0x11b7ee;let _0x8f6662=await this['loadShader'](_0x4cf999(0x298));this[_0x4cf999(0x295)]=this['_device'][_0x4cf999(0x210)]({'label':_0x4cf999(0x280)+this[_0x4cf999(0x28c)](),'code':_0x8f6662});}[_0x11b7ee(0x2da)](){}async[_0x11b7ee(0x2b1)](){}[_0x11b7ee(0x1e6)](_0xb29a60){}async['createComputePipeline'](){const _0x30acd5=_0x11b7ee;this[_0x30acd5(0x21a)]=this['_device'][_0x30acd5(0x2be)]({'label':_0x30acd5(0x1e1)+this['getName'](),'layout':'auto','compute':{'module':this['_shaderModule'],'entryPoint':_0x30acd5(0x216)}});}[_0x11b7ee(0x206)](_0x487398){const _0x24b851=_0x11b7ee;this['_bindGroup']=this[_0x24b851(0x2b5)][_0x24b851(0x206)]({'label':_0x24b851(0x202),'layout':this[_0x24b851(0x21a)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':_0x487398[_0x24b851(0x28e)]()}]}),this[_0x24b851(0x1ef)]=Math['ceil'](_0x487398[_0x24b851(0x2e1)]),this['_wgHeight']=Math[_0x24b851(0x22a)](_0x487398[_0x24b851(0x276)]);}[_0x11b7ee(0x21c)](_0x425295){const _0x71265b=_0x11b7ee;_0x425295[_0x71265b(0x22b)](this['_computePipeline']),_0x425295[_0x71265b(0x201)](0x0,this[_0x71265b(0x246)]),_0x425295['dispatchWorkgroups'](Math[_0x71265b(0x22a)](this[_0x71265b(0x1ef)]/0x10),Math['ceil'](this['_wgHeight']/0x10));}}class UnitCube{constructor(){const _0x254ddc=_0x11b7ee;this[_0x254ddc(0x2d7)]=new Float32Array(Array(0x10)[_0x254ddc(0x2e2)](0x0)),this[_0x254ddc(0x2d7)][0x0]=0x1,this[_0x254ddc(0x235)]=new Float32Array(Array(0x4)[_0x254ddc(0x2e2)](0x1)),this['_front']=new Float32Array([-0.5,-0.5,0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x254ddc(0x242)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,-0.5,0.5,-0.5,0x1]),this[_0x254ddc(0x2b9)]=new Float32Array([-0.5,-0.5,-0.5,0x1,-0.5,-0.5,0.5,0x1,-0.5,0.5,0.5,0x1,-0.5,0.5,-0.5,0x1]),this['_right']=new Float32Array([0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,0.5,0.5,0.5,0x1,0.5,0.5,-0.5,0x1]),this['_top']=new Float32Array([-0.5,0.5,-0.5,0x1,0.5,0.5,-0.5,0x1,0.5,0.5,0.5,0x1,-0.5,0.5,0.5,0x1]),this[_0x254ddc(0x28d)]=new Float32Array([-0.5,-0.5,-0.5,0x1,0.5,-0.5,-0.5,0x1,0.5,-0.5,0.5,0x1,-0.5,-0.5,0.5,0x1]);}[_0x11b7ee(0x267)](_0x4ff09d){for(let _0x389ffa=0x0;_0x389ffa<0x10;++_0x389ffa)this['_pose'][_0x389ffa]=_0x4ff09d[_0x389ffa];}}class UnitCubeSphere extends UnitCube{constructor(_0x23c19a=0x3){const _0xdf3c3b=_0x11b7ee;super(),this[_0xdf3c3b(0x2c2)]=[][_0xdf3c3b(0x294)](Array['from'](this[_0xdf3c3b(0x20c)]),Array[_0xdf3c3b(0x2a7)](this['_back']),Array['from'](this[_0xdf3c3b(0x2b9)]),Array[_0xdf3c3b(0x2a7)](this['_right']),Array['from'](this[_0xdf3c3b(0x288)]),Array['from'](this[_0xdf3c3b(0x28d)]));let _0x5c6a5e=[],_0x4f4db6=_0x4a8e69=>{const _0x44b446=_0xdf3c3b;let _0x88a17e=Math[_0x44b446(0x1fa)](_0x4a8e69[0x0]*_0x4a8e69[0x0]+_0x4a8e69[0x1]*_0x4a8e69[0x1]+_0x4a8e69[0x2]*_0x4a8e69[0x2]);return[_0x4a8e69[0x0]/_0x88a17e*0.5,_0x4a8e69[0x1]/_0x88a17e*0.5,_0x4a8e69[0x2]/_0x88a17e*0.5];};for(let _0x498d0a=0x0;_0x498d0a<this[_0xdf3c3b(0x2c2)][_0xdf3c3b(0x200)];_0x498d0a+=0x4){let _0x3567bc=_0x4f4db6([this[_0xdf3c3b(0x2c2)][_0x498d0a+0x0],this['_faces'][_0x498d0a+0x1],this['_faces'][_0x498d0a+0x2]]);this[_0xdf3c3b(0x2c2)][_0x498d0a+0x0]=_0x3567bc[0x0],this[_0xdf3c3b(0x2c2)][_0x498d0a+0x1]=_0x3567bc[0x1],this[_0xdf3c3b(0x2c2)][_0x498d0a+0x2]=_0x3567bc[0x2];}for(let _0x4068ba=0x0;_0x4068ba<_0x23c19a;++_0x4068ba){for(let _0x45536d=0x0;_0x45536d<this[_0xdf3c3b(0x2c2)][_0xdf3c3b(0x200)];_0x45536d+=0x10){let _0x1b24ee=[this['_faces'][_0x45536d+0x0],this[_0xdf3c3b(0x2c2)][_0x45536d+0x1],this[_0xdf3c3b(0x2c2)][_0x45536d+0x2]],_0x266e44=[this['_faces'][_0x45536d+0x4],this['_faces'][_0x45536d+0x5],this['_faces'][_0x45536d+0x6]],_0x40b087=[this[_0xdf3c3b(0x2c2)][_0x45536d+0x8],this[_0xdf3c3b(0x2c2)][_0x45536d+0x9],this[_0xdf3c3b(0x2c2)][_0x45536d+0xa]],_0x136f7e=[this[_0xdf3c3b(0x2c2)][_0x45536d+0xc],this[_0xdf3c3b(0x2c2)][_0x45536d+0xd],this['_faces'][_0x45536d+0xe]],_0x561d4c=_0x4f4db6([(_0x136f7e[0x0]+_0x40b087[0x0])/0x2,(_0x136f7e[0x1]+_0x40b087[0x1])/0x2,(_0x136f7e[0x2]+_0x40b087[0x2])/0x2]),_0x107203=_0x4f4db6([(_0x1b24ee[0x0]+_0x136f7e[0x0])/0x2,(_0x1b24ee[0x1]+_0x136f7e[0x1])/0x2,(_0x1b24ee[0x2]+_0x136f7e[0x2])/0x2]),_0x272655=_0x4f4db6([(_0x1b24ee[0x0]+_0x266e44[0x0])/0x2,(_0x1b24ee[0x1]+_0x266e44[0x1])/0x2,(_0x1b24ee[0x2]+_0x266e44[0x2])/0x2]),_0x54713d=_0x4f4db6([(_0x266e44[0x0]+_0x40b087[0x0])/0x2,(_0x266e44[0x1]+_0x40b087[0x1])/0x2,(_0x266e44[0x2]+_0x40b087[0x2])/0x2]),_0x598b1a=_0x4f4db6([(_0x272655[0x0]+_0x561d4c[0x0])/0x2,(_0x272655[0x1]+_0x561d4c[0x1])/0x2,(_0x272655[0x2]+_0x561d4c[0x2])/0x2]);_0x5c6a5e[_0xdf3c3b(0x239)](..._0x1b24ee,0x1,..._0x272655,0x1,..._0x598b1a,0x1,..._0x107203,0x1),_0x5c6a5e[_0xdf3c3b(0x239)](..._0x272655,0x1,..._0x266e44,0x1,..._0x54713d,0x1,..._0x598b1a,0x1),_0x5c6a5e['push'](..._0x598b1a,0x1,..._0x54713d,0x1,..._0x40b087,0x1,..._0x561d4c,0x1),_0x5c6a5e[_0xdf3c3b(0x239)](..._0x107203,0x1,..._0x598b1a,0x1,..._0x561d4c,0x1,..._0x136f7e,0x1);}this[_0xdf3c3b(0x2c2)]=_0x5c6a5e,_0x5c6a5e=[];}this['_faces']=new Float32Array(this['_faces']);}}function _0xb6d0(){const _0x39bcaa=['GET','rotateZ','_textContext','_lines','writeBuffer','sqrt','1px\x20solid\x20red','_lineSpacing','extractPoint','createPlane','updateText','length','setBindGroup','Ray\x20Tracing\x20Bind\x20Group','_clearColor','Ray\x20Tracer\x20Shader','queue','createBindGroup','_sphereBuffer','UNIFORM','right','requestAdapter','normalizeMotor','_front','rgba(1,\x201,\x201,\x200.5)','statusText','catch','createShaderModule','createSampler','createGeometry','</br>','createShaders','textBaseline','computeMain','getCurrentTexture','updateSpherePose','fps:\x20','_computePipeline','_imgWidth','compute','mouseenter','readyState','rotateY','DONE','devicePixelRatio','_fontSize','_bindGroupLayout','createTranslator','status','_sampler','bind','createPoint','_canvasFormat','ceil','setPipeline','_imgHeight','max','log','_textFont','225863LgqgiS','updateCubeScales','border','updateCameraFocal','resizeCanvas','_scales','hidden','_sphere','fragmentMain','push','10px','match','toString','top','innerWidth','createRotor','STORAGE','_canvas','_back','_camera','store','innerHTML','_bindGroup','linear','extractRotor','_pipeline','_showTexture','configure','applyMotorToPoint','Couldn\x27t\x20request\x20WebGPU\x20adapter.','getPreferredCanvasFormat','clear','map','Ray\x20Trace\x20Box\x20Layout\x20','createBuffer','\x0a\x20\x20\x20\x20\x20\x20@vertex\x0a\x20\x20\x20\x20\x20\x20fn\x20vertexMain(@builtin(vertex_index)\x20vIdx:\x20u32)\x20->\x20@builtin(position)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20var\x20pos\x20=\x20array<vec2f,\x206>(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x20-1),\x20vec2f(1,\x20-1),\x20vec2f(-1,\x201),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2f(-1,\x201),\x20vec2f(1,\x20-1),\x20vec2f(1,\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20);\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20vec4f(pos[vIdx],\x200,\x201);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(0)\x20var\x20inTexture:\x20texture_2d<f32>;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(1)\x20var\x20inSampler:\x20sampler;\x0a\x20\x20\x20\x20\x20\x20@group(0)\x20@binding(2)\x20var<uniform>\x20imgSize:\x20vec2f;\x0a\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20@fragment\x0a\x20\x20\x20\x20\x20\x20fn\x20fragmentMain(@builtin(position)\x20fragCoord:\x20vec4f)\x20->\x20@location(0)\x20vec4f\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20let\x20uv\x20=\x20fragCoord.xy\x20/\x20imgSize;\x20//\x20vec2f(textureDimensions(inTexture,\x200));\x0a\x20\x20\x20\x20\x20\x20\x20\x20return\x20textureSample(inTexture,\x20inSampler,\x20uv);\x0a\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','updateSphereScales','webgpu','Ray\x20Tracer\x20output\x20size\x20buffer','extractTranslator','710735uZhXsM','Method\x20\x27createRenderPipeline()\x27\x20must\x20be\x20implemented.','dispatchWorkgroups','white','Box\x20','_outputSizeBuffer','touchend','Ray\x20Trace\x20Box\x20Pipeline\x20Layout','key','onload','_box','410MnhTAx','_canvasHeight','Ray\x20Trace\x20Box\x20Orthogonal\x20Pipeline\x20','createPipelineLayout','updatePose','Method\x20\x27createComputePipeline()\x27\x20must\x20be\x20implemented.','_paddingtop','beginRenderPass','touchmove','finish','applyMotor','Ray\x20Trace\x20Box\x20Bind\x20Group','_width','forEach','no-cache,\x20no-store,\x20max-age=0','WebGPU\x20is\x20not\x20supported\x20in\x20this\x20browser.','1096656GyBtIm','18px\x20Arial','_wgHeight','height','keydown','submit','Method\x20\x27createShaders()\x27\x20must\x20be\x20implemented.','motorNorm','Method\x20\x27render(pass)\x27\x20must\x20be\x20implemented.','abs','rotateX','moveY','createElement','\x20Shader\x20','_isProjective','_focal','cos','left','getBindGroupLayout','/shaders/optimized_tracedemobox.wgsl','mouseup','_top','308468rZTQAo','mousedown','canvas','getName','_down','createView','addEventListener','measureText','init','renderCanvas','COPY_DST','concat','_shaderModule','createCommandEncoder','createLine','/shaders/optimized_tracenothing.wgsl','moveX','4FApZNo','transformOrigin','COMPUTE','toggleVisibility','Method\x20\x27createGeometry()\x27\x20must\x20be\x20implemented.','split','resetPose','resize','isInside','initial','touchstart','_canvasWidth','absolute','from','_objectCnt','appendSceneObject','updateTextRegion','_objects','createDir','appendChild','pointer-events','applyMotorToDir','Sphere\x20','createRenderPipeline','gpu','1997758zbfzIA','read-only-storage','_device','_context','reverse','499047tmbTYN','_left','_resolutions','Abstract\x20classes\x20can\x27t\x20be\x20instantiated.','2eTIRdr','_cube','createComputePipeline','requestDevice','updateBoxPose','sin','_faces','rgba8unorm','updateCubePose','innerHeight','loadShader','updateBoxScales','setProperty','moveZ','1735785nSvWsJ','userAgent','Camera\x20','clearRect','geometricProduct','name','_offScreenTexture','end','remove','_cameraBuffer','mousemove','_textCanvas','body','_pose','_right','byteLength','updateGeometry','style','linePlaneIntersection','_tracer','now','_height','_computeProjectivePipeline','width','fill','none','Ray\x20Tracing\x20Pipeline\x20','computeOrthogonalMain','createPlaneFromPoints','fillText','draw','render','getElementById','mouseleave','_paddingx','fillStyle','Method\x20\x27compute(pass)\x27\x20must\x20be\x20implemented.','beginComputePass','6Aslszp','setTracerObject','_wgWidth','_cubeOffset','TEXTURE_BINDING','updateCameraPose','STORAGE_BINDING','_boxBuffer'];_0xb6d0=function(){return _0x39bcaa;};return _0xb6d0();}class RayTracingDemoSceneObject extends RayTracingObject{constructor(_0x2acbc2,_0x115132,_0x3d5122,_0xa931e0=!![]){const _0xd9d191=_0x11b7ee;super(_0x2acbc2,_0x115132),this[_0xd9d191(0x262)]=new UnitCube(),this[_0xd9d191(0x2bd)]=new UnitCube(),this[_0xd9d191(0x237)]=new UnitCubeSphere(),this[_0xd9d191(0x243)]=_0x3d5122,this[_0xd9d191(0x24a)]=_0xa931e0;}async[_0x11b7ee(0x212)](){const _0x379264=_0x11b7ee;this[_0x379264(0x2d3)]=this['_device'][_0x379264(0x252)]({'label':_0x379264(0x2cc)+this[_0x379264(0x28c)](),'size':this['_camera']['_pose'][_0x379264(0x2d9)]+this[_0x379264(0x243)][_0x379264(0x282)]['byteLength']+this[_0x379264(0x243)][_0x379264(0x2ba)][_0x379264(0x2d9)],'usage':GPUBufferUsage[_0x379264(0x208)]|GPUBufferUsage[_0x379264(0x293)]}),this['_device'][_0x379264(0x205)][_0x379264(0x1f9)](this['_cameraBuffer'],0x0,this[_0x379264(0x243)]['_pose']),this[_0x379264(0x2b5)][_0x379264(0x205)]['writeBuffer'](this[_0x379264(0x2d3)],this['_camera'][_0x379264(0x2d7)][_0x379264(0x2d9)],this[_0x379264(0x243)][_0x379264(0x282)]),this[_0x379264(0x2b5)]['queue'][_0x379264(0x1f9)](this['_cameraBuffer'],this[_0x379264(0x243)][_0x379264(0x2d7)][_0x379264(0x2d9)]+this[_0x379264(0x243)]['_focal']['byteLength'],this[_0x379264(0x243)][_0x379264(0x2ba)]),this[_0x379264(0x1f4)]=this[_0x379264(0x2b5)][_0x379264(0x252)]({'label':_0x379264(0x25c)+this[_0x379264(0x28c)](),'size':(this['_box'][_0x379264(0x2d7)][_0x379264(0x2d9)]+this[_0x379264(0x262)]['_scales'][_0x379264(0x2d9)]+this[_0x379264(0x262)][_0x379264(0x288)][_0x379264(0x2d9)]*0x6)*0x2,'usage':GPUBufferUsage[_0x379264(0x240)]|GPUBufferUsage['COPY_DST']});let _0x349c35=0x0;this[_0x379264(0x2b5)][_0x379264(0x205)]['writeBuffer'](this['_boxBuffer'],_0x349c35,this[_0x379264(0x262)][_0x379264(0x2d7)]),_0x349c35+=this['_box'][_0x379264(0x2d7)]['byteLength'],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x262)]['_scales']),_0x349c35+=this[_0x379264(0x262)][_0x379264(0x235)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this['_box']['_front']),_0x349c35+=this[_0x379264(0x262)][_0x379264(0x20c)]['byteLength'],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x262)][_0x379264(0x242)]),_0x349c35+=this['_box'][_0x379264(0x242)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)]['writeBuffer'](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x262)][_0x379264(0x2b9)]),_0x349c35+=this['_box'][_0x379264(0x2b9)]['byteLength'],this['_device'][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x262)]['_right']),_0x349c35+=this[_0x379264(0x262)][_0x379264(0x2d8)]['byteLength'],this['_device'][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this['_box'][_0x379264(0x288)]),_0x349c35+=this[_0x379264(0x262)][_0x379264(0x288)]['byteLength'],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x262)][_0x379264(0x28d)]),_0x349c35+=this[_0x379264(0x262)]['_down']['byteLength'],this[_0x379264(0x1f0)]=_0x349c35,this[_0x379264(0x2b5)][_0x379264(0x205)]['writeBuffer'](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x2bd)]['_pose']),_0x349c35+=this['_cube'][_0x379264(0x2d7)][_0x379264(0x2d9)],this['_device'][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x2bd)]['_scales']),_0x349c35+=this['_cube'][_0x379264(0x235)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this['_boxBuffer'],_0x349c35,this[_0x379264(0x2bd)]['_front']),_0x349c35+=this[_0x379264(0x2bd)][_0x379264(0x20c)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x2bd)][_0x379264(0x242)]),_0x349c35+=this[_0x379264(0x2bd)][_0x379264(0x242)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this['_cube']['_left']),_0x349c35+=this[_0x379264(0x2bd)][_0x379264(0x2b9)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this['_cube'][_0x379264(0x2d8)]),_0x349c35+=this[_0x379264(0x2bd)][_0x379264(0x2d8)][_0x379264(0x2d9)],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x2bd)][_0x379264(0x288)]),_0x349c35+=this[_0x379264(0x2bd)][_0x379264(0x288)][_0x379264(0x2d9)],this[_0x379264(0x2b5)]['queue']['writeBuffer'](this[_0x379264(0x1f4)],_0x349c35,this[_0x379264(0x2bd)][_0x379264(0x28d)]),this[_0x379264(0x207)]=this[_0x379264(0x2b5)][_0x379264(0x252)]({'label':_0x379264(0x2b0)+this[_0x379264(0x28c)](),'size':this[_0x379264(0x237)][_0x379264(0x2d7)][_0x379264(0x2d9)]+this[_0x379264(0x237)]['_scales'][_0x379264(0x2d9)]+this[_0x379264(0x237)][_0x379264(0x2c2)][_0x379264(0x2d9)],'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x379264(0x293)]}),_0x349c35=0x0,this['_device'][_0x379264(0x205)][_0x379264(0x1f9)](this[_0x379264(0x207)],_0x349c35,this['_sphere'][_0x379264(0x2d7)]),_0x349c35+=this[_0x379264(0x237)][_0x379264(0x2d7)]['byteLength'],this[_0x379264(0x2b5)][_0x379264(0x205)][_0x379264(0x1f9)](this['_sphereBuffer'],_0x349c35,this['_sphere']['_scales']),_0x349c35+=this[_0x379264(0x237)][_0x379264(0x235)]['byteLength'],this['_device']['queue'][_0x379264(0x1f9)](this[_0x379264(0x207)],_0x349c35,this[_0x379264(0x237)][_0x379264(0x2c2)]);}[_0x11b7ee(0x2da)](){const _0x680aab=_0x11b7ee;this['_camera']['updateSize'](this[_0x680aab(0x21b)],this[_0x680aab(0x22c)]),this['_device'][_0x680aab(0x205)][_0x680aab(0x1f9)](this['_cameraBuffer'],this[_0x680aab(0x243)]['_pose'][_0x680aab(0x2d9)]+this['_camera']['_focal'][_0x680aab(0x2d9)],this[_0x680aab(0x243)][_0x680aab(0x2ba)]);}[_0x11b7ee(0x2c0)](){const _0x2e737b=_0x11b7ee;this[_0x2e737b(0x2b5)][_0x2e737b(0x205)][_0x2e737b(0x1f9)](this[_0x2e737b(0x1f4)],0x0,this['_box'][_0x2e737b(0x2d7)]);}[_0x11b7ee(0x2c7)](){const _0xcef7a3=_0x11b7ee;this['_device'][_0xcef7a3(0x205)][_0xcef7a3(0x1f9)](this[_0xcef7a3(0x1f4)],this[_0xcef7a3(0x262)][_0xcef7a3(0x2d7)]['byteLength'],this[_0xcef7a3(0x262)][_0xcef7a3(0x235)]);}[_0x11b7ee(0x2c4)](){const _0x940441=_0x11b7ee;this[_0x940441(0x2b5)][_0x940441(0x205)]['writeBuffer'](this['_boxBuffer'],this[_0x940441(0x1f0)],this['_cube'][_0x940441(0x2d7)]);}[_0x11b7ee(0x231)](){const _0x8e6e0c=_0x11b7ee;this[_0x8e6e0c(0x2b5)]['queue'][_0x8e6e0c(0x1f9)](this[_0x8e6e0c(0x1f4)],this[_0x8e6e0c(0x1f0)]+this['_cube'][_0x8e6e0c(0x2d7)][_0x8e6e0c(0x2d9)],this[_0x8e6e0c(0x2bd)]['_scales']);}['updateSpherePose'](){const _0x2b516b=_0x11b7ee;this[_0x2b516b(0x2b5)][_0x2b516b(0x205)][_0x2b516b(0x1f9)](this['_sphereBuffer'],0x0,this[_0x2b516b(0x237)][_0x2b516b(0x2d7)]);}[_0x11b7ee(0x254)](){const _0x7342ca=_0x11b7ee;this[_0x7342ca(0x2b5)][_0x7342ca(0x205)][_0x7342ca(0x1f9)](this['_sphereBuffer'],this['_sphere'][_0x7342ca(0x2d7)][_0x7342ca(0x2d9)],this['_sphere'][_0x7342ca(0x235)]);}['updateCameraPose'](){const _0x1ba9d4=_0x11b7ee;this[_0x1ba9d4(0x2b5)][_0x1ba9d4(0x205)]['writeBuffer'](this[_0x1ba9d4(0x2d3)],0x0,this[_0x1ba9d4(0x243)]['_pose']);}[_0x11b7ee(0x233)](){const _0xeb1f91=_0x11b7ee;this['_device'][_0xeb1f91(0x205)][_0xeb1f91(0x1f9)](this['_cameraBuffer'],this[_0xeb1f91(0x243)]['_pose']['byteLength'],this['_camera'][_0xeb1f91(0x282)]);}async['createShaders'](){const _0x3b34b3=_0x11b7ee;let _0x4c33a0=await this['loadShader'](_0x3b34b3(0x286));this[_0x3b34b3(0x295)]=this[_0x3b34b3(0x2b5)]['createShaderModule']({'label':'\x20Shader\x20'+this['getName'](),'code':_0x4c33a0}),this[_0x3b34b3(0x223)]=this['_device']['createBindGroupLayout']({'label':_0x3b34b3(0x251)+this[_0x3b34b3(0x28c)](),'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x3b34b3(0x29c)],'buffer':{}},{'binding':0x1,'visibility':GPUShaderStage[_0x3b34b3(0x29c)],'buffer':{'type':_0x3b34b3(0x2b4)}},{'binding':0x2,'visibility':GPUShaderStage['COMPUTE'],'storageTexture':{'format':this[_0x3b34b3(0x229)]}},{'binding':0x3,'visibility':GPUShaderStage[_0x3b34b3(0x29c)],'buffer':{'type':'read-only-storage'}}]}),this['_pipelineLayout']=this[_0x3b34b3(0x2b5)][_0x3b34b3(0x266)]({'label':_0x3b34b3(0x25f),'bindGroupLayouts':[this[_0x3b34b3(0x223)]]});}async[_0x11b7ee(0x2be)](){const _0x1926b8=_0x11b7ee;this[_0x1926b8(0x21a)]=this[_0x1926b8(0x2b5)][_0x1926b8(0x2be)]({'label':_0x1926b8(0x265)+this[_0x1926b8(0x28c)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x1926b8(0x295)],'entryPoint':_0x1926b8(0x1e2)}}),this[_0x1926b8(0x2e0)]=this[_0x1926b8(0x2b5)][_0x1926b8(0x2be)]({'label':'Ray\x20Trace\x20Box\x20Projective\x20Pipeline\x20'+this[_0x1926b8(0x28c)](),'layout':this['_pipelineLayout'],'compute':{'module':this[_0x1926b8(0x295)],'entryPoint':'computeProjectiveMain'}});}[_0x11b7ee(0x206)](_0x53cc32){const _0x5b1ecc=_0x11b7ee;this[_0x5b1ecc(0x246)]=this['_device'][_0x5b1ecc(0x206)]({'label':_0x5b1ecc(0x26e),'layout':this[_0x5b1ecc(0x21a)][_0x5b1ecc(0x285)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x5b1ecc(0x2d3)]}},{'binding':0x1,'resource':{'buffer':this['_boxBuffer']}},{'binding':0x2,'resource':_0x53cc32[_0x5b1ecc(0x28e)]()},{'binding':0x3,'resource':{'buffer':this[_0x5b1ecc(0x207)]}}]}),this['_wgWidth']=Math[_0x5b1ecc(0x22a)](_0x53cc32[_0x5b1ecc(0x2e1)]),this[_0x5b1ecc(0x275)]=Math[_0x5b1ecc(0x22a)](_0x53cc32[_0x5b1ecc(0x276)]),console[_0x5b1ecc(0x22e)](_0x53cc32['width'],_0x53cc32[_0x5b1ecc(0x276)]);}[_0x11b7ee(0x21c)](_0xa88f68){const _0x3fd1f3=_0x11b7ee;this[_0x3fd1f3(0x243)]?.[_0x3fd1f3(0x281)]?_0xa88f68[_0x3fd1f3(0x22b)](this[_0x3fd1f3(0x2e0)]):_0xa88f68[_0x3fd1f3(0x22b)](this['_computePipeline']),_0xa88f68['setBindGroup'](0x0,this[_0x3fd1f3(0x246)]),_0xa88f68[_0x3fd1f3(0x25a)](Math[_0x3fd1f3(0x22a)](this[_0x3fd1f3(0x1ef)]/0x10),Math[_0x3fd1f3(0x22a)](this[_0x3fd1f3(0x275)]/0x10));}}class PGA3D{static[_0x11b7ee(0x2ce)](_0x406452,_0x47230f){return[_0x406452[0x0]*_0x47230f[0x0]-_0x406452[0x1]*_0x47230f[0x1]-_0x406452[0x2]*_0x47230f[0x2]-_0x406452[0x3]*_0x47230f[0x3]-_0x406452[0x7]*_0x47230f[0x7]+_0x406452[0xb]*_0x47230f[0xb]+_0x406452[0xc]*_0x47230f[0xc]+_0x406452[0xd]*_0x47230f[0xd],_0x406452[0x0]*_0x47230f[0x1]+_0x406452[0x1]*_0x47230f[0x0]-_0x406452[0x2]*_0x47230f[0x3]+_0x406452[0x3]*_0x47230f[0x2]+_0x406452[0x7]*_0x47230f[0xd]+_0x406452[0xb]*_0x47230f[0xc]-_0x406452[0xc]*_0x47230f[0xb]+_0x406452[0xd]*_0x47230f[0x7],_0x406452[0x0]*_0x47230f[0x2]+_0x406452[0x1]*_0x47230f[0x3]+_0x406452[0x2]*_0x47230f[0x0]-_0x406452[0x3]*_0x47230f[0x1]-_0x406452[0x7]*_0x47230f[0xc]+_0x406452[0xb]*_0x47230f[0xd]-_0x406452[0xc]*_0x47230f[0x7]-_0x406452[0xd]*_0x47230f[0xb],_0x406452[0x0]*_0x47230f[0x3]-_0x406452[0x1]*_0x47230f[0x2]+_0x406452[0x2]*_0x47230f[0x1]+_0x406452[0x3]*_0x47230f[0x0]+_0x406452[0x7]*_0x47230f[0xb]+_0x406452[0xb]*_0x47230f[0x7]+_0x406452[0xc]*_0x47230f[0xd]-_0x406452[0xd]*_0x47230f[0xc],_0x406452[0x0]*_0x47230f[0x4]+_0x406452[0x1]*_0x47230f[0x5]+_0x406452[0x2]*_0x47230f[0x6]-_0x406452[0x3]*_0x47230f[0xf]+_0x406452[0x4]*_0x47230f[0x0]-_0x406452[0x5]*_0x47230f[0x1]-_0x406452[0x6]*_0x47230f[0x2]+_0x406452[0x7]*_0x47230f[0xa]+_0x406452[0x8]*_0x47230f[0xc]+_0x406452[0x9]*_0x47230f[0xd]-_0x406452[0xa]*_0x47230f[0x7]-_0x406452[0xb]*_0x47230f[0xe]+_0x406452[0xc]*_0x47230f[0x8]+_0x406452[0xd]*_0x47230f[0x9]+_0x406452[0xe]*_0x47230f[0xb]-_0x406452[0xf]*_0x47230f[0x3],_0x406452[0x0]*_0x47230f[0x5]-_0x406452[0x1]*_0x47230f[0x4]+_0x406452[0x2]*_0x47230f[0xf]+_0x406452[0x3]*_0x47230f[0x6]+_0x406452[0x4]*_0x47230f[0x1]+_0x406452[0x5]*_0x47230f[0x0]-_0x406452[0x6]*_0x47230f[0x3]-_0x406452[0x7]*_0x47230f[0x9]-_0x406452[0x8]*_0x47230f[0xb]+_0x406452[0x9]*_0x47230f[0x7]+_0x406452[0xa]*_0x47230f[0xc]-_0x406452[0xb]*_0x47230f[0x8]-_0x406452[0xc]*_0x47230f[0xe]+_0x406452[0xd]*_0x47230f[0xa]+_0x406452[0xe]*_0x47230f[0xc]+_0x406452[0xf]*_0x47230f[0x2],_0x406452[0x0]*_0x47230f[0x6]-_0x406452[0x1]*_0x47230f[0xf]-_0x406452[0x2]*_0x47230f[0x4]-_0x406452[0x3]*_0x47230f[0x5]+_0x406452[0x4]*_0x47230f[0x2]+_0x406452[0x5]*_0x47230f[0x3]+_0x406452[0x6]*_0x47230f[0x0]+_0x406452[0x7]*_0x47230f[0x8]-_0x406452[0x8]*_0x47230f[0x7]-_0x406452[0x9]*_0x47230f[0xb]-_0x406452[0xa]*_0x47230f[0xc]-_0x406452[0xb]*_0x47230f[0x9]-_0x406452[0xc]*_0x47230f[0xa]-_0x406452[0xd]*_0x47230f[0xe]+_0x406452[0xe]*_0x47230f[0xd]-_0x406452[0xf]*_0x47230f[0x1],_0x406452[0x0]*_0x47230f[0x7]+_0x406452[0x1]*_0x47230f[0xd]-_0x406452[0x2]*_0x47230f[0xc]+_0x406452[0x3]*_0x47230f[0xb]+_0x406452[0x7]*_0x47230f[0x0]+_0x406452[0xb]*_0x47230f[0x3]-_0x406452[0xc]*_0x47230f[0x2]+_0x406452[0xd]*_0x47230f[0x1],_0x406452[0x0]*_0x47230f[0x8]+_0x406452[0x1]*_0x47230f[0xe]-_0x406452[0x2]*_0x47230f[0xa]+_0x406452[0x3]*_0x47230f[0x9]+_0x406452[0x4]*_0x47230f[0xc]-_0x406452[0x5]*_0x47230f[0xb]+_0x406452[0x6]*_0x47230f[0x7]-_0x406452[0x7]*_0x47230f[0x6]+_0x406452[0x8]*_0x47230f[0x0]-_0x406452[0x9]*_0x47230f[0x3]+_0x406452[0xa]*_0x47230f[0x2]-_0x406452[0xb]*_0x47230f[0x5]+_0x406452[0xc]*_0x47230f[0x4]-_0x406452[0xd]*_0x47230f[0xf]+_0x406452[0xe]*_0x47230f[0x1]+_0x406452[0xf]*_0x47230f[0xd],_0x406452[0x0]*_0x47230f[0x9]+_0x406452[0x1]*_0x47230f[0xa]+_0x406452[0x2]*_0x47230f[0xe]-_0x406452[0x3]*_0x47230f[0x8]+_0x406452[0x4]*_0x47230f[0xd]-_0x406452[0x5]*_0x47230f[0x7]-_0x406452[0x6]*_0x47230f[0xb]+_0x406452[0x7]*_0x47230f[0x5]+_0x406452[0x8]*_0x47230f[0x3]+_0x406452[0x9]*_0x47230f[0x0]-_0x406452[0xa]*_0x47230f[0x1]-_0x406452[0xb]*_0x47230f[0x6]+_0x406452[0xc]*_0x47230f[0xf]+_0x406452[0xd]*_0x47230f[0x4]+_0x406452[0xe]*_0x47230f[0x2]-_0x406452[0xf]*_0x47230f[0xc],_0x406452[0x0]*_0x47230f[0xa]-_0x406452[0x1]*_0x47230f[0x9]+_0x406452[0x2]*_0x47230f[0x8]+_0x406452[0x3]*_0x47230f[0xe]+_0x406452[0x4]*_0x47230f[0x7]+_0x406452[0x5]*_0x47230f[0xd]-_0x406452[0x6]*_0x47230f[0xc]-_0x406452[0x7]*_0x47230f[0x4]-_0x406452[0x8]*_0x47230f[0x2]+_0x406452[0x9]*_0x47230f[0x1]+_0x406452[0xa]*_0x47230f[0x0]-_0x406452[0xb]*_0x47230f[0xf]-_0x406452[0xc]*_0x47230f[0x6]+_0x406452[0xd]*_0x47230f[0x5]+_0x406452[0xe]*_0x47230f[0x3]+_0x406452[0xf]*_0x47230f[0xb],_0x406452[0x0]*_0x47230f[0xb]+_0x406452[0x1]*_0x47230f[0xc]+_0x406452[0x2]*_0x47230f[0xd]-_0x406452[0x3]*_0x47230f[0x7]-_0x406452[0x7]*_0x47230f[0x3]+_0x406452[0xb]*_0x47230f[0x0]-_0x406452[0xc]*_0x47230f[0x1]-_0x406452[0xd]*_0x47230f[0x2],_0x406452[0x0]*_0x47230f[0xc]-_0x406452[0x1]*_0x47230f[0xb]+_0x406452[0x2]*_0x47230f[0x7]+_0x406452[0x3]*_0x47230f[0xd]+_0x406452[0x7]*_0x47230f[0x2]+_0x406452[0xb]*_0x47230f[0x1]+_0x406452[0xc]*_0x47230f[0x0]-_0x406452[0xd]*_0x47230f[0x3],_0x406452[0x0]*_0x47230f[0xd]-_0x406452[0x1]*_0x47230f[0x7]-_0x406452[0x2]*_0x47230f[0xb]-_0x406452[0x3]*_0x47230f[0xc]-_0x406452[0x7]*_0x47230f[0x1]+_0x406452[0xb]*_0x47230f[0x2]+_0x406452[0xc]*_0x47230f[0x3]+_0x406452[0xd]*_0x47230f[0x0],_0x406452[0x0]*_0x47230f[0xe]-_0x406452[0x1]*_0x47230f[0x8]-_0x406452[0x2]*_0x47230f[0x9]-_0x406452[0x3]*_0x47230f[0xa]+_0x406452[0x4]*_0x47230f[0xb]+_0x406452[0x5]*_0x47230f[0xc]+_0x406452[0x6]*_0x47230f[0xd]+_0x406452[0x7]*_0x47230f[0xf]-_0x406452[0x8]*_0x47230f[0x1]-_0x406452[0x9]*_0x47230f[0x2]-_0x406452[0xa]*_0x47230f[0x3]-_0x406452[0xb]*_0x47230f[0x4]-_0x406452[0xc]*_0x47230f[0x5]-_0x406452[0xd]*_0x47230f[0x6]+_0x406452[0xe]*_0x47230f[0x0]-_0x406452[0xf]*_0x47230f[0x7],_0x406452[0x0]*_0x47230f[0xf]+_0x406452[0x1]*_0x47230f[0x6]-_0x406452[0x2]*_0x47230f[0x5]+_0x406452[0x3]*_0x47230f[0x4]+_0x406452[0x4]*_0x47230f[0x3]-_0x406452[0x5]*_0x47230f[0x2]+_0x406452[0x6]*_0x47230f[0x1]-_0x406452[0x7]*_0x47230f[0xe]+_0x406452[0x8]*_0x47230f[0xd]-_0x406452[0x9]*_0x47230f[0xc]+_0x406452[0xa]*_0x47230f[0xb]-_0x406452[0xb]*_0x47230f[0xa]+_0x406452[0xc]*_0x47230f[0x9]-_0x406452[0xd]*_0x47230f[0x8]+_0x406452[0xe]*_0x47230f[0x7]+_0x406452[0xf]*_0x47230f[0x0]];}static[_0x11b7ee(0x2b7)](_0xcc2f50){return[_0xcc2f50[0x0],-_0xcc2f50[0x1],-_0xcc2f50[0x2],-_0xcc2f50[0x3],-_0xcc2f50[0x4],-_0xcc2f50[0x5],-_0xcc2f50[0x6],-_0xcc2f50[0x7],-_0xcc2f50[0x8],-_0xcc2f50[0x9],-_0xcc2f50[0xa],_0xcc2f50[0xb],_0xcc2f50[0xc],_0xcc2f50[0xd],_0xcc2f50[0xe],_0xcc2f50[0xf]];}static['applyMotor'](_0x14ca9f,_0x45e734){const _0x56d3f1=_0x11b7ee;return PGA3D[_0x56d3f1(0x2ce)](_0x45e734,PGA3D[_0x56d3f1(0x2ce)](_0x14ca9f,PGA3D[_0x56d3f1(0x2b7)](_0x45e734)));}static['motorNorm'](_0x958c75){const _0x4f8ca6=_0x11b7ee;return Math[_0x4f8ca6(0x1fa)](_0x958c75['map'](_0x51c7ba=>_0x51c7ba*_0x51c7ba)['reduce']((_0x2b388e,_0x5ead98)=>_0x2b388e+_0x5ead98,0x0));}static[_0x11b7ee(0x224)](_0x1c75df,_0x2418ab,_0x2f608b){return[0x1,0x0,0x0,0x0,-_0x1c75df/0x2,-_0x2418ab/0x2,-_0x2f608b/0x2,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x11b7ee(0x257)](_0x4a8717){return[0x1,0x0,0x0,0x0,_0x4a8717[0x4],_0x4a8717[0x5],_0x4a8717[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x11b7ee(0x23f)](_0x5d6e87,_0x4b977d=0x1,_0x1e697b=0x0,_0x61fe79=0x0,_0x4f2c58=0x0,_0x47b5b0=0x0,_0x2a40f2=0x0){const _0x5506d6=_0x11b7ee;let _0x1ced78=Math[_0x5506d6(0x283)](_0x5d6e87/0x2),_0x293bf8=Math[_0x5506d6(0x2c1)](_0x5d6e87/0x2),_0x18bdd2=PGA3D[_0x5506d6(0x297)](_0x4f2c58,_0x47b5b0,_0x2a40f2,_0x4b977d,_0x1e697b,_0x61fe79);return[_0x1ced78,_0x293bf8*_0x18bdd2[0x1],_0x293bf8*_0x18bdd2[0x2],_0x293bf8*_0x18bdd2[0x3],_0x293bf8*_0x18bdd2[0x4],_0x293bf8*_0x18bdd2[0x5],_0x293bf8*_0x18bdd2[0x6],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['extractRotor'](_0x262b6b){return[_0x262b6b[0x0],_0x262b6b[0x1],_0x262b6b[0x2],_0x262b6b[0x3],0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static['createDir'](_0x307e53,_0xc37134,_0xf38e65){return[0x0,_0xf38e65,-_0xc37134,_0x307e53,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x11b7ee(0x297)](_0x9320e,_0xe733b5,_0x24b607,_0x27de85,_0x482408,_0x2e16e9){const _0x2c825a=_0x11b7ee;let _0x52c5c2=PGA3D[_0x2c825a(0x2ac)](_0x27de85,_0x482408,_0x2e16e9),_0x507bc2=PGA3D['normalizeMotor'](_0x52c5c2);return[0x0,_0x507bc2[0x1],_0x507bc2[0x2],_0x507bc2[0x3],-(-_0x507bc2[0x2]*_0x24b607-_0x507bc2[0x1]*_0xe733b5),-(_0x507bc2[0x1]*_0x9320e-_0x507bc2[0x3]*_0x24b607),-(_0x507bc2[0x3]*_0xe733b5+_0x507bc2[0x2]*_0x9320e),0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];}static[_0x11b7ee(0x228)](_0x3898d5,_0x471c57,_0xa7efd0){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x1,-_0xa7efd0,_0x471c57,-_0x3898d5,0x0,0x0,0x0,0x0,0x0];}static[_0x11b7ee(0x1fd)](_0x52b7c0){return[-_0x52b7c0[0xa]/_0x52b7c0[0x7],_0x52b7c0[0x9]/_0x52b7c0[0x7],-_0x52b7c0[0x8]/_0x52b7c0[0x7]];}static[_0x11b7ee(0x1fe)](_0xc1f9ec,_0x25b5e5,_0x5651d2,_0x501676){return[0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,_0xc1f9ec,_0x25b5e5,_0x5651d2,-_0x501676,0x0];}static['createPlaneFromPoints'](_0x353743,_0x47ed7b,_0xcbee49){let _0x1b4631=_0x47ed7b[0x1]*_0xcbee49[0x2]-_0xcbee49[0x1]*_0x47ed7b[0x2]-(_0x353743[0x1]*_0xcbee49[0x2]-_0xcbee49[0x1]*_0x353743[0x2])+(_0x353743[0x1]*_0x47ed7b[0x2]-_0x47ed7b[0x1]*_0x353743[0x2]),_0x58a06f=_0x47ed7b[0x0]*_0xcbee49[0x2]-_0xcbee49[0x0]*_0x47ed7b[0x2]-(_0x353743[0x0]*_0xcbee49[0x2]-_0xcbee49[0x0]*_0x353743[0x2])+(_0x353743[0x0]*_0x47ed7b[0x2]-_0x47ed7b[0x0]*_0x353743[0x2]),_0x343938=_0x47ed7b[0x0]*_0xcbee49[0x1]-_0xcbee49[0x0]*_0x47ed7b[0x1]-(_0x353743[0x0]*_0xcbee49[0x1]-_0xcbee49[0x0]*_0x353743[0x1])+(_0x353743[0x0]*_0x47ed7b[0x1]-_0x47ed7b[0x0]*_0x353743[0x1]),_0xb52d74=_0x353743[0x0]*(_0x47ed7b[0x1]*_0xcbee49[0x2]-_0xcbee49[0x1]*_0x47ed7b[0x2])-_0x47ed7b[0x0]*(_0x353743[0x1]*_0xcbee49[0x2]-_0xcbee49[0x1]*_0x353743[0x2])+_0xcbee49[0x0]*(_0x353743[0x1]*_0x47ed7b[0x2]-_0x47ed7b[0x1]*_0x353743[0x2]);return PGA3D['createPlane'](_0x1b4631,-_0x58a06f,_0x343938,_0xb52d74);}static[_0x11b7ee(0x2dc)](_0x3a72be,_0x4bcd0c){const _0x3bc144=_0x11b7ee;let _0x2804dc=PGA3D[_0x3bc144(0x2ce)](_0x3a72be,_0x4bcd0c),_0x2e1d08=Math['abs'](_0x2804dc[0x7])<=1e-8,_0x4e7c94=_0x2e1d08&&Math[_0x3bc144(0x27c)](_0x2804dc[0x8])<=1e-8&&Math['abs'](_0x2804dc[0x9])<=1e-8&&Math[_0x3bc144(0x27c)](_0x2804dc[0xa])<=1e-8;return[PGA3D[_0x3bc144(0x1fd)](_0x2804dc),!_0x2e1d08,_0x4e7c94];}static[_0x11b7ee(0x20b)](_0x2526ff){const _0x18143a=_0x11b7ee;let _0x4b12ae=PGA3D[_0x18143a(0x27a)](_0x2526ff);if(_0x4b12ae==0x0)return[0x1,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0,0x0];return _0x2526ff[_0x18143a(0x250)](_0x3ffdbf=>_0x3ffdbf/_0x4b12ae);}static[_0x11b7ee(0x24c)](_0x2fa73d,_0x427b5e){const _0x58db8b=_0x11b7ee;let _0x1a3335=PGA3D[_0x58db8b(0x26d)](PGA3D[_0x58db8b(0x228)](_0x2fa73d[0x0],_0x2fa73d[0x1],_0x2fa73d[0x2]),_0x427b5e);return PGA3D[_0x58db8b(0x1fd)](_0x1a3335);}static['applyMotorToDir'](_0x6ef3df,_0x3c11c6){const _0x36349e=_0x11b7ee;let _0x33abc9=PGA3D[_0x36349e(0x248)](_0x3c11c6),_0x2372c6=PGA3D[_0x36349e(0x26d)](PGA3D[_0x36349e(0x228)](_0x6ef3df[0x0],_0x6ef3df[0x1],_0x6ef3df[0x2]),_0x33abc9);return PGA3D['extractPoint'](_0x2372c6);}static[_0x11b7ee(0x2a2)](_0x314225,_0x93e8cd,_0x4b90f3,_0x5cf0d4){const _0x3617b1=_0x11b7ee;let _0x39d3f7=PGA3D[_0x3617b1(0x228)](_0x314225[0x0],_0x314225[0x1],_0x314225[0x2]),_0x463fb=PGA3D['createPoint'](_0x93e8cd[0x0],_0x93e8cd[0x1],_0x93e8cd[0x2]),_0x48e04f=PGA3D[_0x3617b1(0x228)](_0x4b90f3[0x0],_0x4b90f3[0x1],_0x4b90f3[0x2]),_0x26b1ca=PGA3D[_0x3617b1(0x228)](_0x5cf0d4[0x0],_0x5cf0d4[0x1],_0x5cf0d4[0x2]),_0x2044df=PGA3D[_0x3617b1(0x1e3)](_0x314225,_0x93e8cd,_0x4b90f3),_0x3349ee=PGA3D['createPlaneFromPoints'](_0x5cf0d4,_0x93e8cd,_0x4b90f3),_0x281e09=PGA3D[_0x3617b1(0x1e3)](_0x314225,_0x5cf0d4,_0x4b90f3),_0x384286=PGA3D[_0x3617b1(0x1e3)](_0x314225,_0x93e8cd,_0x5cf0d4),_0x565754=_0x2044df[0xb]*_0x2044df[0xb]+_0x2044df[0xc]*_0x2044df[0xc]+_0x2044df[0xd]*_0x2044df[0xd]+_0x2044df[0xe]*_0x2044df[0xe],_0x6b003a=_0x2044df[0xb]*_0x3349ee[0xb]+_0x2044df[0xc]*_0x3349ee[0xc]+_0x2044df[0xd]*_0x3349ee[0xd]+_0x2044df[0xe]*_0x3349ee[0xe],_0x2796cd=_0x2044df[0xb]*_0x281e09[0xb]+_0x2044df[0xc]*_0x281e09[0xc]+_0x2044df[0xd]*_0x281e09[0xd]+_0x2044df[0xe]*_0x281e09[0xe],_0x14eb20=_0x2044df[0xb]*_0x384286[0xb]+_0x2044df[0xc]*_0x384286[0xc]+_0x2044df[0xd]*_0x384286[0xd]+_0x2044df[0xe]*_0x384286[0xe],_0x5b1a87=_0x6b003a/_0x565754,_0x10897d=_0x2796cd/_0x565754,_0x2b55e1=_0x14eb20/_0x565754;return _0x5b1a87>=0x0&&_0x5b1a87<=0x1&&_0x10897d>=0x0&&_0x10897d<=0x1&&_0x2b55e1>=0x0&&_0x2b55e1<=0x1;}}class Camera{constructor(_0x260e27,_0x3a6411){const _0x50b119=_0x11b7ee;this[_0x50b119(0x2d7)]=new Float32Array(Array(0x10)[_0x50b119(0x2e2)](0x0)),this['_pose'][0x0]=0x1,this['_focal']=new Float32Array(Array(0x2)['fill'](0x1)),this['_resolutions']=new Float32Array([_0x260e27,_0x3a6411]),this[_0x50b119(0x281)]=![];}[_0x11b7ee(0x2a0)](){const _0x5ae253=_0x11b7ee;this['_pose'][0x0]=0x1;for(let _0x4d3b83=0x1;_0x4d3b83<0x10;++_0x4d3b83)this[_0x5ae253(0x2d7)][_0x4d3b83]=0x0;this[_0x5ae253(0x282)][0x0]=0x1,this[_0x5ae253(0x282)][0x1]=0x1;}[_0x11b7ee(0x267)](_0xd93bd9){const _0xb8dc20=_0x11b7ee;for(let _0x2865fa=0x0;_0x2865fa<0x10;++_0x2865fa)this[_0xb8dc20(0x2d7)][_0x2865fa]=_0xd93bd9[_0x2865fa];}['updateSize'](_0x3adaed,_0x3192b6){const _0x5a76a0=_0x11b7ee;this[_0x5a76a0(0x2ba)][0x0]=_0x3adaed,this['_resolutions'][0x1]=_0x3192b6;}['moveX'](_0x383048){const _0x3c1e18=_0x11b7ee;let _0x22c7a5=PGA3D[_0x3c1e18(0x2af)]([0x1,0x0,0x0],this[_0x3c1e18(0x2d7)]),_0xee82eb=PGA3D[_0x3c1e18(0x224)](_0x383048*_0x22c7a5[0x0],_0x383048*_0x22c7a5[0x1],_0x383048*_0x22c7a5[0x2]),_0xa1a4e2=PGA3D[_0x3c1e18(0x20b)](PGA3D[_0x3c1e18(0x2ce)](_0xee82eb,this[_0x3c1e18(0x2d7)]));this[_0x3c1e18(0x267)](_0xa1a4e2);}[_0x11b7ee(0x27e)](_0x4372c3){const _0x4de33f=_0x11b7ee;let _0xd9415b=PGA3D[_0x4de33f(0x2af)]([0x0,0x1,0x0],this[_0x4de33f(0x2d7)]),_0x2968fb=PGA3D[_0x4de33f(0x224)](_0x4372c3*_0xd9415b[0x0],_0x4372c3*_0xd9415b[0x1],_0x4372c3*_0xd9415b[0x2]),_0x4fe8f2=PGA3D['normalizeMotor'](PGA3D[_0x4de33f(0x2ce)](_0x2968fb,this[_0x4de33f(0x2d7)]));this['updatePose'](_0x4fe8f2);}['moveZ'](_0x5eb8a3){const _0x2486fe=_0x11b7ee;let _0x22f168=PGA3D[_0x2486fe(0x2af)]([0x0,0x0,0x1],this['_pose']),_0x147e2e=PGA3D[_0x2486fe(0x224)](_0x5eb8a3*_0x22f168[0x0],_0x5eb8a3*_0x22f168[0x1],_0x5eb8a3*_0x22f168[0x2]),_0x40ca6b=PGA3D[_0x2486fe(0x20b)](PGA3D[_0x2486fe(0x2ce)](_0x147e2e,this[_0x2486fe(0x2d7)]));this[_0x2486fe(0x267)](_0x40ca6b);}[_0x11b7ee(0x27d)](_0xdb6d59){const _0xde04cd=_0x11b7ee;let _0x1f6f62=PGA3D[_0xde04cd(0x24c)]([0x0,0x0,0x0],this['_pose']),_0x50fa15=PGA3D[_0xde04cd(0x2af)]([0x1,0x0,0x0],this[_0xde04cd(0x2d7)]),_0x54e305=PGA3D[_0xde04cd(0x23f)](_0xdb6d59,_0x50fa15[0x0],_0x50fa15[0x1],_0x50fa15[0x2],_0x1f6f62[0x0],_0x1f6f62[0x1],_0x1f6f62[0x2]),_0x2ee1c7=PGA3D['normalizeMotor'](PGA3D[_0xde04cd(0x2ce)](_0x54e305,this[_0xde04cd(0x2d7)]));this[_0xde04cd(0x267)](_0x2ee1c7);}[_0x11b7ee(0x21f)](_0x515291){const _0x4a3ece=_0x11b7ee;let _0x5515e4=PGA3D[_0x4a3ece(0x24c)]([0x0,0x0,0x0],this['_pose']),_0x1c424d=PGA3D['applyMotorToDir']([0x0,0x1,0x0],this[_0x4a3ece(0x2d7)]),_0x10700b=PGA3D[_0x4a3ece(0x23f)](_0x515291,_0x1c424d[0x0],_0x1c424d[0x1],_0x1c424d[0x2],_0x5515e4[0x0],_0x5515e4[0x1],_0x5515e4[0x2]),_0x4ac7ed=PGA3D[_0x4a3ece(0x20b)](PGA3D[_0x4a3ece(0x2ce)](_0x10700b,this['_pose']));this[_0x4a3ece(0x267)](_0x4ac7ed);}[_0x11b7ee(0x1f6)](_0x11cfa2){const _0x2cf4a5=_0x11b7ee;let _0x460792=PGA3D['applyMotorToPoint']([0x0,0x0,0x0],this['_pose']),_0x448da2=PGA3D['applyMotorToDir']([0x0,0x0,0x1],this[_0x2cf4a5(0x2d7)]),_0x3c0084=PGA3D['createRotor'](_0x11cfa2,_0x448da2[0x0],_0x448da2[0x1],_0x448da2[0x2],_0x460792[0x0],_0x460792[0x1],_0x460792[0x2]),_0x2d52f9=PGA3D[_0x2cf4a5(0x20b)](PGA3D[_0x2cf4a5(0x2ce)](_0x3c0084,this[_0x2cf4a5(0x2d7)]));this['updatePose'](_0x2d52f9);}}async function init(){const _0x352f7b=_0x11b7ee,_0x5d9200=document[_0x352f7b(0x27f)](_0x352f7b(0x28b));_0x5d9200['id']='renderCanvas',document[_0x352f7b(0x2d6)][_0x352f7b(0x2ad)](_0x5d9200);const _0x149b40=new RayTracer(_0x5d9200);await _0x149b40['init']();var _0x58ee73=new Camera(),_0x4a27a0=new RayTracingDemoSceneObject(_0x149b40[_0x352f7b(0x2b5)],_0x149b40[_0x352f7b(0x229)],_0x58ee73);await _0x149b40['setTracerObject'](_0x4a27a0),_0x4a27a0['_box'][_0x352f7b(0x2d7)][0x6]=-0.4,_0x4a27a0[_0x352f7b(0x2c0)](),_0x4a27a0[_0x352f7b(0x262)][_0x352f7b(0x235)][0x0]=0x2,_0x4a27a0[_0x352f7b(0x262)][_0x352f7b(0x235)][0x1]=1.25,_0x4a27a0[_0x352f7b(0x262)][_0x352f7b(0x235)][0x2]=0x2,_0x4a27a0[_0x352f7b(0x2c7)](),_0x4a27a0[_0x352f7b(0x2bd)][_0x352f7b(0x235)][0x0]=0.3,_0x4a27a0[_0x352f7b(0x2bd)][_0x352f7b(0x235)][0x1]=0.5,_0x4a27a0['_cube'][_0x352f7b(0x235)][0x2]=0.3,_0x4a27a0[_0x352f7b(0x231)](),_0x4a27a0[_0x352f7b(0x2bd)][_0x352f7b(0x2d7)][0x4]=0.15,_0x4a27a0[_0x352f7b(0x2bd)][_0x352f7b(0x2d7)][0x5]=-(0.5*_0x4a27a0['_box'][_0x352f7b(0x235)][0x1]/0x2)+0.5*_0x4a27a0[_0x352f7b(0x2bd)]['_scales'][0x1]/0x2,_0x4a27a0[_0x352f7b(0x2bd)]['_pose'][0x6]=-0.5,_0x4a27a0[_0x352f7b(0x2c4)](),_0x4a27a0[_0x352f7b(0x237)][_0x352f7b(0x235)][0x0]=0.35,_0x4a27a0[_0x352f7b(0x237)][_0x352f7b(0x235)][0x1]=0.35,_0x4a27a0[_0x352f7b(0x237)][_0x352f7b(0x235)][0x2]=0.35,_0x4a27a0['updateSphereScales'](),_0x4a27a0['_sphere'][_0x352f7b(0x2d7)][0x4]=-0.15,_0x4a27a0[_0x352f7b(0x237)][_0x352f7b(0x2d7)][0x5]=-(0.5*_0x4a27a0['_box'][_0x352f7b(0x235)][0x1]/0x2)+0.5*_0x4a27a0[_0x352f7b(0x237)][_0x352f7b(0x235)][0x1]/0x2,_0x4a27a0['_sphere'][_0x352f7b(0x2d7)][0x6]=-0.5,_0x4a27a0[_0x352f7b(0x218)]();var _0x4a18f8='WASDQE:\x20Move\x20Camera\x0aIJKLUO:\x20Rotate\x20Camera\x0ac/C:\x20Change\x20Camera\x0ar/R:\x20Reset\x20Camera\x0a[]:\x20Change\x20Camera\x20x\x20Focal\x0a{}:\x20Change\x20Camera\x20y\x20Focal\x0af/F:\x20Show/Hide\x20FPS\x0ah/H:\x20Show/Hide\x20Helper';_0x58ee73[_0x352f7b(0x281)]=!![];var _0x31574c=new StandardTextObject(_0x4a18f8);let _0x37da63='??';var _0x1b2443=new StandardTextObject(_0x352f7b(0x219)+_0x37da63),_0x5899ee=0.05;window[_0x352f7b(0x28f)](_0x352f7b(0x277),async _0x128eb3=>{const _0x504dcf=_0x352f7b;switch(_0x128eb3[_0x504dcf(0x260)]){case'h':case'H':_0x31574c[_0x504dcf(0x29d)]();break;case'f':case'F':_0x1b2443[_0x504dcf(0x29d)]();break;case'w':case'W':_0x58ee73[_0x504dcf(0x27e)](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case's':case'S':_0x58ee73[_0x504dcf(0x27e)](_0x5899ee),_0x4a27a0['updateCameraPose']();break;case'a':case'A':_0x58ee73['moveX'](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'd':case'D':_0x58ee73[_0x504dcf(0x299)](_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'q':case'Q':_0x58ee73[_0x504dcf(0x2c9)](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'e':case'E':_0x58ee73['moveZ'](_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'i':case'I':_0x58ee73[_0x504dcf(0x27d)](_0x5899ee),_0x4a27a0['updateCameraPose']();break;case'k':case'K':_0x58ee73[_0x504dcf(0x27d)](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'j':case'J':_0x58ee73[_0x504dcf(0x21f)](_0x5899ee),_0x4a27a0['updateCameraPose']();break;case'l':case'L':_0x58ee73[_0x504dcf(0x21f)](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'u':case'U':_0x58ee73[_0x504dcf(0x1f6)](_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'o':case'O':_0x58ee73[_0x504dcf(0x1f6)](-_0x5899ee),_0x4a27a0[_0x504dcf(0x1f2)]();break;case'c':case'C':_0x58ee73[_0x504dcf(0x281)]=!_0x58ee73['_isProjective'];break;case'r':case'R':_0x58ee73[_0x504dcf(0x2a0)](),_0x4a27a0[_0x504dcf(0x1f2)](),_0x4a27a0[_0x504dcf(0x233)]();break;case'[':_0x58ee73[_0x504dcf(0x282)][0x0]*=1.1,_0x4a27a0[_0x504dcf(0x233)]();break;case']':_0x58ee73['_focal'][0x0]/=1.1,_0x4a27a0[_0x504dcf(0x233)]();break;case'{':_0x58ee73[_0x504dcf(0x282)][0x1]*=1.1,_0x4a27a0[_0x504dcf(0x233)]();break;case'}':_0x58ee73['_focal'][0x1]/=1.1,_0x4a27a0[_0x504dcf(0x233)]();break;}}),window[_0x352f7b(0x28f)]('keyup',_0x39a83f=>{});let _0x52ab18=async _0x203deb=>{},_0xe7182a=async _0xcdc7c0=>{},_0x11d165=_0x2f8809=>{};_0x5d9200[_0x352f7b(0x28f)](_0x352f7b(0x28a),_0x52ab18),_0x5d9200[_0x352f7b(0x28f)](_0x352f7b(0x2d4),_0xe7182a),_0x5d9200['addEventListener'](_0x352f7b(0x287),_0x11d165),_0x5d9200['addEventListener'](_0x352f7b(0x21d),_0x28882e=>{}),_0x5d9200['addEventListener'](_0x352f7b(0x1e8),_0x4dfd65=>{}),_0x5d9200[_0x352f7b(0x28f)](_0x352f7b(0x2a4),_0x52ab18),_0x5d9200[_0x352f7b(0x28f)](_0x352f7b(0x26b),_0xe7182a),_0x5d9200[_0x352f7b(0x28f)](_0x352f7b(0x25e),_0x11d165),_0x31574c[_0x352f7b(0x2d5)]['style'][_0x352f7b(0x2c8)](_0x352f7b(0x2ae),_0x352f7b(0x2e3)),_0x1b2443[_0x352f7b(0x2d5)][_0x352f7b(0x2db)]['setProperty'](_0x352f7b(0x2ae),_0x352f7b(0x2e3));var _0x1c47ed=0x0,_0x5b1344=0x3c,_0x25a602=0x1/_0x5b1344,_0x3f75a1=_0x25a602*0x3e8,_0xaf9b6d;let _0x1124f0=()=>{const _0x2b335a=_0x352f7b;let _0x3a0a23=Date[_0x2b335a(0x2de)]()-_0xaf9b6d;_0x3a0a23>_0x3f75a1&&(++_0x1c47ed,_0xaf9b6d=Date['now']()-_0x3a0a23%_0x3f75a1,_0x149b40[_0x2b335a(0x1e6)]()),requestAnimationFrame(_0x1124f0);};return _0xaf9b6d=Date[_0x352f7b(0x2de)](),_0x1124f0(),_0x1b2443[_0x352f7b(0x2d5)]['style']['setProperty'](_0x352f7b(0x284),_0x352f7b(0x2a3)),_0x1b2443[_0x352f7b(0x2d5)][_0x352f7b(0x2db)][_0x352f7b(0x209)]=_0x352f7b(0x23a),setInterval(()=>{const _0x30428b=_0x352f7b;_0x37da63=_0x1c47ed,_0x1c47ed=0x0,_0x1b2443[_0x30428b(0x1ff)](_0x30428b(0x219)+_0x37da63);},0x3e8),_0x149b40;}init()['then'](_0x43e707=>{const _0x2e44a9=_0x11b7ee;console[_0x2e44a9(0x22e)](_0x43e707);})[_0x11b7ee(0x20f)](_0x3470ca=>{const _0x4982dc=_0x11b7ee,_0x59183f=document[_0x4982dc(0x27f)]('p');_0x59183f[_0x4982dc(0x245)]=navigator[_0x4982dc(0x2cb)]+_0x4982dc(0x213)+_0x3470ca['message'],document['body'][_0x4982dc(0x2ad)](_0x59183f),document[_0x4982dc(0x1e7)](_0x4982dc(0x292))[_0x4982dc(0x2d2)]();});